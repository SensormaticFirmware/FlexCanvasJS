var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}},"es6-impl","es3");
function Tween(){this.duration=this.endVal=this.startVal=0;this.easingFunction=this.startTime=null}Tween.prototype.constructor=Tween;Tween.prototype.getProgress=function(a){return a>=this.startTime+this.duration?1:a<=this.startTime?0:(a-this.startTime)/this.duration};
Tween.prototype.getValue=function(a){a=this.getProgress(a);if(1==a)return this.endVal;if(0==a)return this.startVal;null!=this.easingFunction&&(a=this.easingFunction(a));var b=Math.abs(this.endVal-this.startVal);return this.startVal<this.endVal?this.startVal+b*a:this.startVal-b*a};Tween.easeInQuad=function(a){return a*a};Tween.easeOutQuad=function(a){return 1-Tween.easeInQuad(1-a)};Tween.easeInOutQuad=function(a){return.5>a?Tween.easeInQuad(2*a)/2:1-Tween.easeInQuad(2*(1-a))/2};
Tween.easeInCubic=function(a){return Math.pow(a,3)};Tween.easeOutCubic=function(a){return 1-Tween.easeInCubic(1-a)};Tween.easeInOutCubic=function(a){return.5>a?Tween.easeInCubic(2*a)/2:1-Tween.easeInCubic(2*(1-a))/2};Tween.easeOutSine=function(a){return Math.sin(Math.PI/2*a)};Tween.easeInSine=function(a){return 1-Tween.easeOutSine(1-a)};Tween.easeInOutSine=function(a){return.5>a?Tween.easeInSine(2*a)/2:1-Tween.easeInSine(2*(1-a))/2};function StyleProxy(a,b){this._proxyElement=a;this._proxyMap=b}
StyleProxy.prototype.constructor=StyleProxy;function DispatcherEvent(a){this._type=a;this._target=null;this._canceled=!1}DispatcherEvent.prototype.constructor=DispatcherEvent;DispatcherEvent.prototype.getType=function(){return this._type};DispatcherEvent.prototype.getTarget=function(){return this._target};DispatcherEvent.prototype.cancelEvent=function(){this._canceled=!0};DispatcherEvent.prototype.getIsCanceled=function(){return this._canceled};
DispatcherEvent.prototype.clone=function(){var a=this._cloneInstance();a._target=this._target;a._canceled=this._canceled;return a};DispatcherEvent.prototype._cloneInstance=function(){return new DispatcherEvent(this._type)};function StyleChangedEvent(a){StyleChangedEvent.base.prototype.constructor.call(this,"stylechanged");this._styleName=a}StyleChangedEvent.prototype=Object.create(DispatcherEvent.prototype);StyleChangedEvent.prototype.constructor=StyleChangedEvent;StyleChangedEvent.base=DispatcherEvent;
StyleChangedEvent.prototype.getStyleName=function(){return this._styleName};StyleChangedEvent.prototype.clone=function(){return StyleChangedEvent.base.prototype.clone.call(this)};StyleChangedEvent.prototype._cloneInstance=function(){return new StyleChangedEvent(this._styleName,this._oldValue,this._newValue)};function ElementEvent(a,b){ElementEvent.base.prototype.constructor.call(this,a);this._currentTarget=null;this._bubbles=b;this._phase=null;this._defaultPrevented=!1}ElementEvent.prototype=Object.create(DispatcherEvent.prototype);
ElementEvent.prototype.constructor=ElementEvent;ElementEvent.base=DispatcherEvent;ElementEvent.prototype.getCurrentTarget=function(){return this._currentTarget};ElementEvent.prototype.getPhase=function(){return this._phase};ElementEvent.prototype.preventDefault=function(){this._defaultPrevented=!0};ElementEvent.prototype.getDefaultPrevented=function(){return this._defaultPrevented};
ElementEvent.prototype.clone=function(){var a=ElementEvent.base.prototype.clone.call(this);a._currentTarget=this._currentTarget;a._phase=this._phase;a._defaultPrevented=this._defaultPrevented;a._bubbles=this._bubbles;return a};ElementEvent.prototype._cloneInstance=function(){return new ElementEvent(this._type,this._bubbles)};function ElementMouseEvent(a,b,c){ElementMouseEvent.base.prototype.constructor.call(this,a,!0);this._x=b;this._y=c}ElementMouseEvent.prototype=Object.create(ElementEvent.prototype);
ElementMouseEvent.prototype.constructor=ElementMouseEvent;ElementMouseEvent.base=ElementEvent;ElementMouseEvent.prototype.getX=function(){return this._x};ElementMouseEvent.prototype.getY=function(){return this._y};ElementMouseEvent.prototype.clone=function(){return ElementMouseEvent.base.prototype.clone.call(this)};ElementMouseEvent.prototype._cloneInstance=function(){return new ElementMouseEvent(this._type,this._x,this._y)};
function ElementMouseWheelEvent(a,b,c,d){ElementMouseWheelEvent.base.prototype.constructor.call(this,"wheel",a,b);this._deltaX=c;this._deltaY=d}ElementMouseWheelEvent.prototype=Object.create(ElementMouseEvent.prototype);ElementMouseWheelEvent.prototype.constructor=ElementMouseWheelEvent;ElementMouseWheelEvent.base=ElementMouseEvent;ElementMouseWheelEvent.prototype.getDeltaX=function(){return this._deltaX};ElementMouseWheelEvent.prototype.getDeltaY=function(){return this._deltaY};
ElementMouseWheelEvent.prototype.clone=function(){return ElementMouseWheelEvent.base.prototype.clone.call(this)};ElementMouseWheelEvent.prototype._cloneInstance=function(){return new ElementMouseWheelEvent(this._x,this._y,this._deltaX,this._deltaY)};function ElementListItemClickEvent(a,b){ElementListItemClickEvent.base.prototype.constructor.call(this,"listitemclick",!1);this._item=a;this._index=b}ElementListItemClickEvent.prototype=Object.create(ElementEvent.prototype);
ElementListItemClickEvent.prototype.constructor=ElementListItemClickEvent;ElementListItemClickEvent.base=ElementEvent;ElementListItemClickEvent.prototype.getItem=function(){return this._item};ElementListItemClickEvent.prototype.getIndex=function(){return this._index};ElementListItemClickEvent.prototype.clone=function(){return ElementListItemClickEvent.base.prototype.clone.call(this)};ElementListItemClickEvent.prototype._cloneInstance=function(){return new ElementListItemClickEvent(this._item,this._index)};
function ElementKeyboardEvent(a,b,c,d,e,f,g){ElementKeyboardEvent.base.prototype.constructor.call(this,a,!0);"Spacebar"==b?b=" ":"Left"==b?b="ArrowLeft":"Right"==b?b="ArrowRight":"Del"==b&&(b="Delete");this._key=b;this._keyCode=c;this._ctrl=d;this._alt=e;this._shift=f;this._meta=g}ElementKeyboardEvent.prototype=Object.create(ElementEvent.prototype);ElementKeyboardEvent.prototype.constructor=ElementKeyboardEvent;ElementKeyboardEvent.base=ElementEvent;ElementKeyboardEvent.prototype.getKey=function(){return this._key};
ElementKeyboardEvent.prototype.getKeyCode=function(){return this._keyCode};ElementKeyboardEvent.prototype.getCtrl=function(){return this._ctrl};ElementKeyboardEvent.prototype.getAlt=function(){return this._alt};ElementKeyboardEvent.prototype.getShift=function(){return this._shift};ElementKeyboardEvent.prototype.getMeta=function(){return this._meta};ElementKeyboardEvent.prototype.clone=function(){return ElementKeyboardEvent.base.prototype.clone.call(this)};
ElementKeyboardEvent.prototype._cloneInstance=function(){return new ElementKeyboardEvent(this._type,this._key,this._keyCode,this._ctrl,this._alt,this._shift,this._meta)};function ElementGridItemClickEvent(a,b,c){ElementGridItemClickEvent.base.prototype.constructor.call(this,a,b);this._columnIndex=c}ElementGridItemClickEvent.prototype=Object.create(ElementListItemClickEvent.prototype);ElementGridItemClickEvent.prototype.constructor=ElementGridItemClickEvent;ElementGridItemClickEvent.base=ElementListItemClickEvent;
ElementGridItemClickEvent.prototype.getColumnIndex=function(){return this._columnIndex};ElementGridItemClickEvent.prototype.clone=function(){return ElementGridItemClickEvent.base.prototype.clone.call(this)};ElementGridItemClickEvent.prototype._cloneInstance=function(){return new ElementListItemClickEvent(this._item,this._index,this._columnIndex)};function CollectionChangedEvent(a,b){CollectionChangedEvent.base.prototype.constructor.call(this,"collectionchanged");this._kind=a;this._index=b}
CollectionChangedEvent.prototype=Object.create(DispatcherEvent.prototype);CollectionChangedEvent.prototype.constructor=CollectionChangedEvent;CollectionChangedEvent.base=DispatcherEvent;CollectionChangedEvent.prototype.getKind=function(){return this._kind};CollectionChangedEvent.prototype.getIndex=function(){return this._index};CollectionChangedEvent.prototype.clone=function(){return CollectionChangedEvent.base.prototype.clone.call(this)};
CollectionChangedEvent.prototype._cloneInstance=function(){return new CollectionChangedEvent(this._kind,this._index)};function AddedRemovedEvent(a,b){AddedRemovedEvent.base.prototype.constructor.call(this,a);this._manager=b}AddedRemovedEvent.prototype=Object.create(DispatcherEvent.prototype);AddedRemovedEvent.prototype.constructor=AddedRemovedEvent;AddedRemovedEvent.base=DispatcherEvent;AddedRemovedEvent.prototype.getManager=function(){return this._manager};AddedRemovedEvent.prototype.clone=function(){return AddedRemovedEvent.base.prototype.clone.call(this)};
AddedRemovedEvent.prototype._cloneInstance=function(){return new AddedRemovedEvent(this._type,this._manager)};function EventDispatcher(){this._eventListeners=Object.create(null)}EventDispatcher.prototype.constructor=EventDispatcher;EventDispatcher.prototype.addEventListener=function(a,b){null==this._eventListeners[a]&&(this._eventListeners[a]=[]);this._eventListeners[a].push(b)};
EventDispatcher.prototype.removeEventListener=function(a,b){if(!(a in this._eventListeners))return!1;for(var c=0;c<this._eventListeners[a].length;c++)if(this._eventListeners[a][c]==b)return this._eventListeners[a].splice(c,1),!0;return!1};EventDispatcher.prototype.hasEventListener=function(a,b){if(!(a in this._eventListeners))return!1;if(null==b)return 0<this._eventListeners[a].length?!0:!1;for(var c=0;c<this._eventListeners[a].length;c++)if(this._eventListeners[a][c]==b)return!0;return!1};
EventDispatcher.prototype._dispatchEvent=function(a){a._canceled=!1;if(a._type in this._eventListeners&&0<this._eventListeners[a._type].length)for(var b=this._eventListeners[a._type].slice(),c,d=0;d<b.length;d++)if(c=a.clone(),c._target=this,b[d](c),1==c._canceled){a._canceled=!0;break}};
function ToggleButtonGroup(){ToggleButtonGroup.base.prototype.constructor.call(this);this._selectedButton=null;this._toggleButtons=[];var a=this;this._toggleButtonChangedInstance=function(b){a._toggleButtonChanged(b)}}ToggleButtonGroup.prototype=Object.create(EventDispatcher.prototype);ToggleButtonGroup.prototype.constructor=ToggleButtonGroup;ToggleButtonGroup.base=EventDispatcher;
ToggleButtonGroup.prototype.addButton=function(a){if(null==a||0==a instanceof ToggleButtonElement||-1<this._toggleButtons.indexOf(a))return!1;this._toggleButtons.push(a);a.addEventListener("changed",this._toggleButtonChangedInstance);return!0};ToggleButtonGroup.prototype.removeButton=function(a){var b=this._toggleButtons.indexOf(a);if(-1==b)return!1;this._toggleButtons.splice(b,1);a.removeEventListener("changed",this._toggleButtonChangedInstance)};
ToggleButtonGroup.prototype.clearButtons=function(){for(var a=0;a<this._toggleButtons.length;a++)this._toggleButtons[a].removeEventListener("changed",this._toggleButtonChangedInstance);this._toggleButtons=[]};
ToggleButtonGroup.prototype.setSelectedButton=function(a){if(this._selectedButton=a)this._selectedButton.setSelected(!0);else if(null==a||-1<this._toggleButtons.indexOf(a)){this._selectedButton=a;null!=this._selectedButton&&this._selectedButton.setSelected(!0);for(var b=0;b<this._toggleButtons.length;b++)this._toggleButtons[b]!=a&&this._toggleButtons[b].setSelected(!1)}};ToggleButtonGroup.prototype.getSelectedButton=function(){return this._selectedButton};
ToggleButtonGroup.prototype._toggleButtonChanged=function(a){a=a.getTarget();1==a.getSelected()?this._selectedButton=a:this._selectedButton=null;for(var b=0;b<this._toggleButtons.length;b++)this._toggleButtons[b]!=a&&this._toggleButtons[b].setSelected(!1);1==this.hasEventListener("changed",null)&&this._dispatchEvent(new DispatcherEvent("changed",!1))};function StyleDefinition(){StyleDefinition.base.prototype.constructor.call(this);this._styleMap=Object.create(null)}StyleDefinition.prototype=Object.create(EventDispatcher.prototype);
StyleDefinition.prototype.constructor=StyleDefinition;StyleDefinition.base=EventDispatcher;StyleDefinition.prototype.getStyle=function(a){if(a in this._styleMap)return this._styleMap[a]};
StyleDefinition.prototype.setStyle=function(a,b){var c=void 0;a in this._styleMap&&(c=this._styleMap[a]);c!==b&&(1==this.hasEventListener("stylechanged",null)?(c=this.getStyle(a),void 0===b?delete this._styleMap[a]:this._styleMap[a]=b,this.getStyle(a)!==c&&this._dispatchEvent(new StyleChangedEvent(a))):void 0===b?delete this._styleMap[a]:this._styleMap[a]=b)};StyleDefinition.prototype.clearStyle=function(a){this.setStyle(a,void 0)};
function StyleData(a){this.styleName=a;this.value=void 0;this.priority=[]}StyleData.prototype.constructor=StyleData;StyleData.prototype.equals=function(a){if(a.styleName!=this.styleName||a.priority.length!=this.priority.length||a.value!==this.value)return!1;for(var b=0;b<this.priority.length;b++)if(a.priority[b]!=this.priority[b])return!1;return!0};
StyleData.prototype.comparePriority=function(a){for(var b=Math.min(this.priority.length,a.priority.length),c=0;c<b;c++){if(this.priority[c]<a.priority[c])return 1;if(this.priority[c]>a.priority[c])return-1}return 0};StyleData.prototype.clone=function(){var a=new StyleData(this.styleName);a.value=this.value;a.priority=this.priority.slice();return a};function StyleableBase(){StyleableBase.base.prototype.constructor.call(this)}StyleableBase.prototype=Object.create(StyleDefinition.prototype);
StyleableBase.prototype.constructor=StyleableBase;StyleableBase.base=StyleDefinition;StyleableBase.StylePriorities={INSTANCE:0,CLASS:1};StyleableBase.prototype.getStyle=function(a){return this.getStyleData(a).value};
StyleableBase.prototype.setStyle=function(a,b){var c=void 0;a in this._styleMap&&(c=this._styleMap[a]);if(c!==b)if(1==this.hasEventListener("stylechanged",null)){c=this.getStyleData(a);void 0===b?delete this._styleMap[a]:this._styleMap[a]=b;var d=this.getStyleData(a);1==c.equals(d)&&this._dispatchEvent(new StyleChagnedEvent(a))}else void 0===b?delete this._styleMap[a]:this._styleMap[a]=b};
StyleableBase.prototype.getStyleData=function(a){var b=new StyleData(a);b.value=StyleableBase.base.prototype.getStyle.call(this,a);if(void 0!==b.value)return b.priority.push(StyleableBase.StylePriorities.INSTANCE),b;b.value=this._getClassStyle(a);b.priority.push(StyleableBase.StylePriorities.CLASS);return b};
StyleableBase.prototype._getStyleType=function(a){var b=Object.getPrototypeOf(this);if(null==b||0==b.hasOwnProperty("constructor"))return null;for(var c=b.constructor;;){if("_StyleTypes"in c&&a in c._StyleTypes)return c._StyleTypes[a];b=Object.getPrototypeOf(b);if(null==b||0==b.hasOwnProperty("constructor"))return null;c=b.constructor}};StyleableBase.prototype._getDefaultStyle=function(a){return this._getDefaultStyleData(a).value};
StyleableBase.prototype._getDefaultStyleData=function(a){var b=new StyleData(a);b.value=this._getClassStyle(a);b.priority.push(StyleableBase.StylePriorities.CLASS);return b};
StyleableBase.prototype._getClassStyle=function(a){var b=void 0,c=Object.getPrototypeOf(this);if(null==c||0==c.hasOwnProperty("constructor"))return b;for(var d=c.constructor;;){if("StyleDefault"in d&&(b=d.StyleDefault.getStyle(a),void 0!==b))return b;c=Object.getPrototypeOf(c);if(null==c||0==c.hasOwnProperty("constructor"))return b;d=c.constructor}};function ShapeBase(){ShapeBase.base.prototype.constructor.call(this)}ShapeBase.prototype=Object.create(StyleableBase.prototype);
ShapeBase.prototype.constructor=ShapeBase;ShapeBase.base=StyleableBase;ShapeBase.prototype.drawShape=function(a,b){};function RoundedRectangleShape(){RoundedRectangleShape.base.prototype.constructor.call(this)}RoundedRectangleShape.prototype=Object.create(ShapeBase.prototype);RoundedRectangleShape.prototype.constructor=RoundedRectangleShape;RoundedRectangleShape.base=ShapeBase;RoundedRectangleShape._StyleTypes=Object.create(null);RoundedRectangleShape._StyleTypes.CornerRadius={inheritable:!1};
RoundedRectangleShape._StyleTypes.CornerRadiusTopLeft={inheritable:!1};RoundedRectangleShape._StyleTypes.CornerRadiusTopRight={inheritable:!1};RoundedRectangleShape._StyleTypes.CornerRadiusBottomLeft={inheritable:!1};RoundedRectangleShape._StyleTypes.CornerRadiusBottomRight={inheritable:!1};RoundedRectangleShape.StyleDefault=new StyleDefinition;RoundedRectangleShape.StyleDefault.setStyle("CornerRadius",0);RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusTopLeft",null);
RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusTopRight",null);RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusBottomLeft",null);RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusBottomRight",null);
RoundedRectangleShape.prototype.drawShape=function(a,b){var c=b.getX(),d=b.getY(),e=b.getWidth(),f=b.getHeight(),g=this.getStyle("CornerRadius"),k=this.getStyle("CornerRadiusTopLeft"),m=this.getStyle("CornerRadiusTopRight"),l=this.getStyle("CornerRadiusBottomLeft"),p=this.getStyle("CornerRadiusBottomRight");null==g&&(g=0);null==k&&(k=g);null==m&&(m=g);null==l&&(l=g);null==p&&(p=g);a.moveTo(c,d+k);0<k&&a.arcTo(c,d,c+k,d,k);a.lineTo(c+e-m,d);0<m&&a.arcTo(c+e,d,c+e,d+m,m);a.lineTo(c+e,d+f-p);0<p&&a.arcTo(c+
e,d+f,c+e-p,d+f,p);a.lineTo(c+l,d+f);0<l&&a.arcTo(c,d+f,c,d+f-l,l);a.closePath()};function EllipseShape(){EllipseShape.base.prototype.constructor.call(this)}EllipseShape.prototype=Object.create(ShapeBase.prototype);EllipseShape.prototype.constructor=EllipseShape;EllipseShape.base=ShapeBase;
EllipseShape.prototype.drawShape=function(a,b){var c=b.getWidth(),d=b.getHeight(),e=c/2*.551784,f=d/2*.551784,g=b.getX(),k=b.getY(),m=g+c/2,l=k+d/2,c=g+c,d=k+d;a.moveTo(g,l);a.bezierCurveTo(g,l-f,m-e,k,m,k);a.bezierCurveTo(m+e,k,c,l-f,c,l);a.bezierCurveTo(c,l+f,m+e,d,m,d);a.bezierCurveTo(m-e,d,g,l+f,g,l);a.closePath()};function ArrowShape(){ArrowShape.base.prototype.constructor.call(this)}ArrowShape.prototype=Object.create(ShapeBase.prototype);ArrowShape.prototype.constructor=ArrowShape;
ArrowShape.base=ShapeBase;ArrowShape._StyleTypes=Object.create(null);ArrowShape._StyleTypes.Direction={inheritable:!1};ArrowShape._StyleTypes.RectBaseWidth={inheritable:!1};ArrowShape._StyleTypes.RectBaseHeight={inheritable:!1};ArrowShape._StyleTypes.RectBasePercentWidth={inheritable:!1};ArrowShape._StyleTypes.RectBasePercentHeight={inheritable:!1};ArrowShape._StyleTypes.CornerRadius={inheritable:!1};ArrowShape._StyleTypes.CornerRadiusTopLeft={inheritable:!1};
ArrowShape._StyleTypes.CornerRadiusTopRight={inheritable:!1};ArrowShape._StyleTypes.CornerRadiusBottomLeft={inheritable:!1};ArrowShape._StyleTypes.CornerRadiusBottomRight={inheritable:!1};ArrowShape.StyleDefault=new StyleDefinition;ArrowShape.StyleDefault.setStyle("Direction","up");ArrowShape.StyleDefault.setStyle("RectBaseWidth",null);ArrowShape.StyleDefault.setStyle("RectBaseHeight",null);ArrowShape.StyleDefault.setStyle("RectBasePercentWidth",null);
ArrowShape.StyleDefault.setStyle("RectBasePercentHeight",null);ArrowShape.StyleDefault.setStyle("CornerRadius",0);ArrowShape.StyleDefault.setStyle("CornerRadiusTopLeft",null);ArrowShape.StyleDefault.setStyle("CornerRadiusTopRight",null);ArrowShape.StyleDefault.setStyle("CornerRadiusBottomLeft",null);ArrowShape.StyleDefault.setStyle("CornerRadiusBottomRight",null);
ArrowShape.prototype.drawShape=function(a,b){var c=this.getStyle("Direction");if("up"==c||"down"==c||"left"==c||"right"==c){var d=b.getX(),e=b.getY(),f=b.getWidth(),g=b.getHeight(),k=this.getStyle("CornerRadius"),m=this.getStyle("CornerRadiusTopLeft"),l=this.getStyle("CornerRadiusTopRight"),p=this.getStyle("CornerRadiusBottomLeft"),q=this.getStyle("CornerRadiusBottomRight");null==k&&(k=0);null==m&&(m=k);null==l&&(l=k);null==p&&(p=k);null==q&&(q=k);var k=this.getStyle("RectBaseWidth"),n=this.getStyle("RectBaseHeight");
null==k&&(k=this.getStyle("RectBasePercentWidth"),k=null==k?0:Math.round(k/100*w));null==n&&(n=this.getStyle("RectBasePercentHeight"),n=null==n?0:Math.round(n/100*h));if(0==k||0==n)n=k=0;"down"==c?(a.moveTo(d+(f-k)/2,e+m),0<m&&a.arcTo(d+(f-k)/2,e,d+(f-k)/2+m,e,m),a.lineTo(d+(f-k)/2+k-l,e),0<l&&a.arcTo(d+(f-k)/2+k,e,d+(f-k)/2+k,e+l,l),a.lineTo(d+(f-k)/2+k,e+n-q),0<q&&a.arcTo(d+(f-k)/2+k,e+n,Math.min(d+(f-k)/2+k+q,d+f),e+n,Math.min(q,(f-k)/2)),a.lineTo(d+f,e+n),a.lineTo(d+f/2,e+g),a.lineTo(d,e+n),a.lineTo(Math.max(d+
(f-k)/2-p,d),e+n),0<p&&a.arcTo(d+(f-k)/2,e+n,d+(f-k)/2,e+n-p,Math.min(p,(f-k)/2))):"left"==c?(a.moveTo(d+f-l,e+(g-n)/2),0<l&&a.arcTo(d+f,e+(g-n)/2,d+f,e+(g-n)/2+l,l),a.lineTo(d+f,e+(g-n)/2+n-q),0<q&&a.arcTo(d+f,e+(g-n)/2+n,d+f-q,e+(g-n)/2+n,q),a.lineTo(d+f-k+p,e+(g-n)/2+n),0<p&&a.arcTo(d+f-k,e+(g-n)/2+n,d+f-k,Math.min(e+(g-n)/2+n+p,e+g),Math.min(p,(g-n)/2)),a.lineTo(d+f-k,e+g),a.lineTo(d,e+g/2),a.lineTo(d+f-k,e),a.lineTo(d+f-k,Math.max(e,e+(g-n)/2-m)),0<m&&a.arcTo(d+f-k,e+(g-n)/2,d+f-k+m,e+(g-n)/
2,Math.min(m,(g-n)/2))):"up"==c?(a.moveTo(d+(f-k)/2+k,e+g-q),0<q&&a.arcTo(d+(f-k)/2+k,e+g,d+(f-k)/2+k-q,e+g,q),a.lineTo(d+(f-k)/2+p,e+g),0<p&&a.arcTo(d+(f-k)/2,e+g,d+(f-k)/2,e+g-p,p),a.lineTo(d+(f-k)/2,e+g-n+m),0<m&&a.arcTo(d+(f-k)/2,e+g-n,Math.max(d+(f-k)/2-m,d),e+g-n,Math.min(m,(f-k)/2)),a.lineTo(d,e+g-n),a.lineTo(d+f/2,e),a.lineTo(d+f,e+g-n),a.lineTo(Math.min(d+(f-k)/2+k+l,d+f),e+g-n),0<l&&a.arcTo(d+(f-k)/2+k,e+g-n,d+(f-k)/2+k,e+g-n+l,Math.min(l,(f-k)/2))):"right"==c&&(a.moveTo(d+p,e+(g-n)/2+n),
0<p&&a.arcTo(d,e+(g-n)/2+n,d,e+(g-n)/2+n-p,p),a.lineTo(d,e+(g-n)/2+m),0<m&&a.arcTo(d,e+(g-n)/2,d+m,e+(g-n)/2,m),a.lineTo(d+k-l,e+(g-n)/2),0<l&&a.arcTo(d+k,e+(g-n)/2,d+k,Math.max(e+(g-n)/2-l,e),Math.min(l,(g-n)/2)),a.lineTo(d+k,e),a.lineTo(d+f,e+g/2),a.lineTo(d+k,e+g),a.lineTo(d+k,Math.min(e+g,e+(g-n)/2+n+q)),0<q&&a.arcTo(d+k,e+(g-n)/2+n,d+k-q,e+(g-n)/2+n,Math.min(q,(g-n)/2)));a.closePath()}};
function ListCollection(a){ListCollection.base.prototype.constructor.call(this);this._backingArray=[];this._collectionSort=null;null!=a&&(this._backingArray=a)}ListCollection.prototype=Object.create(EventDispatcher.prototype);ListCollection.prototype.constructor=ListCollection;ListCollection.base=EventDispatcher;ListCollection.prototype.getLength=function(){return this._backingArray.length};
ListCollection.prototype.setSourceArray=function(a){this._backingArray=a;this._dispatchEvent(new CollectionChangedEvent("reset",-1))};ListCollection.prototype.getSourceArray=function(){return this._backingArray};ListCollection.prototype.setCollectionSort=function(a){if(this._collectionSort!=a){if(!(a instanceof CollectionSort))throw"Invalid CollectionSort";this._collectionSort=a}};ListCollection.prototype.getCollectionSort=function(){return this._collectionSort};
ListCollection.prototype.sort=function(){null!=this._backingArray&&(null==this._collectionSort?this._backingArray.sort():this._collectionSort.sort(this._backingArray),this._dispatchEvent(new CollectionChangedEvent("reset",-1)))};ListCollection.prototype.getItemIndex=function(a){return null==a?-1:this._backingArray.indexOf(a)};ListCollection.prototype.getItemAt=function(a){return 0>a||a>=this._backingArray.length?null:this._backingArray[a]};
ListCollection.prototype.addItem=function(a){return this.addItemAt(a,this._backingArray.length)};ListCollection.prototype.addItemAt=function(a,b){if(0>b||b>this._backingArray.length||null==a)return null;this._backingArray.splice(b,0,a);this._dispatchEvent(new CollectionChangedEvent("add",b));return a};ListCollection.prototype.removeItem=function(a){return this.removeItemAt(this._backingArray.indexOf(a))};
ListCollection.prototype.removeItemAt=function(a){if(0>a||a>=this._backingArray.length)return null;var b=this._backingArray.splice(a,1)[0];this._dispatchEvent(new CollectionChangedEvent("remove",a));return b};ListCollection.prototype.replaceItemAt=function(a,b){if(0>b||b>=this._backingArray.length)return null;var c=this._backingArray[b];this._backingArray[b]=a;this.indexUpdated(b);return c};
ListCollection.prototype.clear=function(){this._backingArray=[];this._dispatchEvent(new CollectionChangedEvent("reset",-1))};ListCollection.prototype.indexUpdated=function(a){this._dispatchEvent(new CollectionChangedEvent("update",a))};function DrawMetrics(){this._height=this._width=this._y=this._x=0}DrawMetrics.prototype.constructor=DrawMetrics;DrawMetrics.prototype.equals=function(a){return this._x==a._x&&this._y==a._y&&this._width==a._width&&this._height==a._height?!0:!1};
DrawMetrics.prototype.clone=function(){var a=new DrawMetrics;a._x=this._x;a._y=this._y;a._width=this._width;a._height=this._height;return a};DrawMetrics.prototype.copyFrom=function(a){this._x=a._x;this._y=a._y;this._width=a._width;this._height=a._height};
DrawMetrics.prototype.mergeExpand=function(a){a._x<this._x&&(this._width+=this._x-a._x,this._x=a._x);a._y<this._y&&(this._height+=this._y-a._y,this._y=a._y);a._x+a._width>this._x+this._width&&(this._width+=a._x+a._width-(this._x+this._width));a._y+a._height>this._y+this._height&&(this._height+=a._y+a._height-(this._y+this._height))};
DrawMetrics.prototype.mergeReduce=function(a){this._x<a._x&&(this._width-=a._x-this._x,this._x=a._x);this._y<a._y&&(this._height-=a._y-this._y,this._y=a._y);this._x+this._width>a._x+a._width&&(this._width-=this._x+this._width-(a._x+a._width));this._y+this._height>a._y+a._height&&(this._height-=this._y+this._height-(a._y+a._height))};
DrawMetrics.prototype.roundToPrecision=function(a){0==a?(this._x=Math.round(this._x),this._y=Math.round(this._y),this._width=Math.round(this._width),this._height=Math.round(this._height)):(a*=10,this._x*=a,this._x=Math.round(this._x),this._x/=a,this._y*=a,this._y=Math.round(this._y),this._y/=a,this._width*=a,this._width=Math.round(this._width),this._width/=a,this._height*=a,this._height=Math.round(this._height),this._height/=a)};
DrawMetrics.prototype.roundUp=function(){var a=this._x,b=this._x+this._width,c=this._y,d=this._y+this._height,a=Math.floor(a),b=Math.ceil(b),c=Math.floor(c),d=Math.ceil(d);this._x=a;this._y=c;this._width=b-a;this._height=d-c};DrawMetrics.prototype.getX=function(){return this._x};DrawMetrics.prototype.getY=function(){return this._y};DrawMetrics.prototype.getWidth=function(){return this._width};DrawMetrics.prototype.getHeight=function(){return this._height};
function DataListData(a,b){this._parentList=a;this._itemIndex=b}function DataGridItemData(a,b,c){this._parentGrid=a;this._itemIndex=b;this._columnIndex=c}function CursorDefinition(){CursorDefinition.base.prototype.constructor.call(this);this._cursorElement=null;this._addedCount=0}CursorDefinition.prototype=Object.create(StyleableBase.prototype);CursorDefinition.prototype.constructor=CursorDefinition;CursorDefinition.base=StyleableBase;CursorDefinition._StyleTypes=Object.create(null);
CursorDefinition._StyleTypes.CursorClass={inheritable:!1};CursorDefinition._StyleTypes.CursorStyle={inheritable:!1};CursorDefinition._StyleTypes.CursorOffsetX={inheritable:!1};CursorDefinition._StyleTypes.CursorOffsetY={inheritable:!1};CursorDefinition.StyleDefault=new StyleDefinition;CursorDefinition.StyleDefault.setStyle("CursorClass","default");CursorDefinition.StyleDefault.setStyle("CursorStyle",null);CursorDefinition.StyleDefault.setStyle("CursorOffsetX",0);
CursorDefinition.StyleDefault.setStyle("CursorOffsetY",0);function CollectionSort(a,b){this._comparatorFunction=a;this._isDecending=b;var c=this;this._collectionSortDecendingComparator=function(a,b){return c._comparatorFunction(b,a)}}CollectionSort.prototype.constructor=CollectionSort;CollectionSort.prototype.setComparatorFunction=function(a){this._comparatorFunction=a};CollectionSort.prototype.getComparatorFunction=function(){return this._comparatorFunction};
CollectionSort.prototype.sort=function(a){1==this._isDecending?a.sort(this._collectionSortDecendingComparator):a.sort(this._comparatorFunction)};CollectionSort.prototype.setIsDecending=function(a){this._isDecending=a};CollectionSort.prototype.getIsDecending=function(){return this._isDecending};
function CanvasElement(){CanvasElement.base.prototype.constructor.call(this);this._styleDefinitionDefault=this._styleProxy=null;this._styleDefinitions=[];this._manager=this._backgroundShape=null;this._displayDepth=0;this._captureListeners=Object.create(null);this._name=null;this._measuredHeight=this._measuredWidth=this._height=this._width=this._y=this._x=0;this._isFocused=this._mouseIsDown=this._mouseIsOver=!1;this._rotateCenterY=this._rotateCenterX=this._rotateDegrees=0;this._parent=null;this._children=
[];this._stylesInvalid=!0;this._stylesInvalidMap=Object.create(null);this._stylesValidateNode=new CmLinkedNode;this._stylesValidateNode.data=this;this._stylesCache=Object.create(null);this._measureInvalid=!0;this._measureValidateNode=new CmLinkedNode;this._measureValidateNode.data=this;this._layoutInvalid=!0;this._layoutValidateNode=new CmLinkedNode;this._layoutValidateNode.data=this;this._renderInvalid=!0;this._renderValidateNode=new CmLinkedNode;this._renderValidateNode.data=this;this._graphicsCtx=
this._graphicsCanvas=null;this._graphicsClear=!0;this._compositeMetrics=[];this._renderChanged=!0;this._compositeRenderInvalid=this._renderVisible=!1;this._compositeRenderValidateNode=new CmLinkedNode;this._compositeRenderValidateNode.data=this;this._compositeEffectChanged=!0;this._rollOverCursorInstance=this._transformDrawableMetrics=this._transformVisibleMetrics=this._compositeCanvasMetrics=this._compositeCanvas=this._compositeCtx=this._redrawRegionMetrics=this._compositeVisibleMetrics=null;this._renderFocusRing=
!1;var a=this;this._onExternalStyleChangedInstance=function(b){a._onExternalStyleChanged(b)};this._onBackgroundShapeStyleChangedInstance=function(b){a._onBackgroundShapeStyleChanged(b)};this._onCanvasElementAddedRemovedInstance=function(b){"added"==b.getType()?a._onCanvasElementAdded(b):"removed"==b.getType()&&a._onCanvasElementRemoved(b)};this._onCanvasElementCursorOverOutInstance=function(b){a._updateRolloverCursorDefinition()};this.addEventListener("added",this._onCanvasElementAddedRemovedInstance);
this.addEventListener("removed",this._onCanvasElementAddedRemovedInstance)}CanvasElement.prototype=Object.create(StyleableBase.prototype);CanvasElement.prototype.constructor=CanvasElement;CanvasElement.base=StyleableBase;CanvasElement.StylePriorities={INSTANCE:0,DEFINITION:1,PROXY:2,INHERITED:3,DEFAULT_DEFINITION:4,DEFAULT_PROXY:5,CLASS:6};CanvasElement._StyleTypes=Object.create(null);CanvasElement._StyleTypes.Visible={inheritable:!1};CanvasElement._StyleTypes.BorderType={inheritable:!1};
CanvasElement._StyleTypes.BorderColor={inheritable:!1};CanvasElement._StyleTypes.BorderThickness={inheritable:!1};CanvasElement._StyleTypes.BackgroundColor={inheritable:!1};CanvasElement._StyleTypes.ShadowSize={inheritable:!1};CanvasElement._StyleTypes.ShadowOffsetX={inheritable:!1};CanvasElement._StyleTypes.ShadowOffsetY={inheritable:!1};CanvasElement._StyleTypes.ShadowColor={inheritable:!1};CanvasElement._StyleTypes.Alpha={inheritable:!1};CanvasElement._StyleTypes.AutoGradientType={inheritable:!1};
CanvasElement._StyleTypes.AutoGradientStart={inheritable:!1};CanvasElement._StyleTypes.AutoGradientStop={inheritable:!1};CanvasElement._StyleTypes.ClipContent={inheritable:!1};CanvasElement._StyleTypes.SkinState={inheritable:!1};CanvasElement._StyleTypes.BackgroundShape={inheritable:!1};CanvasElement._StyleTypes.FocusColor={inheritable:!0};CanvasElement._StyleTypes.FocusThickness={inheritable:!0};CanvasElement._StyleTypes.Padding={inheritable:!1};CanvasElement._StyleTypes.PaddingTop={inheritable:!1};
CanvasElement._StyleTypes.PaddingBottom={inheritable:!1};CanvasElement._StyleTypes.PaddingLeft={inheritable:!1};CanvasElement._StyleTypes.PaddingRight={inheritable:!1};CanvasElement._StyleTypes.Enabled={inheritable:!1};CanvasElement._StyleTypes.MouseEnabled={inheritable:!1};CanvasElement._StyleTypes.Draggable={inheritable:!1};CanvasElement._StyleTypes.Cursor={inheritable:!1};CanvasElement._StyleTypes.TabStop={inheritable:!1};CanvasElement._StyleTypes.X={inheritable:!1};
CanvasElement._StyleTypes.Y={inheritable:!1};CanvasElement._StyleTypes.Width={inheritable:!1};CanvasElement._StyleTypes.Height={inheritable:!1};CanvasElement._StyleTypes.Top={inheritable:!1};CanvasElement._StyleTypes.Left={inheritable:!1};CanvasElement._StyleTypes.Bottom={inheritable:!1};CanvasElement._StyleTypes.Right={inheritable:!1};CanvasElement._StyleTypes.PercentWidth={inheritable:!1};CanvasElement._StyleTypes.PercentHeight={inheritable:!1};CanvasElement._StyleTypes.MinWidth={inheritable:!1};
CanvasElement._StyleTypes.MinHeight={inheritable:!1};CanvasElement._StyleTypes.MaxWidth={inheritable:!1};CanvasElement._StyleTypes.MaxHeight={inheritable:!1};CanvasElement._StyleTypes.HorizontalCenter={inheritable:!1};CanvasElement._StyleTypes.VerticalCenter={inheritable:!1};CanvasElement._StyleTypes.RotateDegrees={inheritable:!1};CanvasElement._StyleTypes.RotateCenterX={inheritable:!1};CanvasElement._StyleTypes.RotateCenterY={inheritable:!1};CanvasElement._StyleTypes.IncludeInLayout={inheritable:!1};
CanvasElement._StyleTypes.CompositeLayer={inheritable:!1};CanvasElement._StyleTypes.TextStyle={inheritable:!0};CanvasElement._StyleTypes.TextFont={inheritable:!0};CanvasElement._StyleTypes.TextSize={inheritable:!0};CanvasElement._StyleTypes.TextAlign={inheritable:!0};CanvasElement._StyleTypes.TextBaseline={inheritable:!0};CanvasElement._StyleTypes.TextLinePaddingTop={inheritable:!0};CanvasElement._StyleTypes.TextLinePaddingBottom={inheritable:!0};CanvasElement._StyleTypes.TextLineSpacing={inheritable:!0};
CanvasElement._StyleTypes.TextColor={inheritable:!0};CanvasElement._StyleTypes.TextFillType={inheritable:!0};CanvasElement._StyleTypes.TextHighlightedColor={inheritable:!0};CanvasElement._StyleTypes.TextHighlightedBackgroundColor={inheritable:!0};CanvasElement._StyleTypes.TextCaretColor={inheritable:!0};CanvasElement.StyleDefault=new StyleDefinition;CanvasElement.StyleDefault.setStyle("Visible",!0);CanvasElement.StyleDefault.setStyle("BorderType","none");
CanvasElement.StyleDefault.setStyle("BorderColor","#000000");CanvasElement.StyleDefault.setStyle("BorderThickness",1);CanvasElement.StyleDefault.setStyle("BackgroundColor",null);CanvasElement.StyleDefault.setStyle("ShadowSize",0);CanvasElement.StyleDefault.setStyle("ShadowOffsetX",0);CanvasElement.StyleDefault.setStyle("ShadowOffsetY",0);CanvasElement.StyleDefault.setStyle("ShadowColor","#000000");CanvasElement.StyleDefault.setStyle("Alpha",1);
CanvasElement.StyleDefault.setStyle("AutoGradientType","none");CanvasElement.StyleDefault.setStyle("AutoGradientStart",.15);CanvasElement.StyleDefault.setStyle("AutoGradientStop",-.15);CanvasElement.StyleDefault.setStyle("ClipContent",!1);CanvasElement.StyleDefault.setStyle("SkinState","");CanvasElement.StyleDefault.setStyle("BackgroundShape",null);CanvasElement.StyleDefault.setStyle("FocusColor","#3333FF");CanvasElement.StyleDefault.setStyle("FocusThickness",1);
CanvasElement.StyleDefault.setStyle("Padding",0);CanvasElement.StyleDefault.setStyle("PaddingTop",0);CanvasElement.StyleDefault.setStyle("PaddingBottom",0);CanvasElement.StyleDefault.setStyle("PaddingLeft",0);CanvasElement.StyleDefault.setStyle("PaddingRight",0);CanvasElement.StyleDefault.setStyle("Enabled",!0);CanvasElement.StyleDefault.setStyle("MouseEnabled",!0);CanvasElement.StyleDefault.setStyle("Draggable",!1);CanvasElement.StyleDefault.setStyle("Cursor",null);
CanvasElement.StyleDefault.setStyle("TabStop",-1);CanvasElement.StyleDefault.setStyle("X",null);CanvasElement.StyleDefault.setStyle("Y",null);CanvasElement.StyleDefault.setStyle("Width",null);CanvasElement.StyleDefault.setStyle("Height",null);CanvasElement.StyleDefault.setStyle("Top",null);CanvasElement.StyleDefault.setStyle("Left",null);CanvasElement.StyleDefault.setStyle("Bottom",null);CanvasElement.StyleDefault.setStyle("Right",null);CanvasElement.StyleDefault.setStyle("PercentWidth",null);
CanvasElement.StyleDefault.setStyle("PercentHeight",null);CanvasElement.StyleDefault.setStyle("MinWidth",5);CanvasElement.StyleDefault.setStyle("MinHeight",5);CanvasElement.StyleDefault.setStyle("MaxWidth",null);CanvasElement.StyleDefault.setStyle("MaxHeight",null);CanvasElement.StyleDefault.setStyle("HorizontalCenter",null);CanvasElement.StyleDefault.setStyle("VerticalCenter",null);CanvasElement.StyleDefault.setStyle("RotateDegrees",0);CanvasElement.StyleDefault.setStyle("RotateCenterX",null);
CanvasElement.StyleDefault.setStyle("RotateCenterY",null);CanvasElement.StyleDefault.setStyle("IncludeInLayout",!0);CanvasElement.StyleDefault.setStyle("CompositeLayer",!1);CanvasElement.StyleDefault.setStyle("TextStyle","normal");CanvasElement.StyleDefault.setStyle("TextFont","Arial");CanvasElement.StyleDefault.setStyle("TextSize",12);CanvasElement.StyleDefault.setStyle("TextAlign","left");CanvasElement.StyleDefault.setStyle("TextBaseline","middle");
CanvasElement.StyleDefault.setStyle("TextLinePaddingTop",1);CanvasElement.StyleDefault.setStyle("TextLinePaddingBottom",1);CanvasElement.StyleDefault.setStyle("TextLineSpacing",0);CanvasElement.StyleDefault.setStyle("TextColor","#000000");CanvasElement.StyleDefault.setStyle("TextFillType","fill");CanvasElement.StyleDefault.setStyle("TextHighlightedColor","#FFFFFF");CanvasElement.StyleDefault.setStyle("TextHighlightedBackgroundColor","#000000");
CanvasElement.StyleDefault.setStyle("TextCaretColor","#000000");CanvasElement.prototype.addStyleDefinition=function(a){return this.addStyleDefinitionAt(a,this._styleDefinitions.length)};
CanvasElement.prototype.addStyleDefinitionAt=function(a,b){if(!(a instanceof StyleDefinition)||0>b||b>this._styleDefinitions.length||-1!=this._styleDefinitions.indexOf(a)||a==this._styleDefinitionDefault)return null;this._styleDefinitions.splice(b,0,a);if(null!=this._manager){a.addEventListener("stylechanged",this._onExternalStyleChangedInstance);for(var c=Object.create(null),d=null,e=b;0<=e;e--)for(d in this._styleDefinitions[e]._styleMap)c[d]=!0;for(d in c)this._onExternalStyleChanged(new StyleChangedEvent(d))}return a};
CanvasElement.prototype.removeStyleDefinition=function(a){a=this._styleDefinitions.indexOf(a);return-1==a?null:this.removeStyleDefinitionAt(a)};
CanvasElement.prototype.removeStyleDefinitionAt=function(a){if(0>a||a>this._styleDefinitions.length-1)return null;if(null!=this._manager){for(var b=Object.create(null),c=null,d=a;0<=d;d--)for(c in this._styleDefinitions[d]._styleMap)b[c]=!0;d=this._styleDefinitions.splice(a,1)[0];d.removeEventListener("stylechanged",this._onExternalStyleChangedInstance);for(c in b)this._onExternalStyleChanged(new StyleChangedEvent(c))}else this._styleDefinitions.splice(a,1);return d};
CanvasElement.prototype.clearStyleDefinitions=function(){if(null!=this._manager){for(var a=Object.create(null),b,c=null,d=0;d<this._styleDefinitions.length;d++)for(c in b=this._styleDefinitions[d],b.removeEventListener("stylechanged",this._onExternalStyleChangedInstance),b._styleMap)a[c]=!0;this._styleDefinitions.splice(0,this._styleDefinitions.length);for(c in a)this._onExternalStyleChanged(new StyleChangedEvent(c))}else this._styleDefinitions.splice(0,this._styleDefinitions.length)};
CanvasElement.prototype.getNumStyleDefinitions=function(){return this._styleDefinitions.length};CanvasElement.prototype.getStyleDefinitionAt=function(a){return 0>a||a>=this._styleDefinitions.length?null:this._styleDefinitions[a]};CanvasElement.prototype.getStyle=function(a){return CanvasElement.base.prototype.getStyle.call(this,a)};
CanvasElement.prototype.getStyleData=function(a){var b=this._stylesCache[a];null==b&&(b={styleData:new StyleData(a),cacheInvalid:!0},this._stylesCache[a]=b);if(0==b.cacheInvalid)return b.styleData.clone();b.cacheInvalid=!1;b=b.styleData;b.priority=[];b.value=void 0;a in this._styleMap&&(b.value=this._styleMap[a]);if(void 0!==b.value)return b.priority.push(CanvasElement.StylePriorities.INSTANCE),b.clone();var c,d;for(c=this._styleDefinitions.length-1;0<=c;c--)if(b.value=this._styleDefinitions[c].getStyle(a),
void 0!==b.value)return b.priority.push(CanvasElement.StylePriorities.DEFINITION),b.priority.push(this._styleDefinitions.length-1-c),b.clone();var e,f;for(e=this._styleProxy;null!=e;){f=e._proxyElement._getStyleType(a);if(null!=f&&0==a in e._proxyMap||null==f&&0=="_Arbitrary"in e._proxyMap)break;a in e._proxyElement._styleMap&&(b.value=e._proxyElement._styleMap[a]);if(void 0!==b.value)return b.priority.push(CanvasElement.StylePriorities.PROXY),b.priority.push(c),b.priority.push(CanvasElement.StylePriorities.INSTANCE),
b.clone();for(d=e._proxyElement._styleDefinitions.length-1;0<=d;d--)if(b.value=e._proxyElement._styleDefinitions[d].getStyle(a),void 0!==b.value)return b.priority.push(CanvasElement.StylePriorities.PROXY),b.priority.push(c),b.priority.push(CanvasElement.StylePriorities.DEFINITION),b.priority.push(e._proxyElement._styleDefinitions.length-1-d),b.clone();c++;e=e._proxyElement._styleProxy}c=0;for(var g=this;;){f=g._getStyleType(a);if(null==f||0==f.inheritable)break;g=g._parent;if(null==g)break;a in g._styleMap&&
(b.value=g._styleMap[a]);if(void 0!==b.value)return b.priority.push(CanvasElement.StylePriorities.INHERITED),b.priority.push(c),b.priority.push(CanvasElement.StylePriorities.INSTANCE),b.clone();for(d=g._styleDefinitions.length-1;0<=d;d--)if(b.value=g._styleDefinitions[d].getStyle(a),void 0!==b.value)return b.priority.push(CanvasElement.StylePriorities.INHERITED),b.priority.push(c),b.priority.push(CanvasElement.StylePriorities.DEFINITION),b.priority.push(g._styleDefinitions.length-1-d),b.clone();e=
g._styleProxy;for(d=0;null!=e;){f=e._proxyElement._getStyleType(a);if(null!=f&&0==a in e._proxyMap||null==f&&0=="_Arbitrary"in e._proxyMap)break;a in e._proxyElement._styleMap&&(b.value=e._proxyElement._styleMap[a]);if(void 0!==b.value)return b.priority.push(CanvasElement.StylePriorities.INHERITED),b.priority.push(c),b.priority.push(CanvasElement.StylePriorities.PROXY),b.priority.push(d),b.priority.push(CanvasElement.StylePriorities.INSTANCE),b.clone();for(f=e._proxyElement._styleDefinitions.length-
1;0<=f;f--)if(b.value=e._proxyElement._styleDefinitions[f].getStyle(a),void 0!==b.value)return b.priority.push(CanvasElement.StylePriorities.INHERITED),b.priority.push(c),b.priority.push(CanvasElement.StylePriorities.PROXY),b.priority.push(d),b.priority.push(CanvasElement.StylePriorities.DEFINITION),b.priority.push(g._styleDefinitions.length-1-f),b.clone();d++;e=e._proxyElement._styleProxy}c++}null!=this._styleDefinitionDefault&&(b.value=this._styleDefinitionDefault.getStyle(a));if(void 0!==b.value)return b.priority.push(CanvasElement.StylePriorities.DEFAULT_DEFINITION),
b.clone();e=this._styleProxy;for(c=0;null!=e;){f=e._proxyElement._getStyleType(a);if(null!=f&&0==a in e._proxyMap||null==f&&0=="_Arbitrary"in e._proxyMap)break;null!=e._proxyElement._styleDefinitionDefault&&(b.value=e._proxyElement._styleDefinitionDefault.getStyle(a));if(void 0!==b.value)return b.priority.push(CanvasElement.StylePriorities.DEFAULT_PROXY),b.priority.push(c),b.clone();c++;e=e._proxyElement._styleProxy}b.value=this._getClassStyle(a);b.priority.push(CanvasElement.StylePriorities.CLASS);
return b.clone()};CanvasElement.prototype.setStyle=function(a,b){var c=void 0;a in this._styleMap&&(c=this._styleMap[a]);c!==b&&(void 0===b?delete this._styleMap[a]:this._styleMap[a]=b,this._onExternalStyleChanged(new StyleChangedEvent(a)))};CanvasElement.prototype.getManager=function(){return this._manager};CanvasElement.prototype.setName=function(a){if(this._name==a)return!1;this._name=a;return!0};CanvasElement.prototype.getName=function(){return this._name};
CanvasElement.prototype.getMouseIsDown=function(){return this._mouseIsDown};CanvasElement.prototype.getParent=function(){return this._parent};
CanvasElement.prototype.rotatePoint=function(a,b){if(0!=this._rotateDegrees){var c=Math.sqrt(Math.abs(a.x-this._rotateCenterX)*Math.abs(a.x-this._rotateCenterX)+Math.abs(a.y-this._rotateCenterY)*Math.abs(a.y-this._rotateCenterY)),d;d=0==b?360-this._rotateDegrees+CanvasElement.radiansToDegrees(Math.atan2(a.x-this._rotateCenterX,a.y-this._rotateCenterY)):360+this._rotateDegrees+CanvasElement.radiansToDegrees(Math.atan2(a.x-this._rotateCenterX,a.y-this._rotateCenterY));a.x=Math.sin(CanvasElement.degreesToRadians(d))*
c+this._rotateCenterX;a.y=Math.cos(CanvasElement.degreesToRadians(d))*c+this._rotateCenterY}};CanvasElement.prototype.translatePointFrom=function(a,b){return b.translatePointTo(a,this)};
CanvasElement.prototype.translatePointTo=function(a,b){if(null==b||b==this||null==this._manager||this._manager!=b._manager)return!1;var c=null,d=[];for(d.push(this);null==c&&null!=d[d.length-1]._parent;)d[d.length-1]._parent==b?c=b:d.push(d[d.length-1]._parent);var e=[];if(null==c)for(e.push(b);null==c&&null!=e[d.length-1]._parent;)e[e.length-1]._parent==this?c=this:e.push(e[e.length-1]._parent);if(null==c)for(;d[d.length-1]==e[e.length-1];)c=d[d.length-1],d.pop(),e.pop();for(d=this;null!=d&&d!=c;)a.x+=
d._x,a.y+=d._y,d.rotatePoint(a,!1),d=d._parent;for(c=e.length-1;0<=c;c--)e[c].rotatePoint(a,!0),a.x-=e[c]._x,a.y-=e[c]._y;return!0};CanvasElement.prototype.translateMetricsFrom=function(a,b){return b.translateMetricsTo(a,this)};
CanvasElement.prototype.translateMetricsTo=function(a,b){var c=new DrawMetrics;if(null==b||b==this)return c._x=a._x,c._y=a._y,c._width=a._width,c._height=a._height,c;if(null==this._manager||this._manager!=b._manager)return null;var d=null,e=[];for(e.push(this);null==d&&null!=e[e.length-1]._parent;)e[e.length-1]._parent==b?d=b:e.push(e[e.length-1]._parent);var f=[];if(null==d)for(f.push(b);null==d&&null!=f[e.length-1]._parent;)f[f.length-1]._parent==this?d=this:f.push(f[f.length-1]._parent);if(null==
d)for(;e[e.length-1]==f[f.length-1];)d=e[e.length-1],e.pop(),f.pop();for(var e={x:a._x,y:a._y},g={x:a._x+a._width,y:a._y},k={x:a._x+a._width,y:a._y+a._height},m={x:a._x,y:a._y+a._height},l=this;null!=l&&l!=d;)e.x+=l._x,e.y+=l._y,g.x+=l._x,g.y+=l._y,k.x+=l._x,k.y+=l._y,m.x+=l._x,m.y+=l._y,l.rotatePoint(e,!1),l.rotatePoint(g,!1),l.rotatePoint(m,!1),l.rotatePoint(k,!1),l=l._parent;for(d=f.length-1;0<=d;d--)f[d].rotatePoint(e,!0),f[d].rotatePoint(g,!0),f[d].rotatePoint(m,!0),f[d].rotatePoint(k,!0),e.x-=
f[d]._x,e.y-=f[d]._y,g.x-=f[d]._x,g.y-=f[d]._y,k.x-=f[d]._x,k.y-=f[d]._y,m.x-=f[d]._x,m.y-=f[d]._y;f=Math.min(e.x,g.x,k.x,m.x);d=Math.max(e.x,g.x,k.x,m.x);l=Math.min(e.y,g.y,k.y,m.y);e=Math.max(e.y,g.y,k.y,m.y);c._x=f;c._y=l;c._width=d-f;c._height=e-l;return c};
CanvasElement.prototype.getMetrics=function(a){null==a&&(a=this);if(null==this._manager||this._manager!=a._manager)return null;var b=new DrawMetrics;b._x=0;b._y=0;b._width=this._width;b._height=this._height;return a==this?b:this.translateMetricsTo(b,a)};
CanvasElement.prototype.addEventListener=function(a,b){CanvasElement.base.prototype.addEventListener.call(this,a,b);"enterframe"!=a&&"localechanged"!=a&&"mousemoveex"!=a||null==this._manager||this._manager._broadcastDispatcher.addEventListener(a,b);return!0};
CanvasElement.prototype.removeEventListener=function(a,b){return 1==CanvasElement.base.prototype.removeEventListener.call(this,a,b)?("enterframe"!=a&&"localechanged"!=a&&"mousemoveex"!=a||null==this._manager||this._manager._broadcastDispatcher.removeEventListener(a,b),!0):!1};CanvasElement.prototype.addCaptureListener=function(a,b){null==this._captureListeners[a]&&(this._captureListeners[a]=[]);this._captureListeners[a].push(b);return!0};
CanvasElement.prototype.removeCaptureListener=function(a,b){if(!(a in this._captureListeners))return!1;for(var c=0;c<this._captureListeners[a].length;c++)if(this._captureListeners[a][c]==b)return this._captureListeners[a].splice(c,1),!0;return!1};CanvasElement.prototype.hasCaptureListener=function(a,b){if(!(a in this._captureListeners))return!1;if(null==b&&0<this._captureListeners[a].length)return!0;for(var c=0;c<this._captureListeners[a].length;c++)if(this._captureListeners[a][c]==b)return!0;return!1};
CanvasElement.adjustColorLight=function(a,b){var c=parseInt(a.slice(1),16),d=0>b?0:255,e=0>b?-1*b:b,f=c>>16,g=c>>8&255,c=c&255;return"#"+(16777216+65536*(Math.round((d-f)*e)+f)+256*(Math.round((d-g)*e)+g)+(Math.round((d-c)*e)+c)).toString(16).slice(1)};CanvasElement.radiansToDegrees=function(a){return 180/Math.PI*a};CanvasElement.degreesToRadians=function(a){return Math.PI/180*a};CanvasElement.normalizeDegrees=function(a){for(;360<=a;)a-=360;for(;0>a;)a+=360;return a};CanvasElement._browserType="";
CanvasElement._characterWidthMap=Object.create(null);CanvasElement._characterFillBitmapMap=Object.create(null);CanvasElement._characterStrokeBitmapMap=Object.create(null);CanvasElement._measureCharBitmap=null;CanvasElement._measureCharContext=null;(function(){CanvasElement._measureCharBitmap=document.createElement("canvas");CanvasElement._measureCharBitmap.width=1;CanvasElement._measureCharBitmap.height=1;CanvasElement._measureCharContext=CanvasElement._measureCharBitmap.getContext("2d")})();
CanvasElement._measureText=function(a,b){var c=CanvasElement._characterWidthMap[b];null==c&&(c=Object.create(null),CanvasElement._characterWidthMap[b]=c);for(var d=0,e,f=!1,g=0;g<a.length;g++)e=c[a[g]],null==e&&(0==f&&(CanvasElement._measureCharContext.font=b,f=!0),e=Math.ceil(CanvasElement._measureCharContext.measureText(a[g]).width),c[a[g]]=e),d+=e;return d};
CanvasElement._fillText=function(a,b,c,d,e,f,g){var k=CanvasElement._characterFillBitmapMap[e];null==k&&(k=Object.create(null),CanvasElement._characterFillBitmapMap[e]=k);for(var m=0;m<b.length;m++){var l=k[b[m]];if(null==l){l={canvas:null,context:null,fontSize:0};k[b[m]]=l;l.canvas=document.createElement("canvas");for(var p=e.split(" "),q=0,n=0;n<p.length;n++)if(3<=p[n].length&&"px"==p[n].substr(p[n].length-2,2)){q=Number(p[n].substr(0,p[n].length-2));break}l.fontSize=q;l.canvas.height=q+4;l.canvas.width=
CanvasElement._measureText(b[m],e);l.context=l.canvas.getContext("2d");l.context.font=e;l.context.textBaseline="middle";l.context.textAlign="left";l.context.strokeStyle="#000000";l.context.fillStyle="#000000";l.context.fillText(b[m],0,l.canvas.height/2);l.context.globalCompositeOperation="source-atop"}l.context.fillStyle!=f&&(l.context.fillStyle=f,l.context.beginPath(),l.context.moveTo(0,0),l.context.lineTo(l.canvas.width,0),l.context.lineTo(l.canvas.width,l.canvas.height),l.context.lineTo(0,l.canvas.height),
l.context.closePath(),l.context.fill());"top"==g?a.drawImage(l.canvas,c,Math.round(d-(l.canvas.height-l.fontSize)/2)):"bottom"==g?a.drawImage(l.canvas,c,Math.round(d-((l.canvas.height-l.fontSize)/2+l.fontSize))):a.drawImage(l.canvas,c,Math.round(d-l.canvas.height/2));if(1==b.length)break;c+=CanvasElement._measureText(b[m],e)}};
CanvasElement._strokeText=function(a,b,c,d,e,f,g){var k=CanvasElement._characterStrokeBitmapMap[e];null==k&&(k=Object.create(null),CanvasElement._characterStrokeBitmapMap[e]=k);for(var m=0;m<b.length;m++){var l=k[b[m]];if(null==l){l={canvas:null,context:null};k[b[m]]=l;l.canvas=document.createElement("canvas");for(var p=e.split(" "),q=0,n=0;n<p.length;n++)if(3<=p[n].length&&"px"==p[n].substr(p[n].length-2,2)){q=Number(p[n].substr(0,p[n].length-2));break}l.fontSize=q;l.canvas.height=q+4;l.canvas.width=
CanvasElement._measureText(b[m],e);l.context=l.canvas.getContext("2d");l.context.font=e;l.context.textBaseline="middle";l.context.textAlign="left";l.context.strokeStyle="#000000";l.context.fillStyle="#000000";l.context.strokeText(b[m],0,l.canvas.height/2);l.context.globalCompositeOperation="source-atop"}l.context.fillStyle!=f&&(l.context.fillStyle=f,l.context.beginPath(),l.context.moveTo(0,0),l.context.lineTo(l.canvas.width,0),l.context.lineTo(l.canvas.width,l.canvas.height),l.context.lineTo(0,l.canvas.height),
l.context.closePath(),l.context.fill());"top"==g?a.drawImage(l.canvas,c,Math.round(d-(l.canvas.height-l.fontSize)/2)):"bottom"==g?a.drawImage(l.canvas,c,Math.round(d-((l.canvas.height-l.fontSize)/2+l.fontSize))):a.drawImage(l.canvas,c,Math.round(d-l.canvas.height/2));if(1==b.length)break;c+=CanvasElement._measureText(b[m],e)}};
CanvasElement._calculateMinMaxPercentSizes=function(a,b){if(0!=a.length){var c=a.slice(),d=b,e=0,f;for(f=0;f<c.length;f++)null==c[f].minSize&&(c[f].minSize=0),null==c[f].maxSize&&(c[f].maxSize=Number.MAX_VALUE),null==c[f].percentSize&&(c[f].percentSize=100),e+=c[f].percentSize;for(var g=!1;0==g;)for(g=!0,f=0;f<c.length;f++)if(b=c[f].percentSize/e*d,b>c[f].maxSize){c[f].actualSize=c[f].maxSize;e-=c[f].percentSize;d-=c[f].maxSize;c.splice(f,1);g=!1;break}else if(b<c[f].minSize){c[f].actualSize=c[f].minSize;
e-=c[f].percentSize;d-=c[f].minSize;c.splice(f,1);g=!1;break}else c[f].actualSize=Math.floor(b);for(f=0;f<c.length;f++)d-=c[f].actualSize;for(;1<=d&&0<c.length;)for(f=0;f<c.length;f++){for(;c[f].actualSize+1>c[f].maxSize&&(c.splice(f,1),f!=c.length););if(f==c.length)break;c[f].actualSize++;d--;if(0>=d)break}}};CanvasElement.prototype._onBackgroundShapeStyleChanged=function(a){this._invalidateRender()};
CanvasElement.prototype._onExternalStyleChanged=function(a){if(null!=this._manager){var b=!1,c=!1,d=a.getStyleName(),e=this._getStyleType(d);null!=this._styleProxy&&a.getTarget()==this._styleProxy._proxyElement&&(b=!0);null!=this._parent&&a.getTarget()==this._parent&&(c=!0);0!=(1==b||1==c?1==b&&(1==d in this._styleProxy._proxyMap||null==this._styleProxy._proxyElement._getStyleType(d))||1==c&&null!=e&&1==e.inheritable?!0:!1:!0)&&(b=null,c=this._stylesCache[d],null==c&&(c={styleData:new StyleData(d),
cacheInvalid:!0},this._stylesCache[d]=c),0==c.cacheInvalid&&(b=c.styleData.clone()),c.cacheInvalid=!0,c=this.getStyleData(d),null==b||1!=b.equals(c))&&(null!=e&&this._invalidateStyle(d),this._dispatchEvent(a))}};
CanvasElement.prototype._getDefaultStyleData=function(a){var b=new StyleData(a);null!=this._styleDefinitionDefault&&(b.value=this._styleDefinitionDefault.getStyle(a));if(void 0!==b.value)return b.priority.push(CanvasElement.StylePriorities.DEFAULT_DEFINITION),b;for(var c=this._styleProxy,d=0;null!=c&&(0!=a in c._proxyMap||null==c._proxyElement._getStyleType(a));){null!=c._proxyElement._styleDefinitionDefault&&(b.value=c._proxyElement._styleDefinitionDefault.getStyle(a));if(void 0!==b.value)return b.priority.push(CanvasElement.StylePriorities.DEFAULT_PROXY),
b.priority.push(d),b;d++;c=c._proxyElement._styleProxy}b.value=this._getClassStyle(a);b.priority.push(CanvasElement.StylePriorities.CLASS);return b};CanvasElement.prototype._setStyleDefinitionDefault=function(a){this._styleDefinitionDefault=a};CanvasElement.prototype._setStyleProxy=function(a){this._styleProxy=a};
CanvasElement.prototype._onCanvasElementAdded=function(a){for(var b=0;b<this._styleDefinitions.length;b++)0==this._styleDefinitions[b].hasEventListener("stylechanged",this._onExternalStyleChangedInstance)&&this._styleDefinitions[b].addEventListener("stylechanged",this._onExternalStyleChangedInstance);null!=this._styleProxy&&0==this._styleProxy._proxyElement.hasEventListener("stylechanged",this._onExternalStyleChangedInstance)&&this._styleProxy._proxyElement.addEventListener("stylechanged",this._onExternalStyleChangedInstance);
null!=this._backgroundShape&&0==this._backgroundShape.hasEventListener("stylechanged",this._onBackgroundShapeStyleChangedInstance)&&this._backgroundShape.addEventListener("stylechanged",this._onBackgroundShapeStyleChangedInstance);if("enterframe"in this._eventListeners&&0<this._eventListeners.enterframe.length)for(b=0;b<this._eventListeners.enterframe.length;b++)a.getManager()._broadcastDispatcher.addEventListener("enterframe",this._eventListeners.enterframe[b]);if("localechanged"in this._eventListeners&&
0<this._eventListeners.localechanged.length)for(b=0;b<this._eventListeners.localechanged.length;b++)a.getManager()._broadcastDispatcher.addEventListener("localechanged",this._eventListeners.localechanged[b]);if("mousemoveex"in this._eventListeners&&0<this._eventListeners.mousemoveex.length)for(b=0;b<this._eventListeners.mousemoveex.length;b++)a.getManager()._broadcastDispatcher.addEventListener("mousemoveex",this._eventListeners.mousemoveex[b]);this._invalidateRedrawRegion();this._invalidateCompositeRender();
for(var c in this._stylesCache)this._stylesCache[c].cacheInvalid=!0;a=Object.getPrototypeOf(this);b=null;if(null==a||1==a.hasOwnProperty("constructor"))b=a.constructor;for(;null!=b;){if("_StyleTypes"in b)for(var d in b._StyleTypes)this._invalidateStyle(d);a=Object.getPrototypeOf(a);b=null==a||0==a.hasOwnProperty("constructor")?null:a.constructor}1==this.hasEventListener("localechanged",null)&&this._dispatchEvent(new DispatcherEvent("localechanged"))};
CanvasElement.prototype._onCanvasElementRemoved=function(a){var b;for(b=0;b<this._styleDefinitions.length;b++)0==this._styleDefinitions[b].hasEventListener("stylechanged",this._onExternalStyleChangedInstance)&&this._styleDefinitions[b].removeEventListener("stylechanged",this._onExternalStyleChangedInstance);null!=this._styleProxy&&1==this._styleProxy._proxyElement.hasEventListener("stylechanged",this._onExternalStyleChangedInstance)&&this._styleProxy._proxyElement.removeEventListener("stylechanged",
this._onExternalStyleChangedInstance);null!=this._backgroundShape&&0==this._backgroundShape.hasEventListener("stylechanged",this._onBackgroundShapeStyleChangedInstance)&&this._backgroundShape.removeEventListener("stylechanged",this._onBackgroundShapeStyleChangedInstance);null!=this._rollOverCursorInstance&&(a.getManager().removeCursor(this._rollOverCursorInstance),this._rollOverCursorInstance=null);for(b=0;b<this._compositeMetrics.length;b++)null!=this._compositeMetrics[b].element._manager&&this._compositeMetrics[b].element._updateRedrawRegion(this._compositeMetrics[b].drawableMetrics);
this._renderInvalid=this._layoutInvalid=this._measureInvalid=this._stylesInvalid=!0;this._graphicsCtx=this._graphicsCanvas=null;this._graphicsClear=!0;this._compositeCanvasMetrics=this._compositeCanvas=this._compositeCtx=null;this._renderChanged=!0;this._renderVisible=!1;this._compositeEffectChanged=!0;this._compositeMetrics=[];this._transformDrawableMetrics=this._transformVisibleMetrics=this._redrawRegionMetrics=this._compositeVisibleMetrics=null;if("enterframe"in this._eventListeners&&0<this._eventListeners.enterframe.length)for(b=
0;b<this._eventListeners.enterframe.length;b++)a.getManager()._broadcastDispatcher.removeEventListener("enterframe",this._eventListeners.enterframe[b]);if("localechanged"in this._eventListeners&&0<this._eventListeners.localechanged.length)for(b=0;b<this._eventListeners.localechanged.length;b++)a.getManager()._broadcastDispatcher.removeEventListener("localechanged",this._eventListeners.localechanged[b]);if("mousemoveex"in this._eventListeners&&0<this._eventListeners.mousemoveex.length)for(b=0;b<this._eventListeners.mousemoveex.length;b++)a.getManager()._broadcastDispatcher.removeEventListener("mousemoveex",
this._eventListeners.mousemoveex[b])};CanvasElement.prototype._getFontString=function(){return this.getStyle("TextStyle")+" "+this.getStyle("TextSize")+"px "+this.getStyle("TextFont")};
CanvasElement.prototype._dispatchEvent=function(a){if(a instanceof ElementEvent){a._canceled=!1;a._defaultPrevented=!1;var b=a.clone();b._target=this;var c;if(1==b._bubbles){c=this;var d={x:0,y:0};b instanceof ElementMouseEvent&&(d.x=b._x,d.y=b._y);for(var e=[];null!=c;)e.push({element:c,x:d.x,y:d.y}),b instanceof ElementMouseEvent&&(d.x+=c._x,d.y+=c._y,c.rotatePoint(d,!1)),c=c._parent;b._phase="capture";for(d=e.length-1;0<=d;d--)if(c=e[d].element,b._type in c._captureListeners&&0<c._captureListeners[b._type].length){b._currentTarget=
c;b instanceof ElementMouseEvent&&(b._x=e[d].x,b._y=e[d].y);for(var f=c._captureListeners[b._type].slice(),g=0;g<f.length;g++)if(c=b.clone(),f[g](c),1==c._defaultPrevented&&(a._defaultPrevented=!0),1==c._canceled){a._canceled=!0;return}}b._phase="bubble";for(d=0;d<e.length;d++)if(c=e[d].element,b._type in c._eventListeners&&0<c._eventListeners[b._type].length)for(b._currentTarget=c,b instanceof ElementMouseEvent&&(b._x=e[d].x,b._y=e[d].y),f=c._eventListeners[b._type].slice(),g=0;g<f.length;g++)if(c=
b.clone(),f[g](c),1==c._defaultPrevented&&(a._defaultPrevented=!0),1==c._canceled){a._canceled=!0;return}}else{b._currentTarget=this;b._phase="capture";if(b._type in this._captureListeners&&0<this._captureListeners[b._type].length)for(f=this._captureListeners[b._type].slice(),g=0;g<f.length;g++)if(c=b.clone(),f[g](c),1==c._defaultPrevented&&(a._defaultPrevented=!0),1==c._canceled){a._canceled=!0;return}b._phase="bubble";if(b._type in this._eventListeners&&0<this._eventListeners[b._type].length)for(f=
this._eventListeners[b._type].slice(),g=0;g<f.length;g++)if(c=b.clone(),f[g](c),1==c._defaultPrevented&&(a._defaultPrevented=!0),1==c._canceled){a._canceled=!0;break}}}else CanvasElement.base.prototype._dispatchEvent.call(this,a)};CanvasElement.prototype._addChild=function(a){return this._addChildAt(a,this._children.length)};
CanvasElement.prototype._addChildAt=function(a,b){if(!(a instanceof CanvasElement)||0>b||b>this._children.length)return null;null!=a._parent&&a._parent._removeChild(a);a._parent=this;this._children.splice(b,0,a);this.addEventListener("stylechanged",a._onExternalStyleChangedInstance);a._propagateChildData();this._invalidateMeasure();this._invalidateLayout();null!=this._manager&&(this._manager._rollOverInvalid=!0,this._manager._processAddRemoveDisplayChainQueue());return a};
CanvasElement.prototype._removeChild=function(a){a=this._children.indexOf(a);return-1==a?null:this._removeChildAt(a)};
CanvasElement.prototype._removeChildAt=function(a){if(0>a||a>this._children.length-1)return null;a=this._children.splice(a,1)[0];1==a._mouseIsDown&&(a._manager._mouseDownElement=a._parent);1==a._mouseIsOver&&(a._manager._rollOverElement=a._parent);a._parent=null;this.removeEventListener("stylechanged",a._onExternalStyleChangedInstance);a._propagateChildData();this._invalidateMeasure();this._invalidateLayout();null!=this._manager&&(this._manager._rollOverInvalid=!0,this._manager._processAddRemoveDisplayChainQueue());
return a};CanvasElement.prototype._getChildAt=function(a){return 0>a||a>this._children.length-1?null:this._children[a]};CanvasElement.prototype._getChildIndex=function(a){return this._children.indexOf(a)};CanvasElement.prototype._setChildIndex=function(a,b){if(0>b||b>this._children.length-1)return!1;var c=this._getChildIndex(a);if(-1==c||c==b)return!1;this._children.splice(b,0,this._children.splice(c,1)[0]);this._invalidateMeasure();this._invalidateLayout();return!0};
CanvasElement.prototype._getNumChildren=function(){return this._children.length};
CanvasElement.prototype._propagateChildData=function(){var a=this instanceof CanvasManager;0==a&&(null==this._parent||0==this._parent._displayDepth)||1==a&&null!=this._manager?(null!=this._manager&&(1==this._stylesInvalid&&this._manager._updateStylesQueue.removeNode(this._stylesValidateNode,this._displayDepth),1==this._measureInvalid&&this._manager._updateMeasureQueue.removeNode(this._measureValidateNode,this._displayDepth),1==this._layoutInvalid&&this._manager._updateLayoutQueue.removeNode(this._layoutValidateNode,
this._displayDepth),1==this._renderInvalid&&this._manager._updateRenderQueue.removeNode(this._renderValidateNode,this._displayDepth),1==this._compositeRenderInvalid&&this._manager._compositeRenderQueue.removeNode(this._compositeRenderValidateNode,this._displayDepth),this==this._manager._draggingElement&&this._manager._clearDraggingElement(),this==this._manager._focusElement&&(this._manager._focusElement=null),this._manager._pushAddRemoveDisplayChainQueue(this,"removed")),this._mouseIsDown=this._mouseIsOver=
this._isFocused=this._renderFocusRing=!1,this._displayDepth=0,this._manager=null):(1==a?(this._displayDepth=1,this._manager=this):(this._displayDepth=this._parent._displayDepth+1,this._manager=this._parent._manager),null!=this._manager&&(1==this._stylesInvalid&&this._manager._updateStylesQueue.addNode(this._stylesValidateNode,this._displayDepth),1==this._measureInvalid&&this._manager._updateMeasureQueue.addNode(this._measureValidateNode,this._displayDepth),1==this._layoutInvalid&&this._manager._updateLayoutQueue.addNode(this._layoutValidateNode,
this._displayDepth),1==this._renderInvalid&&this._manager._updateRenderQueue.addNode(this._renderValidateNode,this._displayDepth),1==this._compositeRenderInvalid&&this._manager._compositeRenderQueue.addNode(this._compositeRenderValidateNode,this._displayDepth),this._manager._pushAddRemoveDisplayChainQueue(this,"added")));for(a=0;a<this._children.length;a++)this._children[a]._propagateChildData()};
CanvasElement.prototype._setRelativePosition=function(a,b,c){if(null==c||c==this){if(this._x==a&&this._y==b)return;this._x=a;this._y=b;null!=this._manager&&(this._manager._rollOverInvalid=!0);this._invalidateRedrawRegion()}if(null!=this._manager&&this._manager==c._manager){var d=this.getMetrics(this._parent);a={x:a,y:b};c.translatePointTo(a,this._parent);if(a.x!=d.getX()||a.y!=d.getY())c=a.x-d.getX(),d=a.y-d.getY(),this._x+=c,this._y+=d,0!=this._rotateDegrees&&(this._rotateCenterX+=c,this._rotateCenterY+=
d),null!=this._manager&&(this._manager._rollOverInvalid=!0),this._invalidateRedrawRegion()}};CanvasElement.prototype._setActualPosition=function(a,b){a=Math.round(a);b=Math.round(b);if(this._x!=a||this._y!=b)this._x=a,this._y=b,null!=this._manager&&(this._manager._rollOverInvalid=!0),this._invalidateRedrawRegion()};
CanvasElement.prototype._setActualSize=function(a,b){a=Math.round(a);b=Math.round(b);if(this._width==a&&this._height==b)return!1;this._width=a;this._height=b;this._invalidateLayout();this._invalidateRender();1==this.hasEventListener("resize",null)&&this._dispatchEvent(new DispatcherEvent("resize"),!1);null!=this._manager&&(this._manager._rollOverInvalid=!0);return!0};
CanvasElement.prototype._setActualRotation=function(a,b,c){if(null==b||null==c)c=b=0;if(this._rotateDegrees!=a||this._rotateCenterX!=b||this._rotateCenterY!=c)this._invalidateRedrawRegion(),this._rotateDegrees!=a&&(this._compositeEffectChanged=!0,this._invalidateCompositeRender());this._rotateDegrees=a;this._rotateCenterX=b;this._rotateCenterY=c};
CanvasElement.prototype._setMeasuredSize=function(a,b){if(this._measuredWidth!=a||this._measuredHeight!=b)this._measuredWidth=a,this._measuredHeight=b,null!=this._parent&&(this._parent._invalidateMeasure(),this._parent._invalidateLayout())};CanvasElement.prototype._setRenderFocusRing=function(a){this._renderFocusRing!=a&&(this._renderFocusRing=a,this._invalidateRender())};CanvasElement.prototype._createMetrics=function(){return new DrawMetrics};
CanvasElement.prototype._getGraphicsCtx=function(){null==this._graphicsCanvas&&(this._graphicsCanvas=document.createElement("canvas"),this._graphicsCtx=this._graphicsCanvas.getContext("2d"),this._graphicsCanvas.width=this._width,this._graphicsCanvas.height=this._height);this._renderChanged=!0;this._graphicsClear=!1;this._invalidateRedrawRegion();return this._graphicsCtx};
CanvasElement.prototype._getPaddingSize=function(){var a=this.getStyleData("Padding"),b=this.getStyleData("PaddingTop"),c=this.getStyleData("PaddingBottom"),d=this.getStyleData("PaddingLeft"),e=this.getStyleData("PaddingRight"),f=b.value;0<a.comparePriority(b)&&(f=a.value);b=c.value;0<a.comparePriority(c)&&(b=a.value);c=d.value;0<a.comparePriority(d)&&(c=a.value);d=e.value;0<a.comparePriority(e)&&(d=a.value);return{width:c+d,height:f+b,paddingBottom:b,paddingTop:f,paddingLeft:c,paddingRight:d}};
CanvasElement.prototype._getBorderThickness=function(){var a=0,b=this.getStyle("BorderType"),c=this.getStyle("BorderColor");"solid"!=b&&"inset"!=b&&"outset"!=b||null==c||(a=this.getStyle("BorderThickness"),0>a&&(a=0));return a};CanvasElement.prototype._getStyledOrMeasuredWidth=function(){var a=this.getStyle("Width");null==a&&(a=this._measuredWidth);return a};CanvasElement.prototype._getStyledOrMeasuredHeight=function(){var a=this.getStyle("Height");null==a&&(a=this._measuredHeight);return a};
CanvasElement.prototype._getBorderMetrics=function(){var a=this._createMetrics(),b=this._getBorderThickness();a._x=b/2;a._y=b/2;a._width=this._width-b;a._height=this._height-b;return a};CanvasElement.prototype._getPaddingMetrics=function(){var a=this._createMetrics(),b=this._getPaddingSize();a._x=b.paddingLeft;a._y=b.paddingTop;a._width=this._width-b.paddingLeft-b.paddingRight;a._height=this._height-b.paddingTop-b.paddingBottom;return a};
CanvasElement.prototype._getAutoGradientFill=function(a,b){var c=this.getStyle("AutoGradientType");return"radial"==c?this._getAutoGradientRadial(a,b):"linear"==c?this._getAutoGradientLinear(a,b):null};
CanvasElement.prototype._getAutoGradientMetrics=function(){var a=this.getMetrics(this._manager),b=a.getX(),c=a.getY(),d=a.getWidth(),a=a.getHeight(),e=a*Math.tan(CanvasElement.degreesToRadians(8)),f={x:0,y:c};f.x=e<=d?b+d/2-e/2:b-(e-d)/2;c={x:0,y:c+a};c.x=e<=d?b+d/2+e/2:b+d+(e-d)/2;this._manager.translatePointTo(f,this);this._manager.translatePointTo(c,this);return{startPoint:f,endPoint:c,width:d,height:a}};
CanvasElement.prototype._getAutoGradientLinear=function(a,b){var c=CanvasElement.adjustColorLight(a,this.getStyle("AutoGradientStart")),d=CanvasElement.adjustColorLight(a,this.getStyle("AutoGradientStop")),e=this._getAutoGradientMetrics(),e=b.createLinearGradient(e.startPoint.x,e.startPoint.y,e.endPoint.x,e.endPoint.y);e.addColorStop(0,c);e.addColorStop(1,d);return e};
CanvasElement.prototype._getAutoGradientRadial=function(a,b){var c=CanvasElement.adjustColorLight(a,this.getStyle("AutoGradientStart")),d=CanvasElement.adjustColorLight(a,this.getStyle("AutoGradientStop")),e=this._getAutoGradientMetrics(),f=e.endPoint.x-e.startPoint.x,g=e.endPoint.y-e.startPoint.y,k=e.startPoint.x+.42*f,m=e.startPoint.y+.42*g,e=b.createRadialGradient(k,m,Math.max(e.width,e.height)/2+.08*Math.max(f,g),k,m,0);e.addColorStop(0,d);e.addColorStop(1,c);return e};
CanvasElement.prototype._drawBackgroundShape=function(a,b){if(null==this._backgroundShape){var c=b.getX(),d=b.getY(),e=b.getWidth(),f=b.getHeight();a.moveTo(c,d);a.lineTo(c+e,d);a.lineTo(c+e,d+f);a.lineTo(c,d+f);a.closePath()}else this._backgroundShape.drawShape(a,b)};
CanvasElement.prototype._drawFocusRing=function(a,b){var c=this.getStyle("FocusThickness");if(!(0>=c)){var d=this.getStyle("FocusColor");if(null!=d){var e=this.getMetrics(this),f=e.getX()-c,g=e.getY()-c,k=e.getWidth()+2*c,e=e.getHeight()+2*c;a.beginPath();a.moveTo(f,g);a.lineTo(f,g+e);a.lineTo(f+k,g+e);a.lineTo(f+k,g);a.closePath();this._drawBackgroundShape(a,b);a.clip();a.beginPath();this._drawBackgroundShape(a,b);a.strokeStyle=d;a.lineWidth=this._getBorderThickness()+2*c;a.stroke()}}};
CanvasElement.prototype._fillBackground=function(a){var b=this.getStyle("BackgroundColor");if(null!=b){var c=this._getGraphicsCtx(),d=this._getAutoGradientFill(b,c);c.fillStyle=null!=d?d:b;c.beginPath();this._drawBackgroundShape(c,a);c.fill()}};CanvasElement.prototype._drawSolidBorder=function(a,b){var c=this.getStyle("BorderColor");if(null!=c){var d=this.getStyle("BorderThickness");0>d||(a.beginPath(),this._drawBackgroundShape(a,b),a.strokeStyle=c,a.lineWidth=d,a.stroke())}};
CanvasElement.prototype._drawBorder=function(a){var b=this.getStyle("BorderType");if("solid"==b||"inset"==b||"outset"==b){var c=this._getGraphicsCtx();if("solid"==b)this._drawSolidBorder(c,a);else{var d=this.getStyle("BorderColor");a=this.getStyle("BorderThickness");if(!(null==d||0>=a)){var e=this._width,f=this._height,g=CanvasElement.adjustColorLight(d,.3),k=CanvasElement.adjustColorLight(d,-.3),d="inset"==b?k:g,b="inset"==b?g:k;c.beginPath();c.moveTo(0,0+f);c.lineTo(0,0);c.lineTo(0+e,0);c.lineTo(0+
e-a,0+a);c.lineTo(0+a,0+a);c.lineTo(0+a,0+f-a);c.closePath();c.fillStyle=d;c.fill();c.beginPath();c.moveTo(0,0+f);c.lineTo(0+e,0+f);c.lineTo(0+e,0);c.lineTo(0+e-a,0+a);c.lineTo(0+e-a,0+f-a);c.lineTo(0+a,0+f-a);c.closePath();c.fillStyle=b;c.fill();c.lineWidth=1;c.globalAlpha=.15;c.strokeStyle="#000000";c.beginPath();c.moveTo(0,0);c.lineTo(0+a,0+a);c.stroke();c.beginPath();c.moveTo(0+e,0+f);c.lineTo(0+e-a,0+f-a);c.stroke()}}}};
CanvasElement.prototype._validateStyles=function(){this._stylesInvalid=!1;var a=Object.create(null),b;for(b in this._stylesInvalidMap)1==this._stylesInvalidMap[b]&&(a[b]=!0,this._stylesInvalidMap[b]=!1);this._doStylesUpdated(a)};CanvasElement.prototype._validateMeasure=function(){this._measureInvalid=!1;var a=this._getPaddingSize(),a=this._doMeasure(a.width,a.height);this._setMeasuredSize(a.width,a.height)};
CanvasElement.prototype._validateLayout=function(){this._layoutInvalid=!1;this._doLayout(this._getPaddingMetrics());0==this._layoutInvalid&&this.hasEventListener("layoutcomplete",null)&&this._dispatchEvent(new DispatcherEvent("layoutcomplete"))};
CanvasElement.prototype._validateRender=function(){this._renderInvalid=!1;null!=this._graphicsCanvas&&(this._graphicsCanvas.width=this._width,this._graphicsCanvas.height=this._height,this._graphicsCtx.clearRect(0,0,this._graphicsCanvas.width,this._graphicsCanvas.height));0==this._graphicsClear&&(this._graphicsClear=this._renderChanged=!0,this._invalidateRedrawRegion());this._doRender()};
CanvasElement.prototype._getCompositeMetrics=function(a){for(var b=0;b<this._compositeMetrics.length;b++)if(this._compositeMetrics[b].element==a)return this._compositeMetrics[b];return null};
CanvasElement.prototype._validateCompositeRender=function(){1==this._isCompositeElement()?(this._updateCompositeCanvas(),null!=this._redrawRegionMetrics&&null!=this._compositeCanvasMetrics&&(--this._redrawRegionMetrics._x,--this._redrawRegionMetrics._y,this._redrawRegionMetrics._width+=2,this._redrawRegionMetrics._height+=2,this._redrawRegionMetrics.roundUp(),this._redrawRegionMetrics.mergeReduce(this._compositeCanvasMetrics),0<this._redrawRegionMetrics._width&&0<this._redrawRegionMetrics._height&&
(this._compositeCtx.clearRect(this._redrawRegionMetrics._x,this._redrawRegionMetrics._y,this._redrawRegionMetrics._width,this._redrawRegionMetrics._height),this._renderRedrawRegion(this)))):this._compositeCanvasMetrics=this._compositeCtx=this._compositeCanvas=null;this._compositeEffectChanged=this._compositeRenderInvalid=!1;this._redrawRegionMetrics=null};
CanvasElement.prototype._updateCompositeCanvas=function(){if(null==this._compositeVisibleMetrics)this._compositeCanvasMetrics=this._compositeCtx=this._compositeCanvas=null;else{var a=this._compositeVisibleMetrics.clone();a.roundUp();if(null==this._compositeCanvas||0==this._compositeCanvasMetrics.equals(a))null==this._compositeCanvas&&(this._compositeCanvas=document.createElement("canvas"),this._compositeCtx=this._compositeCanvas.getContext("2d")),null==this._compositeCanvasMetrics?this._compositeCanvasMetrics=
a:this._compositeCanvasMetrics.copyFrom(a),this._compositeCanvas.width=this._compositeCanvasMetrics._width,this._compositeCanvas.height=this._compositeCanvasMetrics._height,this._compositeCtx.setTransform(1,0,0,1,-1*this._compositeCanvasMetrics._x,-1*this._compositeCanvasMetrics._y),null==this._redrawRegionMetrics?this._redrawRegionMetrics=this._compositeCanvasMetrics.clone():this._redrawRegionMetrics.mergeExpand(this._compositeCanvasMetrics)}};
CanvasElement.prototype._isCompositeElement=function(){if(this==this._manager)return!0;var a=this.getStyle("Alpha");return 0<a&&1>a||0!=CanvasElement.normalizeDegrees(this._rotateDegrees)||0<this.getStyle("ShadowSize")&&null!=this.getStyle("ShadowColor")||1==this.getStyle("CompositeLayer")?!0:!1};CanvasElement.prototype._updateRedrawRegion=function(a){null==a||0>=a._width||0>=a._height||(null==this._redrawRegionMetrics?this._redrawRegionMetrics=a.clone():this._redrawRegionMetrics.mergeExpand(a),this._invalidateCompositeRender())};
CanvasElement.prototype._primeShadow=function(){this._compositeCtx.beginPath();this._compositeCtx.moveTo(this._compositeCanvasMetrics._x-1,this._compositeCanvasMetrics._y-1);this._compositeCtx.moveTo(this._compositeCanvasMetrics._x,this._compositeCanvasMetrics._y-1);this._compositeCtx.moveTo(this._compositeCanvasMetrics._x,this._compositeCanvasMetrics._y);this._compositeCtx.moveTo(this._compositeCanvasMetrics._x-1,this._compositeCanvasMetrics._y);this._compositeCtx.closePath();this._compositeCtx.fillStyle=
"#000000";this._compositeCtx.fill()};
CanvasElement.prototype._renderRedrawRegion=function(a){if(0!=a._renderVisible){var b=!1;this!=a&&1==a._isCompositeElement()&&(b=!0);var c=null,d=null,e=null;1==b&&null!=a._transformDrawableMetrics?(e=a._transformVisibleMetrics,d=a._transformDrawableMetrics,c=a._compositeCanvas,this._compositeCtx.globalAlpha=a.getStyle("Alpha")):0<a._compositeMetrics.length&&0==a._graphicsClear&&(e=a._compositeMetrics[0].metrics,d=a._compositeMetrics[0].drawableMetrics,c=a._graphicsCanvas,this._compositeCtx.globalAlpha=
1);if(null!=c&&0<d._width&&0<d._height&&d._x<this._redrawRegionMetrics._x+this._redrawRegionMetrics._width&&d._x+d._width>this._redrawRegionMetrics._x&&d._y<this._redrawRegionMetrics._y+this._redrawRegionMetrics._height&&d._y+d._height>this._redrawRegionMetrics._y)if(1==b&&0!=CanvasElement.normalizeDegrees(a._rotateDegrees)){var f=d.clone();f.mergeReduce(this._redrawRegionMetrics);this._compositeCtx.save();this._compositeCtx.beginPath();this._compositeCtx.moveTo(f._x,f._y);this._compositeCtx.lineTo(f._x+
f._width,f._y);this._compositeCtx.lineTo(f._x+f._width,f._y+f._height);this._compositeCtx.lineTo(f._x,f._y+f._height);this._compositeCtx.closePath();this._compositeCtx.clip();for(f=a._parent;0==f._isCompositeElement();)this._compositeCtx.translate(f._x,f._y),f=f._parent;this._compositeCtx.translate(a._rotateCenterX,a._rotateCenterY);this._compositeCtx.rotate(CanvasElement.degreesToRadians(a._rotateDegrees));this._compositeCtx.translate(-a._rotateCenterX,-a._rotateCenterY);this._compositeCtx.translate(a._compositeCanvasMetrics._x,
a._compositeCanvasMetrics._y);if(0<a.getStyle("ShadowSize")&&null!=a.getStyle("ShadowColor")){this._primeShadow();this._compositeCtx.shadowBlur=a.getStyle("ShadowSize");this._compositeCtx.shadowColor=a.getStyle("ShadowColor");var g=a.getStyle("ShadowOffsetX"),k=a.getStyle("ShadowOffsetY"),f=Math.sqrt(g*g+k*k),g=360-a._rotateDegrees+CanvasElement.radiansToDegrees(Math.atan2(g,k));this._compositeCtx.shadowOffsetX=Math.sin(CanvasElement.degreesToRadians(g))*f;this._compositeCtx.shadowOffsetY=Math.cos(CanvasElement.degreesToRadians(g))*
f}this._compositeCtx.drawImage(c,0,0,a._compositeCanvasMetrics._width,a._compositeCanvasMetrics._height,a._x,a._y,a._compositeCanvasMetrics._width,a._compositeCanvasMetrics._height);this._compositeCtx.restore()}else if(1==b&&0<a.getStyle("ShadowSize")&&null!=a.getStyle("ShadowColor"))this._compositeCtx.save(),f=d.clone(),f.mergeReduce(this._redrawRegionMetrics),this._compositeCtx.beginPath(),this._compositeCtx.moveTo(f._x,f._y),this._compositeCtx.lineTo(f._x+f._width,f._y),this._compositeCtx.lineTo(f._x+
f._width,f._y+f._height),this._compositeCtx.lineTo(f._x,f._y+f._height),this._compositeCtx.closePath(),this._compositeCtx.clip(),this._primeShadow(),this._compositeCtx.shadowBlur=a.getStyle("ShadowSize"),this._compositeCtx.shadowColor=a.getStyle("ShadowColor"),this._compositeCtx.shadowOffsetX=a.getStyle("ShadowOffsetX"),this._compositeCtx.shadowOffsetY=a.getStyle("ShadowOffsetY"),f=e._x-(a._compositeVisibleMetrics._x-a._compositeCanvasMetrics._x),e=e._y-(a._compositeVisibleMetrics._y-a._compositeCanvasMetrics._y),
this._compositeCtx.drawImage(c,0,0,a._compositeCanvasMetrics._width,a._compositeCanvasMetrics._height,f,e,a._compositeCanvasMetrics._width,a._compositeCanvasMetrics._height),this._compositeCtx.restore();else{var m;d._x>=this._redrawRegionMetrics._x?(g=d._x-e._x,f=d._x,k=Math.min(d._width,this._redrawRegionMetrics._width-(d._x-this._redrawRegionMetrics._x))):(g=this._redrawRegionMetrics._x-e._x,f=this._redrawRegionMetrics._x,k=Math.min(this._redrawRegionMetrics._width,d._width-(this._redrawRegionMetrics._x-
d._x)));d._y>=this._redrawRegionMetrics._y?(m=d._y-e._y,e=d._y,d=Math.min(d._height,this._redrawRegionMetrics._height-(d._y-this._redrawRegionMetrics._y))):(m=this._redrawRegionMetrics._y-e._y,e=this._redrawRegionMetrics._y,d=Math.min(this._redrawRegionMetrics._height,d._height-(this._redrawRegionMetrics._y-d._y)));this._compositeCtx.drawImage(c,g,m,k,d,f,e,k,d)}if(0==b)for(b=0;b<a._children.length;b++)this._renderRedrawRegion(a._children[b])}};
CanvasElement.prototype._invalidateStyle=function(a){0==this._stylesInvalid&&(this._stylesInvalid=!0,null!=this._manager&&this._manager._updateStylesQueue.addNode(this._stylesValidateNode,this._displayDepth));this._stylesInvalidMap[a]=!0};CanvasElement.prototype._invalidateMeasure=function(){0==this._measureInvalid&&(this._measureInvalid=!0,null!=this._manager&&this._manager._updateMeasureQueue.addNode(this._measureValidateNode,this._displayDepth))};
CanvasElement.prototype._invalidateLayout=function(){0==this._layoutInvalid&&(this._layoutInvalid=!0,null!=this._manager&&this._manager._updateLayoutQueue.addNode(this._layoutValidateNode,this._displayDepth))};CanvasElement.prototype._invalidateRender=function(){0==this._renderInvalid&&(this._renderInvalid=!0,null!=this._manager&&this._manager._updateRenderQueue.addNode(this._renderValidateNode,this._displayDepth))};
CanvasElement.prototype._invalidateRedrawRegion=function(){null!=this._manager&&(this._manager._redrawRegionInvalid=!0)};CanvasElement.prototype._invalidateCompositeRender=function(){0==this._compositeRenderInvalid&&(this._compositeRenderInvalid=!0,null!=this._manager&&this._manager._compositeRenderQueue.addNode(this._compositeRenderValidateNode,this._displayDepth))};
CanvasElement.prototype._doStylesUpdated=function(a){null==this._parent||0!=this._parent._measureInvalid&&0!=this._parent._layoutInvalid||!("X"in a||"Y"in a||"Width"in a||"Height"in a||"PercentWidth"in a||"PercentHeight"in a||"MinWidth"in a||"MinHeight"in a||"MaxWidth"in a||"MaxHeight"in a||"Top"in a||"Left"in a||"Bottom"in a||"Right"in a||"HorizontalCenter"in a||"VerticalCenter"in a||"IncludeInLayout"in a||"RotateDegrees"in a||"RotateCenterX"in a||"RotateCenterY"in a)||(this._parent._invalidateMeasure(),
this._parent._invalidateLayout());if(0==this._measureInvalid||0==this._layoutInvalid)if("Padding"in a||"PaddingTop"in a||"PaddingBottom"in a||"PaddingLeft"in a||"PaddingRight"in a)this._invalidateMeasure(),this._invalidateLayout();("BorderThickness"in a||"BorderType"in a||"BorderColor"in a||"BackgroundColor"in a||"AutoGradientType"in a||"AutoGradientStart"in a||"AutoGradientStop"in a||1==this._renderFocusRing&&("FocusColor"in a||"FocusThickness"in a))&&this._invalidateRender();("Visible"in a||"ClipContent"in
a)&&this._invalidateRedrawRegion();if("Alpha"in a||"ShadowSize"in a)this._compositeEffectChanged=!0,this._invalidateRedrawRegion(),this._invalidateCompositeRender();if("BackgroundShape"in a){var b=this.getStyle("BackgroundShape");b!=this._backgroundShape&&(null!=this._backgroundShape&&this._backgroundShape.removeEventListener("stylechanged",this._onBackgroundShapeStyleChangedInstance),this._backgroundShape=b,null!=this._backgroundShape&&this._backgroundShape.addEventListener("stylechanged",this._onBackgroundShapeStyleChangedInstance),
this._invalidateRender())}"Cursor"in a&&(b=this.getStyle("Cursor"),null==b&&1==this.hasEventListener("rollover",this._onCanvasElementCursorOverOutInstance)?(this.removeEventListener("rollover",this._onCanvasElementCursorOverOutInstance),this.removeEventListener("rollout",this._onCanvasElementCursorOverOutInstance)):null!=b&&0==this.hasEventListener("rollover",this._onCanvasElementCursorOverOutInstance)&&(this.addEventListener("rollover",this._onCanvasElementCursorOverOutInstance),this.addEventListener("rollout",
this._onCanvasElementCursorOverOutInstance)),this._updateRolloverCursorDefinition());"Enabled"in a&&0==this.getStyle("Enabled")&&this._setRenderFocusRing(!1);if("Visible"in a||"MouseEnabled"in a)this._manager._rollOverInvalid=!0};
CanvasElement.prototype._updateRolloverCursorDefinition=function(){var a=this.getStyle("Cursor");null==this._rollOverCursorInstance||null!=a&&0!=this._mouseIsOver?1==this._mouseIsOver&&null!=a&&(null==this._rollOverCursorInstance?this._rollOverCursorInstance=this._manager.addCursor(a,0):this._rollOverCursorInstance.data!=a&&(this._manager.removeCursor(this._rollOverCursorInstance),this._rollOverCursorInstance=this._manager.addCursor(a,0))):(this._manager.removeCursor(this._rollOverCursorInstance),
this._rollOverCursorInstance=null)};CanvasElement.prototype._doMeasure=function(a,b){return{width:a,height:b}};CanvasElement.prototype._doLayout=function(a){};CanvasElement.prototype._doRender=function(){var a=this._getBorderMetrics();this._fillBackground(a);this._drawBorder(a)};CanvasElement.prototype._setListData=function(a,b){this._listData=a;this._itemData=b};CanvasElement.prototype._setListSelected=function(a){this._listSelected=a};
function TextFieldLineElement(){TextFieldLineElement.base.prototype.constructor.call(this);this._text="";this._highlightMaxIndex=this._highlightMinIndex=0;this._parentTextField=null;this._charMetricsEndIndex=this._charMetricsStartIndex=-1}TextFieldLineElement.prototype=Object.create(CanvasElement.prototype);TextFieldLineElement.prototype.constructor=TextFieldLineElement;TextFieldLineElement.base=CanvasElement;
TextFieldLineElement.prototype.setParentLineMetrics=function(a,b,c){this._parentTextField=a;this._charMetricsStartIndex=b;this._charMetricsEndIndex=c;a=a._text.substring(b,c);a!=this._text&&(this._text=a,this._invalidateRender())};
TextFieldLineElement.prototype.setParentSelection=function(a,b){var c=Math.min(a,b),d=Math.max(a,b);c<this._charMetricsStartIndex&&(c=this._charMetricsStartIndex);d>this._charMetricsEndIndex&&(d=this._charMetricsEndIndex);if(c>d||c==d)d=c=0;if(this._highlightMinIndex!=c||this._highlightMaxIndex!=d)this._highlightMinIndex=c,this._highlightMaxIndex=d,this._invalidateRender()};
TextFieldLineElement.prototype.getLineWidth=function(){return-1<this._charMetricsStartIndex&&-1<this._charMetricsEndIndex?this._parentTextField._charMetrics[this._charMetricsEndIndex].x-this._parentTextField._charMetrics[this._charMetricsStartIndex].x:0};
TextFieldLineElement.prototype._doStylesUpdated=function(a){TextFieldLineElement.base.prototype._doStylesUpdated.call(this,a);"TextStyle"in a||"TextFont"in a||"TextSize"in a||"TextColor"in a||"TextFillType"in a?this._invalidateRender():("TextHighlightedColor"in a||"TextHighlightedBackgroundColor"in a)&&this._highlightMinIndex!=this._highlightMaxIndex&&this._invalidateRender()};
TextFieldLineElement.prototype._doRender=function(){TextFieldLineElement.base.prototype._doRender.call(this);if(0!=this._text.length){var a=this._getPaddingMetrics(),b=this._getGraphicsCtx(),c=this.getStyle("TextFillType"),d=this.getStyle("TextColor"),e=this.getStyle("TextHighlightedColor"),f=this.getStyle("TextHighlightedBackgroundColor"),g=this._getFontString(),k=a.getX(),a=a.getY()+a.getHeight()/2;if(this._highlightMinIndex==this._highlightMaxIndex)"stroke"==c?CanvasElement._strokeText(b,this._text,
k,a,g,d,"middle"):CanvasElement._fillText(b,this._text,k,a,g,d,"middle");else for(var m=0;m<this._text.length;m++){var l=CanvasElement._measureText(this._text[m],g);this._highlightMinIndex<=m&&this._highlightMaxIndex>m?(b.fillStyle=f,b.beginPath(),b.moveTo(k,0),b.lineTo(k+l,0),b.lineTo(k+l,this._height),b.lineTo(k,this._height),b.closePath(),b.fill(),"stroke"==c?CanvasElement._strokeText(b,this._text[m],k,a,g,e,"middle"):CanvasElement._fillText(b,this._text[m],k,a,g,e,"middle")):"stroke"==c?CanvasElement._strokeText(b,
this._text[m],k,a,g,d,"middle"):CanvasElement._fillText(b,this._text[m],k,a,g,d,"middle");k+=l}}};
function TextFieldElement(){TextFieldElement.base.prototype.constructor.call(this);this._textCaret=null;this._caretIndex=this._textHighlightStartIndex=0;this._caretEnabled=!1;this._caretBlinkTime=0;this._caretBlinkVisible=!1;this._text="";this._spaceSpans=this._charMetrics=null;this._dragHighlightScrollCharacterDirection=this._dragHighlightScrollCharacterDuration=this._dragHighlightScrollCharacterTime=0;this._textLinesContainer=new CanvasElement;this._textLinesContainer.setStyle("ClipContent",!0);
this._addChild(this._textLinesContainer);var a=this;this._onTextFieldFocusEventInstance=function(b){"focusin"==b.getType()?a._onTextFieldFocusIn(b):a._onTextFieldFocusOut(b)};this._onTextFieldKeyDownInstance=function(b){a._onTextFieldKeyDown(b)};this._onTextFieldMouseEventInstance=function(b){"mousedown"==b.getType()?a._onTextFieldMouseDown(b):"mouseup"==b.getType()?a._onTextFieldMouseUp(b):"mousemoveex"==b.getType()&&a._onTextFieldCanvasMouseMoveEx(b)};this._onTextFieldEnterFrameInstance=function(b){a._onTextFieldEnterFrame(b)};
this._onTextFieldCopyPasteInstance=function(b){window.removeEventListener(b.type,a._onTextFieldCopyPasteInstance);try{return b.clipboardData&&("copy"==b.type?a._onTextFieldCopy(b.clipboardData):"paste"==b.type?a._onTextFieldPaste(b.clipboardData):a._onTextFieldCut(b.clipboardData)),b.preventDefault&&b.preventDefault(),!1}catch(c){}}}TextFieldElement.prototype=Object.create(CanvasElement.prototype);TextFieldElement.prototype.constructor=TextFieldElement;TextFieldElement.base=CanvasElement;
TextFieldElement._StyleTypes=Object.create(null);TextFieldElement._StyleTypes.Selectable={inheritable:!1};TextFieldElement._StyleTypes.MaxChars={inheritable:!1};TextFieldElement._StyleTypes.Multiline={inheritable:!1};TextFieldElement.StyleDefault=new StyleDefinition;TextFieldElement.StyleDefault.setStyle("Selectable",!1);TextFieldElement.StyleDefault.setStyle("MaxChars",0);TextFieldElement.StyleDefault.setStyle("Multiline",!1);TextFieldElement.StyleDefault.setStyle("Enabled",!1);
TextFieldElement.StyleDefault.setStyle("TabStop",0);TextFieldElement.StyleDefault.setStyle("Cursor","text");TextFieldElement.StyleDefault.setStyle("BorderType","none");TextFieldElement.StyleDefault.setStyle("Padding",0);TextFieldElement.StyleDefault.setStyle("PaddingTop",null);TextFieldElement.StyleDefault.setStyle("PaddingBottom",null);TextFieldElement.StyleDefault.setStyle("PaddingLeft",3);TextFieldElement.StyleDefault.setStyle("PaddingRight",2);
TextFieldElement.StyleDefault.setStyle("BackgroundColor",null);TextFieldElement.prototype.setText=function(a){null==a&&(a="");var b=this.getStyle("MaxChars");0<b&&a.length>b&&(a=a.substring(0,b));a!=this._text&&(this._text=a,this._charMetrics=null,this.setSelection(0,0),0<this._textLinesContainer._getNumChildren()&&0==this.getStyle("Multiline")&&this._textLinesContainer._getChildAt(0)._setActualPosition(0,0),this._invalidateMeasure(),this._invalidateLayout())};TextFieldElement.prototype.getText=function(){return this._text};
TextFieldElement.prototype.setSelection=function(a,b){0>a&&(a=0);a>this._text.length&&(a=this._text.length);0>b&&(b=0);b>this._text.length&&(b=this._text.length);if(a!=this._textHighlightStartIndex||b!=this._caretIndex)this._textHighlightStartIndex=a,this._caretIndex=b,1==this._caretEnabled&&a==b&&(this._caretBlinkVisible=!0,this._caretBlinkTime=Date.now()+800),this._updateEnterFrameListener(),this._updateCaretVisibility(),this._invalidateLayout()};
TextFieldElement.prototype.getSelection=function(){return{startIndex:this._textHighlightStartIndex,endIndex:this._caretIndex}};TextFieldElement.prototype._createTextCaret=function(){var a=new CanvasElement;a.setStyle("MouseEnabled",!1);a.setStyle("BackgroundColor","TextCaretColor");a.setStyle("AutoGradientStart",0);a.setStyle("AutoGradientStop",0);return a};
TextFieldElement.prototype._updateCaretVisibility=function(){1==this._caretEnabled&&1==this._caretBlinkVisible&&-1<this._caretIndex&&this._caretIndex<=this._text.length&&this._caretIndex==this._textHighlightStartIndex?(null==this._textCaret&&(this._textCaret=this._createTextCaret(),this._addChild(this._textCaret)),this._textCaret.setStyle("Visible",!0)):null!=this._textCaret&&this._textCaret.setStyle("Visible",!1)};
TextFieldElement.prototype._onTextFieldEnterFrame=function(a){a=Date.now();a>this._caretBlinkTime&&1==this._caretEnabled&&-1<this._caretIndex&&this._caretIndex<=this._text.length&&this._caretIndex==this._textHighlightStartIndex&&(this._caretBlinkTime=1==this._caretBlinkVisible?this._caretBlinkTime+400<a?a+400:this._caretBlinkTime+400:this._caretBlinkTime+800<a?a+800:this._caretBlinkTime+800,this._caretBlinkVisible=!this._caretBlinkVisible,this._updateCaretVisibility());if(a>this._dragHighlightScrollCharacterTime&&
0<this._dragHighlightScrollCharacterDuration&&(this._dragHighlightScrollCharacterTime+=this._dragHighlightScrollCharacterDuration,a=!1,"left"==this._dragHighlightScrollCharacterDirection&&0<this._caretIndex?(this.setSelection(this._textHighlightStartIndex,this._caretIndex-1),a=!0):"right"==this._dragHighlightScrollCharacterDirection&&this._caretIndex<this._text.length&&(this.setSelection(this._textHighlightStartIndex,this._caretIndex+1),a=!0),1==a)){a=this._textLinesContainer._width;var b=this._textLinesContainer._getChildAt(0),
c=this._charMetrics[this._caretIndex].x+b._x;1>c?b._setActualPosition(Math.min(0,-1*this._charMetrics[this._caretIndex].x+3),b._y):c>a-1&&b._setActualPosition(Math.max(a-b._width,-1*this._charMetrics[this._caretIndex].x+a-3),b._y)}};TextFieldElement.prototype._enableCaret=function(){1!=this._caretEnabled&&(this._caretEnabled=!0,this._updateEnterFrameListener(),this._updateCaretVisibility())};
TextFieldElement.prototype._disableCaret=function(){0!=this._caretEnabled&&(this._caretEnabled=!1,this._updateEnterFrameListener(),this._updateCaretVisibility())};TextFieldElement.prototype._onTextFieldFocusIn=function(a){1!=this._caretEnabled&&0!=this.getStyle("Enabled")&&(this._enableCaret(),this.setSelection(0,this._text.length))};TextFieldElement.prototype._onTextFieldFocusOut=function(a){this._disableCaret();this.setSelection(0,0)};
TextFieldElement.prototype._getCaretIndexFromMouse=function(a,b){if(null==this._charMetrics||0==this._charMetrics.length)return 0;var c=this._textLinesContainer._x,d=this._textLinesContainer._width;a+=2;for(var e=this._textLinesContainer._getChildAt(0),f,g,k=0,m=0;m<=this._text.length;m++)if(f=this._charMetrics[m].x+c+e._x,g=this._charMetrics[m].width,!(f<c)){if(f>c+d)break;k=m;if(a<=f+g/2)break}return k};
TextFieldElement.prototype._onTextFieldMouseDown=function(a){0==this.hasEventListener("mousemoveex",this._onTextFieldMouseEventInstance)&&this.addEventListener("mousemoveex",this._onTextFieldMouseEventInstance);a=this._getCaretIndexFromMouse(a.getX(),a.getY());1==this.getStyle("Enabled")&&this._enableCaret();this.setSelection(a,a)};
TextFieldElement.prototype._onTextFieldMouseUp=function(a){1==this.hasEventListener("mousemoveex",this._onTextFieldMouseEventInstance)&&this.removeEventListener("mousemoveex",this._onTextFieldMouseEventInstance);this._dragHighlightScrollCharacterDuration=0;this._updateEnterFrameListener()};
TextFieldElement.prototype._onTextFieldCanvasMouseMoveEx=function(a){a={x:a.getX(),y:a.getY()};this.translatePointFrom(a,this._manager);var b=this._textLinesContainer._x,c=this._textLinesContainer._width,d=0,e=this._getCaretIndexFromMouse(a.x,a.y);e==this._caretIndex?a.x<=b+2&&0<this._caretIndex?(a=3*Math.abs(b+2-a.x),d=Math.max(20,120-a),0==this._dragHighlightScrollCharacterDuration&&(this._dragHighlightScrollCharacterTime=Date.now()+d),this._dragHighlightScrollCharacterDirection="left"):a.x>=b+
c-2&&this._caretIndex<this._text.length&&(a=3*Math.abs(b+c-2-a.x),d=Math.max(20,120-a),0==this._dragHighlightScrollCharacterDuration&&(this._dragHighlightScrollCharacterTime=Date.now()+d),this._dragHighlightScrollCharacterDirection="right"):this.setSelection(this._textHighlightStartIndex,e);this._dragHighlightScrollCharacterDuration=d;this._updateEnterFrameListener()};
TextFieldElement.prototype._updateCharXPositions=function(a){if(null!=this._charMetrics&&0!=this._charMetrics.length&&!(a>this._charMetrics.length-2)){0>a&&(a=0,this._charMetrics[0].x=0);var b=this._charMetrics[a].x+this._charMetrics[a].width;for(a+=1;a<this._charMetrics.length;a++)this._charMetrics[a].x=b,b+=this._charMetrics[a].width}};
TextFieldElement.prototype._deleteHighlightChars=function(){if(this._textHighlightStartIndex!=this._caretIndex){var a=Math.min(this._caretIndex,this._textHighlightStartIndex),b=Math.max(this._caretIndex,this._textHighlightStartIndex);this._charMetrics.splice(a,b-a);this._updateCharXPositions(a-1);var c=this._text.substring(0,a),b=this._text.substring(b);this._text=c+b;this.setSelection(a,a)}};
TextFieldElement.prototype._onTextFieldKeyDown=function(a){if(1!=a.getDefaultPrevented()){var b=this.getStyle("Enabled"),c=a.getKey(),d=!1;if("c"==c&&1==a.getCtrl())this._textHighlightStartIndex==this._caretIndex?a.preventDefault():window.clipboardData?(this._onTextFieldCopy(window.clipboardData),a.preventDefault()):(window.addEventListener("copy",this._onTextFieldCopyPasteInstance),this._invalidateLayout());else{if("ArrowLeft"==c)1!=a.getShift()||this._textHighlightStartIndex==this._caretIndex&&
1!=b?1==b&&(this._textHighlightStartIndex!=this._caretIndex?this.setSelection(Math.min(this._caretIndex,this._textHighlightStartIndex),Math.min(this._caretIndex,this._textHighlightStartIndex)):this.setSelection(this._caretIndex-1,this._caretIndex-1)):this.setSelection(this._textHighlightStartIndex,this._caretIndex-1);else if("ArrowRight"==c)1!=a.getShift()||this._textHighlightStartIndex==this._caretIndex&&1!=b?1==b&&(this._textHighlightStartIndex!=this._caretIndex?this.setSelection(Math.max(this._caretIndex,
this._textHighlightStartIndex),Math.max(this._caretIndex,this._textHighlightStartIndex)):this.setSelection(this._caretIndex+1,this._caretIndex+1)):this.setSelection(this._textHighlightStartIndex,this._caretIndex+1);else if("End"==c)1!=a.getShift()||this._textHighlightStartIndex==this._caretIndex&&1!=b?1==b&&this.setSelection(this._text.length,this._text.length):this.setSelection(this._textHighlightStartIndex,this._text.length);else if("Home"==c)1!=a.getShift()||this._textHighlightStartIndex==this._caretIndex&&
1!=b?1==b&&this.setSelection(0,0):this.setSelection(this._textHighlightStartIndex,0);else{if(0==b)return;if("Backspace"==c){if(this._textHighlightStartIndex!=this._caretIndex)this._deleteHighlightChars();else{if(0==this._text.length||0==this._caretIndex){a.preventDefault();return}this._charMetrics.splice(this._caretIndex-1,1);this._updateCharXPositions(this._caretIndex-2);b=this._text.substring(0,this._caretIndex-1);d=this._text.substring(this._caretIndex);this._text=b+d;this.setSelection(this._caretIndex-
1,this._caretIndex-1)}d=!0}else if("Delete"==c){if(this._textHighlightStartIndex!=this._caretIndex)this._deleteHighlightChars();else{if(0==this._text.length||this._caretIndex==this._text.length){a.preventDefault();return}this._charMetrics.splice(this._caretIndex,1);this._updateCharXPositions(this._caretIndex-1);b=this._text.substring(0,this._caretIndex);d=this._text.substring(this._caretIndex+1);this._text=b+d}d=!0}else{if("v"==c&&1==a.getCtrl()){window.clipboardData?(this._onTextFieldPaste(window.clipboardData),
a.preventDefault()):(window.addEventListener("paste",this._onTextFieldCopyPasteInstance),this._invalidateLayout());return}if("x"==c&&1==a.getCtrl()){if(this._textHighlightStartIndex==this._caretIndex){a.preventDefault();return}window.clipboardData?(this._onTextFieldCut(window.clipboardData),a.preventDefault()):(window.addEventListener("cut",this._onTextFieldCopyPasteInstance),this._invalidateLayout());return}if(1==c.length){this._deleteHighlightChars();b=this.getStyle("MaxChars");if(0<b&&b<=this._text.length){a.preventDefault();
return}b={x:0,width:CanvasElement._measureText(c,this._getFontString())};this._charMetrics.splice(this._caretIndex,0,b);this._updateCharXPositions(this._caretIndex-1);b=this._text.substring(0,this._caretIndex);d=this._text.substring(this._caretIndex);this._text=b+c+d;this.setSelection(this._caretIndex+1,this._caretIndex+1);d=!0}else return}}this._scrollIfCaretOutOfBounds();this._invalidateLayout();1==d&&this._dispatchEvent(new ElementEvent("changed",!1));a.preventDefault()}}};
TextFieldElement.prototype._scrollIfCaretOutOfBounds=function(){var a=this._textLinesContainer._getChildAt(0),b=this._textLinesContainer._width,c=Math.min(Math.floor(.3*b),35),d=this._charMetrics[this._caretIndex].x+a._x;2>d?a._setActualPosition(-1*this._charMetrics[this._caretIndex].x+c,a._y):d>b-2&&a._setActualPosition(-1*this._charMetrics[this._caretIndex].x+b-c,a._y)};
TextFieldElement.prototype._onTextFieldCopy=function(a){var b=this._text.substring(Math.min(this._caretIndex,this._textHighlightStartIndex),Math.max(this._caretIndex,this._textHighlightStartIndex));a.setData("Text",b)};
TextFieldElement.prototype._onTextFieldPaste=function(a){a=a.getData("Text");if(null!=a&&0!=a.length){var b=this.getStyle("MaxChars");if(!(0<b&&this._text.length>=b&&this._caretIndex>=b)){this._deleteHighlightChars();for(var c=this._getFontString(),d=0;d<a.length;d++)this._charMetrics.splice(this._caretIndex+d,0,{x:0,width:CanvasElement._measureText(a[d],c)});this._updateCharXPositions(this._caretIndex-1);c=this._text.substring(0,this._caretIndex);d=this._text.substring(this._caretIndex);this._text=
c+a+d;this.setSelection(this._caretIndex+a.length,this._caretIndex+a.length);0<b&&this._text.length>b&&(this._text=this._text.subString(0,b),this._charMetrics.splice(0,this._text.length-b),this.setSelection(this._text.length,this._text.length));this._scrollIfCaretOutOfBounds();this._invalidateLayout();this._dispatchEvent(new ElementEvent("changed",!1))}}};
TextFieldElement.prototype._onTextFieldCut=function(a){var b=this._text.substring(Math.min(this._caretIndex,this._textHighlightStartIndex),Math.max(this._caretIndex,this._textHighlightStartIndex));a.setData("Text",b);this._deleteHighlightChars();this._scrollIfCaretOutOfBounds();this._invalidateLayout();this._dispatchEvent(new ElementEvent("changed",!1))};
TextFieldElement.prototype._onCanvasElementRemoved=function(a){TextFieldElement.base.prototype._onCanvasElementRemoved.call(this,a);this._disableCaret();1==this.hasEventListener("mousemoveex",this._onTextFieldMouseEventInstance)&&this.removeEventListener("mousemoveex",this._onTextFieldMouseEventInstance);1==this.hasEventListener("enterframe",this._onTextFieldEnterFrameInstance)&&this.removeEventListener("enterframe",this._onTextFieldEnterFrameInstance)};
TextFieldElement.prototype._updateEnterFrameListener=function(){0<this._dragHighlightScrollCharacterDuration||1==this._caretEnabled&&this._textHighlightStartIndex==this._caretIndex?0==this.hasEventListener("enterframe",this._onTextFieldEnterFrameInstance)&&this.addEventListener("enterframe",this._onTextFieldEnterFrameInstance):1==this.hasEventListener("enterframe",this._onTextFieldEnterFrameInstance)&&this.removeEventListener("enterframe",this._onTextFieldEnterFrameInstance)};
TextFieldElement.prototype._updateEventListeners=function(){var a=this.getStyle("Enabled");1==this.getStyle("Selectable")||1==a?(0==this.hasEventListener("keydown",this._onTextFieldKeyDownInstance)&&this.addEventListener("keydown",this._onTextFieldKeyDownInstance),0==this.hasEventListener("mousedown",this._onTextFieldMouseEventInstance)&&this.addEventListener("mousedown",this._onTextFieldMouseEventInstance),0==this.hasEventListener("mouseup",this._onTextFieldMouseEventInstance)&&this.addEventListener("mouseup",
this._onTextFieldMouseEventInstance),0==this.hasEventListener("focusin",this._onTextFieldFocusEventInstance)&&this.addEventListener("focusin",this._onTextFieldFocusEventInstance),0==this.hasEventListener("focusout",this._onTextFieldFocusEventInstance)&&this.addEventListener("focusout",this._onTextFieldFocusEventInstance)):(1==this.hasEventListener("keydown",this._onTextFieldKeyDownInstance)&&this.removeEventListener("keydown",this._onTextFieldKeyDownInstance),1==this.hasEventListener("mousedown",
this._onTextFieldMouseEventInstance)&&this.removeEventListener("mousedown",this._onTextFieldMouseEventInstance),1==this.hasEventListener("mouseup",this._onTextFieldMouseEventInstance)&&this.removeEventListener("mouseup",this._onTextFieldMouseEventInstance),1==this.hasEventListener("focusin",this._onTextFieldFocusEventInstance)&&this.removeEventListener("focusin",this._onTextFieldFocusEventInstance),1==this.hasEventListener("focusout",this._onTextFieldFocusEventInstance)&&this.removeEventListener("focusout",
this._onTextFieldFocusEventInstance));0==a&&this._disableCaret()};
TextFieldElement.prototype._doStylesUpdated=function(a){TextFieldElement.base.prototype._doStylesUpdated.call(this,a);"TextStyle"in a||"TextFont"in a||"TextSize"in a?(this._charMetrics=null,this._invalidateMeasure(),this._invalidateLayout()):"Multiline"in a||"TextLinePaddingTop"in a||"TextLinePaddingBottom"in a?(this._invalidateMeasure(),this._invalidateLayout()):("TextAlign"in a||"TextBaseline"in a||"TextLineSpacing"in a)&&this._invalidateLayout();"MaxChars"in a&&this.setText(this._text);"TextCaretColor"in
a&&null!=this._textCaret&&this._textCaret.setStyle("BackgroundColor",this.getStyle("TextCaretColor"));("Enabled"in a||"Selectable"in a)&&this._updateEventListeners();this._updateEnterFrameListener();this._updateCaretVisibility()};
TextFieldElement.prototype._createCharMetrics=function(){if(null==this._charMetrics){var a=0,b;this._charMetrics=[];this._spaceSpans=[];var c=null;if(0<this._text.length)for(var d=this._getFontString(),e=0;e<this._text.length;e++)b=CanvasElement._measureText(this._text[e],d),this._charMetrics.push({x:a,width:b})," "==this._text[e]?null==c?c={start:e,end:e,type:"space"}:c.end=e:null!=c&&(this._spaceSpans.push(c),c=null),"\n"==this._text[e]&&this._spaceSpans.push({start:e,end:e,type:"nline"}),a+=b;
null!=c&&this._spaceSpans.push(c);this._charMetrics.push({x:a,width:0});this._invalidateLayout()}};TextFieldElement.prototype._doMeasure=function(a,b){this._createCharMetrics();var c={width:0,height:0},d=this._charMetrics[this._text.length].x,e=this.getStyle("TextLinePaddingTop"),f=this.getStyle("TextLinePaddingBottom"),g=this.getStyle("TextSize");c.width=1+d+a;c.height=g+e+f+b;1==this.getStyle("Multiline")&&this._invalidateLayout();return c};
TextFieldElement.prototype._doLayout=function(a){TextFieldElement.base.prototype._doLayout.call(this,a);var b=a.getX(),c=a.getY(),d=a.getWidth(),e=a.getHeight();a=d-1;this._textLinesContainer._setActualPosition(b,c);this._textLinesContainer._setActualSize(a,e);for(var f=this.getStyle("Multiline"),g=this.getStyle("TextAlign"),k=this.getStyle("TextBaseline"),m=this.getStyle("TextSize"),l=this.getStyle("TextLineSpacing"),p=this.getStyle("TextLinePaddingTop"),q=this.getStyle("TextLinePaddingBottom"),
m=m+p+q,n=0,r=0,v,t,u=[],y=0,z;r<this._charMetrics.length;){t={charMetricsStartIndex:-1,charMetricsEndIndex:-1};if(0==f)t.charMetricsStartIndex=0,t.charMetricsEndIndex=this._charMetrics.length-1,y=0,r=this._charMetrics.length;else{t.charMetricsStartIndex=r;z=!1;for(var x=n;x<this._spaceSpans.length;x++)if(v="left"==g?this._spaceSpans[x].end:this._spaceSpans[x].start,this._charMetrics[v].x-this._charMetrics[t.charMetricsStartIndex].x<=a||-1==t.charMetricsEndIndex){if(t.charMetricsEndIndex=v,n++,r=
v+1,"nline"==this._spaceSpans[x].type){z=!0;break}}else break;if(-1==t.charMetricsEndIndex||this._charMetrics[this._charMetrics.length-1].x-this._charMetrics[t.charMetricsStartIndex].x<=a&&0==z)t.charMetricsEndIndex=this._charMetrics.length-1,r=this._charMetrics.length}u.push(t)}x=u.length*m+(u.length-1)*l;1==f&&this._setMeasuredSize(this._width,x+this._getPaddingSize().height);k="top"==k?0:"bottom"==k?e-x:Math.round(e/2-x/2);n=Math.max(u.length,this._textLinesContainer._getNumChildren());for(x=0;x<
n;x++)null==u[x]?this._textLinesContainer._removeChildAt(x):(e=this._textLinesContainer._getChildAt(x),null==e&&(e=new TextFieldLineElement,this._textLinesContainer._addChild(e)),e.setParentLineMetrics(this,u[x].charMetricsStartIndex,u[x].charMetricsEndIndex),e.setParentSelection(this._textHighlightStartIndex,this._caretIndex),e.setStyle("PaddingTop",p),e.setStyle("PaddingBottom",q),r=e.getLineWidth(),e._setActualSize(r,m),r=r<a||1==f?"right"==g?a-r:"center"==g?Math.round(a/2-r/2):0:0<e._x?0:e._x+
r<a?a-r:e._x,e._setActualPosition(r,k),k+=m+l);null!=this._textCaret&&(0>this._caretIndex||this._caretIndex>this._text.length?this._textCaret._setActualSize(0,m):(e=this._textLinesContainer._getChildAt(y),a=this._charMetrics[this._caretIndex].x+e._x+b,a>=b&&a<=b+d-1?(this._textCaret._setActualPosition(a,e._y+c),this._textCaret._setActualSize(1,m)):this._textCaret._setActualSize(0,m)));window.removeEventListener("copy",this._onTextFieldCopyPasteInstance);window.removeEventListener("paste",this._onTextFieldCopyPasteInstance);
window.removeEventListener("cut",this._onTextFieldCopyPasteInstance)};function TextElement(){TextElement.base.prototype.constructor.call(this);this._textField=new TextFieldElement;this._textField.setStyle("Multiline",!0);this._textField.setStyle("Cursor",null);this._textField.setStyle("TabStop",-1);this._addChild(this._textField)}TextElement.prototype=Object.create(CanvasElement.prototype);TextElement.prototype.constructor=TextElement;TextElement.base=CanvasElement;TextElement._StyleTypes=Object.create(null);
TextElement._StyleTypes.Text={inheritable:!1};TextElement._StyleTypes.Selectable={inheritable:!1};TextElement.StyleDefault=new StyleDefinition;TextElement.StyleDefault.setStyle("PaddingTop",2);TextElement.StyleDefault.setStyle("PaddingBottom",2);TextElement.StyleDefault.setStyle("PaddingLeft",2);TextElement.StyleDefault.setStyle("PaddingRight",2);TextElement.StyleDefault.setStyle("Text",null);TextElement.StyleDefault.setStyle("Selectable",!1);
TextElement.prototype._doStylesUpdated=function(a){TextElement.base.prototype._doStylesUpdated.call(this,a);"Text"in a&&this._textField.setText(this.getStyle("Text"));"Selectable"in a&&this._textField.setStyle("Selectable",this.getStyle("Selectable"));"Padding"in a&&this._textField.setStyle("Padding",this.getStyle("Padding"));"PaddingTop"in a&&this._textField.setStyle("PaddingTop",this.getStyle("PaddingTop"));"PaddingBottom"in a&&this._textField.setStyle("PaddingBottom",this.getStyle("PaddingBottom"));
"PaddingLeft"in a&&this._textField.setStyle("PaddingLeft",this.getStyle("PaddingLeft"));"PaddingRight"in a&&this._textField.setStyle("PaddingRight",this.getStyle("PaddingRight"))};TextElement.prototype._doMeasure=function(a,b){return{width:this._textField._measuredWidth,height:this._textField._measuredHeight}};TextElement.prototype._doLayout=function(a){TextElement.base.prototype._doLayout.call(this,a);this._textField._setActualPosition(0,0);this._textField._setActualSize(this._width,this._height)};
function ScrollButtonSkinElement(){ScrollButtonSkinElement.base.prototype.constructor.call(this)}ScrollButtonSkinElement.prototype=Object.create(CanvasElement.prototype);ScrollButtonSkinElement.prototype.constructor=ScrollButtonSkinElement;ScrollButtonSkinElement.base=CanvasElement;ScrollButtonSkinElement._StyleTypes=Object.create(null);ScrollButtonSkinElement._StyleTypes.ArrowColor={inheritable:!1};ScrollButtonSkinElement._StyleTypes.ArrowDirection={inheritable:!1};
ScrollButtonSkinElement.StyleDefault=new StyleDefinition;ScrollButtonSkinElement.StyleDefault.setStyle("ArrowColor","#000000");ScrollButtonSkinElement.StyleDefault.setStyle("ArrowDirection","up");ScrollButtonSkinElement.prototype._doStylesUpdated=function(a){ScrollButtonSkinElement.base.prototype._doStylesUpdated.call(this,a);("ArrowColor"in a||"ArrowDirection"in a)&&this._invalidateRender()};
ScrollButtonSkinElement.prototype._doRender=function(){ScrollButtonSkinElement.base.prototype._doRender.call(this);var a=this._getGraphicsCtx(),b=this.getStyle("ArrowDirection"),c=this.getStyle("ArrowColor"),d=this._getBorderThickness(),e=this._width-2*d,f=this._height-2*d;a.beginPath();"up"==b?(a.moveTo(d+e/2,d+.35*f),a.lineTo(d+.8*e,d+.65*f),a.lineTo(d+.2*e,d+.65*f)):"down"==b?(a.moveTo(d+e/2,d+.65*f),a.lineTo(d+.8*e,d+.35*f),a.lineTo(d+.2*e,d+.35*f)):"left"==b?(a.moveTo(d+.35*e,d+f/2),a.lineTo(d+
.65*e,d+.2*f),a.lineTo(d+.65*e,d+.8*f)):"right"==b&&(a.moveTo(d+.65*e,d+f/2),a.lineTo(d+.35*e,d+.2*f),a.lineTo(d+.35*e,d+.8*f));a.closePath();a.fillStyle=c;a.fill()};function RadioButtonSkinElement(){RadioButtonSkinElement.base.prototype.constructor.call(this)}RadioButtonSkinElement.prototype=Object.create(CanvasElement.prototype);RadioButtonSkinElement.prototype.constructor=RadioButtonSkinElement;RadioButtonSkinElement.base=CanvasElement;RadioButtonSkinElement._StyleTypes=Object.create(null);
RadioButtonSkinElement._StyleTypes.CheckColor={inheritable:!1};RadioButtonSkinElement._StyleTypes.CheckSize={inheritable:!1};RadioButtonSkinElement.StyleDefault=new StyleDefinition;RadioButtonSkinElement.StyleDefault.setStyle("CheckColor","#000000");RadioButtonSkinElement.StyleDefault.setStyle("CheckSize",.35);RadioButtonSkinElement.prototype._doStylesUpdated=function(a){RadioButtonSkinElement.base.prototype._doStylesUpdated.call(this,a);("SkinState"in a||"CheckColor"in a)&&this._invalidateRender()};
RadioButtonSkinElement.prototype._doMeasure=function(a,b){return{width:14,height:14}};
RadioButtonSkinElement.prototype._doRender=function(){RadioButtonSkinElement.base.prototype._doRender.call(this);if(0==this.getStyle("SkinState").indexOf("selected")){var a=this._getGraphicsCtx(),b=this.getStyle("CheckSize"),c=new DrawMetrics;c._width=this._width*b;c._height=this._height*b;c._x=(this._width-c._width)/2;c._y=(this._height-c._height)/2;0>=c._width||0>=c._height||(a.beginPath(),this._drawBackgroundShape(a,c),a.fillStyle=this.getStyle("CheckColor"),a.fill())}};
function DropdownArrowButtonSkinElement(){DropdownArrowButtonSkinElement.base.prototype.constructor.call(this)}DropdownArrowButtonSkinElement.prototype=Object.create(CanvasElement.prototype);DropdownArrowButtonSkinElement.prototype.constructor=DropdownArrowButtonSkinElement;DropdownArrowButtonSkinElement.base=CanvasElement;DropdownArrowButtonSkinElement._StyleTypes=Object.create(null);DropdownArrowButtonSkinElement._StyleTypes.ArrowColor={inheritable:!1};
DropdownArrowButtonSkinElement._StyleTypes.LineColor={inheritable:!1};DropdownArrowButtonSkinElement.StyleDefault=new StyleDefinition;DropdownArrowButtonSkinElement.StyleDefault.setStyle("ArrowColor","#000000");DropdownArrowButtonSkinElement.StyleDefault.setStyle("LineColor","#000000");DropdownArrowButtonSkinElement.prototype._doStylesUpdated=function(a){DropdownArrowButtonSkinElement.base.prototype._doStylesUpdated.call(this,a);("ArrowColor"in a||"LineColor"in a)&&this._invalidateRender()};
DropdownArrowButtonSkinElement.prototype._doRender=function(){DropdownArrowButtonSkinElement.base.prototype._doRender.call(this);var a=this._getGraphicsCtx(),b=this._getPaddingMetrics(),c=this.getStyle("LineColor"),d=this.getStyle("ArrowColor"),e=b.getX(),f=b.getY(),g=b.getWidth(),b=b.getHeight();a.beginPath();a.moveTo(e+g/2,f+.6*b);a.lineTo(e+.7*g,f+.4*b);a.lineTo(e+.3*g,f+.4*b);a.closePath();a.fillStyle=d;a.fill();d=.65*b;a.beginPath();a.moveTo(e,f+b/2-d/2);a.lineTo(e,f+b/2+d/2);a.lineTo(e+1,f+
b/2+d/2);a.lineTo(e+1,f+b/2-d/2);a.closePath();a.fillStyle=c;a.fill()};function DataGridHeaderColumnDividerSkinElement(){DataGridHeaderColumnDividerSkinElement.base.prototype.constructor.call(this)}DataGridHeaderColumnDividerSkinElement.prototype=Object.create(CanvasElement.prototype);DataGridHeaderColumnDividerSkinElement.prototype.constructor=DataGridHeaderColumnDividerSkinElement;DataGridHeaderColumnDividerSkinElement.base=CanvasElement;DataGridHeaderColumnDividerSkinElement._StyleTypes=Object.create(null);
DataGridHeaderColumnDividerSkinElement._StyleTypes.DividerLineColor={inheritable:!1};DataGridHeaderColumnDividerSkinElement._StyleTypes.DividerArrowColor={inheritable:!1};DataGridHeaderColumnDividerSkinElement.StyleDefault=new StyleDefinition;DataGridHeaderColumnDividerSkinElement.StyleDefault.setStyle("DividerLineColor","#777777");DataGridHeaderColumnDividerSkinElement.StyleDefault.setStyle("DividerArrowColor","#444444");
DataGridHeaderColumnDividerSkinElement.prototype._doStylesUpdated=function(a){DataGridHeaderColumnDividerSkinElement.base.prototype._doStylesUpdated.call(this,a);("DividerLineColor"in a||"DividerArrowColor"in a)&&this._invalidateRender()};
DataGridHeaderColumnDividerSkinElement.prototype._doRender=function(){DataGridHeaderColumnDividerSkinElement.base.prototype._doRender.call(this);var a=this._getGraphicsCtx(),b=this.getStyle("DividerLineColor"),c=this.getStyle("DividerArrowColor"),d=this.getStyle("SkinState"),e=this._width,f=this._height;a.beginPath();a.moveTo(0+e/2-.5,0);a.lineTo(0+e/2-.5,0+f);a.lineTo(e/2+.5,0+f);a.lineTo(e/2+.5,0);a.closePath();a.fillStyle=b;a.fill();if("over"==d||"down"==d)b=f/2,a.fillStyle=c,a.beginPath(),a.moveTo(0+
e/2-.5-1,f/2-b/2),a.lineTo(0+e/2-.5-1,f/2+b/2),a.lineTo(0,0+f/2),a.closePath(),a.fill(),a.beginPath(),a.moveTo(e/2+1.5,f/2-b/2),a.lineTo(e/2+1.5,f/2+b/2),a.lineTo(0+e,0+f/2),a.closePath(),a.fill()};function CheckboxSkinElement(){CheckboxSkinElement.base.prototype.constructor.call(this)}CheckboxSkinElement.prototype=Object.create(CanvasElement.prototype);CheckboxSkinElement.prototype.constructor=CheckboxSkinElement;CheckboxSkinElement.base=CanvasElement;CheckboxSkinElement._StyleTypes=Object.create(null);
CheckboxSkinElement._StyleTypes.CheckColor={inheritable:!1};CheckboxSkinElement.StyleDefault=new StyleDefinition;CheckboxSkinElement.StyleDefault.setStyle("CheckColor","#000000");CheckboxSkinElement.prototype._doStylesUpdated=function(a){CheckboxSkinElement.base.prototype._doStylesUpdated.call(this,a);("SkinState"in a||"CheckColor"in a)&&this._invalidateRender()};CheckboxSkinElement.prototype._doMeasure=function(a,b){return{width:14,height:14}};
CheckboxSkinElement.prototype._doRender=function(){CheckboxSkinElement.base.prototype._doRender.call(this);var a=this.getStyle("SkinState");if(0==a.indexOf("selected")||0==a.indexOf("half")){var b=this._getGraphicsCtx(),c=this._getBorderThickness(),d=this.getStyle("CheckColor"),e=this._width-2*c,f=this._height-2*c;0==a.indexOf("selected")?(b.beginPath(),b.moveTo(c+.1*e,c+.6*f),b.lineTo(c+.4*e,c+.9*f),b.lineTo(c+.9*e,c+.26*f),b.lineTo(c+.78*e,c+.1*f),b.lineTo(c+.38*e,c+.65*f),b.lineTo(c+.2*e,c+.45*
f)):(b.beginPath(),b.moveTo(c+.12*e,c+.42*f),b.lineTo(c+.12*e,c+.58*f),b.lineTo(c+.88*e,c+.58*f),b.lineTo(c+.88*e,c+.42*f));b.closePath();b.fillStyle=d;b.fill()}};function SkinnableElement(){SkinnableElement.base.prototype.constructor.call(this);this._skins=Object.create(null);this._currentSkin=null;this._currentSkinState=""}SkinnableElement.prototype=Object.create(CanvasElement.prototype);SkinnableElement.prototype.constructor=SkinnableElement;SkinnableElement.base=CanvasElement;
SkinnableElement._SkinProxyMap=Object.create(null);SkinnableElement._SkinProxyMap.BorderType=!0;SkinnableElement._SkinProxyMap.BorderColor=!0;SkinnableElement._SkinProxyMap.BorderThickness=!0;SkinnableElement._SkinProxyMap.BackgroundColor=!0;SkinnableElement._SkinProxyMap.AutoGradientType=!0;SkinnableElement._SkinProxyMap.AutoGradientStart=!0;SkinnableElement._SkinProxyMap.AutoGradientStop=!0;SkinnableElement._SkinProxyMap.BackgroundShape=!0;SkinnableElement._SkinProxyMap._Arbitrary=!0;
SkinnableElement.prototype._getSkinClass=function(a){return null};SkinnableElement.prototype._getSkinStyleDefinitions=function(a){return[]};SkinnableElement.prototype._getSkinStyleDefinitionDefault=function(a){return null};SkinnableElement.prototype._getSkinStyleProxyMap=function(){return SkinnableElement._SkinProxyMap};
SkinnableElement.prototype._updateSkinStyleDefinitions=function(a){var b=this._skins[a];if(null!=b){var c=this._getSkinStyleDefinitions(a);for(a=c.length-1;0<=a;a--)-1==b._styleDefinitions.indexOf(c[a])&&c[a]!=b._styleDefinitionDefault||c.splice(a,1);if(c.length==b._styleDefinitions.length){var d=!1;for(a=0;a<c.length;a++)if(c[a]!=b._styleDefinitions[a]){d=!0;break}if(0==d)return}if(null!=b._manager){for(var d=null,e=Object.create(null),f;0<b._styleDefinitions.length;)for(d in f=b._styleDefinitions.splice(b._styleDefinitions.length-
1,1)[0],f.removeEventListener("stylechanged",b._onExternalStyleChangedInstance),styleDefininition._styleMap)e[d]=!0;for(a=0;a<c.length;a++)for(d in f=c[a],b._styleDefinitions.push(f),f.addEventListener("stylechanged",b._onExternalStyleChangedInstance),styleDefininition._styleMap)e[d]=!0;for(d in e)b._onExternalStyleChanged(new StyleChangedEvent(d))}else for(b._styleDefinitions.splice(0,b._styleDefinitions.length),a=0;a<c.length;a++)b._styleDefinitions.push(c[a])}};
SkinnableElement.prototype._updateSkinClass=function(a){if(null!=this._skins[a]||a==this._currentSkinState){var b=this._getSkinClass(a),c=null;null!=this._skins[a]&&(c=this._skins[a].constructor);b!=c&&(null!=this._skins[a]&&(this._removeChild(this._skins[a]),this._skins[a]=null),this._currentSkinState==a&&(this._currentSkin=a=this._createSkin(a),null!=a&&a.setStyle("Visible",!0)))}};
SkinnableElement.prototype._createSkin=function(a){var b=this._getSkinClass(a);if(null==b)return this._skins[a]=null;b=new b;this._skins[a]=b;b._setStyleDefinitionDefault(this._getSkinStyleDefinitionDefault(a));b._setStyleProxy(new StyleProxy(this,this._getSkinStyleProxyMap()));b.setStyle("MouseEnabled",!1);b.setStyle("SkinState",a);this._updateSkinStyleDefinitions(a);this._addChildAt(b,0);return b};
SkinnableElement.prototype._changeState=function(a){if(this._currentSkinState==a||""==a||null==a)return!1;this._currentSkinState=a;var b=!1,c;for(c in this._skins)null!=this._skins[c]&&(c==a?(this._currentSkin=this._skins[c],this._skins[c].setStyle("Visible",!0),b=!0):this._skins[c].setStyle("Visible",!1));0==b&&(this._currentSkin=this._createSkin(a),null!=this._currentSkin&&this._currentSkin.setStyle("Visible",!0));return!0};
SkinnableElement.prototype._doStylesUpdated=function(a){SkinnableElement.base.prototype._doStylesUpdated.call(this,a);"SkinState"in a&&this._changeState(this.getStyle("SkinState"))};SkinnableElement.prototype._doLayout=function(a){SkinnableElement.base.prototype._doLayout.call(this,a);for(var b in this._skins)null!=this._skins[b]&&(this._skins[b]._setActualSize(this._width,this._height),this._skins[b]._setActualPosition(0,0))};SkinnableElement.prototype._doRender=function(){};
function TextInputElement(){TextInputElement.base.prototype.constructor.call(this);this._textField=new TextFieldElement;this._textField.setStyle("Selectable",!0);this._textField.setStyle("Cursor",null);this._textField.setStyle("TabStop",-1);this._addChild(this._textField);var a=this;this._onTextInputFocusEventInstance=function(b){"focusin"==b.getType()?a._onTextInputFocusIn(b):a._onTextInputFocusOut(b)};this._onTextInputKeyDownInstance=function(b){a._onTextInputKeyDown(b)};this._onTextInputTextFieldChangedInstance=
function(b){a._onTextInputTextFieldChanged(b)};this.addEventListener("focusin",this._onTextInputFocusEventInstance);this.addEventListener("focusout",this._onTextInputFocusEventInstance)}TextInputElement.prototype=Object.create(SkinnableElement.prototype);TextInputElement.prototype.constructor=TextInputElement;TextInputElement.base=SkinnableElement;TextInputElement._StyleTypes=Object.create(null);TextInputElement._StyleTypes.MaxChars={inheritable:!1};TextInputElement._StyleTypes.SkinClass={inheritable:!1};
TextInputElement._StyleTypes.UpSkinClass={inheritable:!1};TextInputElement._StyleTypes.UpSkinStyle={inheritable:!1};TextInputElement._StyleTypes.UpTextColor={inheritable:!1};TextInputElement._StyleTypes.UpTextHighlightedColor={inheritable:!1};TextInputElement._StyleTypes.UpTextHighlightedBackgroundColor={inheritable:!1};TextInputElement._StyleTypes.DisabledSkinClass={inheritable:!1};TextInputElement._StyleTypes.DisabledSkinStyle={inheritable:!1};TextInputElement._StyleTypes.DisabledTextColor={inheritable:!1};
TextInputElement._StyleTypes.DisabledTextHighlightedColor={inheritable:!1};TextInputElement._StyleTypes.DisabledTextHighlightedBackgroundColor={inheritable:!1};TextInputElement.StyleDefault=new StyleDefinition;TextInputElement.StyleDefault.setStyle("MaxChars",0);TextInputElement.StyleDefault.setStyle("Enabled",!0);TextInputElement.StyleDefault.setStyle("UpTextColor","#000000");TextInputElement.StyleDefault.setStyle("UpTextHighlightedColor","#FFFFFF");
TextInputElement.StyleDefault.setStyle("UpTextHighlightedBackgroundColor","#000000");TextInputElement.StyleDefault.setStyle("DisabledTextColor","#888888");TextInputElement.StyleDefault.setStyle("DisabledTextHighlightedColor","#FFFFFF");TextInputElement.StyleDefault.setStyle("DisabledTextHighlightedBackgroundColor","#000000");TextInputElement.StyleDefault.setStyle("PaddingTop",3);TextInputElement.StyleDefault.setStyle("PaddingBottom",3);TextInputElement.StyleDefault.setStyle("PaddingLeft",3);
TextInputElement.StyleDefault.setStyle("PaddingRight",3);TextInputElement.StyleDefault.setStyle("TabStop",0);TextInputElement.StyleDefault.setStyle("Cursor","text");TextInputElement.StyleDefault.setStyle("SkinClass",CanvasElement);TextInputElement.StyleDefault.setStyle("UpSkinClass",CanvasElement);TextInputElement.StyleDefault.setStyle("DisabledSkinClass",CanvasElement);TextInputElement.DisabledSkinStyleDefault=new StyleDefinition;TextInputElement.DisabledSkinStyleDefault.setStyle("BorderType","inset");
TextInputElement.DisabledSkinStyleDefault.setStyle("BorderThickness",1);TextInputElement.DisabledSkinStyleDefault.setStyle("BorderColor","#999999");TextInputElement.DisabledSkinStyleDefault.setStyle("BackgroundColor","#ECECEC");TextInputElement.DisabledSkinStyleDefault.setStyle("AutoGradientType","linear");TextInputElement.DisabledSkinStyleDefault.setStyle("AutoGradientStart",.05);TextInputElement.DisabledSkinStyleDefault.setStyle("AutoGradientStop",-.05);TextInputElement.UpSkinStyleDefault=new StyleDefinition;
TextInputElement.UpSkinStyleDefault.setStyle("BorderType","inset");TextInputElement.UpSkinStyleDefault.setStyle("BorderThickness",1);TextInputElement.UpSkinStyleDefault.setStyle("BorderColor","#606060");TextInputElement.UpSkinStyleDefault.setStyle("BackgroundColor","#F5F5F5");TextInputElement.StyleDefault.setStyle("UpSkinStyle",TextInputElement.UpSkinStyleDefault);TextInputElement.StyleDefault.setStyle("DisabledSkinStyle",TextInputElement.DisabledSkinStyleDefault);
TextInputElement.prototype.setText=function(a){this._textField.setText(a)};TextInputElement.prototype.getText=function(){return this._textField.getText()};TextInputElement.prototype._onTextInputTextFieldChanged=function(a){1==this.hasEventListener("changed",null)&&this._dispatchEvent(new ElementEvent("changed",!1))};
TextInputElement.prototype._onTextInputKeyDown=function(a){if(1!=a.getDefaultPrevented()){var b=a.clone();b._bubbles=!1;this._textField._dispatchEvent(b);1==b.getIsCanceled()&&a.cancelEvent();1==b.getDefaultPrevented()&&a.preventDefault()}};TextInputElement.prototype._onTextInputFocusIn=function(a){this._textField._dispatchEvent(a.clone())};TextInputElement.prototype._onTextInputFocusOut=function(a){this._textField._dispatchEvent(a.clone())};
TextInputElement.prototype._getSkinClass=function(a){var b=null;"up"==a?b=this.getStyleData("UpSkinClass"):"disabled"==a&&(b=this.getStyleData("DisabledSkinClass"));a=this.getStyleData("SkinClass");return null==b||0<a.comparePriority(b)?a.value:b.value};TextInputElement.prototype._getSkinStyleDefinitions=function(a){return"up"==a?[this.getStyle("UpSkinStyle")]:"disabled"==a?[this.getStyle("DisabledSkinStyle")]:TextInputElement.base.prototype._getSkinStyleDefinitions.call(this,a)};
TextInputElement.prototype._getSkinStyleDefinitionDefault=function(a){return"up"==a?this._getDefaultStyle("UpSkinStyle"):"disabled"==a?this._getDefaultStyle("DisabledSkinStyle"):TextInputElement.base.prototype._getSkinStyleDefinitionDefault.call(this,a)};TextInputElement.prototype._updateState=function(){var a="up";0==this.getStyle("Enabled")&&(a="disabled");this.setStyle("SkinState",a)};
TextInputElement.prototype._changeState=function(a){TextInputElement.base.prototype._changeState.call(this,a);this._updateTextColors()};TextInputElement.prototype._updateTextColors=function(){this._textField.setStyle("TextColor",this._getTextColor(this._currentSkinState));this._textField.setStyle("TextHighlightedColor",this._getTextHighlightedColor(this._currentSkinState));this._textField.setStyle("TextHighlightedBackgroundColor",this._getTextHighlightedBackgroundColor(this._currentSkinState))};
TextInputElement.prototype._getTextColor=function(a){var b=null;"up"==a?b=this.getStyleData("UpTextColor"):"disabled"==a&&(b=this.getStyleData("DisabledTextColor"));a=this.getStyleData("TextColor");return null==b||0<a.comparePriority(b)?a.value:b.value};
TextInputElement.prototype._getTextHighlightedColor=function(a){var b=null;"up"==a?b=this.getStyleData("UpTextHighlightedColor"):"disabled"==a&&(b=this.getStyleData("DisabledTextHighlightedColor"));a=this.getStyleData("TextHighlightedColor");return null==b||0<a.comparePriority(b)?a.value:b.value};
TextInputElement.prototype._getTextHighlightedBackgroundColor=function(a){var b=null;"up"==a?b=this.getStyleData("UpTextHighlightedBackgroundColor"):"disabled"==a&&(b=this.getStyleData("DisabledTextHighlightedBackgroundColor"));a=this.getStyleData("TextHighlightedBackgroundColor");return null==b||0<a.comparePriority(b)?a.value:b.value};
TextInputElement.prototype._doStylesUpdated=function(a){TextInputElement.base.prototype._doStylesUpdated.call(this,a);"MaxChars"in a&&this._textField.setStyle("MaxChars",this.getStyle("MaxChars"));if("Enabled"in a){var b=this.getStyle("Enabled");this._textField.setStyle("Enabled",b);1==b?(0==this.hasEventListener("keydown",this._onTextInputKeyDownInstance)&&this.addEventListener("keydown",this._onTextInputKeyDownInstance),0==this._textField.hasEventListener("changed",this._onTextInputTextFieldChangedInstance)&&
this._textField.addEventListener("changed",this._onTextInputTextFieldChangedInstance)):(1==this.hasEventListener("keydown",this._onTextInputKeyDownInstance)&&this.removeEventListener("keydown",this._onTextInputKeyDownInstance),1==this._textField.hasEventListener("changed",this._onTextInputTextFieldChangedInstance)&&this._textField.removeEventListener("changed",this._onTextInputTextFieldChangedInstance))}("TextLinePaddingTop"in a||"TextLinePaddingBottom"in a)&&this._invalidateMeasure();if("Padding"in
a||"PaddingTop"in a||"PaddingBottom"in a||"PaddingLeft"in a||"PaddingRight"in a)a=this._getPaddingSize(),this._textField.setStyle("PaddingTop",a.paddingTop),this._textField.setStyle("PaddingBottom",a.paddingBottom),this._textField.setStyle("PaddingLeft",a.paddingLeft),this._textField.setStyle("PaddingRight",a.paddingRight),this._invalidateMeasure();this._updateSkinClass("up");this._updateSkinStyleDefinitions("up");this._updateSkinClass("disabled");this._updateSkinStyleDefinitions("disabled");this._updateState();
this._updateTextColors()};TextInputElement.prototype._doMeasure=function(a,b){var c={width:0,height:this.getStyle("TextSize")+this.getStyle("TextLinePaddingTop")+this.getStyle("TextLinePaddingBottom")};c.width=10*c.height;c.width+=a;c.height+=b;return c};TextInputElement.prototype._doLayout=function(a){TextInputElement.base.prototype._doLayout.call(this,a);this._textField._setActualPosition(0,0);this._textField._setActualSize(this._width,this._height)};
function LabelElement(){LabelElement.base.prototype.constructor.call(this);this._truncateStringWidth=this._textHeight=this._textWidth=null}LabelElement.prototype=Object.create(CanvasElement.prototype);LabelElement.prototype.constructor=LabelElement;LabelElement.base=CanvasElement;LabelElement._StyleTypes=Object.create(null);LabelElement._StyleTypes.Text={inheritable:!1};LabelElement._StyleTypes.TruncateToFit={inheritable:!1};LabelElement.StyleDefault=new StyleDefinition;
LabelElement.StyleDefault.setStyle("PaddingTop",2);LabelElement.StyleDefault.setStyle("PaddingBottom",2);LabelElement.StyleDefault.setStyle("PaddingLeft",2);LabelElement.StyleDefault.setStyle("PaddingRight",2);LabelElement.StyleDefault.setStyle("Text",null);LabelElement.StyleDefault.setStyle("TruncateToFit","...");
LabelElement.prototype._doStylesUpdated=function(a){LabelElement.base.prototype._doStylesUpdated.call(this,a);if("TextStyle"in a||"TextFont"in a||"TextSize"in a||"Text"in a||"TextLinePaddingTop"in a||"TextLinePaddingBottom"in a)this._textHeight=this._textWidth=null,this._invalidateMeasure(),this._invalidateRender();"TruncateToFit"in a&&(this._truncateStringWidth=null,this._invalidateRender());("TextAlign"in a||"TextBaseline"in a||"TextColor"in a||"TextFillType"in a)&&this._invalidateRender()};
LabelElement.prototype._doMeasure=function(a,b){if(null==this._textWidth||null==this._textHeight){var c=this.getStyle("Text");null==c&&(c="");this._textHeight=this.getStyle("TextSize")+this.getStyle("TextLinePaddingTop")+this.getStyle("TextLinePaddingBottom");this._textWidth=CanvasElement._measureText(c,this._getFontString())}return{width:this._textWidth+a,height:this._textHeight+b}};
LabelElement.prototype._doRender=function(){LabelElement.base.prototype._doRender.call(this);var a=this.getStyle("Text");if(null!=a&&0!=a.length){var b=this._getGraphicsCtx(),c=this._getPaddingMetrics(),d=c.getX(),e=c.getY(),f=c.getWidth(),g=c.getHeight(),c=this._getFontString(),k=this._textWidth;if(k>f){var m=this.getStyle("TruncateToFit"),l=0;null!=m&&(l=m.length);null==this._truncateStringWidth&&(this._truncateStringWidth=null==m?0:CanvasElement._measureText(m,c));for(var p,q=a.length,k=this._textWidth+
this._truncateStringWidth;0<q&&k>f;)p=CanvasElement._measureText(a[q-1],c),q--,k-=p;for(;0<l&&k>f;)p=CanvasElement._measureText(m[l-1],c),l--,k-=p;a=a.substring(0,q)+m.substring(0,l)}var q=this.getStyle("TextLinePaddingTop"),n=this.getStyle("TextLinePaddingBottom"),m=this.getStyle("TextBaseline"),r=this.getStyle("TextAlign"),l=this.getStyle("TextFillType");p=this.getStyle("TextColor");d="left"==r?d:d+f-k;e="top"==m?e+q:"bottom"==m?e+g-n:Math.round(e+g/2+q/2-n/2);"stroke"==l?CanvasElement._strokeText(b,
a,d,e,c,p,m):CanvasElement._fillText(b,a,d,e,c,p,m)}};function ImageElement(){ImageElement.base.prototype.constructor.call(this);this._imageSource=this._imageLoader=null;this._imageLoadComplete=!1;var a=this;this._onImageElementLoadCompleteInstance=function(b){a._imageLoader.removeEventListener("load",a._onImageElementLoadCompleteInstance);a._imageLoadComplete=!0;a._invalidateMeasure();a._invalidateLayout();a._invalidateRender()}}ImageElement.prototype=Object.create(CanvasElement.prototype);
ImageElement.prototype.constructor=ImageElement;ImageElement.base=CanvasElement;ImageElement._StyleTypes=Object.create(null);ImageElement._StyleTypes.ImageSource={inheritable:!1};ImageElement._StyleTypes.ImageSourceClipX={inheritable:!1};ImageElement._StyleTypes.ImageSourceClipY={inheritable:!1};ImageElement._StyleTypes.ImageSourceClipWidth={inheritable:!1};ImageElement._StyleTypes.ImageSourceClipHeight={inheritable:!1};ImageElement._StyleTypes.ImageScaleType={inheritable:!1};
ImageElement._StyleTypes.ImageVerticalAlign={inheritable:!1};ImageElement._StyleTypes.ImageHorizontalAlign={inheritable:!1};ImageElement.StyleDefault=new StyleDefinition;ImageElement.StyleDefault.setStyle("ImageSource",null);ImageElement.StyleDefault.setStyle("ImageSourceClipX",null);ImageElement.StyleDefault.setStyle("ImageSourceClipY",null);ImageElement.StyleDefault.setStyle("ImageSourceClipWidth",null);ImageElement.StyleDefault.setStyle("ImageSourceClipHeight",null);
ImageElement.StyleDefault.setStyle("ImageScaleType","stretch");ImageElement.StyleDefault.setStyle("ImageHorizontalAlign","left");ImageElement.StyleDefault.setStyle("ImageVerticalAlign","top");
ImageElement.prototype._doStylesUpdated=function(a){ImageElement.base.prototype._doStylesUpdated.call(this,a);"ImageSource"in a?(a=this.getStyle("ImageSource"),this._imageSource!=a&&(null!=this._imageLoader&&0==this._imageLoadComplete&&this._imageLoader.removeEventListener("load",this._onImageElementLoadCompleteInstance),this._imageLoader=null,this._imageLoadComplete=!1,this._imageSource=a,this._imageSource instanceof HTMLImageElement?(this._imageLoader=this._imageSource,this._imageLoadComplete=this._imageSource.complete,
0==this._imageLoadComplete&&this._imageLoader.addEventListener("load",this._onImageElementLoadCompleteInstance,!1)):(this._imageLoader=new Image,this._imageLoader.addEventListener("load",this._onImageElementLoadCompleteInstance,!1),this._imageLoader.src=this._imageSource),this._invalidateMeasure(),this._invalidateRender())):"ImageSourceClipX"in a||"ImageSourceClipY"in a||"ImageSourceClipWidth"in a||"ImageSourceClipHeight"in a?(this._invalidateMeasure(),this._invalidateRender()):("ImageScaleType"in
a||"ImageVerticalAlign"in a||"ImageHorizontalAlign"in a)&&this._invalidateRender()};
ImageElement.prototype._doMeasure=function(a,b){var c={width:a,height:b},d=this.getStyle("ImageSourceClipX"),e=this.getStyle("ImageSourceClipY"),f=this.getStyle("ImageSourceClipWidth"),g=this.getStyle("ImageSourceClipHeight");null==d&&(d=0);null==e&&(e=0);null!=f?c.width+=f:1==this._imageLoadComplete&&(c.width+=this._imageLoader.naturalWidth-d);null!=g?c.height+=g:1==this._imageLoadComplete&&(c.height+=this._imageLoader.naturalHeight-e);return c};
ImageElement.prototype._doRender=function(){ImageElement.base.prototype._doRender.call(this);if(0!=this._imageLoadComplete){var a=this._getPaddingMetrics(),b=this._getGraphicsCtx(),c=a.getX(),d=a.getY(),e=a.getWidth(),f=a.getHeight();if(!(0>=e||0>=f)){var a=this.getStyle("ImageSourceClipX"),g=this.getStyle("ImageSourceClipY"),k=this.getStyle("ImageSourceClipWidth"),m=this.getStyle("ImageSourceClipHeight"),l=this.getStyle("ImageScaleType");null==a&&(a=0);null==g&&(g=0);null==k&&(k=this._imageLoader.naturalWidth-
a);null==m&&(m=this._imageLoader.naturalHeight-g);if(!(0>=k||0>=m))if("stretch"==l)b.drawImage(this._imageLoader,a,g,k,m,c,d,e,f);else if("tile"==l)for(var p=c,q=d,n,r;!(n=Math.min(k,c+e-p),r=Math.min(m,d+f-q),b.drawImage(this._imageLoader,a,g,n,r,p,q,n,r),p+=n,p>=c+e&&(p=c,q+=r,q>=d+f)););else if("tilefit"==l)if(l=k/m,e/f>l)for(p=c,r=f,n=f*l;;)if(p+n>c+e){e=(c+e-p)/n;b.drawImage(this._imageLoader,a,g,k*e,m,p,d,n*e,r);break}else{if(b.drawImage(this._imageLoader,a,g,k,m,p,d,n,r),p+=n,p==c+e)break}else for(q=
d,n=e,r=e/l;;)if(q+r>d+f){d=(d+f-q)/r;b.drawImage(this._imageLoader,a,g,k,m*d,c,q,n,r*d);break}else{if(b.drawImage(this._imageLoader,a,g,k,m,c,q,n,r),q+=r,q==d+f)break}else if("fit"==l||"none"==l)p=this.getStyle("ImageVerticalAlign"),q=this.getStyle("ImageHorizontalAlign"),n=k,r=m,"fit"==l?(l=k/m,e/f>l?(r=f,n=f*l):(n=e,r=e/l)):(e<k&&("right"==q?a+=k-e:"center"==q&&(a+=(k-e)/2),n=k=e),f<m&&("bottom"==p?g+=m-f:"middle"==p&&(g+=(m-f)/2),r=m=f)),"right"==q?c+=e-n:"center"==q&&(c+=(e-n)/2),"bottom"==p?
d+=f-r:"middle"==p&&(d+=(f-r)/2),b.drawImage(this._imageLoader,a,g,k,m,c,d,n,r)}}};function DataRendererBaseElement(){DataRendererBaseElement.base.prototype.constructor.call(this);var a=this;this._onDataRendererBaseEventInstance=function(b){"rollover"==b.getType()?a._onDataRendererRollover(b):"rollout"==b.getType()&&a._onDataRendererRollout(b)};this.addEventListener("rollover",this._onDataRendererBaseEventInstance);this.addEventListener("rollout",this._onDataRendererBaseEventInstance)}
DataRendererBaseElement.prototype=Object.create(SkinnableElement.prototype);DataRendererBaseElement.prototype.constructor=DataRendererBaseElement;DataRendererBaseElement.base=SkinnableElement;DataRendererBaseElement._StyleTypes=Object.create(null);DataRendererBaseElement._StyleTypes.SkinClass={inheritable:!1};DataRendererBaseElement._StyleTypes.UpSkinClass={inheritable:!1};DataRendererBaseElement._StyleTypes.UpSkinStyle={inheritable:!1};DataRendererBaseElement._StyleTypes.AltSkinClass={inheritable:!1};
DataRendererBaseElement._StyleTypes.AltSkinStyle={inheritable:!1};DataRendererBaseElement._StyleTypes.OverSkinClass={inheritable:!1};DataRendererBaseElement._StyleTypes.OverSkinStyle={inheritable:!1};DataRendererBaseElement._StyleTypes.SelectedSkinClass={inheritable:!1};DataRendererBaseElement._StyleTypes.SelectedSkinStyle={inheritable:!1};DataRendererBaseElement._StyleTypes.Selectable={inheritable:!1};DataRendererBaseElement.StyleDefault=new StyleDefinition;
DataRendererBaseElement.OverSkinStyleDefault=new StyleDefinition;DataRendererBaseElement.OverSkinStyleDefault.setStyle("BackgroundColor","#E0E0E0");DataRendererBaseElement.OverSkinStyleDefault.setStyle("AutoGradientType","linear");DataRendererBaseElement.OverSkinStyleDefault.setStyle("AutoGradientStart",.03);DataRendererBaseElement.OverSkinStyleDefault.setStyle("AutoGradientStop",-.03);DataRendererBaseElement.SelectedSkinStyleDefault=new StyleDefinition;
DataRendererBaseElement.SelectedSkinStyleDefault.setStyle("BackgroundColor","#CDCDCD");DataRendererBaseElement.SelectedSkinStyleDefault.setStyle("AutoGradientType","linear");DataRendererBaseElement.SelectedSkinStyleDefault.setStyle("AutoGradientStart",.03);DataRendererBaseElement.SelectedSkinStyleDefault.setStyle("AutoGradientStop",-.03);DataRendererBaseElement.StyleDefault.setStyle("Selectable",!0);DataRendererBaseElement.StyleDefault.setStyle("SkinClass",CanvasElement);
DataRendererBaseElement.StyleDefault.setStyle("UpSkinClass",CanvasElement);DataRendererBaseElement.StyleDefault.setStyle("AltSkinClass",CanvasElement);DataRendererBaseElement.StyleDefault.setStyle("OverSkinClass",CanvasElement);DataRendererBaseElement.StyleDefault.setStyle("SelectedSkinClass",CanvasElement);DataRendererBaseElement.StyleDefault.setStyle("UpSkinStyle",null);DataRendererBaseElement.StyleDefault.setStyle("AltSkinStyle",null);
DataRendererBaseElement.StyleDefault.setStyle("OverSkinStyle",DataRendererBaseElement.OverSkinStyleDefault);DataRendererBaseElement.StyleDefault.setStyle("SelectedSkinStyle",DataRendererBaseElement.SelectedSkinStyleDefault);DataRendererBaseElement.prototype._updateState=function(){var a;a=1==this._listSelected?"selected":1==this._mouseIsOver&&1==this.getStyle("Selectable")?"over":null==this._listData||0==this._listData._itemIndex%2?"up":"alt";this.setStyle("SkinState",a)};
DataRendererBaseElement.prototype._getSkinClass=function(a){var b=null;"up"==a?b=this.getStyleData("UpSkinClass"):"alt"==a?b=this.getStyleData("AltSkinClass"):"over"==a?b=this.getStyleData("OverSkinClass"):"selected"==a&&(b=this.getStyleData("SelectedSkinClass"));a=this.getStyleData("SkinClass");return null==b||0<a.comparePriority(b)?a.value:b.value};
DataRendererBaseElement.prototype._getSkinStyleDefinitions=function(a){return"up"==a?[this.getStyle("UpSkinStyle")]:"alt"==a?[this.getStyle("AltSkinStyle")]:"over"==a?[this.getStyle("OverSkinStyle")]:"selected"==a?[this.getStyle("SelectedSkinStyle")]:DataRendererBaseElement.base.prototype._getSkinStyleDefinitions.call(this,a)};
DataRendererBaseElement.prototype._getSkinStyleDefinitionDefault=function(a){return"up"==a?this._getDefaultStyle("UpSkinStyle"):"alt"==a?this._getDefaultStyle("AltSkinStyle"):"over"==a?this._getDefaultStyle("OverSkinStyle"):"selected"==a?this._getDefaultStyle("SelectedSkinStyle"):DataRendererBaseElement.base.prototype._getSkinStyleDefinitionDefault.call(this,a)};DataRendererBaseElement.prototype._onDataRendererRollover=function(a){this._updateState()};
DataRendererBaseElement.prototype._onDataRendererRollout=function(a){this._updateState()};DataRendererBaseElement.prototype._setListSelected=function(a){DataRendererBaseElement.base.prototype._setListSelected.call(this,a);this._updateState()};DataRendererBaseElement.prototype._setListData=function(a,b){DataRendererBaseElement.base.prototype._setListData.call(this,a,b);this._updateState()};
DataRendererBaseElement.prototype._doStylesUpdated=function(a){DataRendererBaseElement.base.prototype._doStylesUpdated.call(this,a);this._updateSkinClass("up");this._updateSkinStyleDefinitions("up");this._updateSkinClass("alt");this._updateSkinStyleDefinitions("alt");this._updateSkinClass("over");this._updateSkinStyleDefinitions("over");this._updateSkinClass("selected");this._updateSkinStyleDefinitions("selected");"Selectable"in a&&this._updateState()};
function DataRendererLabelElement(){DataRendererLabelElement.base.prototype.constructor.call(this);this._labelElement=new LabelElement;this._addChild(this._labelElement)}DataRendererLabelElement.prototype=Object.create(DataRendererBaseElement.prototype);DataRendererLabelElement.prototype.constructor=DataRendererLabelElement;DataRendererLabelElement.base=DataRendererBaseElement;DataRendererLabelElement._StyleTypes=Object.create(null);DataRendererLabelElement._StyleTypes.UpTextColor={inheritable:!1};
DataRendererLabelElement._StyleTypes.OverTextColor={inheritable:!1};DataRendererLabelElement._StyleTypes.SelectedTextColor={inheritable:!1};DataRendererLabelElement.StyleDefault=new StyleDefinition;DataRendererLabelElement.StyleDefault.setStyle("Padding",3);DataRendererLabelElement.StyleDefault.setStyle("BorderType","none");DataRendererLabelElement.StyleDefault.setStyle("UpTextColor",null);DataRendererLabelElement.StyleDefault.setStyle("OverTextColor",null);
DataRendererLabelElement.StyleDefault.setStyle("SelectedTextColor",null);DataRendererLabelElement.prototype._changeState=function(a){DataRendererLabelElement.base.prototype._changeState.call(this,a);this._updateLabelTextColor()};
DataRendererLabelElement.prototype._getTextColor=function(a){return"up"==a?this.getStyle("UpTextColor")||this.getStyle("TextColor"):"over"==a?this.getStyle("OverTextColor")||this.getStyle("TextColor"):"selected"==a?this.getStyle("SelectedTextColor")||this.getStyle("TextColor"):null};DataRendererLabelElement.prototype._updateLabelTextColor=function(){var a=this._getTextColor(this._currentSkinState);null!=a&&this._labelElement.setStyle("TextColor",a)};
DataRendererLabelElement.prototype._updateLabelText=function(){if(null==this._itemData)this._labelElement.setStyle("Text","");else{var a=this._listData._parentList.getStyle("ItemLabelFunction");this._labelElement.setStyle("Text",a(this._itemData))}};DataRendererLabelElement.prototype._setListData=function(a,b){DataRendererLabelElement.base.prototype._setListData.call(this,a,b);this._updateLabelText()};
DataRendererLabelElement.prototype._doStylesUpdated=function(a){DataRendererLabelElement.base.prototype._doStylesUpdated.call(this,a);this._updateLabelTextColor()};DataRendererLabelElement.prototype._doMeasure=function(a,b){var c=DataRendererLabelElement.base.prototype._doMeasure.call(this,a,b),d=this._labelElement._getStyledOrMeasuredWidth(),e=this._labelElement._getStyledOrMeasuredHeight();a+d>c.width&&(c.width=a+d);b+e>c.height&&(c.height=b+e);return c};
DataRendererLabelElement.prototype._doLayout=function(a){DataRendererLabelElement.base.prototype._doLayout.call(this,a);this._labelElement._setActualPosition(a.getX(),a.getY());this._labelElement._setActualSize(a.getWidth(),a.getHeight())};
function DataListElement(){DataListElement.base.prototype.constructor.call(this);this._listCollection=null;this._contentSize=0;this._scrollBar=null;this._scrollIndex=0;this._selectedIndex=-1;this._selectedItem=null;this._contentPane=new CanvasElement;this._contentPane.setStyle("ClipContent",!0);this._addChild(this._contentPane);var a=this;this._onDataListCollectionChangedInstance=function(b){a._onDataListCollectionChanged(b)};this._onDataListScrollBarChangedInstance=function(b){a._onDataListScrollBarChanged(b)};
this._onDataListMouseWheelEventInstance=function(b){a._onDataListMouseWheelEvent(b)};this._onDataListRendererClickInstance=function(b){a._onDataListRendererClick(b)};this.addEventListener("wheel",this._onDataListMouseWheelEventInstance)}DataListElement.prototype=Object.create(CanvasElement.prototype);DataListElement.prototype.constructor=DataListElement;DataListElement.base=CanvasElement;DataListElement._StyleTypes=Object.create(null);DataListElement._StyleTypes.ListDirection={inheritable:!1};
DataListElement._StyleTypes.ListAlign={inheritable:!1};DataListElement._StyleTypes.Selectable={inheritable:!1};DataListElement._StyleTypes.ScrollBarDisplay={inheritable:!1};DataListElement._StyleTypes.ScrollBarPlacement={inheritable:!1};DataListElement._StyleTypes.ScrollBarStyle={inheritable:!1};DataListElement._StyleTypes.ItemLabelFunction={inheritable:!1};DataListElement._StyleTypes.ListItemClass={inheritable:!1};DataListElement._StyleTypes.ListItemStyle={inheritable:!1};
DataListElement.StyleDefault=new StyleDefinition;DataListElement.StyleDefault.setStyle("ListDirection","vertical");DataListElement.StyleDefault.setStyle("ListAlign","top");DataListElement.StyleDefault.setStyle("ItemLabelFunction",DataListElement.DefaultItemLabelFunction);DataListElement.StyleDefault.setStyle("ListItemClass",DataRendererLabelElement);DataListElement.StyleDefault.setStyle("ListItemStyle",null);DataListElement.StyleDefault.setStyle("Selectable",!0);
DataListElement.StyleDefault.setStyle("ScrollBarDisplay","auto");DataListElement.StyleDefault.setStyle("ScrollBarPlacement","right");DataListElement.StyleDefault.setStyle("ScrollBarStyle",null);DataListElement._DataRendererProxyMap=Object.create(null);DataListElement._DataRendererProxyMap.Selectable=!0;DataListElement.DefaultItemLabelFunction=function(a){return null==a?"":"string"===typeof a||a instanceof String?a:"label"in a?a.label:a.toString()};
DataListElement.prototype.setSelectedIndex=function(a){if(this._selectedIndex==a)return!0;if(a>this._listCollection.length-1)return!1;-1>a&&(a=-1);var b=this._selectedIndex;this._selectedIndex=a;this._selectedItem=this._listCollection.getItemAt(a);if(0<this._contentPane._children.length){var c=this._contentPane._children[0]._listData._itemIndex,d=this._contentPane._children[this._contentPane._children.length-1]._listData._itemIndex;null!=a&&a>=c&&a<=d&&this._contentPane._children[a-c]._setListSelected(!0);
null!=b&&b>=c&&b<=d&&this._contentPane._children[b-c]._setListSelected(!1)}return!0};DataListElement.prototype.getSelectedIndex=function(){return this._selectedIndex};DataListElement.prototype.setSelectedItem=function(a){a=this._listCollection.getItemIndex(a);this.setSelectedIndex(a)};DataListElement.prototype.getSelectedItem=function(){return this._selectedItem};
DataListElement.prototype.setScrollIndex=function(a){this._invalidateLayout();if(0==this._contentPane._children.length||null==this._listCollection)for(this._scrollIndex=0;0<this._contentPane._children.length;)this._contentPane._removeChildAt(0);else{a>=this._listCollection.getLength()&&(a=this._listCollection.getLength()-1);0>a&&(a=0);this._scrollIndex=a;a=Math.floor(a);var b=this._contentPane._children[0]._listData._itemIndex;if(a==b-1)b=this._contentPane._children[this._contentPane._children.length-
1],this._contentPane._setChildIndex(b,0),this._updateRendererData(b,a);else if(a==b+1)this._listCollection.getLength()>=a+this._contentPane._children.length?(b=this._contentPane._children[0],this._contentPane._setChildIndex(b,this._contentPane._children.length-1),this._updateRendererData(b,a+this._contentPane._children.length-1)):this._contentPane._removeChildAt(0);else for(var c=0;c<this._contentPane._children.length;c++)if(this._listCollection.getLength()>a+c)b=this._contentPane._children[c],this._updateRendererData(b,
a+c);else for(;this._contentPane._children.length>c;)this._contentPane._removeChildAt(c)}};
DataListElement.prototype.setListCollection=function(a){this._listCollection!=a&&(null==this._manager?this._listCollection=a:(null!=this._listCollection&&this._listCollection.removeEventListener("collectionchanged",this._onDataListCollectionChangedInstance),this._listCollection=a,null!=this._listCollection&&this._listCollection.addEventListener("collectionchanged",this._onDataListCollectionChangedInstance)),null==this._listCollection?(this._selectedIndex=-1,this._selectedItem=null):null!=this._selectedItem&&
(this._selectedIndex=this._listCollection.getItemIndex(this._selectedItem),-1==this._selectedIndex&&(this._selectedItem=null)),this.setScrollIndex(this._scrollIndex),this._invalidateLayout())};DataListElement.prototype.getListCollection=function(){return this._listCollection};
DataListElement.prototype._getContentSize=function(){if("vertical"==this.getStyle("ListDirection")){var a=this.getStyle("Padding");null==a&&(a=0);var b=this.getStyle("PaddingTop");null==b&&(b=a);var c=this.getStyle("PaddingBottom");null==c&&(c=a);return this._contentSize+b+c}a=this.getStyle("Padding");null==a&&(a=0);b=this.getStyle("PaddingLeft");null==b&&(b=a);c=this.getStyle("PaddingRight");null==c&&(c=a);return this._contentSize+b+c};DataListElement.prototype._getNumRenderers=function(){return this._contentPane._children.length};
DataListElement.prototype._onDataListMouseWheelEvent=function(a){if(1!=a.getDefaultPrevented()&&0!=this._contentPane._children.length&&0!=this._listCollection.getLength()){var b;b=this.getStyle("ListDirection");var c=!1,d=!1,e=this._contentPane._children[0],f=this._contentPane._children[this._contentPane._children.length-1];if("horizontal"==b){b=a.getDeltaX();if(0==b)return;0==e._listData._itemIndex&&0<=e._x&&(c=!0);if(1==c&&0>b)return;f._listData._itemIndex==this._listCollection.getLength()-1&&f._x<=
this._contentPane._width-f._width&&(d=!0)}else{b=a.getDeltaY();if(0==b)return;0==e._listData._itemIndex&&0<=e._y&&(c=!0);if(1==c&&0>b)return;f._listData._itemIndex==this._listCollection.getLength()-1&&f._y<=this._contentPane._height-f._height&&(d=!0)}1==d&&0<b||(null!=this._scrollBar?(c=this._scrollBar.getTweenToValue(),null==c&&(c=this._scrollIndex),this._scrollBar.startScrollTween(c+b)):this.setScrollIndex(this._scrollIndex+b),a.preventDefault())}};
DataListElement.prototype._onDataListScrollBarChanged=function(a){a=this._scrollBar.getScrollValue();var b=this._scrollBar.getScrollPageSize(),c=this._scrollBar.getScrollViewSize();a==b-c&&1>a-this._scrollIndex&&(a=this._scrollIndex+1);this.setScrollIndex(a)};
DataListElement.prototype._onDataListCollectionChanged=function(a){var b=a.getKind();a=a.getIndex();this._invalidateLayout();if(0!=this._contentPane._children.length)if("reset"==b)null!=this._selectedItem&&(this._selectedIndex=this._listCollection.getItemIndex(this._selectedItem),-1==this._selectedIndex&&(this._selectedItem=null)),this.setScrollIndex(this._scrollIndex);else{var c=0,d=0;0<this._contentPane._children.length&&(c=this._contentPane._children[0]._listData._itemIndex,d=this._contentPane._children[this._contentPane._children.length-
1]._listData._itemIndex);this._selectedIndex==a&&"remove"==b&&(this._selectedIndex=-1,this._selectedItem=null);if(a<=d&&("add"==b||"remove"==b))if(a<=this._selectedIndex&&("add"==b?this._selectedIndex++:this._selectedIndex--),a<c)for(c="add"==b?1:-1,this._scrollIndex+=c,b=0;b<this._contentPane._children.length;b++)a=this._contentPane._children[b]._listData._itemIndex+c,this._updateRendererData(this._contentPane._children[b],a);else for("add"==b?(b=this._createRenderer(a),this._contentPane._addChildAt(b,
a-c),a++):this._contentPane._removeChildAt(a-c),b=a-c;b<this._contentPane._children.length;b++)this._updateRendererData(this._contentPane._children[b],a),a++;else"update"==b&&a>=c&&a<=d&&this._updateRendererData(this._contentPane._children[a-c],a)}};DataListElement.prototype._onCanvasElementAdded=function(a){DataListElement.base.prototype._onCanvasElementAdded.call(this,a);null!=this._listCollection&&this._listCollection.addEventListener("collectionchanged",this._onDataListCollectionChangedInstance)};
DataListElement.prototype._onCanvasElementRemoved=function(a){DataListElement.base.prototype._onCanvasElementRemoved.call(this,a);null!=this._listCollection&&this._listCollection.removeEventListener("collectionchanged",this._onDataListCollectionChangedInstance)};DataListElement.prototype._invalidateListRenderersLayout=function(){for(var a=0;a<this._contentPane._children.length;a++)this._contentPane._children[a]._invalidateLayout()};
DataListElement.prototype._invalidateListRenderersMeasure=function(){for(var a=0;a<this._contentPane._children.length;a++)this._contentPane._children[a]._invalidateMeasure()};
DataListElement.prototype._doStylesUpdated=function(a){DataListElement.base.prototype._doStylesUpdated.call(this,a);if("ListItemClass"in a){if(0<this._contentPane._children.length&&this._contentPane._children[0].constructor!=this.getStyle("ListItemClass")){for(;0<this._contentPane._children.length;)this._contentPane._removeChildAt(0);this._invalidateLayout()}}else if("ListItemStyle"in a){for(var b=this.getStyle("ListItemStyle"),c=0;c<this._contentPane._children.length;c++)this._contentPane._children[c].setStyleDefinition(b);
this._invalidateLayout()}"ListDirection"in a?(this._invalidateMeasure(),this._invalidateLayout()):("ScrollBarPlacement"in a||"ScrollBarDisplay"in a||"ListAlign"in a)&&this._invalidateLayout();"ScrollBarStyle"in a&&null!=this._scrollBar&&this._scrollBar.setStyleDefinition(this.getStyle("ScrollBarStyle"));"ItemLabelFunction"in a&&this.setScrollIndex(this._scrollIndex)};DataListElement.prototype._doMeasure=function(a,b){return{width:16,height:16}};
DataListElement.prototype._onDataListRendererClick=function(a){var b=a.getCurrentTarget()._listData._itemIndex;a=a.getCurrentTarget()._itemData;var c=!1;1==this.getStyle("Selectable")&&1==this.setSelectedIndex(b)&&(c=!0);this._dispatchEvent(new ElementListItemClickEvent(a,b));1==c&&this._dispatchEvent(new ElementEvent("changed",!1))};
DataListElement.prototype._createRenderer=function(a){var b=new (this.getStyle("ListItemClass"));b._setStyleDefinitionDefault(this._getDefaultStyle("ListItemStyle"));b._setStyleProxy(new StyleProxy(this,DataListElement._DataRendererProxyMap));b.setStyleDefinition(this.getStyle("ListItemStyle"));this._updateRendererData(b,a);b.addEventListener("click",this._onDataListRendererClickInstance);return b};
DataListElement.prototype._updateRendererData=function(a,b){var c;c=null!=a._listData&&a._listData._itemIndex==b?a._listData:new DataListData(this,b);a._setListData(c,this._listCollection.getItemAt(b));this._selectedIndex==b?a._setListSelected(!0):a._setListSelected(!1)};
DataListElement.prototype._doLayout=function(a){DataListElement.base.prototype._doLayout.call(this,a);var b=a.getX(),c=a.getY(),d=a.getWidth(),e=a.getHeight(),f,g;a=this.getStyle("ListDirection");var k=Math.floor(this._scrollIndex),m=0;null!=this._listCollection&&(m=this._listCollection.getLength());0==m?this._scrollIndex=k=0:k>m-1&&(this._scrollIndex=k=m-1);var l=0,p=0;this._contentSize=0;var q;for(g=0;g<this._contentPane._children.length;g++)if(f=this._contentPane._children[g],q="horizontal"==a?
f._getStyledOrMeasuredWidth():f._getStyledOrMeasuredHeight(),this._contentSize+=q,f._listData._itemIndex<=k&&(l=f._listData._itemIndex<k?l+q:l+q*(this._scrollIndex-k)),this._contentSize-l>=e)for(p=this._contentSize-l-e;this._contentPane._children.length-1>g;)this._contentPane._removeChildAt(this._contentPane._children.length-1);0<this._contentPane._children.length&&this._contentPane._children[0]._listData._itemIndex<k&&(l+=p,p=0,k=this._contentPane._children[0]._listData._itemIndex,this._scrollIndex=
"horizontal"==a?k+l/this._contentPane._children[0]._getStyledOrMeasuredWidth():k+l/this._contentPane._children[0]._getStyledOrMeasuredHeight());if(this._contentSize-l-p<e){if(k+this._contentPane._children.length<m){a=this._createRenderer(k+this._contentPane._children.length);this._contentPane._addChild(a);this._invalidateLayout();return}f=e-(this._contentSize-l-p);if(l>=f)l-=f,this._scrollIndex="horizontal"==a?k+l/this._contentPane._children[0]._getStyledOrMeasuredWidth():k+l/this._contentPane._children[0]._getStyledOrMeasuredHeight();
else if(0<l&&m==this._contentPane._children.length)this._scrollIndex=l=0;else if(m>this._contentPane._children.length){a=this._createRenderer(k-1);this._contentPane._addChildAt(a,0);this._invalidateLayout();return}}f=!1;g=this.getStyle("ScrollBarDisplay");if("on"==g||"auto"==g&&0<e&&(this._contentSize>e||this._contentPane._children.length<m))f=!0;if(1==f&&null==this._scrollBar)this._scrollBar=new ScrollBarElement,this._scrollBar._setStyleDefinitionDefault(this._getDefaultStyle("ScrollBarStyle")),
this._scrollBar.setStyleDefinition(this.getStyle("ScrollBarStyle")),this._scrollBar.setStyle("ScrollBarDirection",a),this._scrollBar.setScrollLineSize(1),this._scrollBar.addEventListener("changed",this._onDataListScrollBarChangedInstance),this._addChild(this._scrollBar);else if(0==f&&null!=this._scrollBar)this._removeChild(this._scrollBar),this._scrollBar=null;else{null!=this._scrollBar?(f=this.getStyle("ScrollBarPlacement"),"horizontal"==a?(this._scrollBar._setActualSize(d,this._scrollBar._getStyledOrMeasuredHeight()),
this._contentPane._setActualSize(d,e-this._scrollBar._height),"top"==f||"left"==f?(this._contentPane._setActualPosition(b,c+this._scrollBar._height),this._scrollBar._setActualPosition(b,c)):(this._contentPane._setActualPosition(b,c),this._scrollBar._setActualPosition(b,c+this._contentPane._height))):(this._scrollBar._setActualSize(this._scrollBar._getStyledOrMeasuredWidth(),e),this._contentPane._setActualSize(d-this._scrollBar._width,e),"top"==f||"left"==f?(this._scrollBar._setActualPosition(b,c),
this._contentPane._setActualPosition(b+this._scrollBar._width,c)):(this._scrollBar._setActualPosition(b+this._contentPane._width,c),this._contentPane._setActualPosition(b,c)))):(this._contentPane._setActualPosition(b,c),this._contentPane._setActualSize(d,e));b=-1*l;this._contentSize<e&&(b=this.getStyle("ListAlign"),b="top"==b||"left"==b?0:"center"==b||"middle"==b?e/2-this._contentSize/2:e-this._contentSize);for(g=0;g<this._contentPane._children.length;g++)f=this._contentPane._children[g],"horizontal"==
a?(f._setActualSize(f._getStyledOrMeasuredWidth(),this._contentPane._height),f._setActualPosition(b,0),b+=f._width):(f._setActualSize(this._contentPane._width,f._getStyledOrMeasuredHeight()),f._setActualPosition(0,b),b+=f._height);if(null!=this._scrollBar){if(e=this._contentPane._children.length)"horizontal"==a?(e-=l/this._contentPane._children[0]._width,e-=p/this._contentPane._children[this._contentPane._children.length-1]._width):(e-=l/this._contentPane._children[0]._height,e-=p/this._contentPane._children[this._contentPane._children.length-
1]._height);this._scrollBar.setScrollPageSize(m);this._scrollBar.setScrollViewSize(e);this._scrollBar.getScrollValue()!=this._scrollIndex&&(this._scrollBar.endScrollTween(),this._scrollBar.setScrollValue(this._scrollIndex))}}};function DataGridLabelItemRenderer(){DataGridLabelItemRenderer.base.prototype.constructor.call(this)}DataGridLabelItemRenderer.prototype=Object.create(LabelElement.prototype);DataGridLabelItemRenderer.prototype.constructor=DataGridLabelItemRenderer;
DataGridLabelItemRenderer.base=LabelElement;DataGridLabelItemRenderer.StyleDefault=new StyleDefinition;DataGridLabelItemRenderer.StyleDefault.setStyle("Padding",5);DataGridLabelItemRenderer.prototype._setListData=function(a,b){DataGridLabelItemRenderer.base.prototype._setListData.call(this,a,b);this._updateLabelText()};
DataGridLabelItemRenderer.prototype._updateLabelText=function(){if(null==this._itemData||null==this._listData)this.setStyle("Text","");else{var a=this._listData._parentGrid._gridColumns[this._listData._columnIndex].getStyle("RowItemLabelFunction");this.setStyle("Text",a(this._itemData,this._listData._columnIndex))}};
function DataGridDataRenderer(){DataGridDataRenderer.base.prototype.constructor.call(this);this._itemRenderersContainer=new CanvasElement;this._addChild(this._itemRenderersContainer)}DataGridDataRenderer.prototype=Object.create(DataRendererBaseElement.prototype);DataGridDataRenderer.prototype.constructor=DataGridDataRenderer;DataGridDataRenderer.base=DataRendererBaseElement;DataGridDataRenderer.StyleDefault=new StyleDefinition;DataGridDataRenderer.UpSkinStyleDefault=new StyleDefinition;
DataGridDataRenderer.UpSkinStyleDefault.setStyle("BackgroundColor","#FFFFFF");DataGridDataRenderer.UpSkinStyleDefault.setStyle("AutoGradientType","none");DataGridDataRenderer.AltSkinStyleDefault=new StyleDefinition;DataGridDataRenderer.AltSkinStyleDefault.setStyle("BackgroundColor","#F0F0F0");DataGridDataRenderer.AltSkinStyleDefault.setStyle("AutoGradientType","none");DataGridDataRenderer.StyleDefault.setStyle("UpSkinStyle",DataGridDataRenderer.UpSkinStyleDefault);
DataGridDataRenderer.StyleDefault.setStyle("AltSkinStyle",DataGridDataRenderer.AltSkinStyleDefault);
DataGridDataRenderer.prototype._setListData=function(a,b){DataGridDataRenderer.base.prototype._setListData.call(this,a,b);for(var c,d=0;d<a._parentList._gridColumns.length;d++)c=this._itemRenderersContainer._getChildAt(d),null==c?(c=a._parentList._createRowItemRenderer(a._itemIndex,d),this._itemRenderersContainer._addChildAt(c,d)):(columnDef=a._parentList._gridColumns[d],c.constructor!=columnDef.getStyle("RowItemClass")?(this._itemRenderersContainer._removeChildAt(d),c=a._parentList._createRowItemRenderer(a._itemIndex,
d),this._itemRenderersContainer._addChildAt(c,d)):a._parentList._updateRowItemRendererData(c,a._itemIndex,d));for(;this._itemRenderersContainer._children.length>this._listData._parentList._gridColumns.length;)this._itemRenderersContainer._removeChildAt(this._itemRenderersContainer._children.length-1);this._invalidateMeasure();this._invalidateLayout()};
DataGridDataRenderer.prototype._doMeasure=function(a,b){for(var c={width:0,height:0},d,e=0;e<this._itemRenderersContainer._children.length;e++)d=this._itemRenderersContainer._children[e]._getStyledOrMeasuredHeight(),c.height<d&&(c.height=d),c.width+=this._itemRenderersContainer._children[e]._getStyledOrMeasuredWidth();c.width+=a;c.height+=b;return c};
DataGridDataRenderer.prototype._doLayout=function(a){DataGridDataRenderer.base.prototype._doLayout.call(this,a);if(null!=this._listData){this._itemRenderersContainer._setActualPosition(a.getX(),a.getY());this._itemRenderersContainer._setActualSize(a.getWidth(),a.getHeight());a=this._listData._parentList;var b,c=0,d,e=this.getStyle("PaddingLeft");null==e&&(e=this.getStyle("Padding"));null==e&&(e=0);for(var f=0;f<a._columnSizes.length;f++)b=this._itemRenderersContainer._children[f],d=a._columnSizes[f],
0==f?d-=e:f==a._columnSizes.length-1&&(d=this._itemRenderersContainer._width-c),b._setActualPosition(c,0),b._setActualSize(d,this._itemRenderersContainer._height),c+=d}};function ContainerBaseElement(){ContainerBaseElement.base.prototype.constructor.call(this);this._elements=[];this._overlayChildren=[]}ContainerBaseElement.prototype=Object.create(CanvasElement.prototype);ContainerBaseElement.prototype.constructor=ContainerBaseElement;ContainerBaseElement.base=CanvasElement;
ContainerBaseElement.StyleDefault=new StyleDefinition;ContainerBaseElement.StyleDefault.setStyle("ClipContent",!0);ContainerBaseElement.prototype.addElement=function(a){return this.addElementAt(a,this._elements.length)};
ContainerBaseElement.prototype.addElementAt=function(a,b){if(!(a instanceof CanvasElement)||0>b||b>this._elements.length)return null;var c=this._children.length-this._overlayChildren.length-this._elements.length+b;this._elements.splice(b,0,a);ContainerBaseElement.base.prototype._addChildAt.call(this,a,c);return a};ContainerBaseElement.prototype.removeElement=function(a){a=this._elements.indexOf(a);return this.removeElementAt(a)};
ContainerBaseElement.prototype.removeElementAt=function(a){if(0>a||a>=this._elements.length)return null;var b=this._children.length-this._overlayChildren.length-this._elements.length+a;this._elements.splice(a,1);return ContainerBaseElement.base.prototype._removeChildAt.call(this,b)};ContainerBaseElement.prototype.getElementAt=function(a){return 0>a||a>=this._elements.length?null:this._elements[a]};ContainerBaseElement.prototype.getElementIndex=function(a){return this._elements.indexOf(a)};
ContainerBaseElement.prototype.setElementIndex=function(a,b){if(0>b||b>=this._elements.length)return!1;var c=this._elements.indexOf(a);if(-1==c||c==b)return!1;var d=this._children.length-this._overlayChildren.length-this._elements.length+b;this._elements.splice(b,0,this._elements.splice(c,1)[0]);ContainerBaseElement.base.prototype._setChildIndex.call(this,a,d);return!0};ContainerBaseElement.prototype.getNumElements=function(){return this._elements.length};
ContainerBaseElement.prototype._addOverlayChild=function(a){return this._addOverlayChildAt(a,this._overlayChildren.length)};ContainerBaseElement.prototype._addOverlayChildAt=function(a,b){if(!(a instanceof CanvasElement)||0>b||b>this._overlayChildren.length)return null;var c=this._children.length-this._overlayChildren.length+b;this._overlayChildren.splice(b,0,a);ContainerBaseElement.base.prototype._addChildAt.call(this,a,c);return a};
ContainerBaseElement.prototype._removeOverlayChild=function(a){a=this._overlayChildren.indexOf(a);return this._removeOverlayChildAt(a)};ContainerBaseElement.prototype._removeOverlayChildAt=function(a){if(0>a||a>=this._overlayChildren.length)return null;var b=this._children.length-this._overlayChildren.length+a;this._overlayChildren.splice(a,1);return ContainerBaseElement.base.prototype._removeChildAt.call(this,b)};
ContainerBaseElement.prototype._getOverlayChildAt=function(a){return 0>a||a>=this._overlayChildren.length?null:this._overlayChildren[a]};ContainerBaseElement.prototype._getOverlayChildIndex=function(a){return this._overlayChildren.indexOf(a)};
ContainerBaseElement.prototype._setOverlayChildIndex=function(a,b){if(0>b||b>=this._overlayChildren.length)return!1;var c=this._overlayChildren.indexOf(a);if(0>c||c==b)return!1;var d=this._children.length-this._overlayChildren.length+b;this._overlayChildren.splice(b,0,this._overlayChildren.splice(c,1)[0]);ContainerBaseElement.base.prototype._setChildIndex.call(this,a,d);return!0};ContainerBaseElement.prototype._getNumOverlayChildren=function(){return this._overlayChildren.length};
ContainerBaseElement.prototype._addChild=function(a){return ContainerBaseElement.base.prototype._addChildAt.call(this,a,this._children.length-this._elements.length-this._overlayChildren.length)};ContainerBaseElement.prototype._addChildAt=function(a,b){var c=this._children.length-this._elements.length-this._overlayChildren.length;return 0>b||b>c?null:ContainerBaseElement.base.prototype._addChildAt.call(this,a,b)};
ContainerBaseElement.prototype._removeChildAt=function(a){if(0>a||a>=this._children.length)return null;var b=this._children.splice(a,1)[0],c=this._elements.indexOf(b);if(0<=c)return this.removeElementAt(c);c=this._overlayChildren.indexOf(b);return 0<=c?this._removeOverlayChildAt(c):ContainerBaseElement.base.prototype._removeChildAt.call(this,a)};
ContainerBaseElement.prototype._setChildIndex=function(a,b){var c=this._children.length-this._elements.length-this._overlayChildren.length;if(0>b||b>=c)return!1;var d=this._getChildIndex(a);return 0>d||d>=c||d==b?!1:ContainerBaseElement.base.prototype._setChildIndex.call(this,a,b)};function ListContainerElement(){ListContainerElement.base.prototype.constructor.call(this)}ListContainerElement.prototype=Object.create(ContainerBaseElement.prototype);ListContainerElement.prototype.constructor=ListContainerElement;
ListContainerElement.base=ContainerBaseElement;ListContainerElement._StyleTypes=Object.create(null);ListContainerElement._StyleTypes.LayoutDirection={inheritable:!1};ListContainerElement._StyleTypes.LayoutGap={inheritable:!1};ListContainerElement._StyleTypes.LayoutVerticalAlign={inheritable:!1};ListContainerElement._StyleTypes.LayoutHorizontalAlign={inheritable:!1};ListContainerElement.StyleDefault=new StyleDefinition;ListContainerElement.StyleDefault.setStyle("LayoutDirection","vertical");
ListContainerElement.StyleDefault.setStyle("LayoutGap",0);ListContainerElement.StyleDefault.setStyle("LayoutVerticalAlign","top");ListContainerElement.StyleDefault.setStyle("LayoutHorizontalAlign","left");ListContainerElement.prototype._doStylesUpdated=function(a){ListContainerElement.base.prototype._doStylesUpdated.call(this,a);"LayoutDirection"in a||"LayoutGap"in a?(this._invalidateMeasure(),this._invalidateLayout()):"LayoutAlign"in a&&this._invalidateLayout()};
ListContainerElement.prototype._doMeasure=function(a,b){for(var c={width:0,height:0},d=this.getStyle("LayoutGap"),e=this.getStyle("LayoutDirection"),f,g,k,m,l,p,q,n,r,v=!1,t=0;t<this._elements.length;t++)f=this._elements[t],0!=f.getStyle("IncludeInLayout")&&(g=f.getStyle("Width"),k=f.getStyle("Height"),p=f.getStyle("MaxWidth"),q=f.getStyle("MaxHeight"),n=f.getStyle("MinWidth"),r=f.getStyle("MinHeight"),m=f.getStyle("RotateDegrees"),null==n&&(n=0),null==r&&(r=0),null==p&&(p=Number.MAX_VALUE),null==
q&&(q=Number.MAX_VALUE),0!=m?(null==g&&(g=f._measuredWidth,g=Math.min(g,p),g=Math.max(g,n)),null==k&&(k=f._measuredHeight,k=Math.min(k,q),k=Math.max(k,r)),p=f._width,q=f._height,n=f._rotateDegrees,f._width=g,f._height=k,f._rotateDegrees=m,rotatedMetrics=f.getMetrics(this),f._width=p,f._height=q,f._rotateDegrees=n,g=Math.ceil(rotatedMetrics.getWidth()),k=Math.ceil(rotatedMetrics.getHeight())):(m=f.getStyle("PercentWidth"),l=f.getStyle("PercentHeight"),null==g&&(null==m?(g=f._measuredWidth,g=Math.min(g,
p),g=Math.max(g,n)):g=n),null==k&&(null==l?(k=f._measuredHeight,k=Math.min(k,q),k=Math.max(k,r)):k=r)),"horizontal"==e?(c.width+=g,k>c.height&&(c.height=k)):(c.height+=k,g>c.width&&(c.width=g)),1==v?"horizontal"==e?c.width+=d:c.height+=d:v=!0);c.width+=a;c.height+=b;return c};
ListContainerElement.prototype._doLayout=function(a){ListContainerElement.base.prototype._doLayout.call(this,a);var b=this.getStyle("LayoutGap"),c=this.getStyle("LayoutDirection"),d=this.getStyle("LayoutVerticalAlign"),e=this.getStyle("LayoutHorizontalAlign"),f=a.getX(),g=a.getY(),k=a.getWidth();a=a.getHeight();var m,l,p=[],q=0,n=0;for(m=0;m<this._elements.length;m++)if(l=this._elements[m],0!=l.getStyle("IncludeInLayout")){n++;var r={element:l,width:null,height:null,pWidth:null,pHeight:null,maxWidth:null,
maxHeight:null,minWidth:null,minHeight:null,rotateDegrees:null};r.rotateDegrees=l.getStyle("RotateDegrees");r.width=l.getStyle("Width");null==r.width&&(0==r.rotateDegrees&&(r.pWidth=l.getStyle("PercentWidth")),r.minWidth=l.getStyle("MinWidth"),r.maxWidth=l.getStyle("MaxWidth"),null!=r.pWidth&&"horizontal"==c&&(q+=r.pWidth));r.height=l.getStyle("Height");null==r.height&&(0==r.rotateDegrees&&(r.pHeight=l.getStyle("PercentHeight")),r.minHeight=l.getStyle("MinHeight"),r.maxHeight=l.getStyle("MaxHeight"),
null!=r.pHeight&&"vertical"==c&&(q+=r.pHeight));null==r.minWidth&&(r.minWidth=0);null==r.minHeight&&(r.minHeight=0);null==r.maxWidth&&(r.maxWidth=Number.MAX_VALUE);null==r.maxHeight&&(r.maxHeight=Number.MAX_VALUE);p.push(r)}r=0;1<n&&(r=(n-1)*b);var n="horizontal"==c?k-r:a-r,v,t=[];for(m=0;m<p.length;m++)l=p[m],l.element._setActualRotation(l.rotateDegrees,0,0),"horizontal"==c&&null==p[m].width&&null!=p[m].pWidth?(l.percentSize=l.pWidth,l.minSize=l.minWidth,l.maxSize=l.maxWidth,t.push(l),null==l.height&&
(l.height=null!=l.pHeight?Math.round(l.pHeight/100*a):l.element._measuredHeight,l.height=Math.min(l.maxHeight,l.height),l.height=Math.max(l.minHeight,l.height))):"vertical"==c&&null==p[m].height&&null!=p[m].pHeight?(l.percentSize=l.pHeight,l.minSize=l.minHeight,l.maxSize=l.maxHeight,t.push(l),null==l.width&&(l.width=null!=l.pWidth?Math.round(l.pWidth/100*k):l.element._measuredWidth,l.width=Math.min(l.maxWidth,l.width),l.width=Math.max(l.minWidth,l.width))):(null==l.width&&(l.width=null!=l.pWidth?
Math.round(l.pWidth/100*k):l.element._measuredWidth,l.width=Math.min(l.maxWidth,l.width),l.width=Math.max(l.minWidth,l.width)),null==l.height&&(l.height=null!=l.pHeight?Math.round(l.pHeight/100*a):l.element._measuredHeight,l.height=Math.min(l.maxHeight,l.height),l.height=Math.max(l.minHeight,l.height)),l.element._setActualSize(l.width,l.height),0!=l.rotateDegrees&&(v=l.element.getMetrics(this),l.width=Math.ceil(v.getWidth()),l.height=Math.ceil(v.getHeight())),n="horizontal"==c?n-l.width:n-l.height);
100>q&&(n=Math.round(q/100*n));CanvasElement._calculateMinMaxPercentSizes(t,n);for(m=0;m<t.length;m++)l=t[m],"horizontal"==c?l.width=l.actualSize:l.height=l.actualSize,l.element._setActualSize(l.width,l.height);l=r;for(m=0;m<p.length;m++)l="horizontal"==c?l+p[m].width:l+p[m].height;q=f;r=g;"horizontal"==c&&l!=k?"center"==e?q+=Math.round(k/2-l/2):"right"==e&&(q+=k-l):"vertical"==c&&l!=a&&("middle"==d?r+=Math.round(a/2-l/2):"bottom"==d&&(r+=a-l));n=!1;for(m=0;m<p.length;m++)l=p[m],"horizontal"==c?(1==
n?q+=b:n=!0,r="top"==d?g:"bottom"==d?g+a-l.height:Math.round(g+a/2-l.height/2),0==l.rotateDegees?l.element._setActualPosition(q,r):l.element._setRelativePosition(q,r,this),q+=l.width):(1==n?r+=b:n=!0,q="left"==e?f:"right"==e?f+k-l.width:Math.round(f+k/2-l.width/2),0==l.rotateDegrees?l.element._setActualPosition(q,r):l.element._setRelativePosition(q,r,this),r+=l.height)};
function ButtonElement(){ButtonElement.base.prototype.constructor.call(this);var a=this;this._labelElement=null;this._onButtonEventInstance=function(b){"mousedown"==b.getType()?a._onButtonMouseDown(b):"mouseup"==b.getType()?a._onButtonMouseUp(b):"click"==b.getType()?a._onButtonClick(b):"rollover"==b.getType()?a._onButtonRollover(b):"rollout"==b.getType()&&a._onButtonRollout(b)};this.addEventListener("mousedown",this._onButtonEventInstance);this.addEventListener("mouseup",this._onButtonEventInstance);
this.addEventListener("rollover",this._onButtonEventInstance);this.addEventListener("rollout",this._onButtonEventInstance);this.addEventListener("click",this._onButtonEventInstance)}ButtonElement.prototype=Object.create(SkinnableElement.prototype);ButtonElement.prototype.constructor=ButtonElement;ButtonElement.base=SkinnableElement;ButtonElement._StyleTypes=Object.create(null);ButtonElement._StyleTypes.Text={inheritable:!1};ButtonElement._StyleTypes.SkinClass={inheritable:!1};
ButtonElement._StyleTypes.UpSkinClass={inheritable:!1};ButtonElement._StyleTypes.UpSkinStyle={inheritable:!1};ButtonElement._StyleTypes.UpTextColor={inheritable:!1};ButtonElement._StyleTypes.OverSkinClass={inheritable:!1};ButtonElement._StyleTypes.OverSkinStyle={inheritable:!1};ButtonElement._StyleTypes.OverTextColor={inheritable:!1};ButtonElement._StyleTypes.DownSkinClass={inheritable:!1};ButtonElement._StyleTypes.DownSkinStyle={inheritable:!1};ButtonElement._StyleTypes.DownTextColor={inheritable:!1};
ButtonElement._StyleTypes.DisabledSkinClass={inheritable:!1};ButtonElement._StyleTypes.DisabledSkinStyle={inheritable:!1};ButtonElement._StyleTypes.DisabledTextColor={inheritable:!1};ButtonElement._StyleTypes.TextAlign={inheritable:!1};ButtonElement._StyleTypes.TextBaseline={inheritable:!1};ButtonElement.StyleDefault=new StyleDefinition;ButtonElement.StyleDefault.setStyle("PaddingTop",2);ButtonElement.StyleDefault.setStyle("PaddingBottom",2);ButtonElement.StyleDefault.setStyle("PaddingLeft",3);
ButtonElement.StyleDefault.setStyle("PaddingRight",3);ButtonElement.StyleDefault.setStyle("TextAlign","center");ButtonElement.StyleDefault.setStyle("TextBaseline","middle");ButtonElement.StyleDefault.setStyle("TabStop",0);ButtonElement.StyleDefault.setStyle("Text",null);ButtonElement.StyleDefault.setStyle("SkinClass",CanvasElement);ButtonElement.StyleDefault.setStyle("UpSkinClass",CanvasElement);ButtonElement.StyleDefault.setStyle("OverSkinClass",CanvasElement);
ButtonElement.StyleDefault.setStyle("DownSkinClass",CanvasElement);ButtonElement.StyleDefault.setStyle("DisabledSkinClass",CanvasElement);ButtonElement.StyleDefault.setStyle("UpTextColor","#000000");ButtonElement.StyleDefault.setStyle("OverTextColor","#000000");ButtonElement.StyleDefault.setStyle("DownTextColor","#000000");ButtonElement.StyleDefault.setStyle("DisabledTextColor","#888888");ButtonElement.UpSkinStyleDefault=new StyleDefinition;ButtonElement.UpSkinStyleDefault.setStyle("BorderType","solid");
ButtonElement.UpSkinStyleDefault.setStyle("BorderThickness",1);ButtonElement.UpSkinStyleDefault.setStyle("BorderColor","#333333");ButtonElement.UpSkinStyleDefault.setStyle("BackgroundColor","#EBEBEB");ButtonElement.UpSkinStyleDefault.setStyle("AutoGradientType","linear");ButtonElement.UpSkinStyleDefault.setStyle("AutoGradientStart",.05);ButtonElement.UpSkinStyleDefault.setStyle("AutoGradientStop",-.05);ButtonElement.OverSkinStyleDefault=new StyleDefinition;
ButtonElement.OverSkinStyleDefault.setStyle("BorderType","solid");ButtonElement.OverSkinStyleDefault.setStyle("BorderThickness",1);ButtonElement.OverSkinStyleDefault.setStyle("BorderColor","#333333");ButtonElement.OverSkinStyleDefault.setStyle("BackgroundColor","#DDDDDD");ButtonElement.OverSkinStyleDefault.setStyle("AutoGradientType","linear");ButtonElement.OverSkinStyleDefault.setStyle("AutoGradientStart",.05);ButtonElement.OverSkinStyleDefault.setStyle("AutoGradientStop",-.05);
ButtonElement.DownSkinStyleDefault=new StyleDefinition;ButtonElement.DownSkinStyleDefault.setStyle("BorderType","solid");ButtonElement.DownSkinStyleDefault.setStyle("BorderThickness",1);ButtonElement.DownSkinStyleDefault.setStyle("BorderColor","#333333");ButtonElement.DownSkinStyleDefault.setStyle("BackgroundColor","#CCCCCC");ButtonElement.DownSkinStyleDefault.setStyle("AutoGradientType","linear");ButtonElement.DownSkinStyleDefault.setStyle("AutoGradientStart",-.06);
ButtonElement.DownSkinStyleDefault.setStyle("AutoGradientStop",.02);ButtonElement.DisabledSkinStyleDefault=new StyleDefinition;ButtonElement.DisabledSkinStyleDefault.setStyle("BorderType","solid");ButtonElement.DisabledSkinStyleDefault.setStyle("BorderThickness",1);ButtonElement.DisabledSkinStyleDefault.setStyle("BorderColor","#999999");ButtonElement.DisabledSkinStyleDefault.setStyle("BackgroundColor","#ECECEC");ButtonElement.DisabledSkinStyleDefault.setStyle("AutoGradientType","linear");
ButtonElement.DisabledSkinStyleDefault.setStyle("AutoGradientStart",.05);ButtonElement.DisabledSkinStyleDefault.setStyle("AutoGradientStop",-.05);ButtonElement.DisabledSkinStyleDefault.setStyle("ArrowColor","#777777");ButtonElement.StyleDefault.setStyle("UpSkinStyle",ButtonElement.UpSkinStyleDefault);ButtonElement.StyleDefault.setStyle("OverSkinStyle",ButtonElement.OverSkinStyleDefault);ButtonElement.StyleDefault.setStyle("DownSkinStyle",ButtonElement.DownSkinStyleDefault);
ButtonElement.StyleDefault.setStyle("DisabledSkinStyle",ButtonElement.DisabledSkinStyleDefault);ButtonElement.prototype._updateState=function(){var a="up";0==this.getStyle("Enabled")?a="disabled":1==this._mouseIsDown?a="down":1==this._mouseIsOver&&(a="over");this.setStyle("SkinState",a)};ButtonElement.prototype._onButtonMouseDown=function(a){this._updateState()};ButtonElement.prototype._onButtonMouseUp=function(a){this._updateState()};ButtonElement.prototype._onButtonRollover=function(a){this._updateState()};
ButtonElement.prototype._onButtonRollout=function(a){this._updateState()};ButtonElement.prototype._onButtonClick=function(a){0==this.getStyle("Enabled")&&a.cancelEvent()};
ButtonElement.prototype._getSkinClass=function(a){var b=null;"up"==a?b=this.getStyleData("UpSkinClass"):"over"==a?b=this.getStyleData("OverSkinClass"):"down"==a?b=this.getStyleData("DownSkinClass"):"disabled"==a&&(b=this.getStyleData("DisabledSkinClass"));a=this.getStyleData("SkinClass");return null==b||0<a.comparePriority(b)?a.value:b.value};
ButtonElement.prototype._getSkinStyleDefinitions=function(a){return"up"==a?[this.getStyle("UpSkinStyle")]:"over"==a?[this.getStyle("OverSkinStyle")]:"down"==a?[this.getStyle("DownSkinStyle")]:"disabled"==a?[this.getStyle("DisabledSkinStyle")]:ButtonElement.base.prototype._getSkinStyleDefinitions.call(this,a)};
ButtonElement.prototype._getSkinStyleDefinitionDefault=function(a){return"up"==a?this._getDefaultStyle("UpSkinStyle"):"over"==a?this._getDefaultStyle("OverSkinStyle"):"down"==a?this._getDefaultStyle("DownSkinStyle"):"disabled"==a?this._getDefaultStyle("DisabledSkinStyle"):ButtonElement.base.prototype._getSkinStyleDefinitionDefault.call(this,a)};ButtonElement.prototype._changeState=function(a){ButtonElement.base.prototype._changeState.call(this,a);this._updateTextColor()};
ButtonElement.prototype._getTextColor=function(a){var b=null;"up"==a?b=this.getStyleData("UpTextColor"):"over"==a?b=this.getStyleData("OverTextColor"):"down"==a?b=this.getStyleData("DownTextColor"):"disabled"==a&&(b=this.getStyleData("DisabledTextColor"));a=this.getStyleData("TextColor");return null==b||0<a.comparePriority(b)?a.value:b.value};ButtonElement.prototype._updateTextColor=function(){null!=this._labelElement&&this._labelElement.setStyle("TextColor",this._getTextColor(this._currentSkinState))};
ButtonElement.prototype._updateText=function(){var a=this.getStyle("Text");null==a||""==a?null!=this._labelElement&&(this._removeChild(this._labelElement),this._labelElement=null):null==this._labelElement&&(this._labelElement=this._createLabel(),null!=this._labelElement&&(this._updateTextColor(),this._labelElement.setStyle("Text",a),this._addChild(this._labelElement)))};
ButtonElement.prototype._doStylesUpdated=function(a){ButtonElement.base.prototype._doStylesUpdated.call(this,a);this._updateSkinClass("up");this._updateSkinStyleDefinitions("up");this._updateSkinClass("over");this._updateSkinStyleDefinitions("over");this._updateSkinClass("down");this._updateSkinStyleDefinitions("down");this._updateSkinClass("disabled");this._updateSkinStyleDefinitions("disabled");"Text"in a&&this._updateText();"Enabled"in a&&1==this.getStyle("MouseEnabled")&&this._updateState();"TextAlign"in
a&&null!=this._labelElement&&this._labelElement.setStyle("TextAlign",this.getStyle("TextAlign"));"TextBaseline"in a&&null!=this._labelElement&&this._labelElement.setStyle("TextBaseline",this.getStyle("TextBaseline"));this._updateTextColor()};ButtonElement.prototype._createLabel=function(){var a=new LabelElement;a.setStyle("MouseEnabled",!1);a.setStyle("TextAlign",this.getStyle("TextAlign"));a.setStyle("TextBaseline",this.getStyle("TextBaseline"));return a};
ButtonElement.prototype._doMeasure=function(a,b){var c;if(null!=this._labelElement){c=this._labelElement._getStyledOrMeasuredWidth();var d=this._labelElement._getStyledOrMeasuredHeight();c={width:c+a,height:d+b}}else c=ButtonElement.base.prototype._doMeasure.call(this,a,b);return c};
ButtonElement.prototype._doLayout=function(a){ButtonElement.base.prototype._doLayout.call(this,a);null!=this._labelElement&&(this._labelElement._setActualPosition(a.getX(),a.getY()),this._labelElement._setActualSize(a.getWidth(),a.getHeight()))};function ToggleButtonElement(){ToggleButtonElement.base.prototype.constructor.call(this);this._isSelected=!1}ToggleButtonElement.prototype=Object.create(ButtonElement.prototype);ToggleButtonElement.prototype.constructor=ToggleButtonElement;
ToggleButtonElement.base=ButtonElement;ToggleButtonElement._StyleTypes=Object.create(null);ToggleButtonElement._StyleTypes.AllowDeselect={inheritable:!1};ToggleButtonElement._StyleTypes.SelectedUpSkinClass={inheritable:!1};ToggleButtonElement._StyleTypes.SelectedUpSkinStyle={inheritable:!1};ToggleButtonElement._StyleTypes.SelectedUpTextColor={inheritable:!1};ToggleButtonElement._StyleTypes.SelectedOverSkinClass={inheritable:!1};ToggleButtonElement._StyleTypes.SelectedOverSkinStyle={inheritable:!1};
ToggleButtonElement._StyleTypes.SelectedOverTextColor={inheritable:!1};ToggleButtonElement._StyleTypes.SelectedDownSkinClass={inheritable:!1};ToggleButtonElement._StyleTypes.SelectedDownSkinStyle={inheritable:!1};ToggleButtonElement._StyleTypes.SelectedDownTextColor={inheritable:!1};ToggleButtonElement._StyleTypes.SelectedDisabledSkinClass={inheritable:!1};ToggleButtonElement._StyleTypes.SelectedDisabledSkinStyle={inheritable:!1};ToggleButtonElement._StyleTypes.SelectedDisabledTextColor={inheritable:!1};
ToggleButtonElement.StyleDefault=new StyleDefinition;ToggleButtonElement.StyleDefault.setStyle("AllowDeselect",!0);ToggleButtonElement.StyleDefault.setStyle("SelectedUpSkinClass",CanvasElement);ToggleButtonElement.StyleDefault.setStyle("SelectedOverSkinClass",CanvasElement);ToggleButtonElement.StyleDefault.setStyle("SelectedDownSkinClass",CanvasElement);ToggleButtonElement.StyleDefault.setStyle("SelectedDisabledSkinClass",CanvasElement);
ToggleButtonElement.StyleDefault.setStyle("SelectedOverTextColor","#000000");ToggleButtonElement.StyleDefault.setStyle("SelectedUpTextColor","#000000");ToggleButtonElement.StyleDefault.setStyle("SelectedDownTextColor","#000000");ToggleButtonElement.StyleDefault.setStyle("SelectedDisabledTextColor","#888888");ToggleButtonElement.SelectedUpSkinStyleDefault=new StyleDefinition;ToggleButtonElement.SelectedUpSkinStyleDefault.setStyle("BorderType","solid");
ToggleButtonElement.SelectedUpSkinStyleDefault.setStyle("BorderThickness",1);ToggleButtonElement.SelectedUpSkinStyleDefault.setStyle("BorderColor","#333333");ToggleButtonElement.SelectedUpSkinStyleDefault.setStyle("BackgroundColor","#CCCCCC");ToggleButtonElement.SelectedUpSkinStyleDefault.setStyle("AutoGradientType","linear");ToggleButtonElement.SelectedUpSkinStyleDefault.setStyle("AutoGradientStart",-.06);ToggleButtonElement.SelectedUpSkinStyleDefault.setStyle("AutoGradientStop",.02);
ToggleButtonElement.SelectedOverSkinStyleDefault=new StyleDefinition;ToggleButtonElement.SelectedOverSkinStyleDefault.setStyle("BorderType","solid");ToggleButtonElement.SelectedOverSkinStyleDefault.setStyle("BorderThickness",1);ToggleButtonElement.SelectedOverSkinStyleDefault.setStyle("BorderColor","#333333");ToggleButtonElement.SelectedOverSkinStyleDefault.setStyle("BackgroundColor","#BDBDBD");ToggleButtonElement.SelectedOverSkinStyleDefault.setStyle("AutoGradientType","linear");
ToggleButtonElement.SelectedOverSkinStyleDefault.setStyle("AutoGradientStart",-.08);ToggleButtonElement.SelectedOverSkinStyleDefault.setStyle("AutoGradientStop",.05);ToggleButtonElement.SelectedDownSkinStyleDefault=new StyleDefinition;ToggleButtonElement.SelectedDownSkinStyleDefault.setStyle("BorderType","solid");ToggleButtonElement.SelectedDownSkinStyleDefault.setStyle("BorderThickness",1);ToggleButtonElement.SelectedDownSkinStyleDefault.setStyle("BorderColor","#333333");
ToggleButtonElement.SelectedDownSkinStyleDefault.setStyle("BackgroundColor","#B0B0B0");ToggleButtonElement.SelectedDownSkinStyleDefault.setStyle("AutoGradientType","linear");ToggleButtonElement.SelectedDownSkinStyleDefault.setStyle("AutoGradientStart",-.08);ToggleButtonElement.SelectedDownSkinStyleDefault.setStyle("AutoGradientStop",.05);ToggleButtonElement.SelectedDisabledSkinStyleDefault=new StyleDefinition;ToggleButtonElement.SelectedDisabledSkinStyleDefault.setStyle("BorderType","solid");
ToggleButtonElement.SelectedDisabledSkinStyleDefault.setStyle("BorderThickness",1);ToggleButtonElement.SelectedDisabledSkinStyleDefault.setStyle("BorderColor","#777777");ToggleButtonElement.SelectedDisabledSkinStyleDefault.setStyle("BackgroundColor","#C7C7C7");ToggleButtonElement.SelectedDisabledSkinStyleDefault.setStyle("AutoGradientType","linear");ToggleButtonElement.SelectedDisabledSkinStyleDefault.setStyle("AutoGradientStart",-.08);
ToggleButtonElement.SelectedDisabledSkinStyleDefault.setStyle("AutoGradientStop",.05);ToggleButtonElement.StyleDefault.setStyle("SelectedUpSkinStyle",ToggleButtonElement.SelectedUpSkinStyleDefault);ToggleButtonElement.StyleDefault.setStyle("SelectedOverSkinStyle",ToggleButtonElement.SelectedOverSkinStyleDefault);ToggleButtonElement.StyleDefault.setStyle("SelectedDownSkinStyle",ToggleButtonElement.SelectedDownSkinStyleDefault);ToggleButtonElement.StyleDefault.setStyle("SelectedDisabledSkinStyle",ToggleButtonElement.SelectedDisabledSkinStyleDefault);
ToggleButtonElement.prototype.setSelected=function(a){this._isSelected!=a&&(this._isSelected=a,this._updateState())};ToggleButtonElement.prototype.getSelected=function(){return this._isSelected};
ToggleButtonElement.prototype._updateState=function(){if(0==this._isSelected)ToggleButtonElement.base.prototype._updateState.call(this);else{var a="selectedUp";0==this.getStyle("Enabled")?a="selectedDisabled":1==this.getStyle("AllowDeselect")&&(1==this._mouseIsDown?a="selectedDown":1==this._mouseIsOver&&(a="selectedOver"));this.setStyle("SkinState",a)}};
ToggleButtonElement.prototype._onButtonClick=function(a){if(0==this.getStyle("Enabled"))a.cancelEvent();else if(0==this._isSelected||1==this.getStyle("AllowDeselect"))this._isSelected=!this._isSelected,this._updateState(),1==this.hasEventListener("changed",null)&&this._dispatchEvent(new ElementEvent("changed",!1))};
ToggleButtonElement.prototype._getSkinClass=function(a){if("selectedUp"==a)a=this.getStyleData("SelectedUpSkinClass");else if("selectedOver"==a)a=this.getStyleData("SelectedOverSkinClass");else if("selectedDown"==a)a=this.getStyleData("SelectedDownSkinClass");else if("selectedDisabled"==a)a=this.getStyleData("SelectedDisabledSkinClass");else return ToggleButtonElement.base.prototype._getSkinClass.call(this,a);var b=this.getStyleData("SkinClass");return 0<b.comparePriority(a)?b.value:a.value};
ToggleButtonElement.prototype._getSkinStyleDefinitions=function(a){return"selectedUp"==a?[this.getStyle("SelectedUpSkinStyle")]:"selectedOver"==a?[this.getStyle("SelectedOverSkinStyle")]:"selectedDown"==a?[this.getStyle("SelectedDownSkinStyle")]:"selectedDisabled"==a?[this.getStyle("SelectedDisabledSkinStyle")]:ToggleButtonElement.base.prototype._getSkinStyleDefinitions.call(this,a)};
ToggleButtonElement.prototype._getSkinStyleDefinitionDefault=function(a){return"selectedUp"==a?this._getDefaultStyle("SelectedUpSkinStyle"):"selectedOver"==a?this._getDefaultStyle("SelectedOverSkinStyle"):"selectedDown"==a?this._getDefaultStyle("SelectedDownSkinStyle"):"selectedDisabled"==a?this._getDefaultStyle("SelectedDisabledSkinStyle"):ToggleButtonElement.base.prototype._getSkinStyleDefinitionDefault.call(this,a)};
ToggleButtonElement.prototype._getTextColor=function(a){if("selectedUp"==a)a=this.getStyleData("SelectedUpTextColor");else if("selectedOver"==a)a=this.getStyleData("SelectedOverTextColor");else if("selectedDown"==a)a=this.getStyleData("SelectedDownTextColor");else if("selectedDisabled"==a)a=this.getStyleData("SelectedDisabledTextColor");else return ToggleButtonElement.base.prototype._getTextColor.call(this,a);var b=this.getStyleData("TextColor");return 0<b.comparePriority(a)?b.value:a.value};
ToggleButtonElement.prototype._doStylesUpdated=function(a){ToggleButtonElement.base.prototype._doStylesUpdated.call(this,a);this._updateSkinClass("selectedUp");this._updateSkinStyleDefinitions("selectedUp");this._updateSkinClass("selectedOver");this._updateSkinStyleDefinitions("selectedOver");this._updateSkinClass("selectedDown");this._updateSkinStyleDefinitions("selectedDown");this._updateSkinClass("selectedDisabled");this._updateSkinStyleDefinitions("selectedDisabled");"AllowDeselect"in a&&this._updateState()};
function ScrollBarElement(){ScrollBarElement.base.prototype.constructor.call(this);this._buttonTab=this._buttonTrack=this._buttonDecrement=this._buttonIncrement=null;this._scrollViewSize=this._scrollPageSize=0;this._scrollLineSize=1;this._scrollValue=0;this._scrollTween=null;var a=this;this._onScrollButtonClickInstance=function(b){a._onScrollButtonClick(b)};this._onScrollTabDragInstance=function(b){a._onScrollTabDrag(b)};this._onScrollBarEnterFrameInstance=function(b){a._onScrollBarEnterFrame(b)}}
ScrollBarElement.prototype=Object.create(CanvasElement.prototype);ScrollBarElement.prototype.constructor=ScrollBarElement;ScrollBarElement.base=CanvasElement;ScrollBarElement._StyleTypes=Object.create(null);ScrollBarElement._StyleTypes.ScrollBarDirection={inheritable:!1};ScrollBarElement._StyleTypes.ScrollTweenDuration={inheritable:!1};ScrollBarElement._StyleTypes.ScrollButtonIncrementStyle={inheritable:!1};ScrollBarElement._StyleTypes.ScrollButtonDecrementStyle={inheritable:!1};
ScrollBarElement._StyleTypes.ButtonTrackStyle={inheritable:!1};ScrollBarElement._StyleTypes.ButtonTabStyle={inheritable:!1};ScrollBarElement.StyleDefault=new StyleDefinition;ScrollBarElement.ButtonTrackStyleDefault=new StyleDefinition;ScrollBarElement.ButtonTrackStyleDefault.setStyle("BorderType","none");ScrollBarElement.ButtonTrackStyleDefault.setStyle("UpSkinStyle",ButtonElement.UpSkinStyleDefault);ScrollBarElement.ButtonTrackStyleDefault.setStyle("OverSkinStyle",ButtonElement.UpSkinStyleDefault);
ScrollBarElement.ButtonTrackStyleDefault.setStyle("DownSkinStyle",ButtonElement.UpSkinStyleDefault);ScrollBarElement.ButtonTrackStyleDefault.setStyle("DisabledSkinStyle",ButtonElement.DisabledSkinStyleDefault);ScrollBarElement.ButtonTabStyleDefault=new StyleDefinition;ScrollBarElement.ButtonTabStyleDefault.setStyle("UpSkinStyle",ButtonElement.UpSkinStyleDefault);ScrollBarElement.ButtonTabStyleDefault.setStyle("OverSkinStyle",ButtonElement.OverSkinStyleDefault);
ScrollBarElement.ButtonTabStyleDefault.setStyle("DownSkinStyle",ButtonElement.DownSkinStyleDefault);ScrollBarElement.ButtonTabStyleDefault.setStyle("DisabledSkinStyle",ButtonElement.DisabledSkinStyleDefault);ScrollBarElement.ButtonScrollArrowIncStyleDefault=new StyleDefinition;ScrollBarElement.ButtonScrollArrowIncStyleDefault.setStyle("SkinClass",ScrollButtonSkinElement);ScrollBarElement.ButtonScrollArrowIncStyleDefault.setStyle("ArrowColor","#000000");
ScrollBarElement.ButtonScrollArrowIncStyleDefault.setStyle("UpSkinStyle",ButtonElement.UpSkinStyleDefault);ScrollBarElement.ButtonScrollArrowIncStyleDefault.setStyle("OverSkinStyle",ButtonElement.OverSkinStyleDefault);ScrollBarElement.ButtonScrollArrowIncStyleDefault.setStyle("DownSkinStyle",ButtonElement.DownSkinStyleDefault);ScrollBarElement.ButtonScrollArrowIncStyleDefault.setStyle("DisabledSkinStyle",ButtonElement.DisabledSkinStyleDefault);ScrollBarElement.ButtonScrollArrowDecStyleDefault=new StyleDefinition;
ScrollBarElement.ButtonScrollArrowDecStyleDefault.setStyle("SkinClass",ScrollButtonSkinElement);ScrollBarElement.ButtonScrollArrowDecStyleDefault.setStyle("ArrowColor","#000000");ScrollBarElement.ButtonScrollArrowDecStyleDefault.setStyle("UpSkinStyle",ButtonElement.UpSkinStyleDefault);ScrollBarElement.ButtonScrollArrowDecStyleDefault.setStyle("OverSkinStyle",ButtonElement.OverSkinStyleDefault);ScrollBarElement.ButtonScrollArrowDecStyleDefault.setStyle("DownSkinStyle",ButtonElement.DownSkinStyleDefault);
ScrollBarElement.ButtonScrollArrowDecStyleDefault.setStyle("DisabledSkinStyle",ButtonElement.DisabledSkinStyleDefault);ScrollBarElement.StyleDefault.setStyle("ScrollButtonIncrementStyle",ScrollBarElement.ButtonScrollArrowIncStyleDefault);ScrollBarElement.StyleDefault.setStyle("ScrollButtonDecrementStyle",ScrollBarElement.ButtonScrollArrowDecStyleDefault);ScrollBarElement.StyleDefault.setStyle("ButtonTrackStyle",ScrollBarElement.ButtonTrackStyleDefault);
ScrollBarElement.StyleDefault.setStyle("ButtonTabStyle",ScrollBarElement.ButtonTabStyleDefault);ScrollBarElement.StyleDefault.setStyle("ScrollTweenDuration",180);ScrollBarElement.StyleDefault.setStyle("ScrollBarDirection","vertical");ScrollBarElement.prototype.setScrollPageSize=function(a){this._scrollPageSize!=a&&(this._scrollPageSize=a,this._invalidateLayout())};ScrollBarElement.prototype.getScrollPageSize=function(){return this._scrollPageSize};
ScrollBarElement.prototype.setScrollViewSize=function(a){this._scrollViewSize!=a&&(this._scrollViewSize=a,this._invalidateLayout())};ScrollBarElement.prototype.getScrollViewSize=function(){return this._scrollViewSize};ScrollBarElement.prototype.setScrollLineSize=function(a){this._scrollLineSize=a};ScrollBarElement.prototype.getScrollLineSize=function(){return this._scrollLineSize};ScrollBarElement.prototype.setScrollValue=function(a){this._scrollValue!=a&&(this._scrollValue=a,this._invalidateLayout())};
ScrollBarElement.prototype.getScrollValue=function(){return this._scrollValue};
ScrollBarElement.prototype.startScrollTween=function(a){var b=this.getStyle("ScrollTweenDuration");0<b?null==this._scrollTween?(this._scrollTween=new Tween,this._scrollTween.startVal=this._scrollValue,this._scrollTween.endVal=a,this._scrollTween.duration=b,this._scrollTween.startTime=Date.now(),this._scrollTween.easingFunction=Tween.easeInOutSine,this.addEventListener("enterframe",this._onScrollBarEnterFrameInstance)):(this._scrollTween.startVal=this._scrollValue,this._scrollTween.endVal=a,this._scrollTween.startTime=
Date.now(),this._scrollTween.easingFunction=Tween.easeOutSine):(this.endScrollTween(),this.setScrollValue(a),this._dispatchEvent(new ElementEvent("changed",!1)))};ScrollBarElement.prototype.endScrollTween=function(){null!=this._scrollTween&&(this.setScrollValue(this._scrollTween.endVal),this.removeEventListener("enterframe",this._onScrollBarEnterFrameInstance),this._scrollTween=null)};ScrollBarElement.prototype.getTweenToValue=function(){return null==this._scrollTween?null:this._scrollTween.endVal};
ScrollBarElement.prototype._onScrollBarEnterFrame=function(a){a=this._scrollTween.getValue(Date.now());a==this._scrollTween.endVal?this.endScrollTween():this.setScrollValue(a);this._dispatchEvent(new ElementEvent("changed",!1))};ScrollBarElement.prototype._onCanvasElementRemoved=function(a){ScrollBarElement.base.prototype._onCanvasElementRemoved.call(this,a);this.endScrollTween()};
ScrollBarElement.prototype._onScrollButtonClick=function(a){var b=null,c=this._scrollValue;null!=this._scrollTween&&(c=this._scrollTween.endVal);c=Math.min(this._scrollPageSize-this._scrollViewSize,c);c=Math.max(0,c);a.getTarget()==this._buttonIncrement||a.getTarget()==this._buttonDecrement?(b=this.getScrollLineSize(),a.getTarget()==this._buttonDecrement&&(b*=-1)):a.getTarget()==this._buttonTrack&&(b=.75*this._scrollViewSize,"horizontal"==this.getStyle("ScrollBarDirection")?a.getX()<=this._buttonTab._x+
this._buttonTab._width/2&&(b*=-1):a.getY()<=this._buttonTab._y+this._buttonTab._height/2&&(b*=-1));a=Math.min(this._scrollPageSize-this._scrollViewSize,c+b);a=Math.max(0,a);a!=c&&this.startScrollTween(a)};
ScrollBarElement.prototype._onScrollTabDrag=function(a){var b,c,d;b=this.getStyle("ScrollBarDirection");a=this._scrollValue;"horizontal"==b?(c=this._buttonTrack._width,b=this._buttonTab._x-this._buttonTrack._x,d=this._buttonTab._width):(c=this._buttonTrack._height,b=this._buttonTab._y-this._buttonTrack._y,d=this._buttonTab._height);b>c-d&&(b=c-d);0>b&&(b=0);b/=(c-d)/(this._scrollPageSize-this._scrollViewSize);a!=b&&(this.setScrollValue(b),this._dispatchEvent(new ElementEvent("changed",!1)));this._invalidateLayout()};
ScrollBarElement.prototype._createChildren=function(){this._buttonIncrement=new ButtonElement;this._buttonIncrement._setStyleDefinitionDefault(this._getDefaultStyle("ScrollButtonIncrementStyle"));this._buttonIncrement.addEventListener("click",this._onScrollButtonClickInstance);this._addChild(this._buttonIncrement);this._buttonDecrement=new ButtonElement;this._buttonDecrement._setStyleDefinitionDefault(this._getDefaultStyle("ScrollButtonDecrementStyle"));this._buttonDecrement.addEventListener("click",
this._onScrollButtonClickInstance);this._addChild(this._buttonDecrement);this._buttonTrack=new ButtonElement;this._buttonTrack._setStyleDefinitionDefault(this._getDefaultStyle("ButtonTrackStyle"));this._buttonTrack.addEventListener("click",this._onScrollButtonClickInstance);this._addChild(this._buttonTrack);this._buttonTab=new ButtonElement;this._buttonTab._setStyleDefinitionDefault(this._getDefaultStyle("ButtonTabStyle"));this._buttonTab.setStyle("Draggable",!0);this._buttonTab.addEventListener("dragging",
this._onScrollTabDragInstance);this._addChild(this._buttonTab)};
ScrollBarElement.prototype._doStylesUpdated=function(a){ScrollBarElement.base.prototype._doStylesUpdated.call(this,a);null==this._buttonIncrement&&this._createChildren();"ScrollButtonIncrementStyle"in a&&this._buttonIncrement.setStyleDefinition(this.getStyle("ScrollButtonIncrementStyle"));"ScrollButtonDecrementStyle"in a&&this._buttonDecrement.setStyleDefinition(this.getStyle("ScrollButtonDecrementStyle"));"ButtonTrackStyle"in a&&this._buttonTrack.setStyleDefinition(this.getStyle("ButtonTrackStyle"));"ButtonTabStyle"in
a&&this._buttonTab.setStyleDefinition(this.getStyle("ButtonTabStyle"));"ScrollBarDirection"in a&&("horizontal"==this.getStyle("ScrollBarDirection")?(this._buttonIncrement.setStyle("ArrowDirection","right"),this._buttonDecrement.setStyle("ArrowDirection","left")):(this._buttonIncrement.setStyle("ArrowDirection","down"),this._buttonDecrement.setStyle("ArrowDirection","up")),this._invalidateMeasure(),this._invalidateLayout());"ScrollTweenDuration"in a&&0==this.getStyle("ScrollTweenDuration")&&this.endScrollTween()};
ScrollBarElement.prototype._doMeasure=function(a,b){var c=0;if("horizontal"==this.getStyle("ScrollBarDirection")){var d=this._buttonDecrement.getStyle("Height"),e=this._buttonIncrement.getStyle("Height"),f=this._buttonTrack.getStyle("Height"),g=this._buttonTab.getStyle("Height"),c=Math.max(c,d),c=Math.max(c,e),c=Math.max(c,f),c=Math.max(c,g);0==c&&(c=15);var f=this._buttonDecrement.getStyle("Width"),k=this._buttonIncrement.getStyle("Width"),d=this._buttonTab.getStyle("Width");null==f&&(f=c);null==
k&&(k=c);null==d&&(d=f+k);return{width:a+f+k+2*d,height:b+c}}f=this._buttonDecrement.getStyle("Width");k=this._buttonIncrement.getStyle("Width");e=this._buttonTrack.getStyle("Width");d=this._buttonTab.getStyle("Width");c=Math.max(c,f);c=Math.max(c,k);c=Math.max(c,e);c=Math.max(c,d);0==c&&(c=15);d=this._buttonDecrement.getStyle("Height");e=this._buttonIncrement.getStyle("Height");g=this._buttonTab.getStyle("Height");null==d&&(d=c);null==e&&(e=c);null==g&&(g=f+k);return{width:a+c,height:b+d+e+2*g}};
ScrollBarElement.prototype._doLayout=function(a){ScrollBarElement.base.prototype._doLayout.call(this,a);var b=this.getStyle("ScrollBarDirection");this._scrollValue=Math.min(this._scrollValue,this._scrollPageSize-this._scrollViewSize);this._scrollValue=Math.max(this._scrollValue,0);this._scrollViewSize>=this._scrollPageSize?(this._buttonIncrement.setStyle("Enabled",!1),this._buttonDecrement.setStyle("Enabled",!1),this._buttonTrack.setStyle("Enabled",!1),this._buttonTab.setStyle("Visible",!1)):(this._buttonIncrement.setStyle("Enabled",
!0),this._buttonDecrement.setStyle("Enabled",!0),this._buttonTrack.setStyle("Enabled",!0),this._buttonTab.setStyle("Visible",!0));var c=a.getX(),d=a.getY(),e=a.getWidth();a=a.getHeight();var f=this._buttonDecrement.getStyle("Width"),g=this._buttonDecrement.getStyle("Height"),k=this._buttonIncrement.getStyle("Width"),m=this._buttonIncrement.getStyle("Height"),l=this._buttonTab.getStyle("Width"),p=this._buttonTab.getStyle("Height");"horizontal"==b?(null==f&&(f=a),null==g&&(g=a),null==k&&(k=a),null==
m&&(m=a),b=this._buttonTrack.getStyle("Height"),null==b&&(b=a),this._buttonDecrement._setActualPosition(c,d+a/2-g/2),this._buttonDecrement._setActualSize(f,g),this._buttonIncrement._setActualPosition(c+e-k,d+a/2-m/2),this._buttonIncrement._setActualSize(k,m),this._buttonTrack._setActualPosition(c+f,d+a/2-b/2),this._buttonTrack._setActualSize(e-f-k,b),null==p&&(p=a),null==l&&(l=0<this._scrollPageSize?this._scrollViewSize/this._scrollPageSize*this._buttonTrack._width:0,l=Math.max(f+k,l)),k=this._buttonTrack._width-
l,k/=this._scrollPageSize-this._scrollViewSize,this._buttonTab._setActualPosition(c+f+this._scrollValue*k,d+a/2-p/2)):(null==f&&(f=e),null==g&&(g=e),null==k&&(k=e),null==m&&(m=e),b=this._buttonTrack.getStyle("Width"),null==b&&(b=e),this._buttonDecrement._setActualPosition(c+e/2-f/2,d),this._buttonDecrement._setActualSize(f,g),this._buttonIncrement._setActualPosition(c+e/2-k/2,d+a-m),this._buttonIncrement._setActualSize(k,m),this._buttonTrack._setActualPosition(c+e/2-b/2,d+g),this._buttonTrack._setActualSize(b,
a-g-m),null==l&&(l=e),null==p&&(p=0<this._scrollPageSize?this._scrollViewSize/this._scrollPageSize*this._buttonTrack._height:0,p=Math.max(g+m,p)),k=this._buttonTrack._height-p,k/=this._scrollPageSize-this._scrollViewSize,this._buttonTab._setActualPosition(c+e/2-l/2,d+g+this._scrollValue*k));this._buttonTab._setActualSize(l,p)};function RadioButtonElement(){RadioButtonElement.base.prototype.constructor.call(this)}RadioButtonElement.prototype=Object.create(ToggleButtonElement.prototype);
RadioButtonElement.prototype.constructor=RadioButtonElement;RadioButtonElement.base=ToggleButtonElement;RadioButtonElement._StyleTypes=Object.create(null);RadioButtonElement._StyleTypes.LabelPlacement={inheritable:!1};RadioButtonElement._StyleTypes.LabelGap={inheritable:!1};RadioButtonElement.StyleDefault=new StyleDefinition;RadioButtonElement.StyleDefault.setStyle("LabelPlacement","right");RadioButtonElement.StyleDefault.setStyle("LabelGap",5);
RadioButtonElement.StyleDefault.setStyle("AllowDeselect",!1);RadioButtonElement.StyleDefault.setStyle("PaddingTop",0);RadioButtonElement.StyleDefault.setStyle("PaddingBottom",0);RadioButtonElement.StyleDefault.setStyle("PaddingLeft",0);RadioButtonElement.StyleDefault.setStyle("PaddingRight",0);RadioButtonElement.StyleDefault.setStyle("TextAlign","left");RadioButtonElement.StyleDefault.setStyle("TextBaseline","middle");RadioButtonElement.StyleDefault.setStyle("SkinClass",RadioButtonSkinElement);
RadioButtonElement.StyleDefault.setStyle("UpSkinClass",RadioButtonSkinElement);RadioButtonElement.StyleDefault.setStyle("OverSkinClass",RadioButtonSkinElement);RadioButtonElement.StyleDefault.setStyle("DownSkinClass",RadioButtonSkinElement);RadioButtonElement.StyleDefault.setStyle("DisabledSkinClass",RadioButtonSkinElement);RadioButtonElement.StyleDefault.setStyle("SelectedUpSkinClass",RadioButtonSkinElement);RadioButtonElement.StyleDefault.setStyle("SelectedOverSkinClass",RadioButtonSkinElement);
RadioButtonElement.StyleDefault.setStyle("SelectedDownSkinClass",RadioButtonSkinElement);RadioButtonElement.StyleDefault.setStyle("SelectedDisabledSkinClass",RadioButtonSkinElement);RadioButtonElement.UpSkinStyleDefault=new StyleDefinition;RadioButtonElement.UpSkinStyleDefault.setStyle("BackgroundShape",new EllipseShape);RadioButtonElement.UpSkinStyleDefault.setStyle("BorderType","solid");RadioButtonElement.UpSkinStyleDefault.setStyle("BorderThickness",1);
RadioButtonElement.UpSkinStyleDefault.setStyle("BorderColor","#333333");RadioButtonElement.UpSkinStyleDefault.setStyle("BackgroundColor","#EBEBEB");RadioButtonElement.UpSkinStyleDefault.setStyle("AutoGradientType","linear");RadioButtonElement.UpSkinStyleDefault.setStyle("AutoGradientStart",.05);RadioButtonElement.UpSkinStyleDefault.setStyle("AutoGradientStop",-.05);RadioButtonElement.UpSkinStyleDefault.setStyle("CheckColor","#000000");RadioButtonElement.OverSkinStyleDefault=new StyleDefinition;
RadioButtonElement.OverSkinStyleDefault.setStyle("BackgroundShape",new EllipseShape);RadioButtonElement.OverSkinStyleDefault.setStyle("BorderType","solid");RadioButtonElement.OverSkinStyleDefault.setStyle("BorderThickness",1);RadioButtonElement.OverSkinStyleDefault.setStyle("BorderColor","#333333");RadioButtonElement.OverSkinStyleDefault.setStyle("BackgroundColor","#DDDDDD");RadioButtonElement.OverSkinStyleDefault.setStyle("AutoGradientType","linear");
RadioButtonElement.OverSkinStyleDefault.setStyle("AutoGradientStart",.05);RadioButtonElement.OverSkinStyleDefault.setStyle("AutoGradientStop",-.05);RadioButtonElement.OverSkinStyleDefault.setStyle("CheckColor","#000000");RadioButtonElement.DownSkinStyleDefault=new StyleDefinition;RadioButtonElement.DownSkinStyleDefault.setStyle("BackgroundShape",new EllipseShape);RadioButtonElement.DownSkinStyleDefault.setStyle("BorderType","solid");
RadioButtonElement.DownSkinStyleDefault.setStyle("BorderThickness",1);RadioButtonElement.DownSkinStyleDefault.setStyle("BorderColor","#333333");RadioButtonElement.DownSkinStyleDefault.setStyle("BackgroundColor","#CCCCCC");RadioButtonElement.DownSkinStyleDefault.setStyle("AutoGradientType","linear");RadioButtonElement.DownSkinStyleDefault.setStyle("AutoGradientStart",-.06);RadioButtonElement.DownSkinStyleDefault.setStyle("AutoGradientStop",.02);
RadioButtonElement.DownSkinStyleDefault.setStyle("CheckColor","#000000");RadioButtonElement.DisabledSkinStyleDefault=new StyleDefinition;RadioButtonElement.DisabledSkinStyleDefault.setStyle("BackgroundShape",new EllipseShape);RadioButtonElement.DisabledSkinStyleDefault.setStyle("BorderType","solid");RadioButtonElement.DisabledSkinStyleDefault.setStyle("BorderThickness",1);RadioButtonElement.DisabledSkinStyleDefault.setStyle("BorderColor","#999999");
RadioButtonElement.DisabledSkinStyleDefault.setStyle("BackgroundColor","#ECECEC");RadioButtonElement.DisabledSkinStyleDefault.setStyle("AutoGradientType","linear");RadioButtonElement.DisabledSkinStyleDefault.setStyle("AutoGradientStart",.05);RadioButtonElement.DisabledSkinStyleDefault.setStyle("AutoGradientStop",-.05);RadioButtonElement.DisabledSkinStyleDefault.setStyle("CheckColor","#777777");RadioButtonElement.StyleDefault.setStyle("UpSkinStyle",RadioButtonElement.UpSkinStyleDefault);
RadioButtonElement.StyleDefault.setStyle("OverSkinStyle",RadioButtonElement.OverSkinStyleDefault);RadioButtonElement.StyleDefault.setStyle("DownSkinStyle",RadioButtonElement.DownSkinStyleDefault);RadioButtonElement.StyleDefault.setStyle("DisabledSkinStyle",RadioButtonElement.DisabledSkinStyleDefault);RadioButtonElement.StyleDefault.setStyle("SelectedUpSkinStyle",RadioButtonElement.UpSkinStyleDefault);RadioButtonElement.StyleDefault.setStyle("SelectedOverSkinStyle",RadioButtonElement.OverSkinStyleDefault);
RadioButtonElement.StyleDefault.setStyle("SelectedDownSkinStyle",RadioButtonElement.DownSkinStyleDefault);RadioButtonElement.StyleDefault.setStyle("SelectedDisabledSkinStyle",RadioButtonElement.DisabledSkinStyleDefault);RadioButtonElement.prototype._createLabel=function(){var a=RadioButtonElement.base.prototype._createLabel.call(this);a.setStyle("PaddingTop",0);a.setStyle("PaddingBottom",0);return a};
RadioButtonElement.prototype._doMeasure=function(a,b){var c={width:a,height:b};if(null!=this._labelElement){var d=this._labelElement._getStyledOrMeasuredWidth(),e=this._labelElement._getStyledOrMeasuredHeight();c.height=b+e;c.width=c.height+a+d+this.getStyle("LabelGap")}else c.height=b+14,c.width=a+14;return c};
RadioButtonElement.prototype._doLayout=function(a){if(null!=this._labelElement){var b=this.getStyle("LabelPlacement"),c=this.getStyle("LabelGap"),d;for(d in this._skins)this._skins[d]._setActualSize(this._height,this._height),"left"==b?this._skins[d]._setActualPosition(this._width-this._height,0):this._skins[d]._setActualPosition(0,0);"left"==b?this._labelElement._setActualPosition(a.getX(),a.getY()):this._labelElement._setActualPosition(this._height+c+a.getX(),a.getY());this._labelElement._setActualSize(a.getWidth()-
c-this._height,a.getHeight())}else for(d in this._skins)this._skins[d]._setActualSize(this._width,this._height),this._skins[d]._setActualPosition(0,0)};
function DropdownElement(){DropdownElement.base.prototype.constructor.call(this);this._arrowButton=this._listCollection=null;this._selectedIndex=-1;this._selectedItem=null;this._dataListPopupClipContainer=new CanvasElement;this._dataListPopupClipContainer.setStyle("ClipContent",!0);this._openCloseTween=this._sampledTextWidth=this._dropdownManagerMetrics=this._openHeight=this._openDirection=this._dataListPopup=null;var a=this;this._onDropdownListCollectionChangedInstance=function(b){a._onDropdownListCollectionChanged(b)};
this._onDropdownDataListPopupChangedInstance=function(b){a._onDropdownDataListPopupChanged(b)};this._onDropdownDataListPopupLayoutCompleteInstance=function(b){a._onDropdownDataListPopupLayoutComplete(b)};this._onDropdownManagerCaptureEventInstance=function(b){a._onDropdownManagerCaptureEvent(b)};this._onDropdownManagerResizeEventInstance=function(b){a._onDropdownManagerResizeEvent(b)};this._onDropDownEnterFrameInstance=function(b){a._onDropDownEnterFrame(b)}}DropdownElement.prototype=Object.create(ButtonElement.prototype);
DropdownElement.prototype.constructor=DropdownElement;DropdownElement.base=ButtonElement;DropdownElement._StyleTypes=Object.create(null);DropdownElement._StyleTypes.ItemLabelFunction={inheritable:!1};DropdownElement._StyleTypes.PopupDataListClass={inheritable:!1};DropdownElement._StyleTypes.PopupDataListStyle={inheritable:!1};DropdownElement._StyleTypes.MaxPopupHeight={inheritable:!1};DropdownElement._StyleTypes.ArrowButtonClass={inheritable:!1};DropdownElement._StyleTypes.ArrowButtonStyle={inheritable:!1};
DropdownElement._StyleTypes.OpenCloseTweenDuration={inheritable:!1};DropdownElement._StyleTypes.OpenCloseTweenEasingFunction={inheritable:!1};DropdownElement._StyleTypes.PopupDataListClipTopOrBottom={inheritable:!1};DropdownElement.StyleDefault=new StyleDefinition;DropdownElement.ArrowButtonStyleDefault=new StyleDefinition;DropdownElement.ArrowButtonStyleDefault.setStyle("BorderType","none");DropdownElement.ArrowButtonStyleDefault.setStyle("BackgroundColor",null);
DropdownElement.ArrowButtonStyleDefault.setStyle("SkinClass",DropdownArrowButtonSkinElement);DropdownElement.ArrowButtonStyleDefault.setStyle("MouseEnabled",!1);DropdownElement.ArrowButtonStyleDefault.setStyle("UpSkinStyle",null);DropdownElement.ArrowButtonStyleDefault.setStyle("OverSkinStyle",null);DropdownElement.ArrowButtonStyleDefault.setStyle("DownSkinStyle",null);DropdownElement.ArrowButtonStyleDefault.setStyle("DisabledSkinStyle",null);DropdownElement.DataListScrollBarStyleDefault=new StyleDefinition;
DropdownElement.DataListScrollBarStyleDefault.setStyle("Padding",-1);DropdownElement.DataListItemStyleDefault=new StyleDefinition;DropdownElement.DataListItemStyleDefault.setStyle("UpSkinStyle",DataGridDataRenderer.UpSkinStyleDefault);DropdownElement.DataListItemStyleDefault.setStyle("AltSkinStyle",DataGridDataRenderer.AltSkinStyleDefault);DropdownElement.DataListStyleDefault=new StyleDefinition;DropdownElement.DataListStyleDefault.setStyle("ScrollBarStyle",DropdownElement.DataListScrollBarStyleDefault);
DropdownElement.DataListStyleDefault.setStyle("ListItemClass",DataRendererLabelElement);DropdownElement.DataListStyleDefault.setStyle("ListItemStyle",DropdownElement.DataListItemStyleDefault);DropdownElement.DataListStyleDefault.setStyle("BorderType","solid");DropdownElement.DataListStyleDefault.setStyle("BorderThickness",1);DropdownElement.DataListStyleDefault.setStyle("Padding",1);DropdownElement.StyleDefault.setStyle("PaddingTop",3);DropdownElement.StyleDefault.setStyle("PaddingBottom",3);
DropdownElement.StyleDefault.setStyle("PopupDataListClass",DataListElement);DropdownElement.StyleDefault.setStyle("PopupDataListStyle",DropdownElement.DataListStyleDefault);DropdownElement.StyleDefault.setStyle("ArrowButtonClass",ButtonElement);DropdownElement.StyleDefault.setStyle("ArrowButtonStyle",DropdownElement.ArrowButtonStyleDefault);DropdownElement.StyleDefault.setStyle("TextAlign","left");DropdownElement.StyleDefault.setStyle("MaxPopupHeight",200);
DropdownElement.StyleDefault.setStyle("OpenCloseTweenDuration",300);DropdownElement.StyleDefault.setStyle("OpenCloseTweenEasingFunction",Tween.easeInOutSine);DropdownElement.StyleDefault.setStyle("PopupDataListClipTopOrBottom",1);DropdownElement.StyleDefault.setStyle("ItemLabelFunction",DataListElement.DefaultItemLabelFunction);DropdownElement._PopupDataListProxyMap=Object.create(null);DropdownElement._PopupDataListProxyMap.ItemLabelFunction=!0;DropdownElement._ArrowButtonProxyMap=Object.create(null);
DropdownElement._ArrowButtonProxyMap.SkinState=!0;DropdownElement.prototype.setSelectedIndex=function(a){if(this._selectedIndex==a||null==this._listCollection||a>this._listCollection.length-1)return!1;-1>a&&(a=-1);null!=this._dataListPopup&&this._dataListPopup.setSelectedIndex(a);this._selectedIndex=a;this._selectedItem=this._listCollection.getItemAt(a);this._updateText();return!0};DropdownElement.prototype.getSelectedIndex=function(){return this._selectedIndex};
DropdownElement.prototype.setSelectedItem=function(a){a=this._listCollection.getItemIndex(a);this._setSelectedIndex(a)};DropdownElement.prototype.getSelectedItem=function(){return this._selectedItem};
DropdownElement.prototype.setListCollection=function(a){this._listCollection!=a&&(null==this._manager?this._listCollection=a:(null!=this._listCollection&&this._listCollection.removeEventListener("collectionchanged",this._onDropdownListCollectionChangedInstance),this._listCollection=a,null!=this._listCollection&&this._listCollection.addEventListener("collectionchanged",this._onDropdownListCollectionChangedInstance)),null==this._listCollection?(this._selectedIndex=-1,this._selectedItem=null):null!=
this._selectedItem&&(this._selectedIndex=this._listCollection.getItemIndex(this._selectedItem),-1==this._selectedIndex&&(this._selectedItem=null)),this._updateText(),this._sampledTextWidth=null,this._invalidateMeasure(),null!=this._dataListPopup&&this._dataListPopup.setListCollection(a))};
DropdownElement.prototype.open=function(a){if(null!=this._manager&&null!=this._listCollection&&0!=this._listCollection.getLength()){null==this._dataListPopup&&(this._dataListPopup=this._createDataListPopup(),this._dataListPopupClipContainer._addChild(this._dataListPopup));null==this._dropdownManagerMetrics&&(this._dropdownManagerMetrics=this.getMetrics(this._manager));this._addDataListPopup();var b=this.getStyle("OpenCloseTweenDuration");0==a||0>=b?null!=this._openCloseTween&&null!=this._openHeight&&
(this._endOpenCloseTween(),this._updateTweenPosition(this._openHeight)):null!=this._openCloseTween?0==this._openCloseTween.endVal&&this._reverseTween():null==this._openHeight&&(this._openCloseTween=new Tween,this._openCloseTween.startVal=0,this._openCloseTween.endVal=null,this._openCloseTween.duration=b,this._openCloseTween.startTime=Date.now(),this._openCloseTween.easingFunction=this.getStyle("OpenCloseTweenEasingFunction"),this.addEventListener("enterframe",this._onDropDownEnterFrameInstance))}};
DropdownElement.prototype.close=function(a){var b=this.getStyle("OpenCloseTweenDuration");0==a||0>=b?(this._endOpenCloseTween(),this._removeDataListPopup()):null!=this._openCloseTween?0!=this._openCloseTween.endVal&&this._reverseTween():null!=this._openHeight&&(this._openCloseTween=new Tween,this._openCloseTween.startVal=this._openHeight-this.getStyle("PopupDataListClipTopOrBottom"),this._openCloseTween.endVal=0,this._openCloseTween.duration=b,this._openCloseTween.startTime=Date.now(),this._openCloseTween.easingFunction=
this.getStyle("OpenCloseTweenEasingFunction"),this.addEventListener("enterframe",this._onDropDownEnterFrameInstance))};
DropdownElement.prototype._removeDataListPopup=function(){null!=this._dataListPopupClipContainer._parent&&(this._dataListPopupClipContainer._manager.removeCaptureListener("wheel",this._onDropdownManagerCaptureEventInstance),this._dataListPopupClipContainer._manager.removeCaptureListener("mousedown",this._onDropdownManagerCaptureEventInstance),this._dataListPopupClipContainer._manager.removeEventListener("resize",this._onDropdownManagerResizeEventInstance),this._dataListPopupClipContainer._manager.removeElement(this._dataListPopupClipContainer),
this._openHeight=this._openDirection=this._dropdownManagerMetrics=null)};
DropdownElement.prototype._addDataListPopup=function(){if(null==this._dataListPopupClipContainer._parent){var a=this.getStyle("MaxPopupHeight");this._dataListPopupClipContainer.setStyle("Width",this._dropdownManagerMetrics._width);this._dataListPopupClipContainer.setStyle("Height",a);this._dataListPopupClipContainer.setStyle("X",this._dropdownManagerMetrics._x);this._dataListPopupClipContainer.setStyle("Y",this._dropdownManagerMetrics._y+this._dropdownManagerMetrics._height);this._dataListPopup._setActualPosition(0,
0);this._dataListPopup._setActualSize(this._dropdownManagerMetrics._width,a);this._manager.addElement(this._dataListPopupClipContainer);this._dataListPopupClipContainer._manager.addCaptureListener("wheel",this._onDropdownManagerCaptureEventInstance);this._dataListPopupClipContainer._manager.addCaptureListener("mousedown",this._onDropdownManagerCaptureEventInstance);this._dataListPopupClipContainer._manager.addEventListener("resize",this._onDropdownManagerResizeEventInstance)}};
DropdownElement.prototype._onDropDownEnterFrame=function(a){null!=this._openCloseTween.endVal&&(a=this._openCloseTween.getValue(Date.now()),this._updateTweenPosition(a),a==this._openCloseTween.endVal&&(0==a?this.close(!1):this._endOpenCloseTween()))};DropdownElement.prototype._endOpenCloseTween=function(){null!=this._openCloseTween&&(this.removeEventListener("enterframe",this._onDropDownEnterFrameInstance),this._openCloseTween=null)};
DropdownElement.prototype._updateTweenPosition=function(a){this._dataListPopupClipContainer.setStyle("Height",a);"up"==this._openDirection?this._dataListPopupClipContainer.setStyle("Y",this._dropdownManagerMetrics._y-a):this._dataListPopup._setActualPosition(0,a-this._dataListPopup._height)};DropdownElement.prototype._onDropdownManagerCaptureEvent=function(a){for(var b=a.getTarget();null!=b;){if(b==this._dataListPopup||"mousedown"==a.getType()&&b==this)return;b=b._parent}this.close(!1)};
DropdownElement.prototype._onDropdownManagerResizeEvent=function(a){this.close(!1)};
DropdownElement.prototype._onDropdownDataListPopupLayoutComplete=function(a){a=this.getStyle("MaxPopupHeight");if("horizontal"!=this._dataListPopup.getStyle("ListDirection")){var b=this._dataListPopup._getContentSize();a=this._dataListPopup._height<a?b>this._dataListPopup._height||null!=this._listCollection&&this._dataListPopup._getNumRenderers()<this._listCollection.getLength()?a:this._dataListPopup._height:b<a?b:a}b=this._manager._height-(this._dropdownManagerMetrics._y+this._dropdownManagerMetrics._height);
if(b>=a)this._openDirection="down",this._openHeight=a;else{var c=this._dropdownManagerMetrics._y;c>=a?(this._openDirection="up",this._openHeight=a):b>=c?(this._openDirection="down",this._openHeight=b):(this._openDirection="up",this._openHeight=c)}this._dataListPopup._setActualSize(this._dataListPopup._width,this._openHeight);a=this.getStyle("PopupDataListClipTopOrBottom");null!=this._openCloseTween?(this._openCloseTween.endVal=this._openHeight-a,this._onDropDownEnterFrame(null)):this._updateTweenPosition(this._openHeight-
a)};DropdownElement.prototype._onDropdownDataListPopupChanged=function(a){this.setSelectedIndex(this._dataListPopup.getSelectedIndex());this.close(!0);this._dispatchEvent(new ElementEvent("changed",!1))};
DropdownElement.prototype._createDataListPopup=function(){var a=new DataListElement;a._setStyleDefinitionDefault(this._getDefaultStyle("PopupDataListStyle"));a._setStyleProxy(new StyleProxy(this,DropdownElement._PopupDataListProxyMap));a.setStyleDefinition(this.getStyle("PopupDataListStyle"));a.setListCollection(this._listCollection);a.setSelectedIndex(this._selectedIndex);a.addEventListener("changed",this._onDropdownDataListPopupChangedInstance);a.addEventListener("layoutcomplete",this._onDropdownDataListPopupLayoutCompleteInstance);
return a};DropdownElement.prototype._updateText=function(){null==this._labelElement&&this._createLabel();var a=this.getStyle("ItemLabelFunction");null==this._selectedItem||null==a?this._labelElement.setStyle("Text",this.getStyle("Text")):this._labelElement.setStyle("Text",a(this._selectedItem))};DropdownElement.prototype._onDropdownListCollectionChanged=function(a){this._updateText();this._sampledTextWidth=null;this._invalidateMeasure()};
DropdownElement.prototype._onCanvasElementAdded=function(a){DropdownElement.base.prototype._onCanvasElementAdded.call(this,a);null!=this._listCollection&&this._listCollection.addEventListener("collectionchanged",this._onDropdownListCollectionChangedInstance)};
DropdownElement.prototype._onCanvasElementRemoved=function(a){DropdownElement.base.prototype._onCanvasElementRemoved.call(this,a);null!=this._listCollection&&this._listCollection.removeEventListener("collectionchanged",this._onDropdownListCollectionChangedInstance);this.close(!1)};
DropdownElement.prototype._reverseTween=function(){var a=this._openCloseTween.startVal,b=this._openCloseTween.endVal,c=Date.now(),d=c-this._openCloseTween.startTime;this._openCloseTween.startVal=b;this._openCloseTween.endVal=a;this._openCloseTween.startTime=c+d-this._openCloseTween.duration};
DropdownElement.prototype._onButtonClick=function(a){DropdownElement.base.prototype._onButtonClick.call(this,a);1!=a.getIsCanceled()&&(null!=this._openCloseTween?this._reverseTween():null==this._openHeight?this.open(!0):this.close(!0))};
DropdownElement.prototype._createArrowButton=function(a){a=new a;a._setStyleDefinitionDefault(this._getDefaultStyle("ArrowButtonStyle"));a._setStyleProxy(new StyleProxy(this,DropdownElement._ArrowButtonProxyMap));a.setStyleDefinition(this.getStyle("ArrowButtonStyle"));return a};
DropdownElement.prototype._updateArrowButton=function(){var a=this.getStyle("ArrowButtonClass");null==a?null!=this._arrowButton&&(this._removeChild(this._arrowButton),this._arrowButton=null):null==this._arrowButton?(this._arrowButton=this._createArrowButton(a),this._addChild(this._arrowButton)):this._arrowButton.constructor!=a?(this._removeChild(this._arrowButton),this._arrowButton=this._createArrowButton(a),this._addChild(this._arrowButton)):this._arrowButton.setStyleDefinition(this.getStyle("ArrowButtonStyle"))};
DropdownElement.prototype._doStylesUpdated=function(a){DropdownElement.base.prototype._doStylesUpdated.call(this,a);"ItemLabelFunction"in a&&(this._sampledTextWidth=null,this._invalidateMeasure(),this._updateText());"PopupDataListStyle"in a&&null!=this._dataListPopup&&this._dataListPopup.setStyleDefinition(this.getStyle("PopupListStyle"));("ArrowButtonClass"in a||"ArrowButtonStyle"in a)&&this._updateArrowButton();if("TextStyle"in a||"TextFont"in a||"TextSize"in a||"TextAlign"in a||"TextBaseline"in
a||"Text"in a)this._sampledTextWidth=null,this._invalidateMeasure()};DropdownElement.prototype._sampleTextWidths=function(){var a=this._labelElement._getFontString(),b=this.getStyle("Text");null==b&&(b="");var b=CanvasElement._measureText(b,a),c=this.getStyle("ItemLabelFunction");if(null!=this._listCollection&&null!=c)for(var d,e=0;10>e&&e!=this._listCollection.getLength();e++)d=CanvasElement._measureText(c(this._listCollection.getItemAt(e)),a),d>b&&(b=d);return b};
DropdownElement.prototype._doMeasure=function(a,b){var c=ButtonElement.base.prototype._doMeasure.call(this,a,b);null==this._sampledTextWidth&&(this._sampledTextWidth=this._sampleTextWidths());var d=this._labelElement._getPaddingSize(),e=this._labelElement.getStyle("TextSize"),d={width:this._sampledTextWidth+d.width,height:e+d.height};d.width+=a;d.height+=b;d.width+=20;if(null!=this._arrowButton){var e=this._arrowButton.getStyle("Width"),f=this._arrowButton.getStyle("Height");null!=f&&f>d.height&&
(d.height=f);d.width=null!=e?d.width+e:d.width+.85*d.height}c.width>d.width&&(d.width=c.width);c.height>d.height&&(d.height=c.height);return d};
DropdownElement.prototype._doLayout=function(a){DropdownElement.base.prototype._doLayout.call(this,a);if(null!=this._arrowButton){var b=a.getX(),c=a.getY(),d=a.getWidth();a=a.getHeight();var e=this._arrowButton.getStyle("Width"),f=this._arrowButton.getStyle("Height");null==f&&(f=this._height);null==e&&(e=.85*this._height);this._width<e?(this._arrowButton._setActualSize(0,0),this._labelElement._setActualSize(0,0)):(this._labelElement._setActualPosition(b,c),this._labelElement._setActualSize(d-e,a),
this._arrowButton._setActualPosition(this._width-e,c+a/2-f/2),this._arrowButton._setActualSize(e,f))}};function DataGridHeaderItemRenderer(){DataGridHeaderItemRenderer.base.prototype.constructor.call(this);this._currentSortDirection=this._sortDescIcon=this._sortAscIcon=null}DataGridHeaderItemRenderer.prototype=Object.create(ButtonElement.prototype);DataGridHeaderItemRenderer.prototype.constructor=DataGridHeaderItemRenderer;DataGridHeaderItemRenderer.base=ButtonElement;
DataGridHeaderItemRenderer._StyleTypes=Object.create(null);DataGridHeaderItemRenderer._StyleTypes.SortAscIconClass={inheritable:!1};DataGridHeaderItemRenderer._StyleTypes.SortAscIconStyle={inheritable:!1};DataGridHeaderItemRenderer._StyleTypes.SortDescIconClass={inheritable:!1};DataGridHeaderItemRenderer._StyleTypes.SortDescIconStyle={inheritable:!1};DataGridHeaderItemRenderer._StyleTypes.IconGap={inheritable:!1};DataGridHeaderItemRenderer._StyleTypes.IconPlacement={inheritable:!1};
DataGridHeaderItemRenderer.StyleDefault=new StyleDefinition;DataGridHeaderItemRenderer.StyleDefault.setStyle("DisabledSkinStyle",ButtonElement.UpSkinStyleDefault);DataGridHeaderItemRenderer.StyleDefault.setStyle("DisabledTextColor",null);DataGridHeaderItemRenderer.StyleDefault.setStyle("BorderType","none");DataGridHeaderItemRenderer.StyleDefault.setStyle("TextSize",12);DataGridHeaderItemRenderer.StyleDefault.setStyle("TextAlign","left");
DataGridHeaderItemRenderer.StyleDefault.setStyle("PaddingTop",3);DataGridHeaderItemRenderer.StyleDefault.setStyle("PaddingBottom",3);DataGridHeaderItemRenderer.StyleDefault.setStyle("PaddingLeft",8);DataGridHeaderItemRenderer.StyleDefault.setStyle("PaddingRight",8);DataGridHeaderItemRenderer.SortAscIconBgShapeDefault=new ArrowShape;DataGridHeaderItemRenderer.SortAscIconBgShapeDefault.setStyle("Direction","up");DataGridHeaderItemRenderer.SortAscIconStyleDefault=new StyleDefinition;
DataGridHeaderItemRenderer.SortAscIconStyleDefault.setStyle("BorderType","none");DataGridHeaderItemRenderer.SortAscIconStyleDefault.setStyle("BackgroundColor","#444444");DataGridHeaderItemRenderer.SortAscIconStyleDefault.setStyle("BackgroundShape",DataGridHeaderItemRenderer.SortAscIconBgShapeDefault);DataGridHeaderItemRenderer.SortAscIconStyleDefault.setStyle("MouseEnabled",!1);DataGridHeaderItemRenderer.SortAscIconStyleDefault.setStyle("UpSkinStyle",null);
DataGridHeaderItemRenderer.SortAscIconStyleDefault.setStyle("OverSkinStyle",null);DataGridHeaderItemRenderer.SortAscIconStyleDefault.setStyle("DownSkinStyle",null);DataGridHeaderItemRenderer.SortAscIconStyleDefault.setStyle("DisabledSkinStyle",null);DataGridHeaderItemRenderer.SortDescIconBgShapeDefault=new ArrowShape;DataGridHeaderItemRenderer.SortDescIconBgShapeDefault.setStyle("Direction","down");DataGridHeaderItemRenderer.SortDescIconStyleDefault=new StyleDefinition;
DataGridHeaderItemRenderer.SortDescIconStyleDefault.setStyle("BorderType","none");DataGridHeaderItemRenderer.SortDescIconStyleDefault.setStyle("BackgroundColor","#444444");DataGridHeaderItemRenderer.SortDescIconStyleDefault.setStyle("BackgroundShape",DataGridHeaderItemRenderer.SortDescIconBgShapeDefault);DataGridHeaderItemRenderer.SortDescIconStyleDefault.setStyle("MouseEnabled",!1);DataGridHeaderItemRenderer.SortDescIconStyleDefault.setStyle("UpSkinStyle",null);
DataGridHeaderItemRenderer.SortDescIconStyleDefault.setStyle("OverSkinStyle",null);DataGridHeaderItemRenderer.SortDescIconStyleDefault.setStyle("DownSkinStyle",null);DataGridHeaderItemRenderer.SortDescIconStyleDefault.setStyle("DisabledSkinStyle",null);DataGridHeaderItemRenderer.StyleDefault.setStyle("SortAscIconClass",ButtonElement);DataGridHeaderItemRenderer.StyleDefault.setStyle("SortAscIconStyle",DataGridHeaderItemRenderer.SortAscIconStyleDefault);
DataGridHeaderItemRenderer.StyleDefault.setStyle("SortDescIconClass",ButtonElement);DataGridHeaderItemRenderer.StyleDefault.setStyle("SortDescIconStyle",DataGridHeaderItemRenderer.SortDescIconStyleDefault);DataGridHeaderItemRenderer.StyleDefault.setStyle("IconGap",3);DataGridHeaderItemRenderer.StyleDefault.setStyle("IconPlacement","right");DataGridHeaderItemRenderer._SortIconProxyMap=Object.create(null);DataGridHeaderItemRenderer._SortIconProxyMap.SkinState=!0;
DataGridHeaderItemRenderer.prototype._createSortIcon=function(a){var b,c;1==a?(b=this.getStyle("SortDescIconClass"),a=this._getDefaultStyle("SortDescIconStyle"),c=this.getStyle("SortDescIconStyle")):(b=this.getStyle("SortAscIconClass"),a=this._getDefaultStyle("SortAscIconStyle"),c=this.getStyle("SortAscIconStyle"));b=new b;b._setStyleDefinitionDefault(a);b._setStyleProxy(new StyleProxy(this,DataGridHeaderItemRenderer._SortIconProxyMap));b.setStyleDefinition(c);return b};
DataGridHeaderItemRenderer.prototype._updateSortIcons=function(){if(null!=this._listData){var a=this._listData,b=a._parentGrid._listCollection,c=null;null!=b&&null!=b._collectionSort&&b._collectionSort==a._parentGrid._gridColumns[a._columnIndex].getStyle("CollectionSort")&&(c=1==b._collectionSort._isDecending?"down":"up");this._currentSortDirection!=c&&(this._currentSortDirection=c,this._invalidateLayout());null==c?(null!=this._sortAscIcon&&this._sortAscIcon.setStyle("Visible",!1),null!=this._sortDescIcon&&
this._sortDescIcon.setStyle("Visible",!1)):"up"==c?(a=this.getStyle("SortAscIconClass"),null==a?null!=this._sortAscIcon&&(this._removeChild(this._sortAscIcon),this._sortAscIcon=null):(null==this._sortAscIcon?(this._sortAscIcon=this._createSortIcon(!1),this._addChild(this._sortAscIcon)):this._sortAscIcon.constructor!=a?(this._removeChild(this._sortAscIcon),this._sortAscIcon=this._createSortIcon(!1),this._addChild(this._sortAscIcon)):this._sortAscIcon.setStyleDefinition(this.getStyle("SortAscIconStyle")),
null!=this._sortDescIcon&&this._sortDescIcon.setStyle("Visible",!1),this._sortAscIcon.setStyle("Visible",!0))):"down"==c&&(a=this.getStyle("SortDescIconClass"),null==a?null!=this._sortDescIcon&&(this._removeChild(this._sortDescIcon),this._sortDescIcon=null):(null==this._sortDescIcon?(this._sortDescIcon=this._createSortIcon(!0),this._addChild(this._sortDescIcon)):this._sortDescIcon.constructor!=a?(this._removeChild(this._sortDescIcon),this._sortDescIcon=this._createSortIcon(!0),this._addChild(this._sortDescIcon)):
this._sortDescIcon.setStyleDefinition(this.getStyle("SortDescIconStyle")),null!=this._sortAscIcon&&this._sortAscIcon.setStyle("Visible",!1),this._sortDescIcon.setStyle("Visible",!0)))}};DataGridHeaderItemRenderer.prototype._setListData=function(a,b){DataGridHeaderItemRenderer.base.prototype._setListData.call(this,a,b);null!=a&&(this.setStyle("Text",a._parentGrid._gridColumns[a._columnIndex].getStyle("HeaderLabel")),this._updateSortIcons())};
DataGridHeaderItemRenderer.prototype._doStylesUpdated=function(a){DataGridHeaderItemRenderer.base.prototype._doStylesUpdated.call(this,a);("SortAscIconClass"in a||"SortAscIconStyle"in a||"SortDescIconClass"in a||"SortDescIconStyle"in a)&&this._updateSortIcons();("IconGap"in a||"IconPlacement"in a)&&this._invalidateLayout()};
DataGridHeaderItemRenderer.prototype._doLayout=function(a){DataGridHeaderItemRenderer.base.prototype._doLayout.call(this,a);if(null!=this._labelElement&&null!=this._currentSortDirection){var b;b="up"==this._currentSortDirection?this._sortAscIcon:this._sortDescIcon;if(null!=b){var c=a.getX(),d=a.getY(),e=a.getWidth(),f=a.getHeight(),g=b.getStyle("Width"),k=b.getStyle("Height");null==k&&(k=.35*a.getHeight());null==g&&(g=1.5*k);e<g?(b._setActualSize(0,0),this._labelElement._setActualSize(0,0)):(a=this.getStyle("IconGap"),
"left"==this.getStyle("IconPlacement")?(this._labelElement._setActualPosition(c+g+a,d),this._labelElement._setActualSize(e-g-a,f),b._setActualPosition(c,d+f/2-k/2)):(this._labelElement._setActualPosition(c,d),this._labelElement._setActualSize(e-g-a,f),b._setActualPosition(c+e-g,d+f/2-k/2)),b._setActualSize(g,k))}}};function DataGridHeaderElement(){DataGridHeaderElement.base.prototype.constructor.call(this);var a=this;this._onColumnDividerDragInstance=function(b){a._onColumnDividerDrag(b)}}
DataGridHeaderElement.prototype=Object.create(DataGridDataRenderer.prototype);DataGridHeaderElement.prototype.constructor=DataGridHeaderElement;DataGridHeaderElement.base=DataGridDataRenderer;DataGridHeaderElement._StyleTypes=Object.create(null);DataGridHeaderElement._StyleTypes.ColumnDividerClass={inheritable:!1};DataGridHeaderElement._StyleTypes.ColumnDividerStyle={inheritable:!1};DataGridHeaderElement._StyleTypes.DraggableColumns={inheritable:!1};DataGridHeaderElement.StyleDefault=new StyleDefinition;
DataGridHeaderElement.StyleDefault.setStyle("BorderType","solid");DataGridHeaderElement.StyleDefault.setStyle("BorderThickness",1);DataGridHeaderElement.StyleDefault.setStyle("PaddingBottom",1);DataGridHeaderElement.ColumnDividerStyleDefault=new StyleDefinition;DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("SkinClass",DataGridHeaderColumnDividerSkinElement);DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("DividerLineColor","#777777");
DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("DividerArrowColor","#444444");DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("BorderType","none");DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("BackgroundColor",null);DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("Width",11);DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("TabStop",-1);DataGridHeaderElement.StyleDefault.setStyle("ColumnDividerClass",ButtonElement);
DataGridHeaderElement.StyleDefault.setStyle("ColumnDividerStyle",DataGridHeaderElement.ColumnDividerStyleDefault);DataGridHeaderElement.StyleDefault.setStyle("DraggableColumns",!0);
DataGridHeaderElement.prototype._onColumnDividerDrag=function(a){if(null!=this._listData){var b=this._listData._parentList,c,d=0,e=0,f=0,g,k=[];for(g=0;g<b._gridColumns.length;g++)k.push({actualSize:b._columnSizes[g],percentSize:b._columnPercents[g],oldPercentSize:b._columnPercents[g],minSize:b._gridColumns[g].getStyle("MinSize"),minPercent:0}),e+=k[g].actualSize,f+=k[g].percentSize;for(g=0;g<k.length;g++)k[g].minPercent=k[g].minSize/e*f;var m;for(g=k.length;g<this._itemRenderersContainer._children.length;g++)if(c=
this._itemRenderersContainer._children[g],m=g-k.length,d+=k[m].actualSize,c==a.getCurrentTarget()){var l=d=Math.round(d-c._width/2),p=d;g=a=0;for(var q=[],n=m+1;n<k.length;n++)q.push(k[n]),a+=k[n].percentSize,g+=k[n].actualSize,p+=k[n].actualSize-k[m].minSize;for(n=m;0<=n;n--)l-=k[n].actualSize-k[n].minSize;n=c._x;n<l&&(n=l);n>p&&(n=p);c=0;d=n-d;g-=d;for(n=m;0<=n&&(k[n].actualSize+d<k[n].minSize?(d-=k[n].actualSize-k[n].minSize,k[n].actualSize=k[n].minSize):(k[n].actualSize+=d,d=0),k[n].percentSize=
k[n].actualSize/e*f,c+=k[n].percentSize-k[n].oldPercentSize,0!=d);n--);e=q.slice();for(f=!1;0==f;)for(f=!0,n=0;n<e.length;n++)if(m=e[n].oldPercentSize/a*c,e[n].oldPercentSize-m<e[n].minPercent){e[n].percentSize=e[n].minPercent;a-=e[n].minPercent;c-=e[n].oldPercentSize-e[n].percentSize;e.splice(n,1);f=!1;break}else e[n].percentSize=e[n].oldPercentSize-m;CanvasElement._calculateMinMaxPercentSizes(q,g);break}for(g=0;g<k.length;g++)b._columnSizes[g]=k[g].actualSize,b._columnPercents[g]=k[g].percentSize;
this._invalidateLayout();b._invalidateLayout();b._invalidateListRenderersLayout()}};
DataGridHeaderElement.prototype._doStylesUpdated=function(a){DataGridHeaderElement.base.prototype._doStylesUpdated.call(this,a);("ColumnDividerClass"in a||"ColumnDividerStyle"in a)&&this._setListData(this._listData,this._itemData);if("DraggableColumns"in a&&null!=this._listData){var b=this._listData._parentList;a=this.getStyle("DraggableColumns");for(var c,d=b._gridColumns.length;d<this._itemRenderersContainer._children.length;d++)b=this._itemRenderersContainer._children[d],b.setStyle("Draggable",
a),c=b.hasEventListener("dragging",this._onColumnDividerDragInstance),1==a&&0==c?b.addEventListener("dragging",this._onColumnDividerDragInstance):0==a&&1==c&&b.removeEventListener("dragging",this._onColumnDividerDragInstance),1==a?b.setStyle("Enabled",!0):b.setStyle("Enabled",!1)}};
DataGridHeaderElement.prototype._setListData=function(a,b){DataGridDataRenderer.base.prototype._setListData.call(this,a,b);if(null!=a){var c,d;for(c=0;c<a._parentList._gridColumns.length;c++)d=this._itemRenderersContainer._getChildAt(c),null==d?(d=a._parentList._createHeaderItemRenderer(c),this._itemRenderersContainer._addChildAt(d,c)):(columnDef=a._parentList._gridColumns[c],d.constructor!=columnDef.getStyle("HeaderItemClass")?(this._itemRenderersContainer._removeChildAt(c),d=a._parentList._createHeaderItemRenderer(c),
this._itemRenderersContainer._addChildAt(d,c)):a._parentList._updateHeaderItemRendererData(d,c));var e=this.getStyle("ColumnDividerClass"),f=this.getStyle("DraggableColumns"),g=a._parentList._gridColumns.length;for(null!=e&&(g=2*g-1);c<g;c++)d=this._itemRenderersContainer._getChildAt(c),null!=d&&d.constructor!=e&&(this._itemRenderersContainer._removeChildAt(c),d=null),null==d?(d=new e,d._setStyleDefinitionDefault(this._getDefaultStyle("ColumnDividerStyle")),d.setStyleDefinition(this.getStyle("ColumnDividerStyle")),
d.setStyle("Draggable",f),1==f&&d.addEventListener("dragging",this._onColumnDividerDragInstance),this._itemRenderersContainer._addChildAt(d,c)):d.setStyleDefinition(this.getStyle("ColumnDividerStyle"));for(;this._itemRenderersContainer._children.length>g;)this._itemRenderersContainer._removeChildAt(this._itemRenderersContainer._children.length-1);this._invalidateMeasure();this._invalidateLayout()}};
DataGridHeaderElement.prototype._doLayout=function(a){DataGridHeaderElement.base.prototype._doLayout.call(this,a);if(null!=this._listData){a=this._listData._parentList;for(var b,c=0,d,e=a._columnSizes.length;e<this._itemRenderersContainer._children.length;e++)b=this._itemRenderersContainer._children[e],d=a._columnSizes[e-a._columnSizes.length],c+=d,d=b.getStyle("Height"),null==d&&(d=Math.round(.7*this._itemRenderersContainer._height)),b._setActualSize(b._getStyledOrMeasuredWidth(),d),b._setActualPosition(c-
b._getStyledOrMeasuredWidth()/2,this._itemRenderersContainer._height/2-b._height/2)}};
function DataGridElement(){DataGridElement.base.prototype.constructor.call(this);this._gridColumns=[];this._columnSizes=[];this._columnPercents=[];this._gridHeader=null;this._gridLineContainer=new CanvasElement;this._gridLineContainer.setStyle("MouseEnabled",!1);this._gridLineContainer.setStyle("ClipContent",!0);this._addChild(this._gridLineContainer);var a=this;this._onDataGridColumnDefinitionChangedInstance=function(b){a._onDataGridColumnDefinitionChanged(b)};this._onDataGridRowItemClickInstance=
function(b){a._onDataGridRowItemClick(b)};this._onDataGridHeaderItemClickInstance=function(b){a._onDataGridHeaderItemClick(b)}}DataGridElement.prototype=Object.create(DataListElement.prototype);DataGridElement.prototype.constructor=DataGridElement;DataGridElement.base=DataListElement;DataGridElement._StyleTypes=Object.create(null);DataGridElement._StyleTypes.HeaderClass={inheritable:!1};DataGridElement._StyleTypes.HeaderStyle={inheritable:!1};DataGridElement._StyleTypes.GridLinesPriority={inheritable:!1};
DataGridElement._StyleTypes.VerticalGridLinesClass={inheritable:!1};DataGridElement._StyleTypes.VerticalGridLinesStyle={inheritable:!1};DataGridElement._StyleTypes.HorizontalGridLinesClass={inheritable:!1};DataGridElement._StyleTypes.HorizontalGridLinesStyle={inheritable:!1};DataGridElement.StyleDefault=new StyleDefinition;DataGridElement.GridLineStyleDefault=new StyleDefinition;DataGridElement.GridLineStyleDefault.setStyle("Width",1);DataGridElement.GridLineStyleDefault.setStyle("Height",1);
DataGridElement.GridLineStyleDefault.setStyle("BackgroundColor","#BBBBBB");DataGridElement.ScrollBarStyleDefault=new StyleDefinition;DataGridElement.ScrollBarStyleDefault.setStyle("Padding",-1);DataGridElement.StyleDefault.setStyle("ListItemClass",DataGridDataRenderer);DataGridElement.StyleDefault.setStyle("ListItemStyle",null);DataGridElement.StyleDefault.setStyle("BorderType","solid");DataGridElement.StyleDefault.setStyle("BorderThickness",1);DataGridElement.StyleDefault.setStyle("Padding",1);
DataGridElement.StyleDefault.setStyle("ScrollBarStyle",DataGridElement.ScrollBarStyleDefault);DataGridElement.StyleDefault.setStyle("HeaderClass",DataGridHeaderElement);DataGridElement.StyleDefault.setStyle("HeaderStyle",null);DataGridElement.StyleDefault.setStyle("GridLinesPriority","vertical");DataGridElement.StyleDefault.setStyle("VerticalGridLinesClass",CanvasElement);DataGridElement.StyleDefault.setStyle("VerticalGridLinesStyle",DataGridElement.GridLineStyleDefault);
DataGridElement.StyleDefault.setStyle("HorizontalGridLinesClass",null);DataGridElement.StyleDefault.setStyle("HorizontalGridLinesStyle",DataGridElement.GridLineStyleDefault);DataGridElement.StyleDefault.setStyle("TabStop",0);DataGridElement.prototype.addColumnDefinition=function(a){return this.addColumnDefinitionAt(a,this._gridColumns.length)};
DataGridElement.prototype.addColumnDefinitionAt=function(a,b){if(!(a instanceof DataGridColumnDefinition))throw"Invalid DataGridColumnDefinition";this._gridColumns.splice(b,0,a);this._columnPercents.splice(b,0,a.getStyle("PercentSize"));null!=this._manager&&a.addEventListener("stylechanged",this._onDataGridColumnDefinitionChangedInstance);this._columnSizes=[];this._columnsChanged();return a};DataGridElement.prototype.getColumnDefinitionAt=function(a){return 0>a||a>=this._gridColumns.length?null:this._gridColumns[a]};
DataGridElement.prototype.removeColumnDefinition=function(a){return this.removeColumnDefinitionAt(this._gridColumns.indexOf(a))};DataGridElement.prototype.removeColumnDefinitionAt=function(a){if(0>a||a>=this._gridColumns.length)return null;var b=this._gridColumns.splice(a,1)[0];this._columnPercents.splice(a,1);null!=this._manager&&b.removeEventListener("stylechanged",this._onDataGridColumnDefinitionChangedInstance);this._columnSizes=[];this._columnsChanged();return b};
DataGridElement.prototype.getNumColumns=function(){return this._gridColumns.length};DataGridElement.prototype._onDataGridColumnDefinitionChanged=function(a){var b=a.getStyleName();"PercentSize"==b?(b=this._gridColumns.indexOf(a.getTarget()),this._columnPercents[b]=a.getNewValue(),this._columnSizes=[],this._invalidateLayout()):"MinSize"==b?(this._columnSizes=[],this._invalidateLayout()):this._columnsChanged()};
DataGridElement.prototype._columnsChanged=function(){null!=this._gridHeader&&this._gridHeader._setListData(this._gridHeader._listData,null);for(var a,b=0;b<this._contentPane._children.length;b++)a=this._contentPane._children[b],a._setListData(a._listData,a._itemData);this._invalidateLayout()};
DataGridElement.prototype._onDataListCollectionChanged=function(a){DataGridElement.base.prototype._onDataListCollectionChanged.call(this,a);"reset"==a.getKind()&&null!=this._gridHeader&&this._gridHeader._setListData(this._gridHeader._listData,null)};DataGridElement.prototype._onCanvasElementAdded=function(a){DataGridElement.base.prototype._onCanvasElementAdded.call(this,a);for(a=0;a<this._gridColumns.length;a++)this._gridColumns[a].addEventListener("stylechanged",this._onDataGridColumnDefinitionChangedInstance)};
DataGridElement.prototype._onCanvasElementRemoved=function(a){DataGridElement.base.prototype._onCanvasElementRemoved.call(this,a);for(a=0;a<this._gridColumns.length;a++)this._gridColumns[a].removeEventListener("stylechanged",this._onDataGridColumnDefinitionChangedInstance)};
DataGridElement.prototype._doStylesUpdated=function(a){DataGridElement.base.prototype._doStylesUpdated.call(this,a);if("HeaderClass"in a){var b=this.getStyle("HeaderClass");if(null==b&&null!=this._gridHeader||null!=this._gridHeader&&this._gridHeader.constructor!=b)this._removeChild(this._gridHeader),this._gridHeader=null;null!=b&&null==this._gridHeader&&(this._gridHeader=new b,this._gridHeader._setStyleDefinitionDefault(this._getDefaultStyle("HeaderStyle")),this._gridHeader._setListData(new DataListData(this,
-1),null),this._addChild(this._gridHeader));this._invalidateLayout()}"HeaderStyle"in a&&null!=this._gridHeader&&this._gridHeader.setStyleDefinition(this.getStyle("HeaderStyle"));("GridLinesPriority"in a||"VerticalGridLinesClass"in a||"VerticalGridLinesStyle"in a||"HorizontalGridLinesClass"in a||"HorizontalGridLinesStyle"in a)&&this._invalidateLayout()};
DataGridElement.prototype._createRenderer=function(a){var b=new (this.getStyle("ListItemClass"));b._setStyleDefinitionDefault(this._getDefaultStyle("ListItemStyle"));b.setStyleDefinition(this.getStyle("ListItemStyle"));this._updateRendererData(b,a);return b};
DataGridElement.prototype._createHeaderItemRenderer=function(a){var b=this._gridColumns[a],c=new (b.getStyle("HeaderItemClass"));c._setStyleDefinitionDefault(b._getDefaultStyle("HeaderItemStyle"));this._updateHeaderItemRendererData(c,a);c.addEventListener("click",this._onDataGridHeaderItemClickInstance);return c};
DataGridElement.prototype._updateHeaderItemRendererData=function(a,b){var c=this._gridColumns[b],d;d=null!=a._listData&&a._listData._columnIndex==b?a._listData:new DataGridItemData(this,-1,b);a.setStyleDefinition(c.getStyle("HeaderItemStyle"));a._setListData(d,null)};
DataGridElement.prototype._onDataGridHeaderItemClick=function(a){a=a.getCurrentTarget()._listData._columnIndex;var b=this._gridColumns[a].getStyle("CollectionSort");null!=b&&b instanceof CollectionSort&&(this._listCollection._collectionSort!=b?(b._isDecending=!1,this._listCollection.setCollectionSort(b)):b._isDecending=!b._isDecending,this._listCollection.sort());this._dispatchEvent(new ElementGridItemClickEvent(-1,a,null))};
DataGridElement.prototype._createRowItemRenderer=function(a,b){var c=this._gridColumns[b],d=new (c.getStyle("RowItemClass"));d._setStyleDefinitionDefault(c._getDefaultStyle("RowItemStyle"));this._updateRowItemRendererData(d,a,b);d.addEventListener("click",this._onDataGridRowItemClickInstance);return d};
DataGridElement.prototype._updateRowItemRendererData=function(a,b,c){var d=this._gridColumns[c];c=null!=a._listData&&a._listData._columnIndex==c&&a._listData._itemIndex==b?a._listData:new DataGridItemData(this,b,c);a.setStyleDefinition(d.getStyle("RowItemStyle"));a._setListData(c,this._listCollection.getItemAt(b))};
DataGridElement.prototype._onDataGridRowItemClick=function(a){var b=a.getCurrentTarget()._listData._itemIndex,c=a.getCurrentTarget()._listData._columnIndex;a=a.getCurrentTarget()._itemData;var d=!1;1==this.getStyle("Selectable")&&1==this.setSelectedIndex(b)&&(d=!0);this._dispatchEvent(new ElementGridItemClickEvent(b,c,a));1==d&&this._dispatchEvent(new ElementEvent("changed",!1))};DataGridElement.prototype._doMeasure=function(a,b){return{width:16,height:16}};
DataGridElement.prototype._createGridLine=function(a){"vertical"==a?(a=new (this.getStyle("VerticalGridLinesClass")),a._setStyleDefinitionDefault(this._getDefaultStyle("VerticalGridLinesStyle")),a.setStyleDefinition(this.getStyle("VerticalGridLinesStyle"))):(a=new (this.getStyle("HorizontalGridLinesClass")),a._setStyleDefinitionDefault(this._getDefaultStyle("HorizontalGridLinesStyle")),a.setStyleDefinition(this.getStyle("HorizontalGridLinesStyle")));return a};
DataGridElement.prototype._doLayout=function(a){if(null!=this._gridHeader){var b=this._gridHeader._getStyledOrMeasuredHeight(),c=new DrawMetrics;c._x=a._x;c._y=a._y+b;c._width=a._width;c._height=a._height-b;DataGridElement.base.prototype._doLayout.call(this,c)}else DataGridElement.base.prototype._doLayout.call(this,a);if(1!=this._layoutInvalid){null!=this._gridHeader&&(this._gridHeader._setActualPosition(this._contentPane._x,a.getY()),this._gridHeader._setActualSize(a.getWidth(),this._gridHeader._getStyledOrMeasuredHeight()));
b=!1;if(this._columnSizes.length!=this._gridColumns.length)b=!0;else{for(a=c=0;a<this._columnSizes.length;a++)c+=this._columnSizes[a];c!=this._contentPane._width&&(b=!0)}if(1==b){b=[];for(a=0;a<this._gridColumns.length;a++)b.push({percentSize:this._columnPercents[a],minSize:this._gridColumns[a].getStyle("MinSize")});CanvasElement._calculateMinMaxPercentSizes(b,this._contentPane._width);c=[];for(a=0;a<b.length;a++)c.push(b[a].actualSize);this._columnSizes=c;null!=this._gridHeader&&this._gridHeader._invalidateLayout();
this._invalidateListRenderersLayout()}this._gridLineContainer._setActualPosition(this._contentPane._x,this._contentPane._y);this._gridLineContainer._setActualSize(this._contentPane._width,this._contentPane._height);var d,b=0,e,f=!1;e=!1;for(var c=this.getStyle("GridLinesPriority"),g=this.getStyle("VerticalGridLinesClass"),k=this.getStyle("VerticalGridLinesStyle"),m=this.getStyle("HorizontalGridLinesClass"),l=this.getStyle("HorizontalGridLinesStyle");0==f||0==e;){if("horizontal"==c&&0==e||1==f&&0==
e){if(null!=m)for(a=0;a<this._contentPane._children.length;a++)e=this._contentPane._children[a],d=e._listData._itemIndex,0!=d&&(d=this._gridLineContainer._getChildAt(b),null==d?(d=this._createGridLine("horizontal"),this._gridLineContainer._addChildAt(d,b)):d.constructor!=m?(this._gridLineContainer._removeChildAt(b),d=this._createGridLine("horizontal"),this._gridLineContainer._addChildAt(d,b)):d.setStyleDefinition(l),d._setActualSize(this._gridLineContainer._width,d.getStyle("Height")),d._setActualPosition(0,
e._y-d._height/2),b++);e=!0}if("vertical"==c&&0==f||1==e&&0==f){if(null!=g)for(a=f=0;a<this._columnSizes.length-1;a++)f+=this._columnSizes[a],d=this._gridLineContainer._getChildAt(b),null==d?(d=this._createGridLine("vertical"),this._gridLineContainer._addChildAt(d,b)):d.constructor!=g?(this._gridLineContainer._removeChildAt(b),d=this._createGridLine("vertical"),this._gridLineContainer._addChildAt(d,b)):d.setStyleDefinition(k),d._setActualSize(d.getStyle("Width"),this._gridLineContainer._height),d._setActualPosition(f-
d._width/2,0),b++;f=!0}}for(;b<this._gridLineContainer._children.length;)this._gridLineContainer._removeChildAt(this._gridLineContainer._children.length-1)}};function DataGridColumnDefinition(){DataGridColumnDefinition.base.prototype.constructor.call(this)}DataGridColumnDefinition.prototype=Object.create(StyleableBase.prototype);DataGridColumnDefinition.prototype.constructor=DataGridColumnDefinition;DataGridColumnDefinition.base=StyleableBase;DataGridColumnDefinition._StyleTypes=Object.create(null);
DataGridColumnDefinition._StyleTypes.PercentSize={inheritable:!1};DataGridColumnDefinition._StyleTypes.MinSize={inheritable:!1};DataGridColumnDefinition._StyleTypes.HeaderLabel={inheritable:!1};DataGridColumnDefinition._StyleTypes.HeaderItemClass={inheritable:!1};DataGridColumnDefinition._StyleTypes.HeaderItemStyle={inheritable:!1};DataGridColumnDefinition._StyleTypes.CollectionSort={inheritable:!1};DataGridColumnDefinition._StyleTypes.RowItemClass={inheritable:!1};
DataGridColumnDefinition._StyleTypes.RowItemStyle={inheritable:!1};DataGridColumnDefinition._StyleTypes.RowItemLabelFunction={inheritable:!1};DataGridColumnDefinition.StyleDefault=new StyleDefinition;DataGridColumnDefinition.StyleDefault.setStyle("PercentSize",100);DataGridColumnDefinition.StyleDefault.setStyle("MinSize",12);DataGridColumnDefinition.StyleDefault.setStyle("HeaderLabel","");DataGridColumnDefinition.StyleDefault.setStyle("HeaderItemClass",DataGridHeaderItemRenderer);
DataGridColumnDefinition.StyleDefault.setStyle("HeaderItemStyle",null);DataGridColumnDefinition.StyleDefault.setStyle("CollectionSort",null);DataGridColumnDefinition.StyleDefault.setStyle("RowItemClass",DataGridLabelItemRenderer);DataGridColumnDefinition.StyleDefault.setStyle("RowItemStyle",null);DataGridColumnDefinition.StyleDefault.setStyle("RowItemLabelFunction",null);function CheckboxElement(){CheckboxElement.base.prototype.constructor.call(this)}CheckboxElement.prototype=Object.create(RadioButtonElement.prototype);
CheckboxElement.prototype.constructor=CheckboxElement;CheckboxElement.base=RadioButtonElement;CheckboxElement._StyleTypes=Object.create(null);CheckboxElement._StyleTypes.HalfSelectedUpSkinClass={inheritable:!1};CheckboxElement._StyleTypes.HalfSelectedUpSkinStyle={inheritable:!1};CheckboxElement._StyleTypes.HalfSelectedUpTextColor={inheritable:!1};CheckboxElement._StyleTypes.HalfSelectedOverSkinClass={inheritable:!1};CheckboxElement._StyleTypes.HalfSelectedOverSkinStyle={inheritable:!1};
CheckboxElement._StyleTypes.HalfSelectedOverTextColor={inheritable:!1};CheckboxElement._StyleTypes.HalfSelectedDownSkinClass={inheritable:!1};CheckboxElement._StyleTypes.HalfSelectedDownSkinStyle={inheritable:!1};CheckboxElement._StyleTypes.HalfSelectedDownTextColor={inheritable:!1};CheckboxElement._StyleTypes.HalfSelectedDisabledSkinClass={inheritable:!1};CheckboxElement._StyleTypes.HalfSelectedDisabledSkinStyle={inheritable:!1};CheckboxElement._StyleTypes.HalfSelectedDisabledTextColor={inheritable:!1};
CheckboxElement.StyleDefault=new StyleDefinition;CheckboxElement.StyleDefault.setStyle("AllowDeselect",!0);CheckboxElement.StyleDefault.setStyle("SkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("UpSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("OverSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("DownSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("DisabledSkinClass",CheckboxSkinElement);
CheckboxElement.StyleDefault.setStyle("SelectedUpSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("SelectedOverSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("SelectedDownSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("SelectedDisabledSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("HalfSelectedUpSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("HalfSelectedOverSkinClass",CheckboxSkinElement);
CheckboxElement.StyleDefault.setStyle("HalfSelectedDownSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("HalfSelectedDisabledSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("HalfSelectedUpTextColor","#000000");CheckboxElement.StyleDefault.setStyle("HalfSelectedOverTextColor","#000000");CheckboxElement.StyleDefault.setStyle("HalfSelectedDownTextColor","#000000");CheckboxElement.StyleDefault.setStyle("HalfSelectedDisabledTextColor","#888888");
CheckboxElement.UpSkinStyleDefault=new StyleDefinition;CheckboxElement.UpSkinStyleDefault.setStyle("BorderType","solid");CheckboxElement.UpSkinStyleDefault.setStyle("BorderThickness",1);CheckboxElement.UpSkinStyleDefault.setStyle("BorderColor","#333333");CheckboxElement.UpSkinStyleDefault.setStyle("BackgroundColor","#EBEBEB");CheckboxElement.UpSkinStyleDefault.setStyle("AutoGradientType","linear");CheckboxElement.UpSkinStyleDefault.setStyle("AutoGradientStart",.05);
CheckboxElement.UpSkinStyleDefault.setStyle("AutoGradientStop",-.05);CheckboxElement.UpSkinStyleDefault.setStyle("CheckColor","#000000");CheckboxElement.OverSkinStyleDefault=new StyleDefinition;CheckboxElement.OverSkinStyleDefault.setStyle("BorderType","solid");CheckboxElement.OverSkinStyleDefault.setStyle("BorderThickness",1);CheckboxElement.OverSkinStyleDefault.setStyle("BorderColor","#333333");CheckboxElement.OverSkinStyleDefault.setStyle("BackgroundColor","#DDDDDD");
CheckboxElement.OverSkinStyleDefault.setStyle("AutoGradientType","linear");CheckboxElement.OverSkinStyleDefault.setStyle("AutoGradientStart",.05);CheckboxElement.OverSkinStyleDefault.setStyle("AutoGradientStop",-.05);CheckboxElement.OverSkinStyleDefault.setStyle("CheckColor","#000000");CheckboxElement.DownSkinStyleDefault=new StyleDefinition;CheckboxElement.DownSkinStyleDefault.setStyle("BorderType","solid");CheckboxElement.DownSkinStyleDefault.setStyle("BorderThickness",1);
CheckboxElement.DownSkinStyleDefault.setStyle("BorderColor","#333333");CheckboxElement.DownSkinStyleDefault.setStyle("BackgroundColor","#CCCCCC");CheckboxElement.DownSkinStyleDefault.setStyle("AutoGradientType","linear");CheckboxElement.DownSkinStyleDefault.setStyle("AutoGradientStart",-.06);CheckboxElement.DownSkinStyleDefault.setStyle("AutoGradientStop",.02);CheckboxElement.DownSkinStyleDefault.setStyle("CheckColor","#000000");CheckboxElement.DisabledSkinStyleDefault=new StyleDefinition;
CheckboxElement.DisabledSkinStyleDefault.setStyle("BorderType","solid");CheckboxElement.DisabledSkinStyleDefault.setStyle("BorderThickness",1);CheckboxElement.DisabledSkinStyleDefault.setStyle("BorderColor","#999999");CheckboxElement.DisabledSkinStyleDefault.setStyle("BackgroundColor","#ECECEC");CheckboxElement.DisabledSkinStyleDefault.setStyle("AutoGradientType","linear");CheckboxElement.DisabledSkinStyleDefault.setStyle("AutoGradientStart",.05);
CheckboxElement.DisabledSkinStyleDefault.setStyle("AutoGradientStop",-.05);CheckboxElement.DisabledSkinStyleDefault.setStyle("CheckColor","#777777");CheckboxElement.StyleDefault.setStyle("UpSkinStyle",CheckboxElement.UpSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("OverSkinStyle",CheckboxElement.OverSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("DownSkinStyle",CheckboxElement.DownSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("DisabledSkinStyle",CheckboxElement.DisabledSkinStyleDefault);
CheckboxElement.StyleDefault.setStyle("SelectedUpSkinStyle",CheckboxElement.UpSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("SelectedOverSkinStyle",CheckboxElement.OverSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("SelectedDownSkinStyle",CheckboxElement.DownSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("SelectedDisabledSkinStyle",CheckboxElement.DisabledSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("HalfSelectedUpSkinStyle",CheckboxElement.UpSkinStyleDefault);
CheckboxElement.StyleDefault.setStyle("HalfSelectedOverSkinStyle",CheckboxElement.OverSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("HalfSelectedDownSkinStyle",CheckboxElement.DownSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("HalfSelectedDisabledSkinStyle",CheckboxElement.DisabledSkinStyleDefault);CheckboxElement.prototype.setSelected=function(a){CheckboxElement.base.prototype.setSelected.call(this,a)};
CheckboxElement.prototype._updateState=function(){if(2==this.getStyle("Selected")){var a="halfSelectedUp";0==this.getStyle("Enabled")?a="halfSelectedDisabled":1==this._mouseIsDown?a="halfSelectedDown":1==this._mouseIsOver&&(a="halfSelectedOver");this.setStyle("SkinState",a)}else CheckboxElement.base.prototype._updateState.call(this)};
CheckboxElement.prototype._getSkinClass=function(a){if("halfSelectedUp"==a)a=this.getStyleData("HalfSelectedUpSkinClass");else if("halfSelectedOver"==a)a=this.getStyleData("HalfSelectedOverSkinClass");else if("halfSelectedDown"==a)a=this.getStyleData("HalfSelectedDownSkinClass");else if("halfSelectedDisabled"==a)a=this.getStyleData("HalfSelectedDisabledSkinClass");else return CheckboxElement.base.prototype._getSkinClass.call(this,a);var b=this.getStyleData("SkinClass");return 0<b.comparePriority(a)?
b.value:a.value};CheckboxElement.prototype._getSkinStyleDefinitions=function(a){return"halfSelectedUp"==a?[this.getStyle("HalfSelectedUpSkinStyle")]:"halfSelectedOver"==a?[this.getStyle("HalfSelectedOverSkinStyle")]:"halfSelectedDown"==a?[this.getStyle("HalfSelectedDownSkinStyle")]:"halfSelectedDisabled"==a?[this.getStyle("HalfSelectedDisabledSkinStyle")]:CheckboxElement.base.prototype._getSkinStyleDefinitions.call(this,a)};
CheckboxElement.prototype._getSkinStyleDefinitionDefault=function(a){return"halfSelectedUp"==a?this._getDefaultStyle("HalfSelectedUpSkinStyle"):"halfSelectedOver"==a?this._getDefaultStyle("HalfSelectedOverSkinStyle"):"halfSelectedDown"==a?this._getDefaultStyle("HalfSelectedDownSkinStyle"):"halfSelectedDisabled"==a?this._getDefaultStyle("HalfSelectedDisabledSkinStyle"):CheckboxElement.base.prototype._getSkinStyleDefinitionDefault.call(this,a)};
CheckboxElement.prototype._getTextColor=function(a){if("halfSelectedUp"==a)a=this.getStyleData("HalfSelectedUpTextColor");else if("halfSelectedOver"==a)a=this.getStyleData("HalfSelectedOverTextColor");else if("halfSelectedDown"==a)a=this.getStyleData("HalfSelectedDownTextColor");else if("halfSelectedDisabled"==a)a=this.getStyleData("HalfSelectedDisabledTextColor");else return CheckboxElement.base.prototype._getTextColor.call(this,a);var b=this.getStyleData("TextColor");return 0<b.comparePriority(a)?
b.value:a.value};CheckboxElement.prototype._doStylesUpdated=function(a){CheckboxElement.base.prototype._doStylesUpdated.call(this,a);this._updateSkinClass("halfSelectedUp");this._updateSkinStyleDefinitions("halfSelectedUp");this._updateSkinClass("halfSelectedOver");this._updateSkinStyleDefinitions("halfSelectedOver");this._updateSkinClass("halfSelectedDown");this._updateSkinStyleDefinitions("halfSelectedDown");this._updateSkinClass("HalfSelectedDisabled");this._updateSkinStyleDefinitions("halfSelectedDisabled")};
function AnchorContainerElement(){AnchorContainerElement.base.prototype.constructor.call(this)}AnchorContainerElement.prototype=Object.create(ContainerBaseElement.prototype);AnchorContainerElement.prototype.constructor=AnchorContainerElement;AnchorContainerElement.base=ContainerBaseElement;
AnchorContainerElement.prototype._doMeasure=function(a,b){for(var c={width:0,height:0},d,e,f,g,k,m,l,p,q,n,r,v,t,u,y,z,x,B,A,F,G,E=0;E<this._elements.length;E++)if(d=this._elements[E],0!=d.getStyle("IncludeInLayout")){var C=0,D=0;e=d.getStyle("X");f=d.getStyle("Y");v=d.getStyle("Top");t=d.getStyle("Left");u=d.getStyle("Bottom");y=d.getStyle("Right");g=d.getStyle("Width");k=d.getStyle("Height");p=d.getStyle("MinWidth");q=d.getStyle("MinHeight");n=d.getStyle("MaxWidth");r=d.getStyle("MaxHeight");z=
d.getStyle("HorizontalCenter");x=d.getStyle("VerticalCenter");B=d.getStyle("RotateDegrees");m=d.getStyle("RotateCenterX");l=d.getStyle("RotateCenterY");null==p&&(p=0);null==q&&(q=0);null==n&&(n=Number.MAX_VALUE);null==r&&(r=Number.MAX_VALUE);0!=B?(null==g&&(g=d._measuredWidth,g=Math.min(g,n),g=Math.max(g,p)),null==k&&(k=d._measuredHeight,k=Math.min(k,r),k=Math.max(k,q)),p=d._x,q=d._y,n=d._width,r=d._height,A=d._rotateDegrees,F=d._rotateCenterX,G=d._rotateCenterY,d._x=null==e?0:e,d._y=null==f?0:f,
d._width=g,d._height=k,d._rotateDegrees=B,d._rotateCenterX=null==m?0:m,d._rotateCenterY=null==l?0:l,g=d.getMetrics(this),d._x=p,d._y=q,d._width=n,d._height=r,d._rotateDegrees=A,d._rotateCenterX=F,d._rotateCenterY=G,null!=m&&null!=l?(e=Math.max(g.getX(),0),f=Math.max(g.getY(),0)):(null==e&&(e=t),null==f&&(f=v),null==e&&null!=y&&(C+=y),null==f&&null!=u&&(D+=u)),C+=Math.ceil(g.getWidth()),D+=Math.ceil(g.getHeight())):(null==e&&(e=t),null==f&&(f=v),m=d.getStyle("PercentWidth"),l=d.getStyle("PercentHeight"),
null!=g&&null!=e||null==y||(C+=y),null!=k&&null!=f||null==u||(D+=u),null==g&&(null!=m||null!=t&&null!=y?g=p:(g=d._measuredWidth,g=Math.min(g,n),g=Math.max(g,p))),null==k&&(null!=l||null!=v&&null!=u?k=q:(k=d._measuredHeight,k=Math.min(k,r),k=Math.max(k,q))),C+=g,D+=k);null==e&&null==y&&null!=z&&(C+=Math.abs(2*z));null==f&&null==u&&null!=x&&(D+=Math.abs(2*x));if(null==e||0>e)e=0;if(null==f||0>f)f=0;C+=e;D+=f;c.width=Math.max(c.width,Math.ceil(C));c.height=Math.max(c.height,Math.ceil(D))}return c};
AnchorContainerElement.prototype._doLayout=function(a){AnchorContainerElement.base.prototype._doLayout.call(this,a);for(var b,c,d,e,f,g,k,m,l,p,q,n,r,v,t,u,y,z=0;z<this._elements.length;z++)if(a=this._elements[z],0!=a.getStyle("IncludeInLayout"))if(b=a.getStyle("X"),c=a.getStyle("Y"),q=a.getStyle("Top"),n=a.getStyle("Left"),r=a.getStyle("Bottom"),v=a.getStyle("Right"),d=a.getStyle("Width"),e=a.getStyle("Height"),k=a.getStyle("MinWidth"),l=a.getStyle("MinHeight"),m=a.getStyle("MaxWidth"),p=a.getStyle("MaxHeight"),
t=a.getStyle("HorizontalCenter"),u=a.getStyle("VerticalCenter"),f=a.getStyle("RotateDegrees"),g=a.getStyle("RotateCenterX"),y=a.getStyle("RotateCenterY"),null==k&&(k=0),null==l&&(l=0),null==m&&(m=Number.MAX_VALUE),null==p&&(p=Number.MAX_VALUE),a._setActualRotation(f,g,y),0!=f)if(null==d&&(d=a._measuredWidth,d=Math.min(d,m),d=Math.max(d,k)),null==e&&(e=a._measuredHeight,e=Math.min(e,p),e=Math.max(e,l)),a._setActualSize(d,e),null==g||null==y){null==b&&(b=n);null==c&&(c=q);if(null==b||null==c)e=a.getMetrics(this),
d=Math.ceil(e.getWidth()),e=Math.ceil(e.getHeight()),null==b&&null!=v&&(b=this._width-d-v),null==c&&null!=r&&(c=this._height-e-r),null==b&&null!=t&&(b=Math.round(this._width/2-d/2+t)),null==c&&null!=u&&(c=Math.round(this._height/2-e/2+u));null==b&&(b=0);null==c&&(c=0);a._setRelativePosition(b,c,this)}else null==b&&(b=0),null==c&&(c=0),a._setActualPosition(b,c);else f=a.getStyle("PercentWidth"),g=a.getStyle("PercentHeight"),null==b&&(b=n),null==c&&(c=q),null==d&&(d=null!=b&&null!=v?this._width-b-v:
null!=f?Math.round(f/100*this._width):a._measuredWidth,d=Math.min(d,m),d=Math.max(d,k)),null==e&&(e=null!=c&&null!=r?this._height-c-r:null!=g?Math.round(g/100*this._height):a._measuredHeight,e=Math.min(e,p),e=Math.max(e,l)),null==b&&null!=v&&(b=this._width-d-v),null==c&&null!=r&&(c=this._height-e-r),null==b&&null!=t&&(b=Math.round(this._width/2-d/2+t)),null==c&&null!=u&&(c=Math.round(this._height/2-e/2+u)),null==b&&(b=0),null==c&&(c=0),a._setActualPosition(b,c),a._setActualSize(d,e)};
function ViewportElement(){ViewportElement.base.prototype.constructor.call(this);this._verticalScrollBar=this._horizontalScrollBar=this._viewElement=null;this._viewPortContainer=new ViewportAnchorContainerElement;this._addChild(this._viewPortContainer);var a=this;this._onViewportScrollBarChangeInstance=function(b){a._onViewportScrollBarChange(b)};this._onViewportMouseWheelEventInstance=function(b){a._onViewportMouseWheelEvent(b)};this.addEventListener("wheel",this._onViewportMouseWheelEventInstance)}
ViewportElement.prototype=Object.create(CanvasElement.prototype);ViewportElement.prototype.constructor=ViewportElement;ViewportElement.base=CanvasElement;ViewportElement._StyleTypes=Object.create(null);ViewportElement._StyleTypes.HorizontalScrollBarDisplay={inheritable:!1};ViewportElement._StyleTypes.HorizontalScrollBarPlacement={inheritable:!1};ViewportElement._StyleTypes.VerticalScrollBarDisplay={inheritable:!1};ViewportElement._StyleTypes.VerticalScrollBarPlacement={inheritable:!1};
ViewportElement._StyleTypes.HorizontalScrollBarStyle={inheritable:!1};ViewportElement._StyleTypes.VerticalScrollBarStyle={inheritable:!1};ViewportElement.StyleDefault=new StyleDefinition;ViewportElement.StyleDefault.setStyle("HorizontalScrollBarDisplay","auto");ViewportElement.StyleDefault.setStyle("HorizontalScrollBarPlacement","bottom");ViewportElement.StyleDefault.setStyle("VerticalScrollBarDisplay","auto");ViewportElement.StyleDefault.setStyle("VerticalScrollBarPlacement","right");
ViewportElement.StyleDefault.setStyle("HorizontalScrollBarStyle",null);ViewportElement.StyleDefault.setStyle("VerticalScrollBarStyle",null);ViewportElement.prototype.setElement=function(a){null!=this._viewElement&&this._viewPortContainer.removeElement(this._viewElement);this._viewElement=a;null!=this._viewElement&&this._viewPortContainer.addElement(this._viewElement);this._invalidateLayout()};ViewportElement.prototype._onViewportScrollBarChange=function(a){this._invalidateLayout()};
ViewportElement.prototype._onViewportMouseWheelEvent=function(a){if(1!=a.getDefaultPrevented()){var b=!1,c,d,e,f=a.getDeltaX(),g=a.getDeltaY();0!=f&&null!=this._horizontalScrollBar&&(c=this._horizontalScrollBar.getScrollPageSize(),d=this._horizontalScrollBar.getScrollViewSize(),e=this._horizontalScrollBar.getScrollLineSize(),d=c-d,0<d&&(c=this._horizontalScrollBar.getTweenToValue(),null==c&&(c=this._horizontalScrollBar.getScrollValue()),0>f&&0<c?(this._horizontalScrollBar.startScrollTween(Math.max(c+
3*f*e,0)),b=!0):0<f&&c<d&&(this._horizontalScrollBar.startScrollTween(Math.min(c+3*f*e,d)),b=!0)));0!=g&&null!=this._verticalScrollBar&&(c=this._verticalScrollBar.getScrollPageSize(),d=this._verticalScrollBar.getScrollViewSize(),e=this._verticalScrollBar.getScrollLineSize(),d=c-d,0<d&&(c=this._verticalScrollBar.getTweenToValue(),null==c&&(c=this._verticalScrollBar.getScrollValue()),0>g&&0<c?(this._verticalScrollBar.startScrollTween(Math.max(c+3*g*e,0)),b=!0):0<g&&c<d&&(this._verticalScrollBar.startScrollTween(Math.min(c+
3*g*e,d)),b=!0)));1==b&&(a.preventDefault(),this._invalidateLayout())}};
ViewportElement.prototype._doStylesUpdated=function(a){ViewportElement.base.prototype._doStylesUpdated.call(this,a);"HorizontalScrollBarDisplay"in a||"VerticalScrollBarDisplay"in a?(this._invalidateLayout(),this._invalidateMeasure()):("HorizontalScrollBarPlacement"in a||"VerticalScrollBarPlacement"in a)&&this._invalidateLayout();null!=this._horizontalScrollBar&&this._horizontalScrollBar.setStyleDefinition(this.getStyle("HorizontalScrollBarStyle"));null!=this._verticalScrollBar&&this._verticalScrollBar.setStyleDefinition(this.getStyle("VerticalScrollBarStyle"))};
ViewportElement.prototype._doMeasure=function(a,b){var c=0,d=0,e=0,f=0;null!=this._verticalScrollBar&&(c=this._verticalScrollBar._getStyledOrMeasuredWidth(),d=this._verticalScrollBar._getStyledOrMeasuredHeight());null!=this._horizontalScrollBar&&(e=this._horizontalScrollBar._getStyledOrMeasuredWidth(),f=this._horizontalScrollBar._getStyledOrMeasuredHeight());return{width:Math.max(c,e)+a,height:Math.max(d,f)+b}};
ViewportElement.prototype._doLayout=function(a){var b=this.getStyle("HorizontalScrollBarDisplay"),c=this.getStyle("VerticalScrollBarDisplay"),d=a.getWidth(),e=a.getHeight(),f=0,g=0;null!=this._viewElement&&(f=this._viewElement._getStyledOrMeasuredWidth(),g=this._viewElement._getStyledOrMeasuredHeight());var k=!1,m=!1,l=!1;if("on"==b||"auto"==b&&f>d)m=!0;if("on"==c||"auto"==c&&g>e)l=!0;1==m&&0==l&&"auto"==c&&null!=this._horizontalScrollBar&&g>e-this._horizontalScrollBar._getStyledOrMeasuredHeight()&&
(l=!0);1==l&&0==m&&"auto"==b&&null!=this._verticalScrollBar&&f>d-this._verticalScrollBar._getStyledOrMeasuredWidth()&&(m=!0);0==m?null!=this._horizontalScrollBar&&(this._removeChild(this._horizontalScrollBar),this._horizontalScrollBar=null,k=!0):null==this._horizontalScrollBar&&(this._horizontalScrollBar=new ScrollBarElement,this._horizontalScrollBar._setStyleDefinitionDefault(this._getDefaultStyle("HorizontalScrollBarStyle")),this._horizontalScrollBar.setStyleDefinition(this.getStyle("HorizontalScrollBarStyle")),
this._horizontalScrollBar.setStyle("ScrollBarDirection","horizontal"),this._horizontalScrollBar.setScrollLineSize(25),this._horizontalScrollBar.addEventListener("changed",this._onViewportScrollBarChangeInstance),this._addChild(this._horizontalScrollBar),k=!0);0==l?null!=this._verticalScrollBar&&(this._removeChild(this._verticalScrollBar),this._verticalScrollBar=null,k=!0):null==this._verticalScrollBar&&(this._verticalScrollBar=new ScrollBarElement,this._verticalScrollBar._setStyleDefinitionDefault(this._getDefaultStyle("VerticalScrollBarStyle")),
this._verticalScrollBar.setStyleDefinition(this.getStyle("VerticalScrollBarStyle")),this._verticalScrollBar.setStyle("ScrollBarDirection","vertical"),this._verticalScrollBar.setScrollLineSize(25),this._verticalScrollBar.addEventListener("changed",this._onViewportScrollBarChangeInstance),this._addChild(this._verticalScrollBar),k=!0);if(1!=k){m=k=c=b=0;null!=this._horizontalScrollBar&&(k=this._horizontalScrollBar.getScrollValue(),b=this._horizontalScrollBar._getStyledOrMeasuredHeight(),e-=b);null!=
this._verticalScrollBar&&(m=this._verticalScrollBar.getScrollValue(),c=this._verticalScrollBar._getStyledOrMeasuredWidth(),d-=c);k=Math.min(k,f-d);k=Math.max(k,0);m=Math.min(m,g-e);m=Math.max(m,0);d<f||e<g?this._viewPortContainer.setStyle("ClipContent",!0):this._viewPortContainer.setStyle("ClipContent",!1);var l=this.getStyle("HorizontalScrollBarPlacement"),p=this.getStyle("VerticalScrollBarPlacement"),q=a.getX();a=a.getY();null!=this._horizontalScrollBar&&(this._horizontalScrollBar.setScrollPageSize(f),
this._horizontalScrollBar.setScrollViewSize(d),this._horizontalScrollBar.setScrollValue(k),this._horizontalScrollBar._setActualSize(d,b),"top"==l?"left"==p?this._horizontalScrollBar._setActualPosition(q+c,a):this._horizontalScrollBar._setActualPosition(q,a):"left"==p?this._horizontalScrollBar._setActualPosition(q+c,a+e):this._horizontalScrollBar._setActualPosition(q,a+e));null!=this._verticalScrollBar&&(this._verticalScrollBar.setScrollPageSize(g),this._verticalScrollBar.setScrollViewSize(e),this._verticalScrollBar.setScrollValue(m),
this._verticalScrollBar._setActualSize(c,e),"left"==p?"top"==l?this._verticalScrollBar._setActualPosition(q,a+b):this._verticalScrollBar._setActualPosition(q,a):"top"==l?this._verticalScrollBar._setActualPosition(q+d,a+b):this._verticalScrollBar._setActualPosition(q+d,a));f=q;g=a;"top"==l&&(g+=b);"left"==p&&(f+=c);this._viewPortContainer._setActualSize(d,e);this._viewPortContainer._setActualPosition(f,g);null!=this._viewElement&&(this._viewElement.setStyle("X",-1*k),this._viewElement.setStyle("Y",
-1*m))}};function ViewportAnchorContainerElement(){ViewportAnchorContainerElement.base.prototype.constructor.call(this)}ViewportAnchorContainerElement.prototype=Object.create(AnchorContainerElement.prototype);ViewportAnchorContainerElement.prototype.constructor=ViewportAnchorContainerElement;ViewportAnchorContainerElement.base=AnchorContainerElement;ViewportAnchorContainerElement.prototype._doMeasure=function(a,b){return{width:0,height:0}};
function CanvasManager(){this._updateStylesQueue=new CmDepthQueue;this._updateMeasureQueue=new CmDepthQueue;this._updateLayoutQueue=new CmDepthQueue;this._updateRenderQueue=new CmDepthQueue;this._compositeRenderQueue=new CmDepthQueue;this._addRemoveDisplayChainQueue=new CmLinkedList;this._addRemoveDisplayChainQueueProcessing=!1;this._broadcastDispatcher=new EventDispatcher;this._browserCursor=null;this._cursorChain=new CmLinkedList;this._tabStopReverse=!1;this._canvasContext=this._canvas=this._focusElement=
null;this._canvasRenderFramePending=!1;this._mouseY=this._mouseX=-1;this._rollOverInvalid=!0;this._rollOverElement=null;this._rollOverY=this._rollOverX=-1;this._draggingOffsetY=this._draggingOffsetX=this._draggingElement=this._mouseDownElement=null;this._currentLocale="en-us";this._redrawRegionInvalid=!0;this._redrawRegionPrevMetrics=null;CanvasManager.base.prototype.constructor.call(this);this._cursorContainer=new CanvasElement;this._cursorContainer.setStyle("MouseEnabled",!1);this._addOverlayChild(this._cursorContainer);
var a=this;this._onCursorDefinitionStyleChangedInstance=function(b){a._onCursorDefinitionStyleChanged(b)};this._onCanvasFrame=function(){null==a._canvasContext?a._canvasRenderFramePending=!1:(window.requestAnimationFrame(a._onCanvasFrame),a.updateNow())};this._canvasResizeEventHandler=function(){a.setStyle("Width",a._canvas.clientWidth);a.setStyle("Height",a._canvas.clientHeight);a._setActualSize(a._canvas.clientWidth,a._canvas.clientHeight);a._redrawRegionPrevMetrics=null;a._updateRedrawRegion(a.getMetrics(null));
a.updateNow()};this._canvasFocusEventHandler=function(b){null==a._focusElement&&"focus"==b.type?1==a._tabStopReverse?a._updateFocusElement(a._findChildTabStopReverse(a,null,null),!0):a._updateFocusElement(a._findChildTabStopForward(a,null),!0):null!=a._focusElement&&"blur"==b.type&&a._updateFocusElement(null,!0)};this._canvasKeyboardEventHandler=function(b){"keydown"==b.type&&("Tab"==b.key&&1==b.shiftKey?a._tabStopReverse=!0:"Tab"==b.key&&0==b.shiftKey&&(a._tabStopReverse=!1));if(null!=a._focusElement){var c=
new ElementKeyboardEvent(b.type,b.key,b.which,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey);a._focusElement._dispatchEvent(c);if(1==c._canceled||1==c._defaultPrevented)b.preventDefault();else if("keydown"==b.type&&"Tab"==c.getKey()){var c=null,d=a._focusElement,e=null;if(0==a._tabStopReverse)for(;null!=d;){c=a._findChildTabStopForward(d,e);if(null!=c)break;e=d;d=d._parent}else for(;null!=d;){c=a._findChildTabStopReverse(d,e,null);if(null!=c)break;e=d;d=d._parent}a._updateFocusElement(c,!0);null!=c&&b.preventDefault()}}};
this._canvasMouseEventHandler=function(b){var c=CanvasManager.getLocalMousePos(b,a._canvas),d;if("mouseup"==b.type){window.removeEventListener("mouseup",a._canvasMouseEventHandler);a._clearDraggingElement();a._mouseDownElement._mouseIsDown=!1;b=[];for(b.push(a._mouseDownElement);null!=b[b.length-1]._parent;)b[b.length-1]._parent._mouseIsDown=!1,b.push(b[b.length-1]._parent);var e=null,f=0,g=0;for(d=b.length-1;0<=d;d--)b[d].rotatePoint(c,!0),c.x-=b[d]._x,c.y-=b[d]._y,0<=c.x&&c.x<=b[d]._width&&0<=c.y&&
c.y<=b[d]._height&&(e=b[d],f=c.x,g=c.y);a._mouseDownElement=null;b[0]._dispatchEvent(new ElementMouseEvent("mouseup",c.x,c.y));null!=e&&e._dispatchEvent(new ElementMouseEvent("click",f,g))}else if("wheel"==b.type){if(0!=a.getStyle("MouseEnabled")&&0!=a.getStyle("Visible")){e=null;if(0<=c.x&&c.x<=a._width&&0<=c.y&&c.y<=a._height)for(var e=a,k;;){k=!1;for(d=e._children.length-1;0<=d;d--)if(0!=e._children[d].getStyle("MouseEnabled")&&0!=e._children[d].getStyle("Visible")){e._children[d].rotatePoint(c,
!0);if(c.x>=e._children[d]._x&&c.x<=e._children[d]._x+e._children[d]._width&&c.y>=e._children[d]._y&&c.y<=e._children[d]._y+e._children[d]._height){e=e._children[d];c.x-=e._x;c.y-=e._y;k=!0;break}e._children[d].rotatePoint(c,!1)}if(0==k)break}null!=e&&(d=0,0<b.deltaX?d=1:0>b.deltaX&&(d=-1),f=0,0<b.deltaY?f=1:0>b.deltaY&&(f=-1),c=new ElementMouseWheelEvent(c.x,c.y,d,f),e._dispatchEvent(c),1!=c._canceled&&1!=c._defaultPrevented||b.preventDefault())}}else if("mousedown"==b.type)if(0>c.x||c.x>this._width||
0>c.y||c.y>this._height)a._updateFocusElement(null,!1);else{if(0!=a.getStyle("MouseEnabled")&&0!=a.getStyle("Visible")&&null==a._mouseDownElement){for(var f=null,m=g=0,l=null,p=-1,e=a;;){e._mouseIsDown=!0;1!=e.getStyle("Draggable")||!(e._parent instanceof AnchorContainerElement)&&e._parent instanceof ContainerBaseElement||(f=e,g=c.x,m=c.y);d=e.getStyle("TabStop");if(0<=d||0>p)l=e,p=d;k=!1;for(d=e._children.length-1;0<=d;d--)if(0!=e._children[d].getStyle("MouseEnabled")&&0!=e._children[d].getStyle("Visible")){e._children[d].rotatePoint(c,
!0);if(c.x>=e._children[d]._x&&c.x<=e._children[d]._x+e._children[d]._width&&c.y>=e._children[d]._y&&c.y<=e._children[d]._y+e._children[d]._height){e=e._children[d];c.x-=e._x;c.y-=e._y;k=!0;break}e._children[d].rotatePoint(c,!1)}if(0==k)break}a._mouseDownElement=e;window.addEventListener("mouseup",a._canvasMouseEventHandler,!1);null!=f&&a._setDraggingElement(f,g,m);e._dispatchEvent(new ElementMouseEvent(b.type,c.x,c.y));a._updateFocusElement(l,!1);null!=a._focusElement&&a._focusElement._setRenderFocusRing(!1)}}else"mousemove"==
b.type&&0!=a.getStyle("MouseEnabled")&&(a._mouseX=c.x,a._mouseY=c.y,a._rollOverInvalid=!0,a._updateCursor(),null!=a._draggingElement&&(b=a._draggingElement.getMetrics(a._draggingElement._parent),d={x:a._draggingOffsetX,y:a._draggingOffsetY},a._draggingElement.translatePointTo(d,a._draggingElement._parent),c={x:c.x,y:c.y},a.translatePointTo(c,a._draggingElement._parent),c.x+=b.getX()-d.x,c.y+=b.getY()-d.y,0>c.x&&(c.x=0),c.x>a._draggingElement._parent._width-b.getWidth()&&(c.x=a._draggingElement._parent._width-
b.getWidth()),0>c.y&&(c.y=0),c.y>a._draggingElement._parent._height-b.getHeight()&&(c.y=a._draggingElement._parent._height-b.getHeight()),a._draggingElement._setRelativePosition(c.x,c.y,a._draggingElement._parent),a._draggingElement._parent instanceof AnchorContainerElement&&(null==a._draggingElement.getStyle("RotateCenterX")||null==a._draggingElement.getStyle("RotateCenterY")?(null!=a._draggingElement.getStyle("X")&&a._draggingElement.setStyle("X",c.x),null!=a._draggingElement.getStyle("Y")&&a._draggingElement.setStyle("Y",
c.y)):(null!=a._draggingElement.getStyle("X")&&a._draggingElement.setStyle("X",a._draggingElement._x),null!=a._draggingElement.getStyle("Y")&&a._draggingElement.setStyle("Y",a._draggingElement._y),a._draggingElement.setStyle("RotateCenterX",a._draggingElement._rotateCenterX),a._draggingElement.setStyle("RotateCenterY",a._draggingElement._rotateCenterY))),a._draggingElement._dispatchEvent(new ElementEvent("dragging",!1))))}}CanvasManager.prototype=Object.create(AnchorContainerElement.prototype);
CanvasManager.prototype.constructor=CanvasManager;CanvasManager.base=AnchorContainerElement;CanvasManager._StyleTypes=Object.create(null);CanvasManager._StyleTypes.ShowRedrawRegion={inheritable:!1};CanvasManager.StyleDefault=new StyleDefinition;CanvasManager.StyleDefault.setStyle("ShowRedrawRegion",!1);
CanvasManager.prototype.setCanvas=function(a){if(this._canvas!=a){var b=null==this._canvas||null==a;null!=this._canvas&&(window.removeEventListener("mousedown",this._canvasMouseEventHandler,!1),window.removeEventListener("mousemove",this._canvasMouseEventHandler,!1),window.removeEventListener("wheel",this._canvasMouseEventHandler,!1),window.removeEventListener("keydown",this._canvasKeyboardEventHandler,!1),window.removeEventListener("keyup",this._canvasKeyboardEventHandler,!1),window.removeEventListener("resize",
this._canvasResizeEventHandler,!1),this._canvas.removeEventListener("focus",this._canvasFocusEventHandler,!0),this._canvas.removeEventListener("blur",this._canvasFocusEventHandler,!0),this._canvasContext=this._canvas=null);null!=a&&(this._canvas=a,this._canvasContext=a.getContext("2d"),window.addEventListener("mousedown",this._canvasMouseEventHandler,!1),window.addEventListener("mousemove",this._canvasMouseEventHandler,!1),window.addEventListener("wheel",this._canvasMouseEventHandler,!1),window.addEventListener("keydown",
this._canvasKeyboardEventHandler,!1),window.addEventListener("keyup",this._canvasKeyboardEventHandler,!1),window.addEventListener("resize",this._canvasResizeEventHandler,!1),this._canvas.addEventListener("focus",this._canvasFocusEventHandler,!0),this._canvas.addEventListener("blur",this._canvasFocusEventHandler,!0),this._canvas.tabIndex=1,this._canvas.style.outline="none",this._canvas.style.cursor="default",0==this._canvasRenderFramePending&&(this._canvasRenderFramePending=!0,window.requestAnimationFrame(this._onCanvasFrame)),
0<navigator.userAgent.indexOf("Firefox")&&(CanvasElement._browserType="Firefox"));1==b&&(this._propagateChildData(),this._processAddRemoveDisplayChainQueue());null!=this._canvas&&(this._rollOverInvalid=!0,this._canvasResizeEventHandler())}};CanvasManager.prototype.getCanvas=function(){return this._canvas};CanvasManager.prototype.setLocale=function(a){this._currentLocale!=a&&(this._currentLocale=a,1==this._broadcastDispatcher.hasEventListener("localechanged",null)&&this._broadcastDispatcher._dispatchEvent(new DispatcherEvent("localechanged")))};
CanvasManager.prototype.getLocale=function(){return this._currentLocale};
CanvasManager.prototype.addCursor=function(a,b){null==b&&(b=0);a instanceof CursorDefinition&&(0==a._addedCount&&a.addEventListener("stylechanged",this._onCursorDefinitionStyleChangedInstance),a._addedCount++);var c=new CmLinkedNode;c.data=a;c.priority=b;var d=this._cursorChain.back;if(null==d)this._cursorChain.pushBack(c);else{for(;null!=d&&d.priority>c.priority;)d=d.prev;null==d?this._cursorChain.pushFront(c):this._cursorChain.insertAfter(c,d)}this._updateCursor();return c};
CanvasManager.prototype.removeCursor=function(a){if(b instanceof CursorDefinition){var b=a.data;b._addedCount--;0==b._addedCount&&b.removeEventListener("stylechanged",this._onCursorDefinitionStyleChangedInstance)}this._cursorChain.removeNode(a);this._updateCursor();return!0};
CanvasManager.prototype.updateNow=function(){for(1==this._broadcastDispatcher.hasEventListener("enterframe",null)&&this._broadcastDispatcher._dispatchEvent(new DispatcherEvent("enterframe"));0<this._updateStylesQueue.length||0<this._updateMeasureQueue.length||0<this._updateLayoutQueue.length||1==this._rollOverInvalid||0<this._updateRenderQueue.length;){for(;0<this._updateStylesQueue.length;)this._updateStylesQueue.removeSmallest().data._validateStyles();for(;0<this._updateMeasureQueue.length&&0==
this._updateStylesQueue.length;)this._updateMeasureQueue.removeLargest().data._validateMeasure();for(;0<this._updateLayoutQueue.length&&0==this._updateMeasureQueue.length&&0==this._updateStylesQueue.length;)this._updateLayoutQueue.removeSmallest().data._validateLayout();if(1==this._rollOverInvalid&&0==this._updateLayoutQueue.length&&0==this._updateMeasureQueue.length&&0==this._updateStylesQueue.length){this._rollOverInvalid=!1;var a,b=null,c={x:this._mouseX,y:this._mouseY},d=this._rollOverElement,
e=this._rollOverX,f=this._rollOverY,g=this._rollOverElement=null,k=[];if(0<=c.x&&c.x<=this._width&&0<=c.y&&c.y<=this._height){b=this;0==b._mouseIsOver?(k.push(b),b._mouseIsOver=!0):g=b;this._rollOverElement=b;this._rollOverX=c.x;this._rollOverY=c.y;for(var m;;){m=!1;for(a=b._children.length-1;0<=a;a--)if(0!=b._children[a].getStyle("MouseEnabled")&&0!=b._children[a].getStyle("Visible")){b._children[a].rotatePoint(c,!0);if(c.x>=b._children[a]._x&&c.x<=b._children[a]._x+b._children[a]._width&&c.y>=b._children[a]._y&&
c.y<=b._children[a]._y+b._children[a]._height){b=b._children[a];0==b._mouseIsOver?(k.push(b),b._mouseIsOver=!0):g=b;c.x-=b._x;c.y-=b._y;this._rollOverElement=b;this._rollOverX=c.x;this._rollOverY=c.y;m=!0;break}b._children[a].rotatePoint(c,!1)}if(0==m)break}}null==b||this._rollOverElement==d&&this._rollOverX==e&&this._rollOverY==f||b._dispatchEvent(new ElementMouseEvent("mousemove",c.x,c.y));this._broadcastDispatcher._dispatchEvent(new ElementMouseEvent("mousemoveex",this._mouseX,this._mouseY));if(null!=
d&&this._rollOverElement!=d){c=[];for(b=d;b!=g;)b._mouseIsOver=!1,c.push(b),b=b._parent;for(a=0;a<c.length;a++)c[a]._dispatchEvent(new ElementEvent("rollout",!1))}for(a=0;a<k.length;a++)k[a]._dispatchEvent(new ElementEvent("rollover",!1))}for(;0<this._updateRenderQueue.length&&0==this._rollOverInvalid&&0==this._updateLayoutQueue.length&&0==this._updateMeasureQueue.length&&0==this._updateStylesQueue.length;)this._updateRenderQueue.removeSmallest().data._validateRender()}1==this._redrawRegionInvalid&&
(this._validateRedrawRegion(this,!1),this._redrawRegionInvalid=!1);for(;0<this._compositeRenderQueue.length;)this._compositeRenderQueue.removeLargest().data._validateCompositeRender();null!=this._redrawRegionPrevMetrics&&this._invalidateCompositeRender()};CanvasManager.getLocalMousePos=function(a,b){var c=b.getBoundingClientRect();return{x:Math.round((a.clientX-c.left)/(c.right-c.left)*b.width),y:Math.round((a.clientY-c.top)/(c.bottom-c.top)*b.height)}};
CanvasManager.prototype._updateCompositeCanvas=function(){null==this._compositeCanvas&&(this._compositeCanvas=this._canvas,this._compositeCtx=this._canvasContext);if(this._compositeCanvas.width!=this._width||this._compositeCanvas.height!=this._height)this._compositeCanvas.width=this._width,this._compositeCanvas.height=this._height,null==this._compositeCanvasMetrics&&(this._compositeCanvasMetrics=new DrawMetrics),this._compositeCanvasMetrics._x=0,this._compositeCanvasMetrics._y=0,this._compositeCanvasMetrics._width=
this._width,this._compositeCanvasMetrics._height=this._height,null==this._redrawRegionMetrics?this._redrawRegionMetrics=this._compositeCanvasMetrics.clone():this._redrawRegionMetrics.mergeExpand(this._compositeCanvasMetrics)};
CanvasManager.prototype._validateRedrawRegion=function(a,b){var c=[],d=a._renderVisible,e=!0;if(null!=a._parent&&0==a._parent._renderVisible||0==a.getStyle("Visible")||0>=a.getStyle("Alpha"))e=!1;1==a._compositeEffectChanged&&(b=!0);a._compositeVisibleMetrics=null;a._transformVisibleMetrics=null;a._transformDrawableMetrics=null;if(!(1!=a._renderChanged&&0!=a._graphicsClear||1!=d&&1!=e))for(var f=a,g=a.getMetrics(),k=g.clone(),m={x:g._x,y:g._y},l={x:g._x+g._width,y:g._y},p={x:g._x+g._width,y:g._y+
g._height},q={x:g._x,y:g._y+g._height},n={x:0,y:0},r={x:0,y:0},v={x:0,y:0},t={x:0,y:0},u,y,z,x,B=new DrawMetrics,A=new DrawMetrics;null!=f;){null!=k&&(f==this||1==f.getStyle("ClipContent"))&&(B._x=0,B._y=0,B._width=f._width,B._height=f._height,k.mergeReduce(B),0>=k._width||0>=k._height)&&(k=null);if(1==f._isCompositeElement()){u=a._getCompositeMetrics(f);null!=k&&1==e&&0==a._graphicsClear?(c.push({element:f,metrics:g.clone(),drawableMetrics:k.clone()}),null==f._compositeVisibleMetrics?f._compositeVisibleMetrics=
k.clone():f._compositeVisibleMetrics.mergeExpand(k)):newMetrics=null;y=!0;if(null==u&&null==k||null!=u&&null!=k&&1==u.drawableMetrics.equals(k))y=!1;z=!0;null!=u&&1==u.metrics.equals(g)&&(z=!1);if(1==b||1==a._renderChanged||d!=e||1==y||z)1==d&&null!=u&&f._updateRedrawRegion(u.drawableMetrics),1==e&&f._updateRedrawRegion(k)}null!=k&&(k._x+=f._x,k._y+=f._y,u=f.getStyle("ShadowSize"),0<u&&null!=f.getStyle("ShadowColor")?(A.copyFrom(k),A._width+=2*u,A._height+=2*u,A._x-=u,A._y-=u,A._x+=f.getStyle("ShadowOffsetX"),
A._y+=f.getStyle("ShadowOffsetY"),k.mergeExpand(A),0!=CanvasElement.normalizeDegrees(f._rotateDegrees)&&(n.x=k._x,n.y=k._y,r.x=k._x+k._width,r.y=k._y,v.x=k._x+k._width,v.y=k._y+k._height,t.x=k._x,t.y=k._y+k._height,f.rotatePoint(n,!1),f.rotatePoint(r,!1),f.rotatePoint(t,!1),f.rotatePoint(v,!1),u=Math.min(n.x,r.x,v.x,t.x),y=Math.max(n.x,r.x,v.x,t.x),z=Math.min(n.y,r.y,v.y,t.y),x=Math.max(n.y,r.y,v.y,t.y),k._x=u,k._y=z,k._width=y-u,k._height=x-z),g.copyFrom(k),m.x+=g._x,m.y+=g._y,l.x+=g._x+g._width,
l.y+=g._y,p.x+=g._x+g._width,p.y+=g._y+g._height,q.x+=g._x,q.y+=g._y+g._height):(m.x+=f._x,m.y+=f._y,l.x+=f._x,l.y+=f._y,p.x+=f._x,p.y+=f._y,q.x+=f._x,q.y+=f._y,0!=CanvasElement.normalizeDegrees(f._rotateDegrees)&&(f.rotatePoint(m,!1),f.rotatePoint(l,!1),f.rotatePoint(q,!1),f.rotatePoint(p,!1),n.x=k._x,n.y=k._y,r.x=k._x+k._width,r.y=k._y,v.x=k._x+k._width,v.y=k._y+k._height,t.x=k._x,t.y=k._y+k._height,f.rotatePoint(n,!1),f.rotatePoint(r,!1),f.rotatePoint(t,!1),f.rotatePoint(v,!1),u=Math.min(n.x,r.x,
v.x,t.x),y=Math.max(n.x,r.x,v.x,t.x),z=Math.min(n.y,r.y,v.y,t.y),x=Math.max(n.y,r.y,v.y,t.y),k._x=u,k._y=z,k._width=y-u,k._height=x-z),u=Math.min(m.x,l.x,p.x,q.x),y=Math.max(m.x,l.x,p.x,q.x),z=Math.min(m.y,l.y,p.y,q.y),x=Math.max(m.y,l.y,p.y,q.y),g._x=u,g._y=z,g._width=y-u,g._height=x-z),g.roundToPrecision(3),k.mergeReduce(g),k.roundToPrecision(3));f=f._parent}a._compositeMetrics=c;a._renderVisible=e;a._renderChanged=!1;if(1==d||1==e){for(c=0;c<a._children.length;c++)this._validateRedrawRegion(a._children[c],
b);1==a._isCompositeElement()&&this._updateTransformMetrics(a)}};
CanvasManager.prototype._updateTransformMetrics=function(a){if(a!=this&&null!=a._compositeVisibleMetrics){var b={x:0,y:0},c={x:0,y:0},d={x:0,y:0},e={x:0,y:0},f,g,k,m,l=a;a._transformVisibleMetrics=a._compositeVisibleMetrics.clone();a._transformDrawableMetrics=a._compositeVisibleMetrics.clone();for(var p=new DrawMetrics,q=!1;;){if(null!=a._transformDrawableMetrics&&1==l.getStyle("ClipContent")&&(p._x=0,p._y=0,p._width=l._width,p._height=l._height,a._transformDrawableMetrics.mergeReduce(p),0>=a._transformDrawableMetrics._width||
0>=a._transformDrawableMetrics._height)){a._transformDrawableMetrics=null;a._transformVisibleMetrics=null;break}if(1==q)break;a._transformVisibleMetrics._x+=l._x;a._transformVisibleMetrics._y+=l._y;a._transformDrawableMetrics._x+=l._x;a._transformDrawableMetrics._y+=l._y;f=l.getStyle("ShadowSize");0<f&&null!=l.getStyle("ShadowColor")&&(g=a._transformDrawableMetrics.clone(),g._width+=2*f,g._height+=2*f,g._x-=f,g._y-=f,g._x+=l.getStyle("ShadowOffsetX"),g._y+=l.getStyle("ShadowOffsetY"),a._transformDrawableMetrics.mergeExpand(g));
0!=CanvasElement.normalizeDegrees(l._rotateDegrees)&&(b.x=a._transformVisibleMetrics._x,b.y=a._transformVisibleMetrics._y,c.x=a._transformVisibleMetrics._x+a._transformVisibleMetrics._width,c.y=a._transformVisibleMetrics._y,d.x=a._transformVisibleMetrics._x+a._transformVisibleMetrics._width,d.y=a._transformVisibleMetrics._y+a._transformVisibleMetrics._height,e.x=a._transformVisibleMetrics._x,e.y=a._transformVisibleMetrics._y+a._transformVisibleMetrics._height,l.rotatePoint(b,!1),l.rotatePoint(c,!1),
l.rotatePoint(e,!1),l.rotatePoint(d,!1),f=Math.min(b.x,c.x,d.x,e.x),g=Math.max(b.x,c.x,d.x,e.x),k=Math.min(b.y,c.y,d.y,e.y),m=Math.max(b.y,c.y,d.y,e.y),a._transformVisibleMetrics._x=f,a._transformVisibleMetrics._y=k,a._transformVisibleMetrics._width=g-f,a._transformVisibleMetrics._height=m-k,a._transformVisibleMetrics.roundToPrecision(3),b.x=a._transformDrawableMetrics._x,b.y=a._transformDrawableMetrics._y,c.x=a._transformDrawableMetrics._x+a._transformDrawableMetrics._width,c.y=a._transformDrawableMetrics._y,
d.x=a._transformDrawableMetrics._x+a._transformDrawableMetrics._width,d.y=a._transformDrawableMetrics._y+a._transformDrawableMetrics._height,e.x=a._transformDrawableMetrics._x,e.y=a._transformDrawableMetrics._y+a._transformDrawableMetrics._height,l.rotatePoint(b,!1),l.rotatePoint(c,!1),l.rotatePoint(e,!1),l.rotatePoint(d,!1),f=Math.min(b.x,c.x,d.x,e.x),g=Math.max(b.x,c.x,d.x,e.x),k=Math.min(b.y,c.y,d.y,e.y),m=Math.max(b.y,c.y,d.y,e.y),a._transformDrawableMetrics._x=f,a._transformDrawableMetrics._y=
k,a._transformDrawableMetrics._width=g-f,a._transformDrawableMetrics._height=m-k,a._transformDrawableMetrics.roundToPrecision(3));l=l._parent;1==l._isCompositeElement()&&(q=!0)}}};
CanvasManager.prototype._validateCompositeRender=function(){if(1==this.getStyle("ShowRedrawRegion")){var a=null;null!=this._redrawRegionMetrics?(a=this._redrawRegionMetrics.clone(),--a._x,--a._y,a._width+=2,a._height+=2,a.roundUp(),null!=this._redrawRegionPrevMetrics&&this._redrawRegionMetrics.mergeExpand(this._redrawRegionPrevMetrics)):null!=this._redrawRegionPrevMetrics&&(this._redrawRegionMetrics=this._redrawRegionPrevMetrics.clone());CanvasManager.base.prototype._validateCompositeRender.call(this);
null!=a&&(this._canvasContext.lineWidth=1,this._canvasContext.strokeStyle="#FF0000",this._canvasContext.beginPath(),this._canvasContext.moveTo(a._x+.5,a._y+.5),this._canvasContext.lineTo(a._x+a._width-.5,a._y+.5),this._canvasContext.lineTo(a._x+a._width-.5,a._y+a._height-.5),this._canvasContext.lineTo(a._x+.5,a._y+a._height-.5),this._canvasContext.closePath(),this._canvasContext.stroke());this._redrawRegionPrevMetrics=a}else CanvasManager.base.prototype._validateCompositeRender.call(this),this._redrawRegionPrevMetrics=
null};
CanvasManager.prototype._updateFocusElement=function(a,b){a!=this._focusElement&&(null!=this._focusElement&&(this._focusElement._isFocused=!1,this._focusElement._setRenderFocusRing(!1),1==this._focusElement.hasEventListener("focusout",null)&&this._focusElement._dispatchEvent(new ElementEvent("focusout",!1))),this._focusElement=a,null!=this._focusElement&&(this._focusElement._isFocused=!0,this._focusElement._setRenderFocusRing(b),1==this._focusElement.hasEventListener("focusin",null)&&this._focusElement._dispatchEvent(new ElementEvent("focusin",!1))))};
CanvasManager.prototype._findChildTabStopForward=function(a,b){var c=0;null!=b&&(c=a._children.indexOf(b)+1);for(var d=null;c<a._children.length;c++)if(0!=a._children[c].getStyle("MouseEnabled")&&0!=a._children[c].getStyle("Visible")&&0!=a._children[c].getStyle("Enabled")){if(0<=a._children[c].getStyle("TabStop"))return a._children[c];d=this._findChildTabStopForward(a._children[c],null);if(null!=d)break}return d};
CanvasManager.prototype._findChildTabStopReverse=function(a,b,c){var d=a._children.length-1;null!=b&&(d=a._children.indexOf(b)-1);for(b=d;0<=b&&(0==a._children[b].getStyle("MouseEnabled")||0==a._children[b].getStyle("Visible")||0==a._children[b].getStyle("Enabled")||(0<=a._children[b].getStyle("TabStop")&&(c=a._children[b]),this._findChildTabStopReverse(a._children[b],null,c),null==c));b--);return c};
CanvasManager.prototype._updateCursor=function(){var a=null;null!=this._cursorChain.back&&(a=this._cursorChain.back.data);var b=null;0<this._cursorContainer._getNumChildren()&&(b=this._cursorContainer._getChildAt(0));if(null!=a){var c=null;if(!("string"===typeof a||a instanceof String)){var d=a.getStyle("CursorClass");if(null==d)a._cursorElement=null;else{if(null==a._cursorElement||a._cursorElement.constructor!=d)a._cursorElement=new d;a._cursorElement.setStyleDefinition(a.getStyle("CursorStyle"));
c=a._cursorElement}}b!=c&&(null!=b&&this._cursorContainer._removeChild(b),null!=c&&this._cursorContainer._addChild(c));if(null!=c)if("none"!=this._browserCursor&&(this._browserCursor="none",this._canvas.style.cursor="none"),0<=this._mouseX&&this._mouseX<=this._width&&0<=this._mouseY&&this._mouseY<=this._height){var b=a._cursorElement._getStyledOrMeasuredWidth(),d=a._cursorElement._getStyledOrMeasuredHeight(),e=a.getStyle("CursorOffsetX"),a=a.getStyle("CursorOffsetY");c._setActualPosition(this._mouseX+
e,this._mouseY+a);c._setActualSize(b,d);c.setStyle("Visible",!0)}else c.setStyle("Visible",!1);else this._browserCursor!=a&&(this._browserCursor=a,this._canvas.style.cursor=a)}else null!=b&&this._cursorContainer._removeChildAt(0),"default"!=this._browserCursor&&(this._browserCursor="default",this._canvas.style.cursor="default")};
CanvasManager.prototype._onCursorDefinitionStyleChanged=function(a){var b=a.getTarget();a=a.getStyleName();if("CursorClass"==a&&null!=b._cursorElement){var c=b.getStyle("CursorClass");b._cursorElement.constructor!=c&&(b._cursorElement=null)}"CursorStyle"==a&&null!=b._cursorElement&&b._cursorElement.setStyleDefinition(this.getStyle("CursorStyle"));this._updateCursor()};CanvasManager.prototype._pushAddRemoveDisplayChainQueue=function(a,b){var c=new CmLinkedNode;c.data={element:a,type:b};this._addRemoveDisplayChainQueue.pushBack(c)};
CanvasManager.prototype._popAddRemoveDisplayChainQueue=function(){if(0==this._addRemoveDisplayChainQueue.length)return null;var a=this._addRemoveDisplayChainQueue.front.data;this._addRemoveDisplayChainQueue.removeNode(this._addRemoveDisplayChainQueue.front);return a};
CanvasManager.prototype._processAddRemoveDisplayChainQueue=function(){if(1!=this._addRemoveDisplayChainQueueProcessing){this._addRemoveDisplayChainQueueProcessing=!0;for(var a=this._popAddRemoveDisplayChainQueue();null!=a;)a.element._dispatchEvent(new AddedRemovedEvent(a.type,this)),a=this._popAddRemoveDisplayChainQueue();this._addRemoveDisplayChainQueueProcessing=!1}};
CanvasManager.prototype._clearDraggingElement=function(){null!=this._draggingElement&&(this._draggingOffsetY=this._draggingOffsetX=this._draggingElement=null)};CanvasManager.prototype._setDraggingElement=function(a,b,c){null==this._draggingElement&&(this._draggingElement=a,this._draggingOffsetX=b,this._draggingOffsetY=c)};CanvasManager.prototype._doLayout=function(a){CanvasManager.base.prototype._doLayout.call(this,a);this._cursorContainer._setActualSize(this._width,this._height)};
function CmDepthQueue(){this.depthArrayOfLists=[];this.length=0;this.maxDepth=this.minDepth=-1}CmDepthQueue.prototype.addNode=function(a,b){var c=b-1;null==this.depthArrayOfLists[c]&&(this.depthArrayOfLists[c]=new CmLinkedList);this.depthArrayOfLists[c].pushBack(a);this.length+=1;if(c<this.minDepth||-1==this.minDepth)this.minDepth=c;c>this.maxDepth&&(this.maxDepth=c)};
CmDepthQueue.prototype.removeNode=function(a,b){this.depthArrayOfLists[b-1].removeNode(a);--this.length;0==this.length&&(this.maxDepth=this.minDepth=-1)};
CmDepthQueue.prototype.removeSmallest=function(){if(0==this.length)return null;for(var a=this.minDepth;a<this.depthArrayOfLists.length;a++)if(this.minDepth=a,null!=this.depthArrayOfLists[a]&&0!=this.depthArrayOfLists[a].length){var b=this.depthArrayOfLists[a].front;this.depthArrayOfLists[a].removeNode(b);--this.length;0==this.length&&(this.maxDepth=this.minDepth=-1);return b}};
CmDepthQueue.prototype.removeLargest=function(){if(0==this.length)return null;for(var a=this.maxDepth;0<=a;a--)if(this.maxDepth=a,null!=this.depthArrayOfLists[a]&&0!=this.depthArrayOfLists[a].length){var b=this.depthArrayOfLists[a].back;this.depthArrayOfLists[a].removeNode(b);--this.length;0==this.length&&(this.maxDepth=this.minDepth=-1);return b}};function CmLinkedList(){this.back=this.front=null;this.length=0}
CmLinkedList.prototype.pushFront=function(a){this.length++;null==this.front?(a.prev=null,a.next=null,this.back=this.front=a):(a.prev=null,a.next=this.front,this.front=this.front.prev=a)};CmLinkedList.prototype.pushBack=function(a){this.length++;null==this.back?(a.prev=null,a.next=null,this.front=a):(a.prev=this.back,a.next=null,this.back.next=a);this.back=a};
CmLinkedList.prototype.insertBefore=function(a,b){this.length++;this.front==b&&(this.front=a);null!=b.prev&&(b.prev.next=a);a.prev=b.prev;a.next=b;b.prev=a};CmLinkedList.prototype.insertAfter=function(a,b){this.length++;this.back==b&&(this.back=a);null!=b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a};
CmLinkedList.prototype.removeNode=function(a){if(null==a)return null;this.length--;this.front==a&&(this.front=a.next);this.back==a&&(this.back=a.prev);null!=a.prev&&(a.prev.next=a.next);null!=a.next&&(a.next.prev=a.prev);a.next=null;a.prev=null};function CmLinkedNode(){this.data=this.next=this.prev=null};
