//MIT License
//
//Copyright (c) 2017-2018 SENSORMATIC ELECTRONICS LLC, NATHAN E NELSON
//
//Permission is hereby granted, free of charge, to any person obtaining a copy
//of this software and associated documentation files (the "Software"), to deal
//in the Software without restriction, including without limitation the rights
//to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
//copies of the Software, and to permit persons to whom the Software is
//furnished to do so, subject to the following conditions:
//
//The above copyright notice and this permission notice shall be included in all
//copies or substantial portions of the Software.
//
//THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
//IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
//FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
//AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
//LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
//OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
//SOFTWARE.

var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}},"es6-impl","es3");
function Tween(){this.duration=this.endVal=this.startVal=0;this.easingFunction=this.startTime=null}Tween.prototype.constructor=Tween;Tween.prototype.getProgress=function(a){return a>=this.startTime+this.duration?1:a<=this.startTime?0:(a-this.startTime)/this.duration};
Tween.prototype.getValue=function(a){a=this.getProgress(a);if(1==a)return this.endVal;if(0==a)return this.startVal;null!=this.easingFunction&&(a=this.easingFunction(a));var b=Math.abs(this.endVal-this.startVal);return this.startVal<this.endVal?this.startVal+b*a:this.startVal-b*a};Tween.easeInQuad=function(a){return a*a};Tween.easeOutQuad=function(a){return 1-Tween.easeInQuad(1-a)};Tween.easeInOutQuad=function(a){return.5>a?Tween.easeInQuad(2*a)/2:1-Tween.easeInQuad(2*(1-a))/2};
Tween.easeInCubic=function(a){return Math.pow(a,3)};Tween.easeOutCubic=function(a){return 1-Tween.easeInCubic(1-a)};Tween.easeInOutCubic=function(a){return.5>a?Tween.easeInCubic(2*a)/2:1-Tween.easeInCubic(2*(1-a))/2};Tween.easeOutSine=function(a){return Math.sin(Math.PI/2*a)};Tween.easeInSine=function(a){return 1-Tween.easeOutSine(1-a)};Tween.easeInOutSine=function(a){return.5>a?Tween.easeInSine(2*a)/2:1-Tween.easeInSine(2*(1-a))/2};function StyleProxy(a,b){this._proxyElement=a;this._proxyMap=b}
StyleProxy.prototype.constructor=StyleProxy;function DispatcherEvent(a){this._type=a;this._target=null;this._canceled=!1}DispatcherEvent.prototype.constructor=DispatcherEvent;DispatcherEvent.prototype.getType=function(){return this._type};DispatcherEvent.prototype.getTarget=function(){return this._target};DispatcherEvent.prototype.cancelEvent=function(){this._canceled=!0};DispatcherEvent.prototype.getIsCanceled=function(){return this._canceled};
DispatcherEvent.prototype.clone=function(){var a=this._cloneInstance();a._target=this._target;a._canceled=this._canceled;return a};DispatcherEvent.prototype._cloneInstance=function(){return new DispatcherEvent(this._type)};function StyleChangedEvent(a){StyleChangedEvent.base.prototype.constructor.call(this,"stylechanged");this._styleName=a}StyleChangedEvent.prototype=Object.create(DispatcherEvent.prototype);StyleChangedEvent.prototype.constructor=StyleChangedEvent;StyleChangedEvent.base=DispatcherEvent;
StyleChangedEvent.prototype.getStyleName=function(){return this._styleName};StyleChangedEvent.prototype.clone=function(){return StyleChangedEvent.base.prototype.clone.call(this)};StyleChangedEvent.prototype._cloneInstance=function(){return new StyleChangedEvent(this._styleName,this._oldValue,this._newValue)};function ElementEvent(a,b){ElementEvent.base.prototype.constructor.call(this,a);this._currentTarget=null;this._bubbles=b;this._phase=null;this._defaultPrevented=!1}ElementEvent.prototype=Object.create(DispatcherEvent.prototype);
ElementEvent.prototype.constructor=ElementEvent;ElementEvent.base=DispatcherEvent;ElementEvent.prototype.getCurrentTarget=function(){return this._currentTarget};ElementEvent.prototype.getPhase=function(){return this._phase};ElementEvent.prototype.preventDefault=function(){this._defaultPrevented=!0};ElementEvent.prototype.getDefaultPrevented=function(){return this._defaultPrevented};
ElementEvent.prototype.clone=function(){var a=ElementEvent.base.prototype.clone.call(this);a._currentTarget=this._currentTarget;a._phase=this._phase;a._defaultPrevented=this._defaultPrevented;a._bubbles=this._bubbles;return a};ElementEvent.prototype._cloneInstance=function(){return new ElementEvent(this._type,this._bubbles)};function ElementMouseEvent(a,b,c){ElementMouseEvent.base.prototype.constructor.call(this,a,!0);this._x=b;this._y=c}ElementMouseEvent.prototype=Object.create(ElementEvent.prototype);
ElementMouseEvent.prototype.constructor=ElementMouseEvent;ElementMouseEvent.base=ElementEvent;ElementMouseEvent.prototype.getX=function(){return this._x};ElementMouseEvent.prototype.getY=function(){return this._y};ElementMouseEvent.prototype.clone=function(){return ElementMouseEvent.base.prototype.clone.call(this)};ElementMouseEvent.prototype._cloneInstance=function(){return new ElementMouseEvent(this._type,this._x,this._y)};
function ElementMouseWheelEvent(a,b,c,d){ElementMouseWheelEvent.base.prototype.constructor.call(this,"wheel",a,b);this._deltaX=c;this._deltaY=d}ElementMouseWheelEvent.prototype=Object.create(ElementMouseEvent.prototype);ElementMouseWheelEvent.prototype.constructor=ElementMouseWheelEvent;ElementMouseWheelEvent.base=ElementMouseEvent;ElementMouseWheelEvent.prototype.getDeltaX=function(){return this._deltaX};ElementMouseWheelEvent.prototype.getDeltaY=function(){return this._deltaY};
ElementMouseWheelEvent.prototype.clone=function(){return ElementMouseWheelEvent.base.prototype.clone.call(this)};ElementMouseWheelEvent.prototype._cloneInstance=function(){return new ElementMouseWheelEvent(this._x,this._y,this._deltaX,this._deltaY)};function ElementListItemClickEvent(a,b){ElementListItemClickEvent.base.prototype.constructor.call(this,"listitemclick",!1);this._item=a;this._index=b}ElementListItemClickEvent.prototype=Object.create(ElementEvent.prototype);
ElementListItemClickEvent.prototype.constructor=ElementListItemClickEvent;ElementListItemClickEvent.base=ElementEvent;ElementListItemClickEvent.prototype.getItem=function(){return this._item};ElementListItemClickEvent.prototype.getIndex=function(){return this._index};ElementListItemClickEvent.prototype.clone=function(){return ElementListItemClickEvent.base.prototype.clone.call(this)};ElementListItemClickEvent.prototype._cloneInstance=function(){return new ElementListItemClickEvent(this._item,this._index)};
function ElementKeyboardEvent(a,b,c,d,e,f,g){ElementKeyboardEvent.base.prototype.constructor.call(this,a,!0);"Spacebar"==b?b=" ":"Left"==b?b="ArrowLeft":"Right"==b?b="ArrowRight":"Del"==b&&(b="Delete");this._key=b;this._keyCode=c;this._ctrl=d;this._alt=e;this._shift=f;this._meta=g}ElementKeyboardEvent.prototype=Object.create(ElementEvent.prototype);ElementKeyboardEvent.prototype.constructor=ElementKeyboardEvent;ElementKeyboardEvent.base=ElementEvent;ElementKeyboardEvent.prototype.getKey=function(){return this._key};
ElementKeyboardEvent.prototype.getKeyCode=function(){return this._keyCode};ElementKeyboardEvent.prototype.getCtrl=function(){return this._ctrl};ElementKeyboardEvent.prototype.getAlt=function(){return this._alt};ElementKeyboardEvent.prototype.getShift=function(){return this._shift};ElementKeyboardEvent.prototype.getMeta=function(){return this._meta};ElementKeyboardEvent.prototype.clone=function(){return ElementKeyboardEvent.base.prototype.clone.call(this)};
ElementKeyboardEvent.prototype._cloneInstance=function(){return new ElementKeyboardEvent(this._type,this._key,this._keyCode,this._ctrl,this._alt,this._shift,this._meta)};function ElementGridItemClickEvent(a,b,c){ElementGridItemClickEvent.base.prototype.constructor.call(this,a,b);this._columnIndex=c}ElementGridItemClickEvent.prototype=Object.create(ElementListItemClickEvent.prototype);ElementGridItemClickEvent.prototype.constructor=ElementGridItemClickEvent;ElementGridItemClickEvent.base=ElementListItemClickEvent;
ElementGridItemClickEvent.prototype.getColumnIndex=function(){return this._columnIndex};ElementGridItemClickEvent.prototype.clone=function(){return ElementGridItemClickEvent.base.prototype.clone.call(this)};ElementGridItemClickEvent.prototype._cloneInstance=function(){return new ElementListItemClickEvent(this._item,this._index,this._columnIndex)};function CollectionChangedEvent(a,b){CollectionChangedEvent.base.prototype.constructor.call(this,"collectionchanged");this._kind=a;this._index=b}
CollectionChangedEvent.prototype=Object.create(DispatcherEvent.prototype);CollectionChangedEvent.prototype.constructor=CollectionChangedEvent;CollectionChangedEvent.base=DispatcherEvent;CollectionChangedEvent.prototype.getKind=function(){return this._kind};CollectionChangedEvent.prototype.getIndex=function(){return this._index};CollectionChangedEvent.prototype.clone=function(){return CollectionChangedEvent.base.prototype.clone.call(this)};
CollectionChangedEvent.prototype._cloneInstance=function(){return new CollectionChangedEvent(this._kind,this._index)};function AddedRemovedEvent(a,b){AddedRemovedEvent.base.prototype.constructor.call(this,a);this._manager=b}AddedRemovedEvent.prototype=Object.create(DispatcherEvent.prototype);AddedRemovedEvent.prototype.constructor=AddedRemovedEvent;AddedRemovedEvent.base=DispatcherEvent;AddedRemovedEvent.prototype.getManager=function(){return this._manager};AddedRemovedEvent.prototype.clone=function(){return AddedRemovedEvent.base.prototype.clone.call(this)};
AddedRemovedEvent.prototype._cloneInstance=function(){return new AddedRemovedEvent(this._type,this._manager)};function EventDispatcher(){this._eventListeners=Object.create(null)}EventDispatcher.prototype.constructor=EventDispatcher;EventDispatcher.prototype.addEventListener=function(a,b){null==this._eventListeners[a]&&(this._eventListeners[a]=[]);this._eventListeners[a].push(b)};
EventDispatcher.prototype.removeEventListener=function(a,b){if(!(a in this._eventListeners))return!1;for(var c=0;c<this._eventListeners[a].length;c++)if(this._eventListeners[a][c]==b)return this._eventListeners[a].splice(c,1),!0;return!1};EventDispatcher.prototype.hasEventListener=function(a,b){if(!(a in this._eventListeners))return!1;if(null==b)return 0<this._eventListeners[a].length?!0:!1;for(var c=0;c<this._eventListeners[a].length;c++)if(this._eventListeners[a][c]==b)return!0;return!1};
EventDispatcher.prototype._dispatchEvent=function(a){a._canceled=!1;if(a._type in this._eventListeners&&0<this._eventListeners[a._type].length)for(var b=this._eventListeners[a._type].slice(),c,d=0;d<b.length;d++)if(c=a.clone(),c._target=this,b[d](c),1==c._canceled){a._canceled=!0;break}};
function ToggleButtonGroup(){ToggleButtonGroup.base.prototype.constructor.call(this);this._selectedButton=null;this._toggleButtons=[];var a=this;this._toggleButtonChangedInstance=function(b){a._toggleButtonChanged(b)}}ToggleButtonGroup.prototype=Object.create(EventDispatcher.prototype);ToggleButtonGroup.prototype.constructor=ToggleButtonGroup;ToggleButtonGroup.base=EventDispatcher;
ToggleButtonGroup.prototype.addButton=function(a){if(null==a||0==a instanceof ToggleButtonElement||-1<this._toggleButtons.indexOf(a))return!1;this._toggleButtons.push(a);a.addEventListener("changed",this._toggleButtonChangedInstance);return!0};ToggleButtonGroup.prototype.removeButton=function(a){var b=this._toggleButtons.indexOf(a);if(-1==b)return!1;this._toggleButtons.splice(b,1);a.removeEventListener("changed",this._toggleButtonChangedInstance)};
ToggleButtonGroup.prototype.clearButtons=function(){for(var a=0;a<this._toggleButtons.length;a++)this._toggleButtons[a].removeEventListener("changed",this._toggleButtonChangedInstance);this._toggleButtons=[]};
ToggleButtonGroup.prototype.setSelectedButton=function(a){if(this._selectedButton!=a&&(null==a||-1<this._toggleButtons.indexOf(a))){this._selectedButton=a;null!=this._selectedButton&&this._selectedButton.setSelected(!0);for(var b=0;b<this._toggleButtons.length;b++)this._toggleButtons[b]!=a&&this._toggleButtons[b].setSelected(!1)}};ToggleButtonGroup.prototype.getSelectedButton=function(){return this._selectedButton};
ToggleButtonGroup.prototype._toggleButtonChanged=function(a){a=a.getTarget();1==a.getSelected()?this._selectedButton=a:this._selectedButton=null;for(var b=0;b<this._toggleButtons.length;b++)this._toggleButtons[b]!=a&&this._toggleButtons[b].setSelected(!1);1==this.hasEventListener("changed",null)&&this._dispatchEvent(new DispatcherEvent("changed",!1))};function StyleDefinition(){StyleDefinition.base.prototype.constructor.call(this);this._styleMap=Object.create(null)}StyleDefinition.prototype=Object.create(EventDispatcher.prototype);
StyleDefinition.prototype.constructor=StyleDefinition;StyleDefinition.base=EventDispatcher;StyleDefinition.prototype.getStyle=function(a){if(a in this._styleMap)return this._styleMap[a]};
StyleDefinition.prototype.setStyle=function(a,b){var c=void 0;a in this._styleMap&&(c=this._styleMap[a]);c!==b&&(1==this.hasEventListener("stylechanged",null)?(c=this.getStyle(a),void 0===b?delete this._styleMap[a]:this._styleMap[a]=b,this.getStyle(a)!==c&&this._dispatchEvent(new StyleChangedEvent(a))):void 0===b?delete this._styleMap[a]:this._styleMap[a]=b)};StyleDefinition.prototype.clearStyle=function(a){this.setStyle(a,void 0)};
function StyleData(a){this.styleName=a;this.value=void 0;this.priority=[]}StyleData.prototype.constructor=StyleData;StyleData.prototype.equals=function(a){if(a.styleName!=this.styleName||a.priority.length!=this.priority.length||a.value!==this.value)return!1;for(var b=0;b<this.priority.length;b++)if(a.priority[b]!=this.priority[b])return!1;return!0};
StyleData.prototype.comparePriority=function(a){for(var b=Math.min(this.priority.length,a.priority.length),c=0;c<b;c++){if(this.priority[c]<a.priority[c])return 1;if(this.priority[c]>a.priority[c])return-1}return 0};StyleData.prototype.clone=function(){var a=new StyleData(this.styleName);a.value=this.value;a.priority=this.priority.slice();return a};function StyleableBase(){StyleableBase.base.prototype.constructor.call(this)}StyleableBase.prototype=Object.create(StyleDefinition.prototype);
StyleableBase.prototype.constructor=StyleableBase;StyleableBase.base=StyleDefinition;StyleableBase.EStylePriorities={INSTANCE:0,CLASS:1};StyleableBase.EStyleType={NORMAL:1,INHERITABLE:2,SUBSTYLE:3};StyleableBase.prototype.getStyle=function(a){return this.getStyleData(a).value};
StyleableBase.prototype.setStyle=function(a,b){var c=void 0;a in this._styleMap&&(c=this._styleMap[a]);if(c!==b)if(1==this.hasEventListener("stylechanged",null)){c=this.getStyleData(a);void 0===b?delete this._styleMap[a]:this._styleMap[a]=b;var d=this.getStyleData(a);0==c.equals(d)&&this._dispatchEvent(new StyleChangedEvent(a))}else void 0===b?delete this._styleMap[a]:this._styleMap[a]=b};
StyleableBase.prototype.getStyleData=function(a){var b=new StyleData(a);b.value=StyleableBase.base.prototype.getStyle.call(this,a);if(void 0!==b.value)return b.priority.push(StyleableBase.EStylePriorities.INSTANCE),b;b.value=this._getClassStyle(a);b.priority.push(StyleableBase.EStylePriorities.CLASS);return b};StyleableBase.prototype._getStyleType=function(a){this._flattenStyleTypes();return a in this.constructor.__StyleTypesFlatMap?this.constructor.__StyleTypesFlatMap[a]:null};
StyleableBase.prototype._flattenStyleTypes=function(){if(null==this.constructor.__StyleTypesFlatMap){this.constructor.__StyleTypesFlatMap=Object.create(null);this.constructor.__StyleTypesFlatArray=[];for(var a=this.constructor,b=Object.getPrototypeOf(this),c=null;;){if("_StyleTypes"in a)for(c in a._StyleTypes)c in this.constructor.__StyleTypesFlatMap||(this.constructor.__StyleTypesFlatMap[c]=a._StyleTypes[c],this.constructor.__StyleTypesFlatArray.push({styleName:c,styleType:a._StyleTypes[c]}));b=
Object.getPrototypeOf(b);if(null==b||0==b.hasOwnProperty("constructor"))break;a=b.constructor}}};StyleableBase.prototype._getClassStyle=function(a){this._flattenClassStyles();if(a in this.constructor.__StyleDefaultsFlatMap)return this.constructor.__StyleDefaultsFlatMap[a][this.constructor.__StyleDefaultsFlatMap[a].length-1]};StyleableBase.prototype._getInstanceStyle=function(a){if(a in this._styleMap)return this._styleMap[a]};
StyleableBase.prototype._applySubStylesToElement=function(a,b){var c=[];b._setStyleDefinitions(this._getClassStyleList(a),!0);var d=this._getInstanceStyle(a);if(void 0!==d)if(1==Array.isArray(d))for(var e=0;e<d.length;e++)c.push(d[e]);else c.push(d);b._setStyleDefinitions(c,!1)};
StyleableBase.prototype._getClassStyleList=function(a){this._flattenClassStyles();var b,c=[],d,e;if(a in this.constructor.__StyleDefaultsFlatMap)for(e=this.constructor.__StyleDefaultsFlatMap[a],a=0;a<e.length;a++)if(d=e[a],1==Array.isArray(d))for(b=0;b<d.length;b++)c.push(d[b]);else c.push(d);return c};
StyleableBase.prototype._flattenClassStyles=function(){if(null==this.constructor.__StyleDefaultsFlatMap){this.constructor.__StyleDefaultsFlatMap=Object.create(null);for(var a=this.constructor,b=Object.getPrototypeOf(this),c=null;;){if("StyleDefault"in a)for(c in a.StyleDefault._styleMap)null==this.constructor.__StyleDefaultsFlatMap[c]&&(this.constructor.__StyleDefaultsFlatMap[c]=[]),this.constructor.__StyleDefaultsFlatMap[c].splice(0,0,a.StyleDefault._styleMap[c]);b=Object.getPrototypeOf(b);if(null==
b||0==b.hasOwnProperty("constructor"))break;a=b.constructor}}};function ShapeBase(){ShapeBase.base.prototype.constructor.call(this)}ShapeBase.prototype=Object.create(StyleableBase.prototype);ShapeBase.prototype.constructor=ShapeBase;ShapeBase.base=StyleableBase;ShapeBase.prototype.drawShape=function(a,b){};function RoundedRectangleShape(){RoundedRectangleShape.base.prototype.constructor.call(this)}RoundedRectangleShape.prototype=Object.create(ShapeBase.prototype);
RoundedRectangleShape.prototype.constructor=RoundedRectangleShape;RoundedRectangleShape.base=ShapeBase;RoundedRectangleShape._StyleTypes=Object.create(null);RoundedRectangleShape._StyleTypes.CornerRadius=StyleableBase.EStyleType.NORMAL;RoundedRectangleShape._StyleTypes.CornerRadiusPercent=StyleableBase.EStyleType.NORMAL;RoundedRectangleShape._StyleTypes.CornerRadiusTopLeft=StyleableBase.EStyleType.NORMAL;RoundedRectangleShape._StyleTypes.CornerRadiusTopLeft=StyleableBase.EStyleType.NORMAL;
RoundedRectangleShape._StyleTypes.CornerRadiusTopRight=StyleableBase.EStyleType.NORMAL;RoundedRectangleShape._StyleTypes.CornerRadiusTopRightPercent=StyleableBase.EStyleType.NORMAL;RoundedRectangleShape._StyleTypes.CornerRadiusBottomLeft=StyleableBase.EStyleType.NORMAL;RoundedRectangleShape._StyleTypes.CornerRadiusBottomLeftPercent=StyleableBase.EStyleType.NORMAL;RoundedRectangleShape._StyleTypes.CornerRadiusBottomRight=StyleableBase.EStyleType.NORMAL;
RoundedRectangleShape._StyleTypes.CornerRadiusBottomRightPercent=StyleableBase.EStyleType.NORMAL;RoundedRectangleShape.StyleDefault=new StyleDefinition;RoundedRectangleShape.StyleDefault.setStyle("CornerRadius",null);RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusPercent",null);RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusTopLeft",null);RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusTopLeftPercent",null);
RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusTopRight",null);RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusTopRightPercent",null);RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusBottomLeft",null);RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusBottomLeftPercent",null);RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusBottomRight",null);RoundedRectangleShape.StyleDefault.setStyle("CornerRadiusBottomRightPercent",null);
RoundedRectangleShape.prototype.drawShape=function(a,b){var c=b.getX(),d=b.getY(),e=b.getWidth(),f=b.getHeight(),g=Math.min(e,f),k=this.getStyle("CornerRadius"),l=this.getStyle("CornerRadiusTopLeft"),h=this.getStyle("CornerRadiusTopRight"),n=this.getStyle("CornerRadiusBottomLeft"),p=this.getStyle("CornerRadiusBottomRight");null==k&&(k=this.getStyle("CornerRadiusPercent"),k=null==k?0:k/100*g);null==l&&(l=this.getStyle("CornerRadiusTopLeftPercent"),l=null==l?k:l/100*g);null==h&&(h=this.getStyle("CornerRadiusTopRightPercent"),
h=null==h?k:h/100*g);null==n&&(n=this.getStyle("CornerRadiusBottomLeftPercent"),n=null==n?k:n/100*g);null==p&&(p=this.getStyle("CornerRadiusBottomRightPercent"),p=null==p?k:p/100*g);a.moveTo(c,d+l);0<l&&a.arcTo(c,d,c+l,d,l);a.lineTo(c+e-h,d);0<h&&a.arcTo(c+e,d,c+e,d+h,h);a.lineTo(c+e,d+f-p);0<p&&a.arcTo(c+e,d+f,c+e-p,d+f,p);a.lineTo(c+n,d+f);0<n&&a.arcTo(c,d+f,c,d+f-n,n);a.closePath()};function EllipseShape(){EllipseShape.base.prototype.constructor.call(this)}EllipseShape.prototype=Object.create(ShapeBase.prototype);
EllipseShape.prototype.constructor=EllipseShape;EllipseShape.base=ShapeBase;EllipseShape.prototype.drawShape=function(a,b){var c=b.getWidth(),d=b.getHeight(),e=c/2*.551784,f=d/2*.551784,g=b.getX(),k=b.getY(),l=g+c/2,h=k+d/2,c=g+c,d=k+d;a.moveTo(g,h);a.bezierCurveTo(g,h-f,l-e,k,l,k);a.bezierCurveTo(l+e,k,c,h-f,c,h);a.bezierCurveTo(c,h+f,l+e,d,l,d);a.bezierCurveTo(l-e,d,g,h+f,g,h);a.closePath()};function ArrowShape(){ArrowShape.base.prototype.constructor.call(this)}ArrowShape.prototype=Object.create(ShapeBase.prototype);
ArrowShape.prototype.constructor=ArrowShape;ArrowShape.base=ShapeBase;ArrowShape._StyleTypes=Object.create(null);ArrowShape._StyleTypes.Direction=StyleableBase.EStyleType.NORMAL;ArrowShape._StyleTypes.RectBaseWidth=StyleableBase.EStyleType.NORMAL;ArrowShape._StyleTypes.RectBaseHeight=StyleableBase.EStyleType.NORMAL;ArrowShape._StyleTypes.RectBasePercentWidth=StyleableBase.EStyleType.NORMAL;ArrowShape._StyleTypes.RectBasePercentHeight=StyleableBase.EStyleType.NORMAL;
ArrowShape._StyleTypes.CornerRadius=StyleableBase.EStyleType.NORMAL;ArrowShape._StyleTypes.CornerRadiusTopLeft=StyleableBase.EStyleType.NORMAL;ArrowShape._StyleTypes.CornerRadiusTopRight=StyleableBase.EStyleType.NORMAL;ArrowShape._StyleTypes.CornerRadiusBottomLeft=StyleableBase.EStyleType.NORMAL;ArrowShape._StyleTypes.CornerRadiusBottomRight=StyleableBase.EStyleType.NORMAL;ArrowShape.StyleDefault=new StyleDefinition;ArrowShape.StyleDefault.setStyle("Direction","up");
ArrowShape.StyleDefault.setStyle("RectBaseWidth",null);ArrowShape.StyleDefault.setStyle("RectBaseHeight",null);ArrowShape.StyleDefault.setStyle("RectBasePercentWidth",null);ArrowShape.StyleDefault.setStyle("RectBasePercentHeight",null);ArrowShape.StyleDefault.setStyle("CornerRadius",0);ArrowShape.StyleDefault.setStyle("CornerRadiusTopLeft",null);ArrowShape.StyleDefault.setStyle("CornerRadiusTopRight",null);ArrowShape.StyleDefault.setStyle("CornerRadiusBottomLeft",null);
ArrowShape.StyleDefault.setStyle("CornerRadiusBottomRight",null);
ArrowShape.prototype.drawShape=function(a,b){var c=this.getStyle("Direction");if("up"==c||"down"==c||"left"==c||"right"==c){var d=b.getX(),e=b.getY(),f=b.getWidth(),g=b.getHeight(),k=this.getStyle("CornerRadius"),l=this.getStyle("CornerRadiusTopLeft"),h=this.getStyle("CornerRadiusTopRight"),n=this.getStyle("CornerRadiusBottomLeft"),p=this.getStyle("CornerRadiusBottomRight");null==k&&(k=0);null==l&&(l=k);null==h&&(h=k);null==n&&(n=k);null==p&&(p=k);var k=this.getStyle("RectBaseWidth"),m=this.getStyle("RectBaseHeight");
null==k&&(k=this.getStyle("RectBasePercentWidth"),k=null==k?0:Math.round(k/100*f));null==m&&(m=this.getStyle("RectBasePercentHeight"),m=null==m?0:Math.round(m/100*g));if(0==k||0==m)m=k=0;"down"==c?(a.moveTo(d+(f-k)/2,e+l),0<l&&a.arcTo(d+(f-k)/2,e,d+(f-k)/2+l,e,l),a.lineTo(d+(f-k)/2+k-h,e),0<h&&a.arcTo(d+(f-k)/2+k,e,d+(f-k)/2+k,e+h,h),a.lineTo(d+(f-k)/2+k,e+m-p),0<p&&a.arcTo(d+(f-k)/2+k,e+m,Math.min(d+(f-k)/2+k+p,d+f),e+m,Math.min(p,(f-k)/2)),a.lineTo(d+f,e+m),a.lineTo(d+f/2,e+g),a.lineTo(d,e+m),a.lineTo(Math.max(d+
(f-k)/2-n,d),e+m),0<n&&a.arcTo(d+(f-k)/2,e+m,d+(f-k)/2,e+m-n,Math.min(n,(f-k)/2))):"left"==c?(a.moveTo(d+f-h,e+(g-m)/2),0<h&&a.arcTo(d+f,e+(g-m)/2,d+f,e+(g-m)/2+h,h),a.lineTo(d+f,e+(g-m)/2+m-p),0<p&&a.arcTo(d+f,e+(g-m)/2+m,d+f-p,e+(g-m)/2+m,p),a.lineTo(d+f-k+n,e+(g-m)/2+m),0<n&&a.arcTo(d+f-k,e+(g-m)/2+m,d+f-k,Math.min(e+(g-m)/2+m+n,e+g),Math.min(n,(g-m)/2)),a.lineTo(d+f-k,e+g),a.lineTo(d,e+g/2),a.lineTo(d+f-k,e),a.lineTo(d+f-k,Math.max(e,e+(g-m)/2-l)),0<l&&a.arcTo(d+f-k,e+(g-m)/2,d+f-k+l,e+(g-m)/
2,Math.min(l,(g-m)/2))):"up"==c?(a.moveTo(d+(f-k)/2+k,e+g-p),0<p&&a.arcTo(d+(f-k)/2+k,e+g,d+(f-k)/2+k-p,e+g,p),a.lineTo(d+(f-k)/2+n,e+g),0<n&&a.arcTo(d+(f-k)/2,e+g,d+(f-k)/2,e+g-n,n),a.lineTo(d+(f-k)/2,e+g-m+l),0<l&&a.arcTo(d+(f-k)/2,e+g-m,Math.max(d+(f-k)/2-l,d),e+g-m,Math.min(l,(f-k)/2)),a.lineTo(d,e+g-m),a.lineTo(d+f/2,e),a.lineTo(d+f,e+g-m),a.lineTo(Math.min(d+(f-k)/2+k+h,d+f),e+g-m),0<h&&a.arcTo(d+(f-k)/2+k,e+g-m,d+(f-k)/2+k,e+g-m+h,Math.min(h,(f-k)/2))):"right"==c&&(a.moveTo(d+n,e+(g-m)/2+m),
0<n&&a.arcTo(d,e+(g-m)/2+m,d,e+(g-m)/2+m-n,n),a.lineTo(d,e+(g-m)/2+l),0<l&&a.arcTo(d,e+(g-m)/2,d+l,e+(g-m)/2,l),a.lineTo(d+k-h,e+(g-m)/2),0<h&&a.arcTo(d+k,e+(g-m)/2,d+k,Math.max(e+(g-m)/2-h,e),Math.min(h,(g-m)/2)),a.lineTo(d+k,e),a.lineTo(d+f,e+g/2),a.lineTo(d+k,e+g),a.lineTo(d+k,Math.min(e+g,e+(g-m)/2+m+p)),0<p&&a.arcTo(d+k,e+(g-m)/2+m,d+k-p,e+(g-m)/2+m,Math.min(p,(g-m)/2)));a.closePath()}};
function ListCollection(a){ListCollection.base.prototype.constructor.call(this);this._backingArray=[];this._collectionSort=null;null!=a&&(this._backingArray=a)}ListCollection.prototype=Object.create(EventDispatcher.prototype);ListCollection.prototype.constructor=ListCollection;ListCollection.base=EventDispatcher;ListCollection.prototype.getLength=function(){return this._backingArray.length};
ListCollection.prototype.setSourceArray=function(a){this._backingArray=a;this._dispatchEvent(new CollectionChangedEvent("reset",-1))};ListCollection.prototype.getSourceArray=function(){return this._backingArray};ListCollection.prototype.setCollectionSort=function(a){if(this._collectionSort!=a){if(!(a instanceof CollectionSort))throw"Invalid CollectionSort";this._collectionSort=a}};ListCollection.prototype.getCollectionSort=function(){return this._collectionSort};
ListCollection.prototype.sort=function(){null!=this._backingArray&&(null==this._collectionSort?this._backingArray.sort():this._collectionSort.sort(this._backingArray),this._dispatchEvent(new CollectionChangedEvent("reset",-1)))};ListCollection.prototype.getItemIndex=function(a){return null==a?-1:this._backingArray.indexOf(a)};ListCollection.prototype.getItemAt=function(a){return 0>a||a>=this._backingArray.length?null:this._backingArray[a]};
ListCollection.prototype.addItem=function(a){return this.addItemAt(a,this._backingArray.length)};ListCollection.prototype.addItemAt=function(a,b){if(0>b||b>this._backingArray.length||null==a)return null;this._backingArray.splice(b,0,a);this._dispatchEvent(new CollectionChangedEvent("add",b));return a};ListCollection.prototype.removeItem=function(a){return this.removeItemAt(this._backingArray.indexOf(a))};
ListCollection.prototype.removeItemAt=function(a){if(0>a||a>=this._backingArray.length)return null;var b=this._backingArray.splice(a,1)[0];this._dispatchEvent(new CollectionChangedEvent("remove",a));return b};ListCollection.prototype.replaceItemAt=function(a,b){if(0>b||b>=this._backingArray.length)return null;var c=this._backingArray[b];this._backingArray[b]=a;this.indexUpdated(b);return c};
ListCollection.prototype.clear=function(){this._backingArray=[];this._dispatchEvent(new CollectionChangedEvent("reset",-1))};ListCollection.prototype.indexUpdated=function(a){this._dispatchEvent(new CollectionChangedEvent("update",a))};function FillBase(){FillBase.base.prototype.constructor.call(this)}FillBase.prototype=Object.create(StyleableBase.prototype);FillBase.prototype.constructor=FillBase;FillBase.base=StyleableBase;FillBase.prototype.drawFill=function(a,b){};
function SolidFill(){SolidFill.base.prototype.constructor.call(this)}SolidFill.prototype=Object.create(FillBase.prototype);SolidFill.prototype.constructor=SolidFill;SolidFill.base=FillBase;SolidFill._StyleTypes=Object.create(null);SolidFill._StyleTypes.FillColor=StyleableBase.EStyleType.NORMAL;SolidFill.StyleDefault=new StyleDefinition;SolidFill.StyleDefault.setStyle("FillColor","#FF0000");SolidFill.prototype.drawFill=function(a,b){a.fillStyle=this.getStyle("FillColor");a.fill()};
function LinearGradientFill(){LinearGradientFill.base.prototype.constructor.call(this)}LinearGradientFill.prototype=Object.create(FillBase.prototype);LinearGradientFill.prototype.constructor=LinearGradientFill;LinearGradientFill.base=FillBase;LinearGradientFill._StyleTypes=Object.create(null);LinearGradientFill._StyleTypes.GradientDegrees=StyleableBase.EStyleType.NORMAL;LinearGradientFill._StyleTypes.GradientColorStops=StyleableBase.EStyleType.NORMAL;
LinearGradientFill._StyleTypes.GradientCoverage=StyleableBase.EStyleType.NORMAL;LinearGradientFill.StyleDefault=new StyleDefinition;LinearGradientFill.StyleDefault.setStyle("GradientDegrees",0);LinearGradientFill.StyleDefault.setStyle("GradientColorStops",[[0,"#FF0000"],[1,"#000000"]]);LinearGradientFill.StyleDefault.setStyle("GradientCoverage","inner");
LinearGradientFill.prototype.drawFill=function(a,b){var c=CanvasElement.normalizeDegrees(this.getStyle("GradientDegrees")),d=this.getStyle("GradientColorStops"),e=this.getStyle("GradientCoverage"),f=this._calculateInnerOuterPoints(c,b),c=this._calculateInnerOuterPoints(CanvasElement.normalizeDegrees(c+180),b),g=0;"outer"==e&&(g=1);e=f[g];f=c[g];e=a.createLinearGradient(e.x,e.y,f.x,f.y);if(1==Array.isArray(d))for(f=0;f<d.length;f++)if(1<d[f].length)try{e.addColorStop(d[f][0],d[f][1])}catch(k){}a.fillStyle=
e;a.fill()};
LinearGradientFill.prototype._calculateInnerOuterPoints=function(a,b){a=CanvasElement.normalizeDegrees(a);b.getX();b.getY();var c=b.getWidth(),d=b.getHeight(),e=CanvasElement.degreesToRadians(a),c=c/2,d=d/2,f=CanvasElement.cot(e)*d,g=Math.tan(e)*c;Math.abs(f)>c&&(f=0>f?-1*c:c);Math.abs(g)>d&&(g=0>g?-1*d:d);90<a&&180>=a?g*=-1:180<a&&270>=a?(f*=-1,g*=-1):270<a&&(f*=-1);var k=Math.sqrt(f*f+g*g),k=Math.abs(g)<d?k+Math.abs((d-Math.abs(g))*Math.sin(e)):k+Math.abs((c-Math.abs(f))*Math.cos(e));return[{x:f+
c,y:g+d},{x:k*Math.cos(e)+c,y:k*Math.sin(e)+d}]};function DrawMetrics(){this._height=this._width=this._y=this._x=0}DrawMetrics.prototype.constructor=DrawMetrics;DrawMetrics.prototype.equals=function(a){return this._x==a._x&&this._y==a._y&&this._width==a._width&&this._height==a._height?!0:!1};DrawMetrics.prototype.clone=function(){var a=new DrawMetrics;a._x=this._x;a._y=this._y;a._width=this._width;a._height=this._height;return a};
DrawMetrics.prototype.copyFrom=function(a){this._x=a._x;this._y=a._y;this._width=a._width;this._height=a._height};DrawMetrics.prototype.mergeExpand=function(a){a._x<this._x&&(this._width+=this._x-a._x,this._x=a._x);a._y<this._y&&(this._height+=this._y-a._y,this._y=a._y);a._x+a._width>this._x+this._width&&(this._width+=a._x+a._width-(this._x+this._width));a._y+a._height>this._y+this._height&&(this._height+=a._y+a._height-(this._y+this._height))};
DrawMetrics.prototype.mergeReduce=function(a){this._x<a._x&&(this._width-=a._x-this._x,this._x=a._x);this._y<a._y&&(this._height-=a._y-this._y,this._y=a._y);this._x+this._width>a._x+a._width&&(this._width-=this._x+this._width-(a._x+a._width));this._y+this._height>a._y+a._height&&(this._height-=this._y+this._height-(a._y+a._height))};
DrawMetrics.prototype.roundToPrecision=function(a){this._x=CanvasElement.roundToPrecision(this._x,a);this._y=CanvasElement.roundToPrecision(this._y,a);this._width=CanvasElement.roundToPrecision(this._width,a);this._height=CanvasElement.roundToPrecision(this._height,a)};DrawMetrics.prototype.roundUp=function(){var a=this._x,b=this._x+this._width,c=this._y,d=this._y+this._height,a=Math.floor(a),b=Math.ceil(b),c=Math.floor(c),d=Math.ceil(d);this._x=a;this._y=c;this._width=b-a;this._height=d-c};
DrawMetrics.prototype.getX=function(){return this._x};DrawMetrics.prototype.getY=function(){return this._y};DrawMetrics.prototype.getWidth=function(){return this._width};DrawMetrics.prototype.getHeight=function(){return this._height};function DataListData(a,b){this._parentList=a;this._itemIndex=b}function DataGridItemData(a,b,c){this._parentGrid=a;this._itemIndex=b;this._columnIndex=c}
function CursorDefinition(){CursorDefinition.base.prototype.constructor.call(this);this._cursorElement=null;this._addedCount=0}CursorDefinition.prototype=Object.create(StyleableBase.prototype);CursorDefinition.prototype.constructor=CursorDefinition;CursorDefinition.base=StyleableBase;CursorDefinition._StyleTypes=Object.create(null);CursorDefinition._StyleTypes.CursorClass=StyleableBase.EStyleType.NORMAL;CursorDefinition._StyleTypes.CursorStyle=StyleableBase.EStyleType.NORMAL;
CursorDefinition._StyleTypes.CursorOffsetX=StyleableBase.EStyleType.NORMAL;CursorDefinition._StyleTypes.CursorOffsetY=StyleableBase.EStyleType.NORMAL;CursorDefinition.StyleDefault=new StyleDefinition;CursorDefinition.StyleDefault.setStyle("CursorClass","default");CursorDefinition.StyleDefault.setStyle("CursorStyle",null);CursorDefinition.StyleDefault.setStyle("CursorOffsetX",0);CursorDefinition.StyleDefault.setStyle("CursorOffsetY",0);
function CollectionSort(a,b){this._comparatorFunction=a;this._isDecending=b;var c=this;this._collectionSortDecendingComparator=function(a,b){return c._comparatorFunction(b,a)}}CollectionSort.prototype.constructor=CollectionSort;CollectionSort.prototype.setComparatorFunction=function(a){this._comparatorFunction=a};CollectionSort.prototype.getComparatorFunction=function(){return this._comparatorFunction};
CollectionSort.prototype.sort=function(a){1==this._isDecending?a.sort(this._collectionSortDecendingComparator):a.sort(this._comparatorFunction)};CollectionSort.prototype.setIsDecending=function(a){this._isDecending=a};CollectionSort.prototype.getIsDecending=function(){return this._isDecending};
function CanvasElement(){CanvasElement.base.prototype.constructor.call(this);this._styleProxy=null;this._styleDefinitionDefaults=[];this._styleDefinitions=[];this._manager=this._backgroundFill=this._backgroundShape=null;this._displayDepth=0;this._captureListeners=Object.create(null);this._name=null;this._measuredHeight=this._measuredWidth=this._height=this._width=this._y=this._x=0;this._isFocused=this._mouseIsDown=this._mouseIsOver=!1;this._rotateCenterY=this._rotateCenterX=this._rotateDegrees=0;
this._parent=null;this._children=[];this._stylesInvalid=!0;this._stylesInvalidMap=Object.create(null);this._stylesValidateNode=new CmLinkedNode;this._stylesValidateNode.data=this;this._stylesCache=Object.create(null);this._measureInvalid=!0;this._measureValidateNode=new CmLinkedNode;this._measureValidateNode.data=this;this._layoutInvalid=!0;this._layoutValidateNode=new CmLinkedNode;this._layoutValidateNode.data=this;this._renderInvalid=!0;this._renderValidateNode=new CmLinkedNode;this._renderValidateNode.data=
this;this._redrawRegionInvalid=!0;this._redrawRegionValidateNode=new CmLinkedNode;this._redrawRegionValidateNode.data=this;this._graphicsCtx=this._graphicsCanvas=null;this._graphicsClear=!0;this._compositeMetrics=[];this._renderChanged=!0;this._compositeRenderInvalid=this._renderVisible=!1;this._compositeRenderValidateNode=new CmLinkedNode;this._compositeRenderValidateNode.data=this;this._compositeEffectChanged=!0;this._rollOverCursorInstance=this._transformDrawableMetrics=this._transformVisibleMetrics=
this._compositeCanvasMetrics=this._compositeCanvas=this._compositeCtx=this._redrawRegionMetrics=this._compositeVisibleMetrics=null;this._renderFocusRing=!1;var a=this;this._onExternalStyleChangedInstance=function(b){a._onExternalStyleChanged(b)};this._onBackgroundShapeStyleChangedInstance=function(b){a._onBackgroundShapeStyleChanged(b)};this._onBackgroundFillStyleChangedInstance=function(b){a._onBackgroundFillStyleChanged(b)};this._onCanvasElementAddedRemovedInstance=function(b){"added"==b.getType()?
a._onCanvasElementAdded(b):"removed"==b.getType()&&a._onCanvasElementRemoved(b)};this._onCanvasElementCursorOverOutInstance=function(b){a._updateRolloverCursorDefinition()};this.addEventListener("added",this._onCanvasElementAddedRemovedInstance);this.addEventListener("removed",this._onCanvasElementAddedRemovedInstance)}CanvasElement.prototype=Object.create(StyleableBase.prototype);CanvasElement.prototype.constructor=CanvasElement;CanvasElement.base=StyleableBase;
CanvasElement.EStylePriorities={INSTANCE:0,DEFINITION:1,PROXY:2,INHERITED:3,DEFAULT_DEFINITION:4,CLASS:5};CanvasElement._StyleTypes=Object.create(null);CanvasElement._StyleTypes.Visible=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.BorderType=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.BorderColor=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.BorderThickness=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.BackgroundFill=StyleableBase.EStyleType.NORMAL;
CanvasElement._StyleTypes.ShadowSize=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.ShadowOffsetX=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.ShadowOffsetY=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.ShadowColor=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.Alpha=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.ClipContent=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.SkinState=StyleableBase.EStyleType.NORMAL;
CanvasElement._StyleTypes.BackgroundShape=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.FocusColor=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.FocusThickness=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.Padding=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.PaddingTop=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.PaddingBottom=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.PaddingLeft=StyleableBase.EStyleType.NORMAL;
CanvasElement._StyleTypes.PaddingRight=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.Enabled=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.MouseEnabled=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.Draggable=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.Cursor=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.TabStop=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.X=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.Y=StyleableBase.EStyleType.NORMAL;
CanvasElement._StyleTypes.Width=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.Height=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.Top=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.Left=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.Bottom=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.Right=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.PercentWidth=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.PercentHeight=StyleableBase.EStyleType.NORMAL;
CanvasElement._StyleTypes.MinWidth=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.MinHeight=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.MaxWidth=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.MaxHeight=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.HorizontalCenter=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.VerticalCenter=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.RotateDegrees=StyleableBase.EStyleType.NORMAL;
CanvasElement._StyleTypes.RotateCenterX=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.RotateCenterY=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.IncludeInLayout=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.CompositeLayer=StyleableBase.EStyleType.NORMAL;CanvasElement._StyleTypes.TextStyle=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.TextDecoration=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.TextFont=StyleableBase.EStyleType.INHERITABLE;
CanvasElement._StyleTypes.TextSize=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.TextHorizontalAlign=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.TextVerticalAlign=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.TextLinePaddingTop=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.TextLinePaddingBottom=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.TextLineSpacing=StyleableBase.EStyleType.INHERITABLE;
CanvasElement._StyleTypes.TextColor=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.TextFillType=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.TextHighlightedColor=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.TextHighlightedBackgroundColor=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.TextCaretColor=StyleableBase.EStyleType.INHERITABLE;CanvasElement._StyleTypes.PasswordMaskCharacter=StyleableBase.EStyleType.INHERITABLE;
CanvasElement.StyleDefault=new StyleDefinition;CanvasElement.StyleDefault.setStyle("Visible",!0);CanvasElement.StyleDefault.setStyle("BorderType","none");CanvasElement.StyleDefault.setStyle("BorderColor","#000000");CanvasElement.StyleDefault.setStyle("BorderThickness",1);CanvasElement.StyleDefault.setStyle("BackgroundFill",null);CanvasElement.StyleDefault.setStyle("ShadowSize",0);CanvasElement.StyleDefault.setStyle("ShadowOffsetX",0);CanvasElement.StyleDefault.setStyle("ShadowOffsetY",0);
CanvasElement.StyleDefault.setStyle("ShadowColor","#000000");CanvasElement.StyleDefault.setStyle("Alpha",1);CanvasElement.StyleDefault.setStyle("ClipContent",!1);CanvasElement.StyleDefault.setStyle("SkinState","");CanvasElement.StyleDefault.setStyle("BackgroundShape",null);CanvasElement.StyleDefault.setStyle("FocusColor","#3333FF");CanvasElement.StyleDefault.setStyle("FocusThickness",1);CanvasElement.StyleDefault.setStyle("Padding",0);CanvasElement.StyleDefault.setStyle("PaddingTop",0);
CanvasElement.StyleDefault.setStyle("PaddingBottom",0);CanvasElement.StyleDefault.setStyle("PaddingLeft",0);CanvasElement.StyleDefault.setStyle("PaddingRight",0);CanvasElement.StyleDefault.setStyle("Enabled",!0);CanvasElement.StyleDefault.setStyle("MouseEnabled",!0);CanvasElement.StyleDefault.setStyle("Draggable",!1);CanvasElement.StyleDefault.setStyle("Cursor",null);CanvasElement.StyleDefault.setStyle("TabStop",-1);CanvasElement.StyleDefault.setStyle("X",null);
CanvasElement.StyleDefault.setStyle("Y",null);CanvasElement.StyleDefault.setStyle("Width",null);CanvasElement.StyleDefault.setStyle("Height",null);CanvasElement.StyleDefault.setStyle("Top",null);CanvasElement.StyleDefault.setStyle("Left",null);CanvasElement.StyleDefault.setStyle("Bottom",null);CanvasElement.StyleDefault.setStyle("Right",null);CanvasElement.StyleDefault.setStyle("PercentWidth",null);CanvasElement.StyleDefault.setStyle("PercentHeight",null);
CanvasElement.StyleDefault.setStyle("MinWidth",5);CanvasElement.StyleDefault.setStyle("MinHeight",5);CanvasElement.StyleDefault.setStyle("MaxWidth",null);CanvasElement.StyleDefault.setStyle("MaxHeight",null);CanvasElement.StyleDefault.setStyle("HorizontalCenter",null);CanvasElement.StyleDefault.setStyle("VerticalCenter",null);CanvasElement.StyleDefault.setStyle("RotateDegrees",0);CanvasElement.StyleDefault.setStyle("RotateCenterX",null);CanvasElement.StyleDefault.setStyle("RotateCenterY",null);
CanvasElement.StyleDefault.setStyle("IncludeInLayout",!0);CanvasElement.StyleDefault.setStyle("CompositeLayer",!1);CanvasElement.StyleDefault.setStyle("TextStyle","normal");CanvasElement.StyleDefault.setStyle("TextDecoration",null);CanvasElement.StyleDefault.setStyle("TextFont","Arial");CanvasElement.StyleDefault.setStyle("TextSize",12);CanvasElement.StyleDefault.setStyle("TextHorizontalAlign","left");CanvasElement.StyleDefault.setStyle("TextVerticalAlign","middle");
CanvasElement.StyleDefault.setStyle("TextLinePaddingTop",1);CanvasElement.StyleDefault.setStyle("TextLinePaddingBottom",1);CanvasElement.StyleDefault.setStyle("TextLineSpacing",0);CanvasElement.StyleDefault.setStyle("TextColor","#000000");CanvasElement.StyleDefault.setStyle("TextFillType","fill");CanvasElement.StyleDefault.setStyle("TextHighlightedColor","#FFFFFF");CanvasElement.StyleDefault.setStyle("TextHighlightedBackgroundColor","#000000");
CanvasElement.StyleDefault.setStyle("TextCaretColor","#000000");CanvasElement.StyleDefault.setStyle("PasswordMaskCharacter","\u25cf");CanvasElement.prototype.addStyleDefinition=function(a){return this.addStyleDefinitionAt(a,this._styleDefinitions.length)};CanvasElement.prototype.addStyleDefinitionAt=function(a,b){return this._addStyleDefinitionAt(a,b,!1)};CanvasElement.prototype.removeStyleDefinition=function(a){a=this._styleDefinitions.indexOf(a);return-1==a?null:this.removeStyleDefinitionAt(a)};
CanvasElement.prototype.removeStyleDefinitionAt=function(a){return this._removeStyleDefinitionAt(a,!1)};CanvasElement.prototype.clearStyleDefinitions=function(){return this._setStyleDefinitions([],!1)};CanvasElement.prototype.setStyleDefinitions=function(a){return this._setStyleDefinitions(a,!1)};CanvasElement.prototype.getNumStyleDefinitions=function(){return this._getNumStyleDefinitions(!1)};
CanvasElement.prototype._getNumStyleDefinitions=function(a){return 1==a?this._styleDefinitionDefaults.length:this._styleDefinitions.length};CanvasElement.prototype.getStyleDefinitionAt=function(a){return this._getStyleDefinitionAt(a,!1)};CanvasElement.prototype.getStyle=function(a){return CanvasElement.base.prototype.getStyle.call(this,a)};
CanvasElement.prototype.getStyleData=function(a){var b=this._stylesCache[a];null==b&&(b={styleData:new StyleData(a),cacheInvalid:!0},this._stylesCache[a]=b);if(0==b.cacheInvalid)return b.styleData;b.cacheInvalid=!1;b=b.styleData;b.priority=[];b.value=void 0;a in this._styleMap&&(b.value=this._styleMap[a]);if(void 0!==b.value)return b.priority.push(CanvasElement.EStylePriorities.INSTANCE),b;var c;for(c=this._styleDefinitions.length-1;0<=c;c--)if(b.value=this._styleDefinitions[c].getStyle(a),void 0!==
b.value)return b.priority.push(CanvasElement.EStylePriorities.DEFINITION),b.priority.push(this._styleDefinitions.length-1-c),b;var d=this._getStyleType(a),e,f,g;if(d!=StyleableBase.EStyleType.SUBSTYLE){for(f=this._styleProxy;null!=f;){e=f._proxyElement._getStyleType(a);if(e==StyleableBase.EStyleType.SUBSTYLE)break;if(null!=e&&0==a in f._proxyMap||null==e&&0=="_Arbitrary"in f._proxyMap)break;a in f._proxyElement._styleMap&&(b.value=f._proxyElement._styleMap[a]);if(void 0!==b.value)return b.priority.push(CanvasElement.EStylePriorities.PROXY),
b.priority.push(c),b.priority.push(CanvasElement.EStylePriorities.INSTANCE),b;for(g=f._proxyElement._styleDefinitions.length-1;0<=g;g--)if(b.value=f._proxyElement._styleDefinitions[g].getStyle(a),void 0!==b.value)return b.priority.push(CanvasElement.EStylePriorities.PROXY),b.priority.push(c),b.priority.push(CanvasElement.EStylePriorities.DEFINITION),b.priority.push(f._proxyElement._styleDefinitions.length-1-g),b;c++;f=f._proxyElement._styleProxy}e=d;d=this;for(c=0;e==StyleableBase.EStyleType.INHERITABLE;){d=
d._parent;if(null==d)break;a in d._styleMap&&(b.value=d._styleMap[a]);if(void 0!==b.value)return b.priority.push(CanvasElement.EStylePriorities.INHERITED),b.priority.push(c),b.priority.push(CanvasElement.EStylePriorities.INSTANCE),b;for(g=d._styleDefinitions.length-1;0<=g;g--)if(b.value=d._styleDefinitions[g].getStyle(a),void 0!==b.value)return b.priority.push(CanvasElement.EStylePriorities.INHERITED),b.priority.push(c),b.priority.push(CanvasElement.EStylePriorities.DEFINITION),b.priority.push(d._styleDefinitions.length-
1-g),b;f=d._styleProxy;for(g=0;null!=f;){e=f._proxyElement._getStyleType(a);if(e==StyleableBase.EStyleType.SUBSTYLE)break;if(null!=e&&0==a in f._proxyMap||null==e&&0=="_Arbitrary"in f._proxyMap)break;a in f._proxyElement._styleMap&&(b.value=f._proxyElement._styleMap[a]);if(void 0!==b.value)return b.priority.push(CanvasElement.EStylePriorities.INHERITED),b.priority.push(c),b.priority.push(CanvasElement.EStylePriorities.PROXY),b.priority.push(g),b.priority.push(CanvasElement.EStylePriorities.INSTANCE),
b;for(e=f._proxyElement._styleDefinitions.length-1;0<=e;e--)if(b.value=f._proxyElement._styleDefinitions[e].getStyle(a),void 0!==b.value)return b.priority.push(CanvasElement.EStylePriorities.INHERITED),b.priority.push(c),b.priority.push(CanvasElement.EStylePriorities.PROXY),b.priority.push(g),b.priority.push(CanvasElement.EStylePriorities.DEFINITION),b.priority.push(d._styleDefinitions.length-1-e),b;g++;f=f._proxyElement._styleProxy}c++;e=d._getStyleType(a)}}for(c=this._styleDefinitionDefaults.length-
1;0<=c;c--)if(b.value=this._styleDefinitionDefaults[c].getStyle(a),void 0!==b.value)return b.priority.push(CanvasElement.EStylePriorities.DEFAULT_DEFINITION),b.priority.push(this._styleDefinitionDefaults.length-1-c),b;b.value=this._getClassStyle(a);b.priority.push(CanvasElement.EStylePriorities.CLASS);return b};CanvasElement.prototype.setStyle=function(a,b){var c=void 0;a in this._styleMap&&(c=this._styleMap[a]);c!==b&&(void 0===b?delete this._styleMap[a]:this._styleMap[a]=b,this._onExternalStyleChanged(new StyleChangedEvent(a)))};
CanvasElement.prototype.getManager=function(){return this._manager};CanvasElement.prototype.setName=function(a){if(this._name==a)return!1;this._name=a;return!0};CanvasElement.prototype.getName=function(){return this._name};CanvasElement.prototype.getMouseIsDown=function(){return this._mouseIsDown};CanvasElement.prototype.getParent=function(){return this._parent};
CanvasElement.prototype.rotatePoint=function(a,b){if(0!=this._rotateDegrees){var c=Math.sqrt(Math.abs(a.x-this._rotateCenterX)*Math.abs(a.x-this._rotateCenterX)+Math.abs(a.y-this._rotateCenterY)*Math.abs(a.y-this._rotateCenterY)),d;d=0==b?360-this._rotateDegrees+CanvasElement.radiansToDegrees(Math.atan2(a.x-this._rotateCenterX,a.y-this._rotateCenterY)):360+this._rotateDegrees+CanvasElement.radiansToDegrees(Math.atan2(a.x-this._rotateCenterX,a.y-this._rotateCenterY));a.x=Math.sin(CanvasElement.degreesToRadians(d))*
c+this._rotateCenterX;a.y=Math.cos(CanvasElement.degreesToRadians(d))*c+this._rotateCenterY}};CanvasElement.prototype.translatePointFrom=function(a,b){return b.translatePointTo(a,this)};
CanvasElement.prototype.translatePointTo=function(a,b){if(null==b||b==this||null==this._manager||this._manager!=b._manager)return!1;var c=null,d=[];for(d.push(this);null==c&&null!=d[d.length-1]._parent;)d[d.length-1]._parent==b?c=b:d.push(d[d.length-1]._parent);var e=[];if(null==c)for(e.push(b);null==c&&null!=e[d.length-1]._parent;)e[e.length-1]._parent==this?c=this:e.push(e[e.length-1]._parent);if(null==c)for(;d[d.length-1]==e[e.length-1];)c=d[d.length-1],d.pop(),e.pop();for(d=this;null!=d&&d!=c;)a.x+=
d._x,a.y+=d._y,d.rotatePoint(a,!1),d=d._parent;for(c=e.length-1;0<=c;c--)e[c].rotatePoint(a,!0),a.x-=e[c]._x,a.y-=e[c]._y;return!0};CanvasElement.prototype.translateMetricsFrom=function(a,b){return b.translateMetricsTo(a,this)};
CanvasElement.prototype.translateMetricsTo=function(a,b){var c=new DrawMetrics;if(null==b||b==this)return c._x=a._x,c._y=a._y,c._width=a._width,c._height=a._height,c;if(null==this._manager||this._manager!=b._manager)return null;var d=null,e=[];for(e.push(this);null==d&&null!=e[e.length-1]._parent;)e[e.length-1]._parent==b?d=b:e.push(e[e.length-1]._parent);var f=[];if(null==d)for(f.push(b);null==d&&null!=f[e.length-1]._parent;)f[f.length-1]._parent==this?d=this:f.push(f[f.length-1]._parent);if(null==
d)for(;e[e.length-1]==f[f.length-1];)d=e[e.length-1],e.pop(),f.pop();for(var e={x:a._x,y:a._y},g={x:a._x+a._width,y:a._y},k={x:a._x+a._width,y:a._y+a._height},l={x:a._x,y:a._y+a._height},h=this;null!=h&&h!=d;)e.x+=h._x,e.y+=h._y,g.x+=h._x,g.y+=h._y,k.x+=h._x,k.y+=h._y,l.x+=h._x,l.y+=h._y,h.rotatePoint(e,!1),h.rotatePoint(g,!1),h.rotatePoint(l,!1),h.rotatePoint(k,!1),h=h._parent;for(d=f.length-1;0<=d;d--)f[d].rotatePoint(e,!0),f[d].rotatePoint(g,!0),f[d].rotatePoint(l,!0),f[d].rotatePoint(k,!0),e.x-=
f[d]._x,e.y-=f[d]._y,g.x-=f[d]._x,g.y-=f[d]._y,k.x-=f[d]._x,k.y-=f[d]._y,l.x-=f[d]._x,l.y-=f[d]._y;f=Math.min(e.x,g.x,k.x,l.x);d=Math.max(e.x,g.x,k.x,l.x);h=Math.min(e.y,g.y,k.y,l.y);e=Math.max(e.y,g.y,k.y,l.y);c._x=f;c._y=h;c._width=d-f;c._height=e-h;return c};
CanvasElement.prototype.getMetrics=function(a){null==a&&(a=this);if(null==this._manager||this._manager!=a._manager)return null;var b=new DrawMetrics;b._x=0;b._y=0;b._width=this._width;b._height=this._height;return a==this?b:this.translateMetricsTo(b,a)};
CanvasElement.prototype.addEventListener=function(a,b){CanvasElement.base.prototype.addEventListener.call(this,a,b);"enterframe"!=a&&"exitframe"!=a&&"localechanged"!=a&&"mousemoveex"!=a||null==this._manager||this._manager._broadcastDispatcher.addEventListener(a,b);return!0};
CanvasElement.prototype.removeEventListener=function(a,b){return 1==CanvasElement.base.prototype.removeEventListener.call(this,a,b)?("enterframe"!=a&&"exitframe"!=a&&"localechanged"!=a&&"mousemoveex"!=a||null==this._manager||this._manager._broadcastDispatcher.removeEventListener(a,b),!0):!1};CanvasElement.prototype.addCaptureListener=function(a,b){null==this._captureListeners[a]&&(this._captureListeners[a]=[]);this._captureListeners[a].push(b);return!0};
CanvasElement.prototype.removeCaptureListener=function(a,b){if(!(a in this._captureListeners))return!1;for(var c=0;c<this._captureListeners[a].length;c++)if(this._captureListeners[a][c]==b)return this._captureListeners[a].splice(c,1),!0;return!1};CanvasElement.prototype.hasCaptureListener=function(a,b){if(!(a in this._captureListeners))return!1;if(null==b&&0<this._captureListeners[a].length)return!0;for(var c=0;c<this._captureListeners[a].length;c++)if(this._captureListeners[a][c]==b)return!0;return!1};
CanvasElement.adjustColorLight=function(a,b){var c=parseInt(a.slice(1),16),d=0>b?0:255,e=0>b?-1*b:b,f=c>>16,g=c>>8&255,c=c&255;return"#"+(16777216+65536*(Math.round((d-f)*e)+f)+256*(Math.round((d-g)*e)+g)+(Math.round((d-c)*e)+c)).toString(16).slice(1)};CanvasElement.cot=function(a){return 1/Math.tan(a)};CanvasElement.radiansToDegrees=function(a){return 180/Math.PI*a};CanvasElement.degreesToRadians=function(a){return Math.PI/180*a};
CanvasElement.normalizeDegrees=function(a){for(;360<=a;)a-=360;for(;0>a;)a+=360;return a};CanvasElement.roundToPrecision=function(a,b){if(0==b)return Math.round(a);var c=Math.pow(10,b);a=Math.round(a*c);return a/c};CanvasElement._browserType="";CanvasElement._characterWidthMap=Object.create(null);CanvasElement._characterFillBitmapMap=Object.create(null);CanvasElement._characterStrokeBitmapMap=Object.create(null);CanvasElement._measureCharBitmap=null;CanvasElement._measureCharContext=null;
(function(){CanvasElement._measureCharBitmap=document.createElement("canvas");CanvasElement._measureCharBitmap.width=1;CanvasElement._measureCharBitmap.height=1;CanvasElement._measureCharContext=CanvasElement._measureCharBitmap.getContext("2d")})();
CanvasElement._measureText=function(a,b){var c=CanvasElement._characterWidthMap[b];null==c&&(c=Object.create(null),CanvasElement._characterWidthMap[b]=c);for(var d=0,e,f=!1,g=0;g<a.length;g++)e=c[a[g]],null==e&&(0==f&&(CanvasElement._measureCharContext.font=b,f=!0),e=Math.ceil(CanvasElement._measureCharContext.measureText(a[g]).width),c[a[g]]=e),d+=e;return d};
CanvasElement._fillText=function(a,b,c,d,e,f,g){"Firefox"==CanvasElement._browserType&&(d+=2);var k=CanvasElement._characterFillBitmapMap[e];null==k&&(k=Object.create(null),CanvasElement._characterFillBitmapMap[e]=k);for(var l=0;l<b.length;l++){var h=k[b[l]];if(null==h){h={canvas:null,context:null,fontSize:0};k[b[l]]=h;h.canvas=document.createElement("canvas");for(var n=e.split(" "),p=0,m=0;m<n.length;m++)if(3<=n[m].length&&"px"==n[m].substr(n[m].length-2,2)){p=Number(n[m].substr(0,n[m].length-2));
break}h.fontSize=p;h.canvas.height=p+4;h.canvas.width=CanvasElement._measureText(b[l],e);h.context=h.canvas.getContext("2d");h.context.font=e;h.context.textBaseline="middle";h.context.textAlign="left";h.context.strokeStyle="#000000";h.context.fillStyle="#000000";h.context.fillText(b[l],0,h.canvas.height/2);h.context.globalCompositeOperation="source-atop"}h.context.fillStyle!=f&&(h.context.fillStyle=f,h.context.beginPath(),h.context.moveTo(0,0),h.context.lineTo(h.canvas.width,0),h.context.lineTo(h.canvas.width,
h.canvas.height),h.context.lineTo(0,h.canvas.height),h.context.closePath(),h.context.fill());"top"==g?a.drawImage(h.canvas,c,Math.round(d-(h.canvas.height-h.fontSize)/2)):"bottom"==g?a.drawImage(h.canvas,c,Math.round(d-((h.canvas.height-h.fontSize)/2+h.fontSize))):a.drawImage(h.canvas,c,Math.round(d-h.canvas.height/2));if(1==b.length)break;c+=CanvasElement._measureText(b[l],e)}};
CanvasElement._strokeText=function(a,b,c,d,e,f,g){"Firefox"==CanvasElement._browserType&&(d+=2);var k=CanvasElement._characterStrokeBitmapMap[e];null==k&&(k=Object.create(null),CanvasElement._characterStrokeBitmapMap[e]=k);for(var l=0;l<b.length;l++){var h=k[b[l]];if(null==h){h={canvas:null,context:null};k[b[l]]=h;h.canvas=document.createElement("canvas");for(var n=e.split(" "),p=0,m=0;m<n.length;m++)if(3<=n[m].length&&"px"==n[m].substr(n[m].length-2,2)){p=Number(n[m].substr(0,n[m].length-2));break}h.fontSize=
p;h.canvas.height=p+4;h.canvas.width=CanvasElement._measureText(b[l],e);h.context=h.canvas.getContext("2d");h.context.font=e;h.context.textBaseline="middle";h.context.textAlign="left";h.context.strokeStyle="#000000";h.context.fillStyle="#000000";h.context.strokeText(b[l],0,h.canvas.height/2);h.context.globalCompositeOperation="source-atop"}h.context.fillStyle!=f&&(h.context.fillStyle=f,h.context.beginPath(),h.context.moveTo(0,0),h.context.lineTo(h.canvas.width,0),h.context.lineTo(h.canvas.width,h.canvas.height),
h.context.lineTo(0,h.canvas.height),h.context.closePath(),h.context.fill());"top"==g?a.drawImage(h.canvas,c,Math.round(d-(h.canvas.height-h.fontSize)/2)):"bottom"==g?a.drawImage(h.canvas,c,Math.round(d-((h.canvas.height-h.fontSize)/2+h.fontSize))):a.drawImage(h.canvas,c,Math.round(d-h.canvas.height/2));if(1==b.length)break;c+=CanvasElement._measureText(b[l],e)}};
CanvasElement._calculateMinMaxPercentSizes=function(a,b){if(0!=a.length){var c=a.slice(),d=b,e=0,f;for(f=0;f<c.length;f++)null==c[f].minSize&&(c[f].minSize=0),null==c[f].maxSize&&(c[f].maxSize=Number.MAX_VALUE),null==c[f].percentSize&&(c[f].percentSize=100),e+=c[f].percentSize;for(var g=!1;0==g;)for(g=!0,f=0;f<c.length;f++)if(b=c[f].percentSize/e*d,b>c[f].maxSize){c[f].actualSize=c[f].maxSize;e-=c[f].percentSize;d-=c[f].maxSize;c.splice(f,1);g=!1;break}else if(b<c[f].minSize){c[f].actualSize=c[f].minSize;
e-=c[f].percentSize;d-=c[f].minSize;c.splice(f,1);g=!1;break}else c[f].actualSize=Math.floor(b);for(f=0;f<c.length;f++)d-=c[f].actualSize;for(;1<=d&&0<c.length;)for(f=0;f<c.length;f++){for(;c[f].actualSize+1>c[f].maxSize&&(c.splice(f,1),f!=c.length););if(f==c.length)break;c[f].actualSize++;d--;if(0>=d)break}}};CanvasElement.prototype._onBackgroundShapeStyleChanged=function(a){this._invalidateRender()};CanvasElement.prototype._onBackgroundFillStyleChanged=function(a){this._invalidateRender()};
CanvasElement.prototype._addStyleDefinitionAt=function(a,b,c){if(!(a instanceof StyleDefinition))return null;c=1==c?this._styleDefinitionDefaults:this._styleDefinitions;if(0>b||b>c)return null;c.splice(b,0,a);if(null!=this._manager){a.addEventListener("stylechanged",this._onExternalStyleChangedInstance);for(var d=Object.create(null),e=null;0<=b;b--)for(e in c[b]._styleMap)d[e]=!0;for(e in d)this._onExternalStyleChanged(new StyleChangedEvent(e))}return a};
CanvasElement.prototype._removeStyleDefinitionAt=function(a,b){var c;c=1==b?this._styleDefinitionDefaults:this._styleDefinitions;if(0>a||a>c-1)return null;if(null!=this._manager){for(var d=Object.create(null),e=null,f=a;0<=f;f--)for(e in c._styleMap)d[e]=!0;c=c.splice(a,1)[0];c.removeEventListener("stylechanged",this._onExternalStyleChangedInstance);for(e in d)this._onExternalStyleChanged(new StyleChangedEvent(e))}else c=c.splice(a,1)[0];return c};
CanvasElement.prototype._setStyleDefinitions=function(a,b,c){null==a&&(a=[]);0==Array.isArray(a)&&(a=[a]);var d;for(d=a.length-1;0<=d;d--)null==a[d]&&a.splice(d,1);b=1==b?this._styleDefinitionDefaults:this._styleDefinitions;if(null!=this._manager){d=b.length-1;var e=a.length-1,f=null,g=!1,k=c;for(null==k&&(k=Object.create(null));0<=d||0<=e;){0==g&&(0>d||0>e||a[e]!=b[d])&&(g=!0);if(1==g){if(0<=d)for(f in b[d]._styleMap)k[f]=!0;if(0<=e)for(f in a[e]._styleMap)k[f]=!0}d--;e--}if(0!=g){for(;0<b.length;)b[b.length-
1].removeEventListener("stylechanged",this._onExternalStyleChangedInstance),b.splice(b.length-1,1);for(d=0;d<a.length;d++)a[d].addEventListener("stylechanged",this._onExternalStyleChangedInstance),b.push(a[d]);if(null==c)for(f in k)this._onExternalStyleChanged(new StyleChangedEvent(f))}}else for(b.splice(0,b.length),d=0;d<a.length;d++)b.push(a[d])};
CanvasElement.prototype._getStyleDefinitionAt=function(a,b){var c;c=1==b?this._styleDefinitionDefaults:this._styleDefinitions;return 0>a||a>=c.length?null:c[a]};
CanvasElement.prototype._onExternalStyleChanged=function(a){if(null!=this._manager){var b=!1,c=!1,d=a.getStyleName(),e=this._getStyleType(d);null!=this._styleProxy&&a.getTarget()==this._styleProxy._proxyElement&&(b=!0);null!=this._parent&&a.getTarget()==this._parent&&(c=!0);if(0!=(1==b||1==c?1==b&&e!=StyleableBase.EStyleType.SUBSTYLE&&(1==d in this._styleProxy._proxyMap||1=="_Arbitrary"in this._styleProxy._proxyMap&&null==this._styleProxy._proxyElement._getStyleType(d))||1==c&&e==StyleableBase.EStyleType.INHERITABLE?
!0:!1:!0)){c=this._stylesCache[d];null==c&&(c={styleData:new StyleData(d),cacheInvalid:!0},this._stylesCache[d]=c);if(e!=StyleableBase.EStyleType.SUBSTYLE){if(b=null,0==c.cacheInvalid&&(b=c.styleData.clone()),c.cacheInvalid=!0,c=this.getStyleData(d),null!=b&&1==b.equals(c))return}else c.cacheInvalid=!0,this.getStyleData(d);null!=e&&this._invalidateStyle(d);this._dispatchEvent(a)}}};
CanvasElement.prototype._getStyleList=function(a){var b=[],c;for(c=0;c<this._styleDefinitions.length;c++)if(styleValue=this._styleDefinitions[c].getStyle(a),void 0!==styleValue)if(1==Array.isArray(styleValue))for(c=0;c<styleValue.length;c++)b.push(styleValue[c]);else b.push(styleValue);if(a in this._styleMap&&null!=this._styleMap[a])if(styleValue=this._styleMap[a],1==Array.isArray(styleValue))for(c=0;c<styleValue.length;c++)b.push(styleValue[c]);else b.push(this._styleMap[a]);return b};
CanvasElement.prototype._getDefaultStyleList=function(a){var b,c,d=this._getClassStyleList(a);for(c=0;c<this._styleDefinitionDefaults.length;c++)if(b=this._styleDefinitionDefaults[c].getStyle(a),void 0!==b)if(1==Array.isArray(b))for(c=0;c<b.length;c++)d.push(b[c]);else d.push(b);return d};CanvasElement.prototype._applySubStylesToElement=function(a,b){var c=null,d=Object.create(null);b._setStyleDefinitions(this._getStyleList(a),!1,d);b._setStyleDefinitions(this._getDefaultStyleList(a),!0,d);for(c in d)b._onExternalStyleChanged(new StyleChangedEvent(c))};
CanvasElement.prototype._setStyleProxy=function(a){this._styleProxy=a};
CanvasElement.prototype._onCanvasElementAdded=function(a){var b;for(b=0;b<this._styleDefinitions.length;b++)0==this._styleDefinitions[b].hasEventListener("stylechanged",this._onExternalStyleChangedInstance)&&this._styleDefinitions[b].addEventListener("stylechanged",this._onExternalStyleChangedInstance);null!=this._styleProxy&&0==this._styleProxy._proxyElement.hasEventListener("stylechanged",this._onExternalStyleChangedInstance)&&this._styleProxy._proxyElement.addEventListener("stylechanged",this._onExternalStyleChangedInstance);
null!=this._backgroundShape&&0==this._backgroundShape.hasEventListener("stylechanged",this._onBackgroundShapeStyleChangedInstance)&&this._backgroundShape.addEventListener("stylechanged",this._onBackgroundShapeStyleChangedInstance);null!=this._backgroundFill&&0==this._backgroundFill.hasEventListener("stylechanged",this._onBackgroundFillStyleChangedInstance)&&this._backgroundFill.addEventListener("stylechanged",this._onBackgroundFillStyleChangedInstance);for(b=0;b<this._styleDefinitionDefaults.length;b++)0==
this._styleDefinitionDefaults[b].hasEventListener("stylechanged",this._onExternalStyleChangedInstance)&&this._styleDefinitionDefaults[b].addEventListener("stylechanged",this._onExternalStyleChangedInstance);if("enterframe"in this._eventListeners&&0<this._eventListeners.enterframe.length)for(b=0;b<this._eventListeners.enterframe.length;b++)a.getManager()._broadcastDispatcher.addEventListener("enterframe",this._eventListeners.enterframe[b]);if("exitframe"in this._eventListeners&&0<this._eventListeners.exitframe.length)for(b=
0;b<this._eventListeners.exitframe.length;b++)a.getManager()._broadcastDispatcher.addEventListener("exitframe",this._eventListeners.exitframe[b]);if("localechanged"in this._eventListeners&&0<this._eventListeners.localechanged.length)for(b=0;b<this._eventListeners.localechanged.length;b++)a.getManager()._broadcastDispatcher.addEventListener("localechanged",this._eventListeners.localechanged[b]);if("mousemoveex"in this._eventListeners&&0<this._eventListeners.mousemoveex.length)for(b=0;b<this._eventListeners.mousemoveex.length;b++)a.getManager()._broadcastDispatcher.addEventListener("mousemoveex",
this._eventListeners.mousemoveex[b]);this._invalidateRedrawRegion();this._invalidateCompositeRender();for(var c in this._stylesCache)this._stylesCache[c].cacheInvalid=!0;this._flattenStyleTypes();for(b=0;b<this.constructor.__StyleTypesFlatArray.length;b++)this._invalidateStyle(this.constructor.__StyleTypesFlatArray[b].styleName);1==this.hasEventListener("localechanged",null)&&this._dispatchEvent(new DispatcherEvent("localechanged"))};
CanvasElement.prototype._onCanvasElementRemoved=function(a){var b;for(b=0;b<this._styleDefinitions.length;b++)1==this._styleDefinitions[b].hasEventListener("stylechanged",this._onExternalStyleChangedInstance)&&this._styleDefinitions[b].removeEventListener("stylechanged",this._onExternalStyleChangedInstance);null!=this._styleProxy&&1==this._styleProxy._proxyElement.hasEventListener("stylechanged",this._onExternalStyleChangedInstance)&&this._styleProxy._proxyElement.removeEventListener("stylechanged",
this._onExternalStyleChangedInstance);null!=this._backgroundShape&&1==this._backgroundShape.hasEventListener("stylechanged",this._onBackgroundShapeStyleChangedInstance)&&this._backgroundShape.removeEventListener("stylechanged",this._onBackgroundShapeStyleChangedInstance);null!=this._backgroundFill&&1==this._backgroundFill.hasEventListener("stylechanged",this._onBackgroundFillStyleChangedInstance)&&this._backgroundFill.removeEventListener("stylechanged",this._onBackgroundFillStyleChangedInstance);
for(b=0;b<this._styleDefinitionDefaults.length;b++)1==this._styleDefinitionDefaults[b].hasEventListener("stylechanged",this._onExternalStyleChangedInstance)&&this._styleDefinitionDefaults[b].removeEventListener("stylechanged",this._onExternalStyleChangedInstance);null!=this._rollOverCursorInstance&&(a.getManager().removeCursor(this._rollOverCursorInstance),this._rollOverCursorInstance=null);for(b=0;b<this._compositeMetrics.length;b++)null!=this._compositeMetrics[b].element._manager&&this._compositeMetrics[b].element._updateRedrawRegion(this._compositeMetrics[b].drawableMetrics);
this._redrawRegionInvalid=this._renderInvalid=this._layoutInvalid=this._measureInvalid=this._stylesInvalid=!0;this._graphicsCtx=this._graphicsCanvas=null;this._graphicsClear=!0;this._compositeCanvasMetrics=this._compositeCanvas=this._compositeCtx=null;this._renderChanged=!0;this._renderVisible=!1;this._compositeEffectChanged=!0;this._compositeMetrics=[];this._transformDrawableMetrics=this._transformVisibleMetrics=this._redrawRegionMetrics=this._compositeVisibleMetrics=null;if("enterframe"in this._eventListeners&&
0<this._eventListeners.enterframe.length)for(b=0;b<this._eventListeners.enterframe.length;b++)a.getManager()._broadcastDispatcher.removeEventListener("enterframe",this._eventListeners.enterframe[b]);if("exitframe"in this._eventListeners&&0<this._eventListeners.exitframe.length)for(b=0;b<this._eventListeners.exitframe.length;b++)a.getManager()._broadcastDispatcher.removeEventListener("exitframe",this._eventListeners.exitframe[b]);if("localechanged"in this._eventListeners&&0<this._eventListeners.localechanged.length)for(b=
0;b<this._eventListeners.localechanged.length;b++)a.getManager()._broadcastDispatcher.removeEventListener("localechanged",this._eventListeners.localechanged[b]);if("mousemoveex"in this._eventListeners&&0<this._eventListeners.mousemoveex.length)for(b=0;b<this._eventListeners.mousemoveex.length;b++)a.getManager()._broadcastDispatcher.removeEventListener("mousemoveex",this._eventListeners.mousemoveex[b])};
CanvasElement.prototype._getFontString=function(){return this.getStyle("TextStyle")+" "+this.getStyle("TextSize")+"px "+this.getStyle("TextFont")};
CanvasElement.prototype._dispatchEvent=function(a){if(a instanceof ElementEvent){a._canceled=!1;a._defaultPrevented=!1;var b=a.clone();b._target=this;var c;if(1==b._bubbles){c=this;var d={x:0,y:0};b instanceof ElementMouseEvent&&(d.x=b._x,d.y=b._y);for(var e=[];null!=c;)e.push({element:c,x:d.x,y:d.y}),b instanceof ElementMouseEvent&&(d.x+=c._x,d.y+=c._y,c.rotatePoint(d,!1)),c=c._parent;b._phase="capture";for(d=e.length-1;0<=d;d--)if(c=e[d].element,b._type in c._captureListeners&&0<c._captureListeners[b._type].length){b._currentTarget=
c;b instanceof ElementMouseEvent&&(b._x=e[d].x,b._y=e[d].y);for(var f=c._captureListeners[b._type].slice(),g=0;g<f.length;g++)if(c=b.clone(),f[g](c),1==c._defaultPrevented&&(a._defaultPrevented=!0,b._defaultPrevented=!0),1==c._canceled){a._canceled=!0;return}}b._phase="bubble";for(d=0;d<e.length;d++)if(c=e[d].element,b._type in c._eventListeners&&0<c._eventListeners[b._type].length)for(b._currentTarget=c,b instanceof ElementMouseEvent&&(b._x=e[d].x,b._y=e[d].y),f=c._eventListeners[b._type].slice(),
g=0;g<f.length;g++)if(c=b.clone(),f[g](c),1==c._defaultPrevented&&(a._defaultPrevented=!0,b._defaultPrevented=!0),1==c._canceled){a._canceled=!0;return}}else{b._currentTarget=this;b._phase="capture";if(b._type in this._captureListeners&&0<this._captureListeners[b._type].length)for(f=this._captureListeners[b._type].slice(),g=0;g<f.length;g++)if(c=b.clone(),f[g](c),1==c._defaultPrevented&&(a._defaultPrevented=!0,b._defaultPrevented=!0),1==c._canceled){a._canceled=!0;return}b._phase="bubble";if(b._type in
this._eventListeners&&0<this._eventListeners[b._type].length)for(f=this._eventListeners[b._type].slice(),g=0;g<f.length;g++)if(c=b.clone(),f[g](c),1==c._defaultPrevented&&(a._defaultPrevented=!0,b._defaultPrevented=!0),1==c._canceled){a._canceled=!0;break}}}else CanvasElement.base.prototype._dispatchEvent.call(this,a)};CanvasElement.prototype._addChild=function(a){return this._addChildAt(a,this._children.length)};
CanvasElement.prototype._addChildAt=function(a,b){if(!(a instanceof CanvasElement)||0>b||b>this._children.length)return null;null!=a._parent&&a._parent._removeChild(a);a._parent=this;this._children.splice(b,0,a);this.addEventListener("stylechanged",a._onExternalStyleChangedInstance);a._propagateChildData();this._invalidateMeasure();this._invalidateLayout();null!=this._manager&&(this._manager._rollOverInvalid=!0,this._manager._processAddRemoveDisplayChainQueue());return a};
CanvasElement.prototype._removeChild=function(a){a=this._children.indexOf(a);return-1==a?null:this._removeChildAt(a)};
CanvasElement.prototype._removeChildAt=function(a){if(0>a||a>this._children.length-1)return null;a=this._children.splice(a,1)[0];1==a._mouseIsDown&&(a._manager._mouseDownElement=a._parent);1==a._mouseIsOver&&(a._manager._rollOverElement=a._parent);a._parent=null;this.removeEventListener("stylechanged",a._onExternalStyleChangedInstance);a._propagateChildData();this._invalidateMeasure();this._invalidateLayout();null!=this._manager&&(this._manager._rollOverInvalid=!0,this._manager._processAddRemoveDisplayChainQueue());
return a};CanvasElement.prototype._getChildAt=function(a){return 0>a||a>this._children.length-1?null:this._children[a]};CanvasElement.prototype._getChildIndex=function(a){return this._children.indexOf(a)};CanvasElement.prototype._setChildIndex=function(a,b){if(0>b||b>this._children.length-1)return!1;var c=this._getChildIndex(a);if(-1==c||c==b)return!1;this._children.splice(b,0,this._children.splice(c,1)[0]);this._invalidateMeasure();this._invalidateLayout();return!0};
CanvasElement.prototype._getNumChildren=function(){return this._children.length};
CanvasElement.prototype._propagateChildData=function(){var a=this instanceof CanvasManager;0==a&&(null==this._parent||0==this._parent._displayDepth)||1==a&&null!=this._manager?(null!=this._manager&&(1==this._stylesInvalid&&this._manager._updateStylesQueue.removeNode(this._stylesValidateNode,this._displayDepth),1==this._measureInvalid&&this._manager._updateMeasureQueue.removeNode(this._measureValidateNode,this._displayDepth),1==this._layoutInvalid&&this._manager._updateLayoutQueue.removeNode(this._layoutValidateNode,
this._displayDepth),1==this._renderInvalid&&this._manager._updateRenderQueue.removeNode(this._renderValidateNode,this._displayDepth),1==this._redrawRegionInvalid&&this._manager._updateRedrawRegionQueue.removeNode(this._redrawRegionValidateNode,this._displayDepth),1==this._compositeRenderInvalid&&this._manager._compositeRenderQueue.removeNode(this._compositeRenderValidateNode,this._displayDepth),this==this._manager._draggingElement&&this._manager._clearDraggingElement(),this==this._manager._focusElement&&
(this._manager._focusElement=null),this._manager._pushAddRemoveDisplayChainQueue(this,"removed")),this._mouseIsDown=this._mouseIsOver=this._isFocused=this._renderFocusRing=!1,this._displayDepth=0,this._manager=null):(1==a?(this._displayDepth=1,this._manager=this):(this._displayDepth=this._parent._displayDepth+1,this._manager=this._parent._manager),null!=this._manager&&(1==this._stylesInvalid&&this._manager._updateStylesQueue.addNode(this._stylesValidateNode,this._displayDepth),1==this._measureInvalid&&
this._manager._updateMeasureQueue.addNode(this._measureValidateNode,this._displayDepth),1==this._layoutInvalid&&this._manager._updateLayoutQueue.addNode(this._layoutValidateNode,this._displayDepth),1==this._renderInvalid&&this._manager._updateRenderQueue.addNode(this._renderValidateNode,this._displayDepth),1==this._redrawRegionInvalid&&this._manager._updateRedrawRegionQueue.addNode(this._redrawRegionValidateNode,this._displayDepth),1==this._compositeRenderInvalid&&this._manager._compositeRenderQueue.addNode(this._compositeRenderValidateNode,
this._displayDepth),this._manager._pushAddRemoveDisplayChainQueue(this,"added")));for(a=0;a<this._children.length;a++)this._children[a]._propagateChildData()};
CanvasElement.prototype._setRelativePosition=function(a,b,c){if(null==c||c==this){if(this._x==a&&this._y==b)return;this._x=a;this._y=b;null!=this._manager&&(this._manager._rollOverInvalid=!0);this._invalidateRedrawRegion()}if(null!=this._manager&&this._manager==c._manager){var d=this.getMetrics(this._parent);a={x:a,y:b};c.translatePointTo(a,this._parent);if(a.x!=d.getX()||a.y!=d.getY())c=a.x-d.getX(),d=a.y-d.getY(),this._x+=c,this._y+=d,0!=this._rotateDegrees&&(this._rotateCenterX+=c,this._rotateCenterY+=
d),null!=this._manager&&(this._manager._rollOverInvalid=!0),this._invalidateRedrawRegion()}};CanvasElement.prototype._setActualPosition=function(a,b){a=Math.round(a);b=Math.round(b);if(this._x!=a||this._y!=b)this._x=a,this._y=b,null!=this._manager&&(this._manager._rollOverInvalid=!0),this._invalidateRedrawRegion()};
CanvasElement.prototype._setActualSize=function(a,b){a=Math.round(a);b=Math.round(b);if(this._width==a&&this._height==b)return!1;this._width=a;this._height=b;this._invalidateLayout();this._invalidateRender();this._invalidateRedrawRegion();1==this.hasEventListener("resize",null)&&this._dispatchEvent(new DispatcherEvent("resize"),!1);null!=this._manager&&(this._manager._rollOverInvalid=!0);return!0};
CanvasElement.prototype._setActualRotation=function(a,b,c){if(null==b||null==c)c=b=0;if(this._rotateDegrees!=a||this._rotateCenterX!=b||this._rotateCenterY!=c)this._invalidateRedrawRegion(),this._rotateDegrees!=a&&(this._compositeEffectChanged=!0,this._invalidateCompositeRender());this._rotateDegrees=a;this._rotateCenterX=b;this._rotateCenterY=c};
CanvasElement.prototype._setMeasuredSize=function(a,b){if(this._measuredWidth!=a||this._measuredHeight!=b)this._measuredWidth=a,this._measuredHeight=b,null!=this._parent&&(this._parent._invalidateMeasure(),this._parent._invalidateLayout())};CanvasElement.prototype._setRenderFocusRing=function(a){this._renderFocusRing!=a&&(this._renderFocusRing=a,this._invalidateRender())};CanvasElement.prototype._createMetrics=function(){return new DrawMetrics};
CanvasElement.prototype._getGraphicsCtx=function(){null==this._graphicsCanvas&&(this._graphicsCanvas=document.createElement("canvas"),this._graphicsCtx=this._graphicsCanvas.getContext("2d"),this._graphicsCanvas.width=this._width,this._graphicsCanvas.height=this._height);this._renderChanged=!0;this._graphicsClear=!1;this._invalidateRedrawRegion();return this._graphicsCtx};
CanvasElement.prototype._getPaddingSize=function(){var a=this.getStyleData("Padding"),b=this.getStyleData("PaddingTop"),c=this.getStyleData("PaddingBottom"),d=this.getStyleData("PaddingLeft"),e=this.getStyleData("PaddingRight"),f=b.value;0<a.comparePriority(b)&&(f=a.value);b=c.value;0<a.comparePriority(c)&&(b=a.value);c=d.value;0<a.comparePriority(d)&&(c=a.value);d=e.value;0<a.comparePriority(e)&&(d=a.value);return{width:c+d,height:f+b,paddingBottom:b,paddingTop:f,paddingLeft:c,paddingRight:d}};
CanvasElement.prototype._getBorderThickness=function(){var a=0,b=this.getStyle("BorderType"),c=this.getStyle("BorderColor");"solid"!=b&&"inset"!=b&&"outset"!=b||null==c||(a=this.getStyle("BorderThickness"),0>a&&(a=0));return a};CanvasElement.prototype._getStyledOrMeasuredWidth=function(){var a=this.getStyle("Width");if(null==a){var b=this.getStyle("MaxWidth"),c=this.getStyle("MinWidth");null==c&&(c=0);null==b&&(b=Number.MAX_VALUE);a=this._measuredWidth;a=Math.min(a,b);a=Math.max(a,c)}return a};
CanvasElement.prototype._getStyledOrMeasuredHeight=function(){var a=this.getStyle("Height");if(null==a){var b=this.getStyle("MaxHeight"),c=this.getStyle("MinHeight");null==c&&(c=0);null==b&&(b=Number.MAX_VALUE);a=this._measuredHeight;a=Math.min(a,b);a=Math.max(a,c)}return a};CanvasElement.prototype._getBorderMetrics=function(){var a=this._createMetrics(),b=this._getBorderThickness();a._x=b/2;a._y=b/2;a._width=this._width-b;a._height=this._height-b;return a};
CanvasElement.prototype._getPaddingMetrics=function(){var a=this._createMetrics(),b=this._getPaddingSize();a._x=b.paddingLeft;a._y=b.paddingTop;a._width=this._width-b.paddingLeft-b.paddingRight;a._height=this._height-b.paddingTop-b.paddingBottom;return a};
CanvasElement.prototype._drawBackgroundShape=function(a,b){if(null==this._backgroundShape){var c=b.getX(),d=b.getY(),e=b.getWidth(),f=b.getHeight();a.moveTo(c,d);a.lineTo(c+e,d);a.lineTo(c+e,d+f);a.lineTo(c,d+f);a.closePath()}else this._backgroundShape.drawShape(a,b)};
CanvasElement.prototype._drawFocusRing=function(a,b){var c=this.getStyle("FocusThickness");if(!(0>=c)){var d=this.getStyle("FocusColor");if(null!=d){var e=this.getMetrics(this),f=e.getX()-c,g=e.getY()-c,k=e.getWidth()+2*c,e=e.getHeight()+2*c;a.beginPath();a.moveTo(f,g);a.lineTo(f,g+e);a.lineTo(f+k,g+e);a.lineTo(f+k,g);a.closePath();this._drawBackgroundShape(a,b);a.clip();a.beginPath();this._drawBackgroundShape(a,b);a.strokeStyle=d;a.lineWidth=this._getBorderThickness()+2*c;a.stroke()}}};
CanvasElement.prototype._fillBackground=function(a){if(null!=this._backgroundFill){var b=this._getGraphicsCtx();b.beginPath();this._drawBackgroundShape(b,a);this._backgroundFill.drawFill(b,a)}};CanvasElement.prototype._drawSolidBorder=function(a,b){var c=this.getStyle("BorderColor");if(null!=c){var d=this.getStyle("BorderThickness");0>d||(a.beginPath(),this._drawBackgroundShape(a,b),a.strokeStyle=c,a.lineWidth=d,a.stroke())}};
CanvasElement.prototype._drawBorder=function(a){var b=this.getStyle("BorderType");if("solid"==b||"inset"==b||"outset"==b){var c=this._getGraphicsCtx();if("solid"==b)this._drawSolidBorder(c,a);else{var d=this.getStyle("BorderColor");a=this.getStyle("BorderThickness");if(!(null==d||0>=a)){var e=this._width,f=this._height,g=CanvasElement.adjustColorLight(d,.3),k=CanvasElement.adjustColorLight(d,-.3),d="inset"==b?k:g,b="inset"==b?g:k;c.beginPath();c.moveTo(0,0+f);c.lineTo(0,0);c.lineTo(0+e,0);c.lineTo(0+
e-a,0+a);c.lineTo(0+a,0+a);c.lineTo(0+a,0+f-a);c.closePath();c.fillStyle=d;c.fill();c.beginPath();c.moveTo(0,0+f);c.lineTo(0+e,0+f);c.lineTo(0+e,0);c.lineTo(0+e-a,0+a);c.lineTo(0+e-a,0+f-a);c.lineTo(0+a,0+f-a);c.closePath();c.fillStyle=b;c.fill();c.lineWidth=1;c.globalAlpha=.15;c.strokeStyle="#000000";c.beginPath();c.moveTo(0,0);c.lineTo(0+a,0+a);c.stroke();c.beginPath();c.moveTo(0+e,0+f);c.lineTo(0+e-a,0+f-a);c.stroke()}}}};
CanvasElement.prototype._validateStyles=function(){this._stylesInvalid=!1;var a=Object.create(null),b;for(b in this._stylesInvalidMap)1==this._stylesInvalidMap[b]&&(a[b]=!0,this._stylesInvalidMap[b]=!1);this._doStylesUpdated(a)};CanvasElement.prototype._validateMeasure=function(){this._measureInvalid=!1;var a=this._getPaddingSize(),a=this._doMeasure(a.width,a.height);this._setMeasuredSize(a.width,a.height);1==this.hasEventListener("measurecomplete",null)&&this._dispatchEvent(new DispatcherEvent("measurecomplete"))};
CanvasElement.prototype._validateLayout=function(){this._layoutInvalid=!1;this._doLayout(this._getPaddingMetrics());0==this._layoutInvalid&&1==this.hasEventListener("layoutcomplete",null)&&this._dispatchEvent(new DispatcherEvent("layoutcomplete"))};
CanvasElement.prototype._validateRender=function(){this._renderInvalid=!1;null!=this._graphicsCanvas&&(this._graphicsCanvas.width=this._width,this._graphicsCanvas.height=this._height,this._graphicsCtx.clearRect(0,0,this._graphicsCanvas.width,this._graphicsCanvas.height));0==this._graphicsClear&&(this._graphicsClear=this._renderChanged=!0,this._invalidateRedrawRegion());this._doRender()};
CanvasElement.prototype._getCompositeMetrics=function(a){for(var b=0;b<this._compositeMetrics.length;b++)if(this._compositeMetrics[b].element==a)return this._compositeMetrics[b];return null};
CanvasElement.prototype._validateCompositeRender=function(){1==this._isCompositeElement()?(this._updateCompositeCanvas(),null!=this._redrawRegionMetrics&&null!=this._compositeCanvasMetrics&&(--this._redrawRegionMetrics._x,--this._redrawRegionMetrics._y,this._redrawRegionMetrics._width+=2,this._redrawRegionMetrics._height+=2,this._redrawRegionMetrics.roundUp(),this._redrawRegionMetrics.mergeReduce(this._compositeCanvasMetrics),0<this._redrawRegionMetrics._width&&0<this._redrawRegionMetrics._height&&
(this._compositeCtx.clearRect(this._redrawRegionMetrics._x,this._redrawRegionMetrics._y,this._redrawRegionMetrics._width,this._redrawRegionMetrics._height),this._renderRedrawRegion(this)))):this._compositeCanvasMetrics=this._compositeCtx=this._compositeCanvas=null;this._compositeEffectChanged=this._compositeRenderInvalid=!1;this._redrawRegionMetrics=null};
CanvasElement.prototype._updateCompositeCanvas=function(){if(null==this._compositeVisibleMetrics)this._compositeCanvasMetrics=this._compositeCtx=this._compositeCanvas=null;else{var a=this._compositeVisibleMetrics.clone();a.roundUp();if(null==this._compositeCanvas||0==this._compositeCanvasMetrics.equals(a))null==this._compositeCanvas&&(this._compositeCanvas=document.createElement("canvas"),this._compositeCtx=this._compositeCanvas.getContext("2d")),null==this._compositeCanvasMetrics?this._compositeCanvasMetrics=
a:this._compositeCanvasMetrics.copyFrom(a),this._compositeCanvas.width=this._compositeCanvasMetrics._width,this._compositeCanvas.height=this._compositeCanvasMetrics._height,this._compositeCtx.setTransform(1,0,0,1,-1*this._compositeCanvasMetrics._x,-1*this._compositeCanvasMetrics._y),null==this._redrawRegionMetrics?this._redrawRegionMetrics=this._compositeCanvasMetrics.clone():this._redrawRegionMetrics.mergeExpand(this._compositeCanvasMetrics)}};
CanvasElement.prototype._isCompositeElement=function(){if(this==this._manager)return!0;var a=this.getStyle("Alpha");return 0<a&&1>a||0!=CanvasElement.normalizeDegrees(this._rotateDegrees)||0<this.getStyle("ShadowSize")&&null!=this.getStyle("ShadowColor")||1==this.getStyle("CompositeLayer")?!0:!1};CanvasElement.prototype._updateRedrawRegion=function(a){null==a||0>=a._width||0>=a._height||(null==this._redrawRegionMetrics?this._redrawRegionMetrics=a.clone():this._redrawRegionMetrics.mergeExpand(a),this._invalidateCompositeRender())};
CanvasElement.prototype._primeShadow=function(){this._compositeCtx.beginPath();this._compositeCtx.moveTo(this._compositeCanvasMetrics._x-1,this._compositeCanvasMetrics._y-1);this._compositeCtx.moveTo(this._compositeCanvasMetrics._x,this._compositeCanvasMetrics._y-1);this._compositeCtx.moveTo(this._compositeCanvasMetrics._x,this._compositeCanvasMetrics._y);this._compositeCtx.moveTo(this._compositeCanvasMetrics._x-1,this._compositeCanvasMetrics._y);this._compositeCtx.closePath();this._compositeCtx.fillStyle=
"#000000";this._compositeCtx.fill()};
CanvasElement.prototype._renderRedrawRegion=function(a){if(0!=a._renderVisible){var b=!1;this!=a&&1==a._isCompositeElement()&&(b=!0);var c=null,d=null,e=null;1==b&&null!=a._transformDrawableMetrics?(e=a._transformVisibleMetrics,d=a._transformDrawableMetrics,c=a._compositeCanvas,this._compositeCtx.globalAlpha=a.getStyle("Alpha")):0==b&&0<a._compositeMetrics.length&&0==a._graphicsClear&&(e=a._compositeMetrics[0].metrics,d=a._compositeMetrics[0].drawableMetrics,c=a._graphicsCanvas,this._compositeCtx.globalAlpha=
1);if(null!=c&&0<d._width&&0<d._height&&d._x<this._redrawRegionMetrics._x+this._redrawRegionMetrics._width&&d._x+d._width>this._redrawRegionMetrics._x&&d._y<this._redrawRegionMetrics._y+this._redrawRegionMetrics._height&&d._y+d._height>this._redrawRegionMetrics._y)if(1==b&&0!=CanvasElement.normalizeDegrees(a._rotateDegrees)){var f=d.clone();f.mergeReduce(this._redrawRegionMetrics);this._compositeCtx.save();this._compositeCtx.beginPath();this._compositeCtx.moveTo(f._x,f._y);this._compositeCtx.lineTo(f._x+
f._width,f._y);this._compositeCtx.lineTo(f._x+f._width,f._y+f._height);this._compositeCtx.lineTo(f._x,f._y+f._height);this._compositeCtx.closePath();this._compositeCtx.clip();for(f=a._parent;0==f._isCompositeElement();)this._compositeCtx.translate(f._x,f._y),f=f._parent;this._compositeCtx.translate(a._rotateCenterX,a._rotateCenterY);this._compositeCtx.rotate(CanvasElement.degreesToRadians(a._rotateDegrees));this._compositeCtx.translate(-a._rotateCenterX,-a._rotateCenterY);this._compositeCtx.translate(a._compositeCanvasMetrics._x,
a._compositeCanvasMetrics._y);if(0<a.getStyle("ShadowSize")&&null!=a.getStyle("ShadowColor")){this._primeShadow();this._compositeCtx.shadowBlur=a.getStyle("ShadowSize");this._compositeCtx.shadowColor=a.getStyle("ShadowColor");var g=a.getStyle("ShadowOffsetX"),k=a.getStyle("ShadowOffsetY"),f=Math.sqrt(g*g+k*k),g=360-a._rotateDegrees+CanvasElement.radiansToDegrees(Math.atan2(g,k));this._compositeCtx.shadowOffsetX=Math.sin(CanvasElement.degreesToRadians(g))*f;this._compositeCtx.shadowOffsetY=Math.cos(CanvasElement.degreesToRadians(g))*
f}this._compositeCtx.drawImage(c,0,0,a._compositeCanvasMetrics._width,a._compositeCanvasMetrics._height,a._x,a._y,a._compositeCanvasMetrics._width,a._compositeCanvasMetrics._height);this._compositeCtx.restore()}else if(1==b&&0<a.getStyle("ShadowSize")&&null!=a.getStyle("ShadowColor"))this._compositeCtx.save(),f=d.clone(),f.mergeReduce(this._redrawRegionMetrics),this._compositeCtx.beginPath(),this._compositeCtx.moveTo(f._x,f._y),this._compositeCtx.lineTo(f._x+f._width,f._y),this._compositeCtx.lineTo(f._x+
f._width,f._y+f._height),this._compositeCtx.lineTo(f._x,f._y+f._height),this._compositeCtx.closePath(),this._compositeCtx.clip(),this._primeShadow(),this._compositeCtx.shadowBlur=a.getStyle("ShadowSize"),this._compositeCtx.shadowColor=a.getStyle("ShadowColor"),this._compositeCtx.shadowOffsetX=a.getStyle("ShadowOffsetX"),this._compositeCtx.shadowOffsetY=a.getStyle("ShadowOffsetY"),f=e._x-(a._compositeVisibleMetrics._x-a._compositeCanvasMetrics._x),e=e._y-(a._compositeVisibleMetrics._y-a._compositeCanvasMetrics._y),
this._compositeCtx.drawImage(c,0,0,a._compositeCanvasMetrics._width,a._compositeCanvasMetrics._height,f,e,a._compositeCanvasMetrics._width,a._compositeCanvasMetrics._height),this._compositeCtx.restore();else{var l;d._x>=this._redrawRegionMetrics._x?(g=d._x-e._x,f=d._x,k=Math.min(d._width,this._redrawRegionMetrics._width-(d._x-this._redrawRegionMetrics._x))):(g=this._redrawRegionMetrics._x-e._x,f=this._redrawRegionMetrics._x,k=Math.min(this._redrawRegionMetrics._width,d._width-(this._redrawRegionMetrics._x-
d._x)));d._y>=this._redrawRegionMetrics._y?(l=d._y-e._y,e=d._y,d=Math.min(d._height,this._redrawRegionMetrics._height-(d._y-this._redrawRegionMetrics._y))):(l=this._redrawRegionMetrics._y-e._y,e=this._redrawRegionMetrics._y,d=Math.min(this._redrawRegionMetrics._height,d._height-(this._redrawRegionMetrics._y-d._y)));this._compositeCtx.drawImage(c,g,l,k,d,f,e,k,d)}if(0==b)for(b=0;b<a._children.length;b++)this._renderRedrawRegion(a._children[b])}};
CanvasElement.prototype._invalidateStyle=function(a){0==this._stylesInvalid&&(this._stylesInvalid=!0,null!=this._manager&&this._manager._updateStylesQueue.addNode(this._stylesValidateNode,this._displayDepth));this._stylesInvalidMap[a]=!0};CanvasElement.prototype._invalidateMeasure=function(){0==this._measureInvalid&&(this._measureInvalid=!0,null!=this._manager&&this._manager._updateMeasureQueue.addNode(this._measureValidateNode,this._displayDepth))};
CanvasElement.prototype._invalidateLayout=function(){0==this._layoutInvalid&&(this._layoutInvalid=!0,null!=this._manager&&this._manager._updateLayoutQueue.addNode(this._layoutValidateNode,this._displayDepth))};CanvasElement.prototype._invalidateRender=function(){0==this._renderInvalid&&(this._renderInvalid=!0,null!=this._manager&&this._manager._updateRenderQueue.addNode(this._renderValidateNode,this._displayDepth))};
CanvasElement.prototype._invalidateRedrawRegion=function(){0==this._redrawRegionInvalid&&(this._redrawRegionInvalid=!0,null!=this._manager&&this._manager._updateRedrawRegionQueue.addNode(this._redrawRegionValidateNode,this._displayDepth))};CanvasElement.prototype._invalidateCompositeRender=function(){0==this._compositeRenderInvalid&&(this._compositeRenderInvalid=!0,null!=this._manager&&this._manager._compositeRenderQueue.addNode(this._compositeRenderValidateNode,this._displayDepth))};
CanvasElement.prototype._doStylesUpdated=function(a){null==this._parent||0!=this._parent._measureInvalid&&0!=this._parent._layoutInvalid||!("X"in a||"Y"in a||"Width"in a||"Height"in a||"PercentWidth"in a||"PercentHeight"in a||"MinWidth"in a||"MinHeight"in a||"MaxWidth"in a||"MaxHeight"in a||"Top"in a||"Left"in a||"Bottom"in a||"Right"in a||"HorizontalCenter"in a||"VerticalCenter"in a||"IncludeInLayout"in a||"RotateDegrees"in a||"RotateCenterX"in a||"RotateCenterY"in a)||(this._parent._invalidateMeasure(),
this._parent._invalidateLayout());if(0==this._measureInvalid||0==this._layoutInvalid)if("Padding"in a||"PaddingTop"in a||"PaddingBottom"in a||"PaddingLeft"in a||"PaddingRight"in a)this._invalidateMeasure(),this._invalidateLayout();("BorderThickness"in a||"BorderType"in a||"BorderColor"in a||1==this._renderFocusRing&&("FocusColor"in a||"FocusThickness"in a))&&this._invalidateRender();("Visible"in a||"ClipContent"in a)&&this._invalidateRedrawRegion();if("Alpha"in a||"ShadowSize"in a)this._compositeEffectChanged=
!0,this._invalidateRedrawRegion(),this._invalidateCompositeRender();if("BackgroundShape"in a){var b=this.getStyle("BackgroundShape");b!=this._backgroundShape&&(null!=this._backgroundShape&&this._backgroundShape.removeEventListener("stylechanged",this._onBackgroundShapeStyleChangedInstance),this._backgroundShape=b,null!=this._backgroundShape&&this._backgroundShape.addEventListener("stylechanged",this._onBackgroundShapeStyleChangedInstance),this._invalidateRender())}if("BackgroundFill"in a&&(b=this.getStyle("BackgroundFill"),
b!=this._backgroundFill)){var c=!1;if(null!=b&&0==b instanceof FillBase||b instanceof SolidFill)c=!0;1==this._backgroundFill instanceof SolidFill&&1==c?1==b instanceof SolidFill?(this._backgroundFill.removeEventListener("stylechanged",this._onBackgroundFillStyleChangedInstance),this._backgroundFill=b,this._backgroundFill.addEventListener("stylechanged",this._onBackgroundFillStyleChangedInstance),this._invalidateRender()):this._backgroundFill.setStyle("FillColor",b):(null!=this._backgroundFill&&this._backgroundFill.removeEventListener("stylechanged",
this._onBackgroundFillStyleChangedInstance),this._backgroundFill=null,null!=b&&(0==b instanceof FillBase?(this._backgroundFill=new SolidFill,this._backgroundFill.setStyle("FillColor",b)):this._backgroundFill=b,this._backgroundFill.addEventListener("stylechanged",this._onBackgroundFillStyleChangedInstance)),this._invalidateRender())}"Cursor"in a&&(b=this.getStyle("Cursor"),null==b&&1==this.hasEventListener("rollover",this._onCanvasElementCursorOverOutInstance)?(this.removeEventListener("rollover",
this._onCanvasElementCursorOverOutInstance),this.removeEventListener("rollout",this._onCanvasElementCursorOverOutInstance)):null!=b&&0==this.hasEventListener("rollover",this._onCanvasElementCursorOverOutInstance)&&(this.addEventListener("rollover",this._onCanvasElementCursorOverOutInstance),this.addEventListener("rollout",this._onCanvasElementCursorOverOutInstance)),this._updateRolloverCursorDefinition());"Enabled"in a&&0==this.getStyle("Enabled")&&this._setRenderFocusRing(!1);if("Visible"in a||"MouseEnabled"in
a)this._manager._rollOverInvalid=!0};
CanvasElement.prototype._updateRolloverCursorDefinition=function(){var a=this.getStyle("Cursor");null==this._rollOverCursorInstance||null!=a&&0!=this._mouseIsOver?1==this._mouseIsOver&&null!=a&&(null==this._rollOverCursorInstance?this._rollOverCursorInstance=this._manager.addCursor(a,0):this._rollOverCursorInstance.data!=a&&(this._manager.removeCursor(this._rollOverCursorInstance),this._rollOverCursorInstance=this._manager.addCursor(a,0))):(this._manager.removeCursor(this._rollOverCursorInstance),this._rollOverCursorInstance=
null)};CanvasElement.prototype._doMeasure=function(a,b){return{width:a,height:b}};CanvasElement.prototype._doLayout=function(a){};CanvasElement.prototype._doRender=function(){var a=this._getBorderMetrics();this._fillBackground(a);this._drawBorder(a)};CanvasElement.prototype._setListData=function(a,b){this._listData=a;this._itemData=b};CanvasElement.prototype._setListSelected=function(a){this._listSelected=a};
function ViewportElement(){ViewportElement.base.prototype.constructor.call(this);this._verticalScrollBar=this._horizontalScrollBar=this._viewElement=null;this._viewPortContainer=new CanvasElement;this._viewPortContainer.setStyle("ClipContent",!0);this._addChild(this._viewPortContainer);var a=this;this._onViewportScrollBarChangeInstance=function(b){a._onViewportScrollBarChange(b)};this._onViewportMouseWheelEventInstance=function(b){a._onViewportMouseWheelEvent(b)};this._onViewElementMeasureCompleteInstance=
function(b){a._onViewElementMeasureComplete(b)};this.addEventListener("wheel",this._onViewportMouseWheelEventInstance)}ViewportElement.prototype=Object.create(CanvasElement.prototype);ViewportElement.prototype.constructor=ViewportElement;ViewportElement.base=CanvasElement;ViewportElement._StyleTypes=Object.create(null);ViewportElement._StyleTypes.MeasureContentWidth=StyleableBase.EStyleType.NORMAL;ViewportElement._StyleTypes.MeasureContentHeight=StyleableBase.EStyleType.NORMAL;
ViewportElement._StyleTypes.HorizontalScrollBarDisplay=StyleableBase.EStyleType.NORMAL;ViewportElement._StyleTypes.HorizontalScrollBarPlacement=StyleableBase.EStyleType.NORMAL;ViewportElement._StyleTypes.VerticalScrollBarDisplay=StyleableBase.EStyleType.NORMAL;ViewportElement._StyleTypes.VerticalScrollBarPlacement=StyleableBase.EStyleType.NORMAL;ViewportElement._StyleTypes.HorizontalScrollBarStyle=StyleableBase.EStyleType.SUBSTYLE;ViewportElement._StyleTypes.VerticalScrollBarStyle=StyleableBase.EStyleType.SUBSTYLE;
ViewportElement.StyleDefault=new StyleDefinition;ViewportElement.StyleDefault.setStyle("HorizontalScrollBarDisplay","auto");ViewportElement.StyleDefault.setStyle("HorizontalScrollBarPlacement","bottom");ViewportElement.StyleDefault.setStyle("VerticalScrollBarDisplay","auto");ViewportElement.StyleDefault.setStyle("VerticalScrollBarPlacement","right");ViewportElement.StyleDefault.setStyle("HorizontalScrollBarStyle",null);ViewportElement.StyleDefault.setStyle("VerticalScrollBarStyle",null);
ViewportElement.StyleDefault.setStyle("MeasureContentWidth",!1);ViewportElement.StyleDefault.setStyle("MeasureContentHeight",!1);
ViewportElement.prototype.setElement=function(a){null!=this._viewElement&&(this._viewElement.removeEventListener("measurecomplete",this._onViewElementMeasureCompleteInstance),this._viewPortContainer._removeChild(this._viewElement));this._viewElement=a;null!=this._viewElement&&(this._viewElement.addEventListener("measurecomplete",this._onViewElementMeasureCompleteInstance),this._viewPortContainer._addChild(this._viewElement));this._invalidateMeasure();this._invalidateLayout()};
ViewportElement.prototype._onViewportScrollBarChange=function(a){this._invalidateLayout()};ViewportElement.prototype._onViewElementMeasureComplete=function(a){this._invalidateLayout()};
ViewportElement.prototype._onViewportMouseWheelEvent=function(a){if(1!=a.getDefaultPrevented()){var b=!1,c,d,e,f=a.getDeltaX(),g=a.getDeltaY();0!=f&&null!=this._horizontalScrollBar&&(c=this._horizontalScrollBar.getScrollPageSize(),d=this._horizontalScrollBar.getScrollViewSize(),e=this._horizontalScrollBar.getScrollLineSize(),d=c-d,0<d&&(c=this._horizontalScrollBar.getTweenToValue(),null==c&&(c=this._horizontalScrollBar.getScrollValue()),0>f&&0<c?(this._horizontalScrollBar.startScrollTween(Math.max(c+
3*f*e,0)),b=!0):0<f&&c<d&&(this._horizontalScrollBar.startScrollTween(Math.min(c+3*f*e,d)),b=!0)));0!=g&&null!=this._verticalScrollBar&&(c=this._verticalScrollBar.getScrollPageSize(),d=this._verticalScrollBar.getScrollViewSize(),e=this._verticalScrollBar.getScrollLineSize(),d=c-d,0<d&&(c=this._verticalScrollBar.getTweenToValue(),null==c&&(c=this._verticalScrollBar.getScrollValue()),0>g&&0<c?(this._verticalScrollBar.startScrollTween(Math.max(c+3*g*e,0)),b=!0):0<g&&c<d&&(this._verticalScrollBar.startScrollTween(Math.min(c+
3*g*e,d)),b=!0)));1==b&&(a.preventDefault(),this._invalidateLayout())}};
ViewportElement.prototype._doStylesUpdated=function(a){ViewportElement.base.prototype._doStylesUpdated.call(this,a);"HorizontalScrollBarDisplay"in a||"VerticalScrollBarDisplay"in a?(this._invalidateLayout(),this._invalidateMeasure()):(("HorizontalScrollBarPlacement"in a||"VerticalScrollBarPlacement"in a)&&this._invalidateLayout(),("MeasureContentWidth"in a||"MeasureContentHeight"in a)&&this._invalidateMeasure());"HorizontalScrollBarStyle"in a&&null!=this._horizontalScrollBar&&this._applySubStylesToElement("HorizontalScrollBarStyle",
this._horizontalScrollBar);"VerticalScrollBarStyle"in a&&null!=this._verticalScrollBar&&this._applySubStylesToElement("VerticalScrollBarStyle",this._verticalScrollBar)};
ViewportElement.prototype._doMeasure=function(a,b){var c=0,d=0,e=0,f=0,g=0,k=0;null!=this._viewElement&&(1==this.getStyle("MeasureContentWidth")&&(g=this._viewElement._getStyledOrMeasuredWidth()),1==this.getStyle("MeasureContentHeight")&&(k=this._viewElement._getStyledOrMeasuredHeight()));null!=this._verticalScrollBar&&(c=this._verticalScrollBar._getStyledOrMeasuredWidth(),d=this._verticalScrollBar._getStyledOrMeasuredHeight());null!=this._horizontalScrollBar&&(e=this._horizontalScrollBar._getStyledOrMeasuredWidth(),
f=this._horizontalScrollBar._getStyledOrMeasuredHeight());0==g&&(g=e);0==k&&(k=d);return{width:g+c+a,height:k+f+b}};
ViewportElement.prototype._doLayout=function(a){var b=this.getStyle("HorizontalScrollBarDisplay"),c=this.getStyle("VerticalScrollBarDisplay"),d=a.getWidth(),e=a.getHeight(),f=0,g=0;null!=this._viewElement&&(f=this._viewElement._getStyledOrMeasuredWidth(),g=this._viewElement._getStyledOrMeasuredHeight());var k=!1,l=!1,h=!1;if("on"==b||"auto"==b&&f>d)l=!0;if("on"==c||"auto"==c&&g>e)h=!0;1==l&&0==h&&"auto"==c&&null!=this._horizontalScrollBar&&g>e-this._horizontalScrollBar._getStyledOrMeasuredHeight()&&
(h=!0);1==h&&0==l&&"auto"==b&&null!=this._verticalScrollBar&&f>d-this._verticalScrollBar._getStyledOrMeasuredWidth()&&(l=!0);0==l?null!=this._horizontalScrollBar&&(this._removeChild(this._horizontalScrollBar),this._horizontalScrollBar=null,k=!0):null==this._horizontalScrollBar&&(this._horizontalScrollBar=new ScrollBarElement,this._applySubStylesToElement("HorizontalScrollBarStyle",this._horizontalScrollBar),this._horizontalScrollBar.setStyle("LayoutDirection","horizontal"),this._horizontalScrollBar.setScrollLineSize(25),
this._horizontalScrollBar.addEventListener("changed",this._onViewportScrollBarChangeInstance),this._addChild(this._horizontalScrollBar),k=!0);0==h?null!=this._verticalScrollBar&&(this._removeChild(this._verticalScrollBar),this._verticalScrollBar=null,k=!0):null==this._verticalScrollBar&&(this._verticalScrollBar=new ScrollBarElement,this._applySubStylesToElement("VerticalScrollBarStyle",this._verticalScrollBar),this._verticalScrollBar.setStyle("LayoutDirection","vertical"),this._verticalScrollBar.setScrollLineSize(25),
this._verticalScrollBar.addEventListener("changed",this._onViewportScrollBarChangeInstance),this._addChild(this._verticalScrollBar),k=!0);if(1!=k){l=k=c=b=0;null!=this._horizontalScrollBar&&(k=this._horizontalScrollBar.getScrollValue(),b=this._horizontalScrollBar._getStyledOrMeasuredHeight(),e-=b);null!=this._verticalScrollBar&&(l=this._verticalScrollBar.getScrollValue(),c=this._verticalScrollBar._getStyledOrMeasuredWidth(),d-=c);var k=Math.min(k,f-d),k=Math.max(k,0),l=Math.min(l,g-e),l=Math.max(l,
0),h=this.getStyle("HorizontalScrollBarPlacement"),n=this.getStyle("VerticalScrollBarPlacement"),p=a.getX();a=a.getY();null!=this._horizontalScrollBar&&(this._horizontalScrollBar.setScrollPageSize(f),this._horizontalScrollBar.setScrollViewSize(d),this._horizontalScrollBar.setScrollValue(k),this._horizontalScrollBar._setActualSize(d,b),"top"==h?"left"==n?this._horizontalScrollBar._setActualPosition(p+c,a):this._horizontalScrollBar._setActualPosition(p,a):"left"==n?this._horizontalScrollBar._setActualPosition(p+
c,a+e):this._horizontalScrollBar._setActualPosition(p,a+e));null!=this._verticalScrollBar&&(this._verticalScrollBar.setScrollPageSize(g),this._verticalScrollBar.setScrollViewSize(e),this._verticalScrollBar.setScrollValue(l),this._verticalScrollBar._setActualSize(c,e),"left"==n?"top"==h?this._verticalScrollBar._setActualPosition(p,a+b):this._verticalScrollBar._setActualPosition(p,a):"top"==h?this._verticalScrollBar._setActualPosition(p+d,a+b):this._verticalScrollBar._setActualPosition(p+d,a));"top"==
h&&(a+=b);"left"==n&&(p+=c);this._viewPortContainer._setActualSize(d,e);this._viewPortContainer._setActualPosition(p,a);null!=this._viewElement&&(this._viewElement._setActualSize(Math.max(d,f),Math.max(e,g)),this._viewElement._setActualPosition(-1*k,-1*l))}};function TextFieldLineElement(){TextFieldLineElement.base.prototype.constructor.call(this);this._text="";this._highlightMaxIndex=this._highlightMinIndex=0;this._parentTextField=null;this._charMetricsEndIndex=this._charMetricsStartIndex=-1}
TextFieldLineElement.prototype=Object.create(CanvasElement.prototype);TextFieldLineElement.prototype.constructor=TextFieldLineElement;TextFieldLineElement.base=CanvasElement;TextFieldLineElement._StyleTypes=Object.create(null);TextFieldLineElement._StyleTypes.TextStyle=StyleableBase.EStyleType.NORMAL;TextFieldLineElement._StyleTypes.TextFont=StyleableBase.EStyleType.NORMAL;TextFieldLineElement._StyleTypes.TextSize=StyleableBase.EStyleType.NORMAL;TextFieldLineElement._StyleTypes.TextColor=StyleableBase.EStyleType.NORMAL;
TextFieldLineElement._StyleTypes.TextFillType=StyleableBase.EStyleType.NORMAL;TextFieldLineElement._StyleTypes.TextHighlightedColor=StyleableBase.EStyleType.NORMAL;TextFieldLineElement._StyleTypes.TextHighlightedBackgroundColor=StyleableBase.EStyleType.NORMAL;TextFieldLineElement._StyleTypes.TextDecoration=StyleableBase.EStyleType.NORMAL;
TextFieldLineElement.prototype.setParentLineMetrics=function(a,b,c){this._parentTextField=a;this._charMetricsStartIndex=b;this._charMetricsEndIndex=c;a=a._text.substring(b,c);a!=this._text&&(this._text=a,this._invalidateRender())};
TextFieldLineElement.prototype.setParentSelection=function(a,b){var c=Math.min(a,b),d=Math.max(a,b);c<this._charMetricsStartIndex&&(c=this._charMetricsStartIndex);d>this._charMetricsEndIndex&&(d=this._charMetricsEndIndex);if(c>d||c==d)d=c=0;if(this._highlightMinIndex!=c||this._highlightMaxIndex!=d)this._highlightMinIndex=c,this._highlightMaxIndex=d,this._invalidateRender()};
TextFieldLineElement.prototype.getLineWidth=function(){return-1<this._charMetricsStartIndex&&-1<this._charMetricsEndIndex?this._parentTextField._charMetrics[this._charMetricsEndIndex].x-this._parentTextField._charMetrics[this._charMetricsStartIndex].x:0};
TextFieldLineElement.prototype._doRender=function(){TextFieldLineElement.base.prototype._doRender.call(this);if(0!=this._text.length){for(var a=this._getPaddingMetrics(),b=this._getGraphicsCtx(),c=this._parentTextField.getStyle("TextFillType"),d=this._parentTextField.getStyle("TextColor"),e=this._parentTextField.getStyle("TextHighlightedColor"),f=this._parentTextField.getStyle("TextHighlightedBackgroundColor"),g=this._parentTextField._getFontString(),k=this._parentTextField.getStyle("TextDecoration"),
l=this._parentTextField.getStyle("MaskCharacter"),h=a.getX(),n=a.getY()+a.getHeight()/2,a=a.getWidth(),p=0;p<this._text.length;p++){var m=this._parentTextField._charMetrics[p+this._charMetricsStartIndex].width,q=this._text[p];null!=l&&(q=l);this._highlightMinIndex<=p&&this._highlightMaxIndex>p?(b.fillStyle=f,b.beginPath(),b.moveTo(h,0),b.lineTo(h+m,0),b.lineTo(h+m,this._height),b.lineTo(h,this._height),b.closePath(),b.fill(),"stroke"==c?CanvasElement._strokeText(b,q,h,n,g,e,"middle"):CanvasElement._fillText(b,
q,h,n,g,e,"middle")):"stroke"==c?CanvasElement._strokeText(b,q,h,n,g,d,"middle"):CanvasElement._fillText(b,q,h,n,g,d,"middle");h+=m}"underline"==k&&(n=this._height-.5,b.beginPath(),b.moveTo(h,n),b.lineTo(h+a,n),b.lineWidth=1,b.strokeStyle=this._highlightMinIndex==this._highlightMaxIndex?d:e,b.stroke())}};
function TextFieldElement(){TextFieldElement.base.prototype.constructor.call(this);this._textCaret=null;this._caretIndex=this._textHighlightStartIndex=0;this._caretEnabled=!1;this._caretBlinkTime=0;this._caretBlinkVisible=!1;this._text="";this._spaceSpans=this._charMetrics=null;this._dragHighlightScrollCharacterDirection=this._dragHighlightScrollCharacterDuration=this._dragHighlightScrollCharacterTime=0;this._textLinesContainer=new CanvasElement;this._textLinesContainer.setStyle("ClipContent",!0);
this._addChild(this._textLinesContainer);var a=this;this._onTextFieldFocusEventInstance=function(b){"focusin"==b.getType()?a._onTextFieldFocusIn(b):a._onTextFieldFocusOut(b)};this._onTextFieldKeyDownInstance=function(b){a._onTextFieldKeyDown(b)};this._onTextFieldMouseEventInstance=function(b){"mousedown"==b.getType()?a._onTextFieldMouseDown(b):"mouseup"==b.getType()?a._onTextFieldMouseUp(b):"mousemoveex"==b.getType()&&a._onTextFieldCanvasMouseMoveEx(b)};this._onTextFieldEnterFrameInstance=function(b){a._onTextFieldEnterFrame(b)};
this._onTextFieldCopyPasteInstance=function(b){window.removeEventListener(b.type,a._onTextFieldCopyPasteInstance);try{return b.clipboardData&&("copy"==b.type?a._onTextFieldCopy(b.clipboardData):"paste"==b.type?a._onTextFieldPaste(b.clipboardData):a._onTextFieldCut(b.clipboardData)),b.preventDefault&&b.preventDefault(),!1}catch(c){}}}TextFieldElement.prototype=Object.create(CanvasElement.prototype);TextFieldElement.prototype.constructor=TextFieldElement;TextFieldElement.base=CanvasElement;
TextFieldElement._StyleTypes=Object.create(null);TextFieldElement._StyleTypes.Selectable=StyleableBase.EStyleType.NORMAL;TextFieldElement._StyleTypes.MaxChars=StyleableBase.EStyleType.NORMAL;TextFieldElement._StyleTypes.Multiline=StyleableBase.EStyleType.NORMAL;TextFieldElement._StyleTypes.WordWrap=StyleableBase.EStyleType.NORMAL;TextFieldElement._StyleTypes.MaskCharacter=StyleableBase.EStyleType.NORMAL;TextFieldElement.StyleDefault=new StyleDefinition;
TextFieldElement.StyleDefault.setStyle("Selectable",!1);TextFieldElement.StyleDefault.setStyle("MaxChars",0);TextFieldElement.StyleDefault.setStyle("Multiline",!1);TextFieldElement.StyleDefault.setStyle("WordWrap",!1);TextFieldElement.StyleDefault.setStyle("MaskCharacter",null);TextFieldElement.StyleDefault.setStyle("Enabled",!1);TextFieldElement.StyleDefault.setStyle("TabStop",0);TextFieldElement.StyleDefault.setStyle("Cursor","text");TextFieldElement.StyleDefault.setStyle("BorderType","none");
TextFieldElement.StyleDefault.setStyle("PaddingTop",0);TextFieldElement.StyleDefault.setStyle("PaddingBottom",0);TextFieldElement.StyleDefault.setStyle("PaddingLeft",3);TextFieldElement.StyleDefault.setStyle("PaddingRight",2);TextFieldElement.StyleDefault.setStyle("BackgroundFill",null);
TextFieldElement.prototype.setText=function(a){null==a&&(a="");if("string"!==typeof a)try{a=a.toString()}catch(c){a=""}var b=this.getStyle("MaxChars");0<b&&a.length>b&&(a=a.substring(0,b));a!=this._text&&(this._text=a,this._charMetrics=null,this.setSelection(0,0),0<this._textLinesContainer._getNumChildren()&&0==this.getStyle("Multiline")&&0==this.getStyle("WordWrap")&&this._textLinesContainer._getChildAt(0)._setActualPosition(0,0),this._invalidateMeasure(),this._invalidateLayout())};
TextFieldElement.prototype.getText=function(){return this._text};TextFieldElement.prototype.setSelection=function(a,b){0>a&&(a=0);a>this._text.length&&(a=this._text.length);0>b&&(b=0);b>this._text.length&&(b=this._text.length);if(a!=this._textHighlightStartIndex||b!=this._caretIndex)this._textHighlightStartIndex=a,this._caretIndex=b,1==this._caretEnabled&&a==b&&(this._caretBlinkVisible=!0,this._caretBlinkTime=Date.now()+800),this._updateEnterFrameListener(),this._updateCaretVisibility(),this._invalidateLayout()};
TextFieldElement.prototype.getSelection=function(){return{startIndex:this._textHighlightStartIndex,endIndex:this._caretIndex}};TextFieldElement.prototype._createTextCaret=function(){var a=new CanvasElement;a.setStyle("MouseEnabled",!1);a.setStyle("BackgroundFill",this.getStyle("TextCaretColor"));return a};
TextFieldElement.prototype._updateCaretVisibility=function(){1==this._caretEnabled&&1==this._caretBlinkVisible&&-1<this._caretIndex&&this._caretIndex<=this._text.length&&this._caretIndex==this._textHighlightStartIndex?(null==this._textCaret&&(this._textCaret=this._createTextCaret(),this._addChild(this._textCaret)),this._textCaret.setStyle("Visible",!0)):null!=this._textCaret&&this._textCaret.setStyle("Visible",!1)};
TextFieldElement.prototype._onTextFieldEnterFrame=function(a){a=Date.now();a>this._caretBlinkTime&&1==this._caretEnabled&&-1<this._caretIndex&&this._caretIndex<=this._text.length&&this._caretIndex==this._textHighlightStartIndex&&(this._caretBlinkTime=1==this._caretBlinkVisible?this._caretBlinkTime+400<a?a+400:this._caretBlinkTime+400:this._caretBlinkTime+800<a?a+800:this._caretBlinkTime+800,this._caretBlinkVisible=!this._caretBlinkVisible,this._updateCaretVisibility());if(a>this._dragHighlightScrollCharacterTime&&
0<this._dragHighlightScrollCharacterDuration&&(this._dragHighlightScrollCharacterTime+=this._dragHighlightScrollCharacterDuration,a=!1,"left"==this._dragHighlightScrollCharacterDirection&&0<this._caretIndex?(this.setSelection(this._textHighlightStartIndex,this._caretIndex-1),a=!0):"right"==this._dragHighlightScrollCharacterDirection&&this._caretIndex<this._text.length&&(this.setSelection(this._textHighlightStartIndex,this._caretIndex+1),a=!0),1==a)){a=this._textLinesContainer._width;var b=this._textLinesContainer._getChildAt(0),
c=this._charMetrics[this._caretIndex].x+b._x;1>c?b._setActualPosition(Math.min(0,-1*this._charMetrics[this._caretIndex].x+3),b._y):c>a-1&&b._setActualPosition(Math.max(a-b._width,-1*this._charMetrics[this._caretIndex].x+a-3),b._y)}};TextFieldElement.prototype._enableCaret=function(){1!=this._caretEnabled&&(this._caretEnabled=!0,this._updateEnterFrameListener(),this._updateCaretVisibility())};
TextFieldElement.prototype._disableCaret=function(){0!=this._caretEnabled&&(this._caretEnabled=!1,this._updateEnterFrameListener(),this._updateCaretVisibility())};TextFieldElement.prototype._onTextFieldFocusIn=function(a){1!=this._caretEnabled&&0!=this.getStyle("Enabled")&&(this._enableCaret(),this.setSelection(0,this._text.length))};TextFieldElement.prototype._onTextFieldFocusOut=function(a){this._disableCaret();this.setSelection(0,0)};
TextFieldElement.prototype._getCaretIndexFromMouse=function(a,b){if(null==this._charMetrics||0==this._charMetrics.length)return 0;var c=this._textLinesContainer._x,d=this._textLinesContainer._width;a+=2;for(var e=this._textLinesContainer._getChildAt(0),f,g,k=0,l=0;l<=this._text.length;l++)if(f=this._charMetrics[l].x+c+e._x,g=this._charMetrics[l].width,!(f<c)){if(f>c+d)break;k=l;if(a<=f+g/2)break}return k};
TextFieldElement.prototype._onTextFieldMouseDown=function(a){0==this.hasEventListener("mousemoveex",this._onTextFieldMouseEventInstance)&&this.addEventListener("mousemoveex",this._onTextFieldMouseEventInstance);a=this._getCaretIndexFromMouse(a.getX(),a.getY());1==this.getStyle("Enabled")&&this._enableCaret();this.setSelection(a,a)};
TextFieldElement.prototype._onTextFieldMouseUp=function(a){1==this.hasEventListener("mousemoveex",this._onTextFieldMouseEventInstance)&&this.removeEventListener("mousemoveex",this._onTextFieldMouseEventInstance);this._dragHighlightScrollCharacterDuration=0;this._updateEnterFrameListener()};
TextFieldElement.prototype._onTextFieldCanvasMouseMoveEx=function(a){a={x:a.getX(),y:a.getY()};this.translatePointFrom(a,this._manager);var b=this._textLinesContainer._x,c=this._textLinesContainer._width,d=0,e=this._getCaretIndexFromMouse(a.x,a.y);e==this._caretIndex?a.x<=b+2&&0<this._caretIndex?(a=3*Math.abs(b+2-a.x),d=Math.max(20,120-a),0==this._dragHighlightScrollCharacterDuration&&(this._dragHighlightScrollCharacterTime=Date.now()+d),this._dragHighlightScrollCharacterDirection="left"):a.x>=b+
c-2&&this._caretIndex<this._text.length&&(a=3*Math.abs(b+c-2-a.x),d=Math.max(20,120-a),0==this._dragHighlightScrollCharacterDuration&&(this._dragHighlightScrollCharacterTime=Date.now()+d),this._dragHighlightScrollCharacterDirection="right"):this.setSelection(this._textHighlightStartIndex,e);this._dragHighlightScrollCharacterDuration=d;this._updateEnterFrameListener()};
TextFieldElement.prototype._updateCharXPositions=function(a){if(null!=this._charMetrics&&0!=this._charMetrics.length&&!(a>this._charMetrics.length-2)){0>a&&(a=0,this._charMetrics[0].x=0);var b=this._charMetrics[a].x+this._charMetrics[a].width;for(a+=1;a<this._charMetrics.length;a++)this._charMetrics[a].x=b,b+=this._charMetrics[a].width}};
TextFieldElement.prototype._deleteHighlightChars=function(){if(this._textHighlightStartIndex!=this._caretIndex){var a=Math.min(this._caretIndex,this._textHighlightStartIndex),b=Math.max(this._caretIndex,this._textHighlightStartIndex);this._charMetrics.splice(a,b-a);this._updateCharXPositions(a-1);var c=this._text.substring(0,a),b=this._text.substring(b);this._text=c+b;this.setSelection(a,a)}};
TextFieldElement.prototype._onTextFieldKeyDown=function(a){if(1!=a.getDefaultPrevented()){var b=this.getStyle("Enabled"),c=a.getKey(),d=!1;if("c"==c&&1==a.getCtrl())this._textHighlightStartIndex==this._caretIndex?a.preventDefault():window.clipboardData?(this._onTextFieldCopy(window.clipboardData),a.preventDefault()):(window.addEventListener("copy",this._onTextFieldCopyPasteInstance),this._invalidateLayout());else{if("ArrowLeft"==c)1!=a.getShift()||this._textHighlightStartIndex==this._caretIndex&&
1!=b?1==b&&(this._textHighlightStartIndex!=this._caretIndex?this.setSelection(Math.min(this._caretIndex,this._textHighlightStartIndex),Math.min(this._caretIndex,this._textHighlightStartIndex)):this.setSelection(this._caretIndex-1,this._caretIndex-1)):this.setSelection(this._textHighlightStartIndex,this._caretIndex-1);else if("ArrowRight"==c)1!=a.getShift()||this._textHighlightStartIndex==this._caretIndex&&1!=b?1==b&&(this._textHighlightStartIndex!=this._caretIndex?this.setSelection(Math.max(this._caretIndex,
this._textHighlightStartIndex),Math.max(this._caretIndex,this._textHighlightStartIndex)):this.setSelection(this._caretIndex+1,this._caretIndex+1)):this.setSelection(this._textHighlightStartIndex,this._caretIndex+1);else if("End"==c)1!=a.getShift()||this._textHighlightStartIndex==this._caretIndex&&1!=b?1==b&&this.setSelection(this._text.length,this._text.length):this.setSelection(this._textHighlightStartIndex,this._text.length);else if("Home"==c)1!=a.getShift()||this._textHighlightStartIndex==this._caretIndex&&
1!=b?1==b&&this.setSelection(0,0):this.setSelection(this._textHighlightStartIndex,0);else{if(0==b)return;if("Backspace"==c){if(this._textHighlightStartIndex!=this._caretIndex)this._deleteHighlightChars();else{if(0==this._text.length||0==this._caretIndex){a.preventDefault();return}this._charMetrics.splice(this._caretIndex-1,1);this._updateCharXPositions(this._caretIndex-2);b=this._text.substring(0,this._caretIndex-1);d=this._text.substring(this._caretIndex);this._text=b+d;this.setSelection(this._caretIndex-
1,this._caretIndex-1)}d=!0}else if("Delete"==c){if(this._textHighlightStartIndex!=this._caretIndex)this._deleteHighlightChars();else{if(0==this._text.length||this._caretIndex==this._text.length){a.preventDefault();return}this._charMetrics.splice(this._caretIndex,1);this._updateCharXPositions(this._caretIndex-1);b=this._text.substring(0,this._caretIndex);d=this._text.substring(this._caretIndex+1);this._text=b+d}d=!0}else{if("v"==c&&1==a.getCtrl()){window.clipboardData?(this._onTextFieldPaste(window.clipboardData),
a.preventDefault()):(window.addEventListener("paste",this._onTextFieldCopyPasteInstance),this._invalidateLayout());return}if("x"==c&&1==a.getCtrl()){if(this._textHighlightStartIndex==this._caretIndex){a.preventDefault();return}window.clipboardData?(this._onTextFieldCut(window.clipboardData),a.preventDefault()):(window.addEventListener("cut",this._onTextFieldCopyPasteInstance),this._invalidateLayout());return}if(1==c.length){this._deleteHighlightChars();b=this.getStyle("MaxChars");if(0<b&&b<=this._text.length){a.preventDefault();
return}b=this.getStyle("MaskCharacter");d=c;null!=b&&(d=b);b={x:0,width:CanvasElement._measureText(d,this._getFontString())};this._charMetrics.splice(this._caretIndex,0,b);this._updateCharXPositions(this._caretIndex-1);b=this._text.substring(0,this._caretIndex);d=this._text.substring(this._caretIndex);this._text=b+c+d;this.setSelection(this._caretIndex+1,this._caretIndex+1);d=!0}else return}}this._scrollIfCaretOutOfBounds();this._invalidateLayout();1==d&&this._dispatchEvent(new ElementEvent("changed",
!1));a.preventDefault()}}};TextFieldElement.prototype._scrollIfCaretOutOfBounds=function(){var a=this._textLinesContainer._getChildAt(0),b=this._textLinesContainer._width,c=Math.min(Math.floor(.3*b),35),d=this._charMetrics[this._caretIndex].x+a._x;2>d?a._setActualPosition(-1*this._charMetrics[this._caretIndex].x+c,a._y):d>b-2&&a._setActualPosition(-1*this._charMetrics[this._caretIndex].x+b-c,a._y)};
TextFieldElement.prototype._onTextFieldCopy=function(a){var b=this._text.substring(Math.min(this._caretIndex,this._textHighlightStartIndex),Math.max(this._caretIndex,this._textHighlightStartIndex));a.setData("Text",b)};
TextFieldElement.prototype._onTextFieldPaste=function(a){a=a.getData("Text");if(null!=a&&0!=a.length){var b=this.getStyle("MaxChars");if(!(0<b&&this._text.length>=b&&this._caretIndex>=b)){this._deleteHighlightChars();for(var c=this.getStyle("MaskCharacter"),d=this._getFontString(),e=0;e<a.length;e++){var f=a[e];null!=c&&(f=c);this._charMetrics.splice(this._caretIndex+e,0,{x:0,width:CanvasElement._measureText(f,d)})}this._updateCharXPositions(this._caretIndex-1);c=this._text.substring(0,this._caretIndex);
d=this._text.substring(this._caretIndex);this._text=c+a+d;this.setSelection(this._caretIndex+a.length,this._caretIndex+a.length);0<b&&this._text.length>b&&(this._text=this._text.subString(0,b),this._charMetrics.splice(0,this._text.length-b),this.setSelection(this._text.length,this._text.length));this._scrollIfCaretOutOfBounds();this._invalidateLayout();this._dispatchEvent(new ElementEvent("changed",!1))}}};
TextFieldElement.prototype._onTextFieldCut=function(a){var b=this._text.substring(Math.min(this._caretIndex,this._textHighlightStartIndex),Math.max(this._caretIndex,this._textHighlightStartIndex));a.setData("Text",b);this._deleteHighlightChars();this._scrollIfCaretOutOfBounds();this._invalidateLayout();this._dispatchEvent(new ElementEvent("changed",!1))};
TextFieldElement.prototype._onCanvasElementRemoved=function(a){TextFieldElement.base.prototype._onCanvasElementRemoved.call(this,a);this._disableCaret();1==this.hasEventListener("mousemoveex",this._onTextFieldMouseEventInstance)&&this.removeEventListener("mousemoveex",this._onTextFieldMouseEventInstance);1==this.hasEventListener("enterframe",this._onTextFieldEnterFrameInstance)&&this.removeEventListener("enterframe",this._onTextFieldEnterFrameInstance)};
TextFieldElement.prototype._updateEnterFrameListener=function(){0<this._dragHighlightScrollCharacterDuration||1==this._caretEnabled&&this._textHighlightStartIndex==this._caretIndex?0==this.hasEventListener("enterframe",this._onTextFieldEnterFrameInstance)&&this.addEventListener("enterframe",this._onTextFieldEnterFrameInstance):1==this.hasEventListener("enterframe",this._onTextFieldEnterFrameInstance)&&this.removeEventListener("enterframe",this._onTextFieldEnterFrameInstance)};
TextFieldElement.prototype._updateEventListeners=function(){var a=this.getStyle("Enabled");1==this.getStyle("Selectable")||1==a?(0==this.hasEventListener("keydown",this._onTextFieldKeyDownInstance)&&this.addEventListener("keydown",this._onTextFieldKeyDownInstance),0==this.hasEventListener("mousedown",this._onTextFieldMouseEventInstance)&&this.addEventListener("mousedown",this._onTextFieldMouseEventInstance),0==this.hasEventListener("mouseup",this._onTextFieldMouseEventInstance)&&this.addEventListener("mouseup",
this._onTextFieldMouseEventInstance),0==this.hasEventListener("focusin",this._onTextFieldFocusEventInstance)&&this.addEventListener("focusin",this._onTextFieldFocusEventInstance),0==this.hasEventListener("focusout",this._onTextFieldFocusEventInstance)&&this.addEventListener("focusout",this._onTextFieldFocusEventInstance)):(1==this.hasEventListener("keydown",this._onTextFieldKeyDownInstance)&&this.removeEventListener("keydown",this._onTextFieldKeyDownInstance),1==this.hasEventListener("mousedown",
this._onTextFieldMouseEventInstance)&&this.removeEventListener("mousedown",this._onTextFieldMouseEventInstance),1==this.hasEventListener("mouseup",this._onTextFieldMouseEventInstance)&&this.removeEventListener("mouseup",this._onTextFieldMouseEventInstance),1==this.hasEventListener("focusin",this._onTextFieldFocusEventInstance)&&this.removeEventListener("focusin",this._onTextFieldFocusEventInstance),1==this.hasEventListener("focusout",this._onTextFieldFocusEventInstance)&&this.removeEventListener("focusout",
this._onTextFieldFocusEventInstance));0==a&&this._disableCaret()};
TextFieldElement.prototype._doStylesUpdated=function(a){TextFieldElement.base.prototype._doStylesUpdated.call(this,a);if("TextStyle"in a||"TextFont"in a||"TextSize"in a||"TextColor"in a||"TextFillType"in a||"TextDecoration"in a||"MaskCharacter"in a)for(var b=0;b<this._textLinesContainer._getNumChildren();b++)this._textLinesContainer._getChildAt(b)._invalidateRender();else if("TextHighlightedColor"in a||"TextHighlightedBackgroundColor"in a)for(b=0;b<this._textLinesContainer._getNumChildren();b++)this._textLinesContainer._getChildAt(b)._highlightMinIndex!=
this._textLinesContainer._getChildAt(b)._highlightMaxIndex&&this._textLinesContainer._getChildAt(b)._invalidateRender();"TextStyle"in a||"TextFont"in a||"TextSize"in a||"MaskCharacter"in a?(this._charMetrics=null,this._invalidateMeasure(),this._invalidateLayout()):"Multiline"in a||"WordWrap"in a||"TextLinePaddingTop"in a||"TextLinePaddingBottom"in a?(this._invalidateMeasure(),this._invalidateLayout()):("TextHorizontalAlign"in a||"TextVerticalAlign"in a||"TextLineSpacing"in a)&&this._invalidateLayout();
"MaxChars"in a&&this.setText(this._text);"TextCaretColor"in a&&null!=this._textCaret&&this._textCaret.setStyle("BackgroundFill",this.getStyle("TextCaretColor"));("Enabled"in a||"Selectable"in a)&&this._updateEventListeners();this._updateEnterFrameListener();this._updateCaretVisibility()};
TextFieldElement.prototype._createCharMetrics=function(){if(null==this._charMetrics){var a=0,b;this._charMetrics=[];this._spaceSpans=[];var c=null,d=this.getStyle("MaskCharacter");if(0<this._text.length)for(var e=this._getFontString(),f=0;f<this._text.length;f++)b=this._text[f],null!=d&&(b=d),b=CanvasElement._measureText(b,e),this._charMetrics.push({x:a,width:b})," "==this._text[f]?null==c?c={start:f,end:f,type:"space"}:c.end=f:null!=c&&(this._spaceSpans.push(c),c=null),"\n"==this._text[f]&&this._spaceSpans.push({start:f,
end:f,type:"nline"}),a+=b;null!=c&&this._spaceSpans.push(c);this._charMetrics.push({x:a,width:0});this._invalidateLayout()}};
TextFieldElement.prototype._doMeasure=function(a,b){this._createCharMetrics();var c=this.getStyle("TextLinePaddingTop"),d=this.getStyle("TextLinePaddingBottom"),e=this.getStyle("TextSize"),f=this._charMetrics[this._text.length].x,c=e+c+d;if(1==this.getStyle("WordWrap"))f=this.getStyle("MinWidth")-a,this._invalidateLayout();else if(1==this.getStyle("Multiline")){for(var d=-1,e=0,g=1,k=0;k<this._spaceSpans.length;k++)"nline"==this._spaceSpans[k].type&&(this._charMetrics[this._spaceSpans[k].start].x-
this._charMetrics[e].x>d&&(d=this._charMetrics[this._spaceSpans[k].start].x-this._charMetrics[e].x),e=this._spaceSpans[k].start+1,g++);1<g&&(e<this._charMetrics.length-1&&this._charMetrics[this._charMetrics.length-1].x-this._charMetrics[e].x>d&&(d=this._charMetrics[this._charMetrics.length-1].x-this._charMetrics[e].x),f=d,c=c*g+this.getStyle("TextLineSpacing")*(g-1))}d={width:0,height:0};d.width=1+f+a;d.height=c+b;return d};
TextFieldElement.prototype._doLayout=function(a){TextFieldElement.base.prototype._doLayout.call(this,a);var b=a.getX(),c=a.getY(),d=a.getWidth(),e=a.getHeight();a=d-1;this._textLinesContainer._setActualPosition(b,c);this._textLinesContainer._setActualSize(a,e);for(var f=this.getStyle("Multiline"),g=this.getStyle("WordWrap"),k=this.getStyle("TextHorizontalAlign"),l=this.getStyle("TextVerticalAlign"),h=this.getStyle("TextSize"),n=this.getStyle("TextLineSpacing"),p=this.getStyle("TextLinePaddingTop"),
m=this.getStyle("TextLinePaddingBottom"),h=h+p+m,q=0,t=0,u,r,w=[],x=0,z;t<this._charMetrics.length;){r={charMetricsStartIndex:-1,charMetricsEndIndex:-1};if(0==f&&0==g)r.charMetricsStartIndex=0,r.charMetricsEndIndex=this._charMetrics.length-1,x=0,t=this._charMetrics.length;else{r.charMetricsStartIndex=t;z=!1;for(var v=q;v<this._spaceSpans.length;v++)if("space"==this._spaceSpans[v].type&&0==g)q++;else if(u="left"==k?this._spaceSpans[v].end:this._spaceSpans[v].start,this._charMetrics[u].x-this._charMetrics[r.charMetricsStartIndex].x<=
a||-1==r.charMetricsEndIndex){if(r.charMetricsEndIndex=u,q++,t=u+1,"nline"==this._spaceSpans[v].type&&1==f){z=!0;break}}else break;if(-1==r.charMetricsEndIndex||this._charMetrics[this._charMetrics.length-1].x-this._charMetrics[r.charMetricsStartIndex].x<=a&&0==z)r.charMetricsEndIndex=this._charMetrics.length-1,t=this._charMetrics.length}w.push(r)}v=w.length*h+(w.length-1)*n;1==g&&this._setMeasuredSize(this._measuredWidth,v+this._getPaddingSize().height);for(g="top"==l?0:"bottom"==l?e-v:Math.round(e/
2-v/2);this._textLinesContainer._getNumChildren()>w.length;)this._textLinesContainer._removeChildAt(this._textLinesContainer._getNumChildren()-1);for(v=0;v<w.length;v++)v<this._textLinesContainer._getNumChildren()?e=this._textLinesContainer._getChildAt(v):(e=new TextFieldLineElement,this._textLinesContainer._addChild(e)),e.setParentLineMetrics(this,w[v].charMetricsStartIndex,w[v].charMetricsEndIndex),e.setParentSelection(this._textHighlightStartIndex,this._caretIndex),e.setStyle("PaddingTop",p),e.setStyle("PaddingBottom",
m),l=e.getLineWidth(),e._setActualSize(l,h),l=l<a||1==f?"right"==k?a-l:"center"==k?Math.round(a/2-l/2):0:0<e._x?0:e._x+l<a?a-l:e._x,e._setActualPosition(l,g),g+=h+n;null!=this._textCaret&&(0>this._caretIndex||this._caretIndex>this._text.length?this._textCaret._setActualSize(0,h):(e=this._textLinesContainer._getChildAt(x),a=this._charMetrics[this._caretIndex].x+e._x+b,a>=b&&a<=b+d-1?(this._textCaret._setActualPosition(a,e._y+c),this._textCaret._setActualSize(1,h)):this._textCaret._setActualSize(0,
h)));window.removeEventListener("copy",this._onTextFieldCopyPasteInstance);window.removeEventListener("paste",this._onTextFieldCopyPasteInstance);window.removeEventListener("cut",this._onTextFieldCopyPasteInstance)};function TextElement(){TextElement.base.prototype.constructor.call(this);this._textField=new TextFieldElement;this._textField.setStyle("Cursor",null);this._textField.setStyle("TabStop",-1);this._addChild(this._textField)}TextElement.prototype=Object.create(CanvasElement.prototype);
TextElement.prototype.constructor=TextElement;TextElement.base=CanvasElement;TextElement._StyleTypes=Object.create(null);TextElement._StyleTypes.Text=StyleableBase.EStyleType.NORMAL;TextElement._StyleTypes.Selectable=StyleableBase.EStyleType.NORMAL;TextElement._StyleTypes.Multiline=StyleableBase.EStyleType.NORMAL;TextElement._StyleTypes.WordWrap=StyleableBase.EStyleType.NORMAL;TextElement.StyleDefault=new StyleDefinition;TextElement.StyleDefault.setStyle("PaddingTop",2);
TextElement.StyleDefault.setStyle("PaddingBottom",2);TextElement.StyleDefault.setStyle("PaddingLeft",2);TextElement.StyleDefault.setStyle("PaddingRight",2);TextElement.StyleDefault.setStyle("TextHorizontalAlign","left");TextElement.StyleDefault.setStyle("TextVerticalAlign","top");TextElement.StyleDefault.setStyle("Text",null);TextElement.StyleDefault.setStyle("Selectable",!1);TextElement.StyleDefault.setStyle("Multiline",!0);TextElement.StyleDefault.setStyle("WordWrap",!0);
TextElement.prototype._doStylesUpdated=function(a){TextElement.base.prototype._doStylesUpdated.call(this,a);"Text"in a&&this._textField.setText(this.getStyle("Text"));"Selectable"in a&&this._textField.setStyle("Selectable",this.getStyle("Selectable"));"Multiline"in a&&this._textField.setStyle("Multiline",this.getStyle("Multiline"));"WordWrap"in a&&this._textField.setStyle("WordWrap",this.getStyle("WordWrap"));"TextHorizontalAlign"in a&&this._textField.setStyle("TextHorizontalAlign",this.getStyle("TextHorizontalAlign"));
"TextVerticalAlign"in a&&this._textField.setStyle("TextVerticalAlign",this.getStyle("TextVerticalAlign"));if("Padding"in a||"PaddingTop"in a||"PaddingBottom"in a||"PaddingLeft"in a||"PaddingRight"in a)a=this._getPaddingSize(),this._textField.setStyle("PaddingTop",a.paddingTop),this._textField.setStyle("PaddingBottom",a.paddingBottom),this._textField.setStyle("PaddingLeft",a.paddingLeft),this._textField.setStyle("PaddingRight",a.paddingRight)};
TextElement.prototype._doMeasure=function(a,b){return{width:this._textField._measuredWidth,height:this._textField._measuredHeight}};TextElement.prototype._doLayout=function(a){TextElement.base.prototype._doLayout.call(this,a);this._textField._setActualPosition(0,0);this._textField._setActualSize(this._width,this._height)};function ScrollButtonSkinElement(){ScrollButtonSkinElement.base.prototype.constructor.call(this)}ScrollButtonSkinElement.prototype=Object.create(CanvasElement.prototype);
ScrollButtonSkinElement.prototype.constructor=ScrollButtonSkinElement;ScrollButtonSkinElement.base=CanvasElement;ScrollButtonSkinElement._StyleTypes=Object.create(null);ScrollButtonSkinElement._StyleTypes.ArrowColor=StyleableBase.EStyleType.NORMAL;ScrollButtonSkinElement._StyleTypes.ArrowDirection=StyleableBase.EStyleType.NORMAL;ScrollButtonSkinElement.StyleDefault=new StyleDefinition;ScrollButtonSkinElement.StyleDefault.setStyle("ArrowColor","#000000");
ScrollButtonSkinElement.StyleDefault.setStyle("ArrowDirection","up");ScrollButtonSkinElement.prototype._doStylesUpdated=function(a){ScrollButtonSkinElement.base.prototype._doStylesUpdated.call(this,a);("ArrowColor"in a||"ArrowDirection"in a)&&this._invalidateRender()};
ScrollButtonSkinElement.prototype._doRender=function(){ScrollButtonSkinElement.base.prototype._doRender.call(this);var a=this.getStyle("ArrowDirection"),b=this.getStyle("ArrowColor");if(null!=b&&null!=a){var c=this._getGraphicsCtx(),d=this._getBorderThickness(),e=this._width-2*d,f=this._height-2*d;c.beginPath();"up"==a?(c.moveTo(d+e/2,d+.35*f),c.lineTo(d+.8*e,d+.65*f),c.lineTo(d+.2*e,d+.65*f)):"down"==a?(c.moveTo(d+e/2,d+.65*f),c.lineTo(d+.8*e,d+.35*f),c.lineTo(d+.2*e,d+.35*f)):"left"==a?(c.moveTo(d+
.35*e,d+f/2),c.lineTo(d+.65*e,d+.2*f),c.lineTo(d+.65*e,d+.8*f)):"right"==a&&(c.moveTo(d+.65*e,d+f/2),c.lineTo(d+.35*e,d+.2*f),c.lineTo(d+.35*e,d+.8*f));c.closePath();c.fillStyle=b;c.fill()}};function RadioButtonSkinElement(){RadioButtonSkinElement.base.prototype.constructor.call(this)}RadioButtonSkinElement.prototype=Object.create(CanvasElement.prototype);RadioButtonSkinElement.prototype.constructor=RadioButtonSkinElement;RadioButtonSkinElement.base=CanvasElement;
RadioButtonSkinElement._StyleTypes=Object.create(null);RadioButtonSkinElement._StyleTypes.CheckColor=StyleableBase.EStyleType.NORMAL;RadioButtonSkinElement._StyleTypes.CheckSize=StyleableBase.EStyleType.NORMAL;RadioButtonSkinElement.StyleDefault=new StyleDefinition;RadioButtonSkinElement.StyleDefault.setStyle("CheckColor","#000000");RadioButtonSkinElement.StyleDefault.setStyle("CheckSize",.35);
RadioButtonSkinElement.prototype._doStylesUpdated=function(a){RadioButtonSkinElement.base.prototype._doStylesUpdated.call(this,a);("SkinState"in a||"CheckColor"in a||"CheckSize"in a)&&this._invalidateRender()};RadioButtonSkinElement.prototype._doMeasure=function(a,b){return{width:14,height:14}};
RadioButtonSkinElement.prototype._doRender=function(){RadioButtonSkinElement.base.prototype._doRender.call(this);if(0==this.getStyle("SkinState").indexOf("selected")){var a=this._getGraphicsCtx(),b=this.getStyle("CheckSize"),c=new DrawMetrics;c._width=this._width*b;c._height=this._height*b;c._x=(this._width-c._width)/2;c._y=(this._height-c._height)/2;0>=c._width||0>=c._height||(a.beginPath(),this._drawBackgroundShape(a,c),a.fillStyle=this.getStyle("CheckColor"),a.fill())}};
function DropdownArrowButtonSkinElement(){DropdownArrowButtonSkinElement.base.prototype.constructor.call(this)}DropdownArrowButtonSkinElement.prototype=Object.create(CanvasElement.prototype);DropdownArrowButtonSkinElement.prototype.constructor=DropdownArrowButtonSkinElement;DropdownArrowButtonSkinElement.base=CanvasElement;DropdownArrowButtonSkinElement._StyleTypes=Object.create(null);DropdownArrowButtonSkinElement._StyleTypes.ArrowColor=StyleableBase.EStyleType.NORMAL;
DropdownArrowButtonSkinElement._StyleTypes.LineColor=StyleableBase.EStyleType.NORMAL;DropdownArrowButtonSkinElement.StyleDefault=new StyleDefinition;DropdownArrowButtonSkinElement.StyleDefault.setStyle("ArrowColor","#000000");DropdownArrowButtonSkinElement.StyleDefault.setStyle("LineColor","#000000");DropdownArrowButtonSkinElement.prototype._doStylesUpdated=function(a){DropdownArrowButtonSkinElement.base.prototype._doStylesUpdated.call(this,a);("ArrowColor"in a||"LineColor"in a)&&this._invalidateRender()};
DropdownArrowButtonSkinElement.prototype._doRender=function(){DropdownArrowButtonSkinElement.base.prototype._doRender.call(this);var a=this._getGraphicsCtx(),b=this._getPaddingMetrics(),c=this.getStyle("LineColor"),d=this.getStyle("ArrowColor"),e=b.getX(),f=b.getY(),g=b.getWidth(),b=b.getHeight();null!=d&&(a.beginPath(),a.moveTo(e+g/2,f+.6*b),a.lineTo(e+.7*g,f+.4*b),a.lineTo(e+.3*g,f+.4*b),a.closePath(),a.fillStyle=d,a.fill());null!=c&&(d=.65*b,a.beginPath(),a.moveTo(e,f+b/2-d/2),a.lineTo(e,f+b/2+
d/2),a.lineTo(e+1,f+b/2+d/2),a.lineTo(e+1,f+b/2-d/2),a.closePath(),a.fillStyle=c,a.fill())};function DataGridHeaderColumnDividerSkinElement(){DataGridHeaderColumnDividerSkinElement.base.prototype.constructor.call(this)}DataGridHeaderColumnDividerSkinElement.prototype=Object.create(CanvasElement.prototype);DataGridHeaderColumnDividerSkinElement.prototype.constructor=DataGridHeaderColumnDividerSkinElement;DataGridHeaderColumnDividerSkinElement.base=CanvasElement;
DataGridHeaderColumnDividerSkinElement._StyleTypes=Object.create(null);DataGridHeaderColumnDividerSkinElement._StyleTypes.DividerLineColor=StyleableBase.EStyleType.NORMAL;DataGridHeaderColumnDividerSkinElement._StyleTypes.DividerArrowColor=StyleableBase.EStyleType.NORMAL;DataGridHeaderColumnDividerSkinElement.StyleDefault=new StyleDefinition;DataGridHeaderColumnDividerSkinElement.StyleDefault.setStyle("DividerLineColor","#777777");
DataGridHeaderColumnDividerSkinElement.StyleDefault.setStyle("DividerArrowColor","#444444");DataGridHeaderColumnDividerSkinElement.prototype._doStylesUpdated=function(a){DataGridHeaderColumnDividerSkinElement.base.prototype._doStylesUpdated.call(this,a);("DividerLineColor"in a||"DividerArrowColor"in a)&&this._invalidateRender()};
DataGridHeaderColumnDividerSkinElement.prototype._doRender=function(){DataGridHeaderColumnDividerSkinElement.base.prototype._doRender.call(this);var a=this._getGraphicsCtx(),b=this.getStyle("DividerLineColor"),c=this.getStyle("DividerArrowColor"),d=this.getStyle("SkinState"),e=this._width,f=this._height;a.beginPath();a.moveTo(0+e/2-.5,0);a.lineTo(0+e/2-.5,0+f);a.lineTo(e/2+.5,0+f);a.lineTo(e/2+.5,0);a.closePath();a.fillStyle=b;a.fill();if("over"==d||"down"==d)b=f/2,a.fillStyle=c,a.beginPath(),a.moveTo(0+
e/2-.5-1,f/2-b/2),a.lineTo(0+e/2-.5-1,f/2+b/2),a.lineTo(0,0+f/2),a.closePath(),a.fill(),a.beginPath(),a.moveTo(e/2+1.5,f/2-b/2),a.lineTo(e/2+1.5,f/2+b/2),a.lineTo(0+e,0+f/2),a.closePath(),a.fill()};function CheckboxSkinElement(){CheckboxSkinElement.base.prototype.constructor.call(this)}CheckboxSkinElement.prototype=Object.create(CanvasElement.prototype);CheckboxSkinElement.prototype.constructor=CheckboxSkinElement;CheckboxSkinElement.base=CanvasElement;CheckboxSkinElement._StyleTypes=Object.create(null);
CheckboxSkinElement._StyleTypes.CheckColor=StyleableBase.EStyleType.NORMAL;CheckboxSkinElement._StyleTypes.CheckSize=StyleableBase.EStyleType.NORMAL;CheckboxSkinElement.StyleDefault=new StyleDefinition;CheckboxSkinElement.StyleDefault.setStyle("CheckColor","#000000");CheckboxSkinElement.StyleDefault.setStyle("CheckSize",.8);
CheckboxSkinElement.prototype._doStylesUpdated=function(a){CheckboxSkinElement.base.prototype._doStylesUpdated.call(this,a);("SkinState"in a||"CheckColor"in a||"CheckSize"in a)&&this._invalidateRender()};CheckboxSkinElement.prototype._doMeasure=function(a,b){return{width:14,height:14}};
CheckboxSkinElement.prototype._doRender=function(){CheckboxSkinElement.base.prototype._doRender.call(this);var a=this.getStyle("SkinState");if(0==a.indexOf("selected")||0==a.indexOf("half")){var b=this._getGraphicsCtx();this._getBorderThickness();var c=this.getStyle("CheckColor"),d=this.getStyle("CheckSize"),e=this._width*d,d=this._height*d,f=0+(this._width-e)/2,g=0+(this._height-d)/2;0==a.indexOf("selected")?(b.beginPath(),b.moveTo(f+.1*e,g+.6*d),b.lineTo(f+.4*e,g+.9*d),b.lineTo(f+.9*e,g+.26*d),
b.lineTo(f+.78*e,g+.1*d),b.lineTo(f+.38*e,g+.65*d),b.lineTo(f+.2*e,g+.45*d)):(b.beginPath(),b.moveTo(f+.12*e,g+.42*d),b.lineTo(f+.12*e,g+.58*d),b.lineTo(f+.88*e,g+.58*d),b.lineTo(f+.88*e,g+.42*d));b.closePath();b.fillStyle=c;b.fill()}};function SkinnableElement(){SkinnableElement.base.prototype.constructor.call(this);this._skins=Object.create(null);this._currentSkin=null;this._currentSkinState=""}SkinnableElement.prototype=Object.create(CanvasElement.prototype);
SkinnableElement.prototype.constructor=SkinnableElement;SkinnableElement.base=CanvasElement;SkinnableElement._SkinProxyMap=Object.create(null);SkinnableElement._SkinProxyMap.BorderType=!0;SkinnableElement._SkinProxyMap.BorderColor=!0;SkinnableElement._SkinProxyMap.BorderThickness=!0;SkinnableElement._SkinProxyMap.BackgroundFill=!0;SkinnableElement._SkinProxyMap.BackgroundShape=!0;SkinnableElement._SkinProxyMap._Arbitrary=!0;SkinnableElement.prototype._getSkinClass=function(a){return null};
SkinnableElement.prototype._getSubStyleNameForSkinState=function(a){return null};SkinnableElement.prototype._getSkinStyleProxyMap=function(){return SkinnableElement._SkinProxyMap};SkinnableElement.prototype._updateSkinStyleDefinitions=function(a){var b=this._skins[a];null!=b&&(a=this._getSubStyleNameForSkinState(a),null!=a&&this._applySubStylesToElement(a,b))};
SkinnableElement.prototype._updateSkinClass=function(a){if(null!=this._skins[a]||a==this._currentSkinState){var b=this._getSkinClass(a),c=null;null!=this._skins[a]&&(c=this._skins[a].constructor);b!=c&&(null!=this._skins[a]&&(this._removeChild(this._skins[a]),this._skins[a]=null),this._currentSkinState==a&&(this._currentSkin=a=this._createSkin(a),null!=a&&a.setStyle("Visible",!0)))}};
SkinnableElement.prototype._createSkin=function(a){var b=this._getSkinClass(a);if(null==b)return this._skins[a]=null;b=new b;this._skins[a]=b;b._setStyleProxy(new StyleProxy(this,this._getSkinStyleProxyMap()));this._updateSkinStyleDefinitions(a);b.setStyle("MouseEnabled",!1);b.setStyle("SkinState",a);this._addChildAt(b,0);return b};
SkinnableElement.prototype._changeState=function(a){if(this._currentSkinState==a||""==a||null==a)return!1;this._currentSkinState=a;var b=!1,c;for(c in this._skins)null!=this._skins[c]&&(c==a?(this._currentSkin=this._skins[c],this._skins[c].setStyle("Visible",!0),b=!0):this._skins[c].setStyle("Visible",!1));0==b&&(this._currentSkin=this._createSkin(a),null!=this._currentSkin&&this._currentSkin.setStyle("Visible",!0));return!0};
SkinnableElement.prototype._doStylesUpdated=function(a){SkinnableElement.base.prototype._doStylesUpdated.call(this,a);"SkinState"in a&&this._changeState(this.getStyle("SkinState"))};SkinnableElement.prototype._doLayout=function(a){SkinnableElement.base.prototype._doLayout.call(this,a);for(var b in this._skins)null!=this._skins[b]&&(this._skins[b]._setActualSize(this._width,this._height),this._skins[b]._setActualPosition(0,0))};SkinnableElement.prototype._doRender=function(){};
function TextInputElement(){TextInputElement.base.prototype.constructor.call(this);this._textField=new TextFieldElement;this._textField.setStyle("Selectable",!0);this._textField.setStyle("Cursor",null);this._textField.setStyle("TabStop",-1);this._addChild(this._textField);var a=this;this._onTextInputFocusEventInstance=function(b){"focusin"==b.getType()?a._onTextInputFocusIn(b):a._onTextInputFocusOut(b)};this._onTextInputKeyDownInstance=function(b){a._onTextInputKeyDown(b)};this._onTextInputTextFieldChangedInstance=
function(b){a._onTextInputTextFieldChanged(b)};this.addEventListener("focusin",this._onTextInputFocusEventInstance);this.addEventListener("focusout",this._onTextInputFocusEventInstance)}TextInputElement.prototype=Object.create(SkinnableElement.prototype);TextInputElement.prototype.constructor=TextInputElement;TextInputElement.base=SkinnableElement;TextInputElement._StyleTypes=Object.create(null);TextInputElement._StyleTypes.MaxChars=StyleableBase.EStyleType.NORMAL;
TextInputElement._StyleTypes.SkinClass=StyleableBase.EStyleType.NORMAL;TextInputElement._StyleTypes.UpSkinClass=StyleableBase.EStyleType.NORMAL;TextInputElement._StyleTypes.UpSkinStyle=StyleableBase.EStyleType.SUBSTYLE;TextInputElement._StyleTypes.UpTextColor=StyleableBase.EStyleType.NORMAL;TextInputElement._StyleTypes.UpTextHighlightedColor=StyleableBase.EStyleType.NORMAL;TextInputElement._StyleTypes.UpTextHighlightedBackgroundColor=StyleableBase.EStyleType.NORMAL;
TextInputElement._StyleTypes.DisabledSkinClass=StyleableBase.EStyleType.NORMAL;TextInputElement._StyleTypes.DisabledSkinStyle=StyleableBase.EStyleType.SUBSTYLE;TextInputElement._StyleTypes.DisabledTextColor=StyleableBase.EStyleType.NORMAL;TextInputElement._StyleTypes.DisabledTextHighlightedColor=StyleableBase.EStyleType.NORMAL;TextInputElement._StyleTypes.DisabledTextHighlightedBackgroundColor=StyleableBase.EStyleType.NORMAL;TextInputElement._StyleTypes.DisplayAsPassword=StyleableBase.EStyleType.NORMAL;
TextInputElement.StyleDefault=new StyleDefinition;TextInputElement.StyleDefault.setStyle("MaxChars",0);TextInputElement.StyleDefault.setStyle("Enabled",!0);TextInputElement.StyleDefault.setStyle("UpTextColor","#000000");TextInputElement.StyleDefault.setStyle("UpTextHighlightedColor","#FFFFFF");TextInputElement.StyleDefault.setStyle("UpTextHighlightedBackgroundColor","#000000");TextInputElement.StyleDefault.setStyle("DisabledTextColor","#888888");
TextInputElement.StyleDefault.setStyle("DisabledTextHighlightedColor","#FFFFFF");TextInputElement.StyleDefault.setStyle("DisabledTextHighlightedBackgroundColor","#000000");TextInputElement.StyleDefault.setStyle("DisplayAsPassword",!1);TextInputElement.StyleDefault.setStyle("PaddingTop",3);TextInputElement.StyleDefault.setStyle("PaddingBottom",3);TextInputElement.StyleDefault.setStyle("PaddingLeft",3);TextInputElement.StyleDefault.setStyle("PaddingRight",3);
TextInputElement.StyleDefault.setStyle("TabStop",0);TextInputElement.StyleDefault.setStyle("Cursor","text");TextInputElement.StyleDefault.setStyle("SkinClass",CanvasElement);TextInputElement.StyleDefault.setStyle("UpSkinClass",CanvasElement);TextInputElement.StyleDefault.setStyle("DisabledSkinClass",CanvasElement);TextInputElement.DisabledSkinStyleDefault=new StyleDefinition;TextInputElement.DisabledSkinStyleDefault.setStyle("BorderType","inset");
TextInputElement.DisabledSkinStyleDefault.setStyle("BorderThickness",1);TextInputElement.DisabledSkinStyleDefault.setStyle("BorderColor","#999999");TextInputElement.DisabledSkinStyleDefault.setStyle("BackgroundFill","#ECECEC");TextInputElement.UpSkinStyleDefault=new StyleDefinition;TextInputElement.UpSkinStyleDefault.setStyle("BorderType","inset");TextInputElement.UpSkinStyleDefault.setStyle("BorderThickness",1);TextInputElement.UpSkinStyleDefault.setStyle("BorderColor","#606060");
TextInputElement.UpSkinStyleDefault.setStyle("BackgroundFill","#F5F5F5");TextInputElement.StyleDefault.setStyle("UpSkinStyle",TextInputElement.UpSkinStyleDefault);TextInputElement.StyleDefault.setStyle("DisabledSkinStyle",TextInputElement.DisabledSkinStyleDefault);TextInputElement.prototype.setText=function(a){this._textField.setText(a)};TextInputElement.prototype.getText=function(){return this._textField.getText()};
TextInputElement.prototype._onTextInputTextFieldChanged=function(a){1==this.hasEventListener("changed",null)&&this._dispatchEvent(new ElementEvent("changed",!1))};TextInputElement.prototype._onTextInputKeyDown=function(a){if(1!=a.getDefaultPrevented()){var b=a.clone();b._bubbles=!1;this._textField._dispatchEvent(b);1==b.getIsCanceled()&&a.cancelEvent();1==b.getDefaultPrevented()&&a.preventDefault()}};TextInputElement.prototype._onTextInputFocusIn=function(a){this._textField._dispatchEvent(a.clone())};
TextInputElement.prototype._onTextInputFocusOut=function(a){this._textField._dispatchEvent(a.clone())};TextInputElement.prototype._getSkinClass=function(a){var b=null;"up"==a?b=this.getStyleData("UpSkinClass"):"disabled"==a&&(b=this.getStyleData("DisabledSkinClass"));a=this.getStyleData("SkinClass");return null==b||0<a.comparePriority(b)?a.value:b.value};
TextInputElement.prototype._getSubStyleNameForSkinState=function(a){return"up"==a?"UpSkinStyle":"disabled"==a?"DisabledSkinStyle":TextInputElement.base.prototype._getSubStyleNameForSkinState.call(this,a)};TextInputElement.prototype._updateState=function(){var a="up";0==this.getStyle("Enabled")&&(a="disabled");this.setStyle("SkinState",a)};TextInputElement.prototype._changeState=function(a){TextInputElement.base.prototype._changeState.call(this,a);this._updateTextColors()};
TextInputElement.prototype._updateTextColors=function(){this._textField.setStyle("TextColor",this._getTextColor(this._currentSkinState));this._textField.setStyle("TextHighlightedColor",this._getTextHighlightedColor(this._currentSkinState));this._textField.setStyle("TextHighlightedBackgroundColor",this._getTextHighlightedBackgroundColor(this._currentSkinState))};
TextInputElement.prototype._getTextColor=function(a){var b=null;"up"==a?b=this.getStyleData("UpTextColor"):"disabled"==a&&(b=this.getStyleData("DisabledTextColor"));a=this.getStyleData("TextColor");return null==b||0<a.comparePriority(b)?a.value:b.value};
TextInputElement.prototype._getTextHighlightedColor=function(a){var b=null;"up"==a?b=this.getStyleData("UpTextHighlightedColor"):"disabled"==a&&(b=this.getStyleData("DisabledTextHighlightedColor"));a=this.getStyleData("TextHighlightedColor");return null==b||0<a.comparePriority(b)?a.value:b.value};
TextInputElement.prototype._getTextHighlightedBackgroundColor=function(a){var b=null;"up"==a?b=this.getStyleData("UpTextHighlightedBackgroundColor"):"disabled"==a&&(b=this.getStyleData("DisabledTextHighlightedBackgroundColor"));a=this.getStyleData("TextHighlightedBackgroundColor");return null==b||0<a.comparePriority(b)?a.value:b.value};
TextInputElement.prototype._doStylesUpdated=function(a){TextInputElement.base.prototype._doStylesUpdated.call(this,a);"MaxChars"in a&&this._textField.setStyle("MaxChars",this.getStyle("MaxChars"));if("Enabled"in a){var b=this.getStyle("Enabled");this._textField.setStyle("Enabled",b);1==b?(0==this.hasEventListener("keydown",this._onTextInputKeyDownInstance)&&this.addEventListener("keydown",this._onTextInputKeyDownInstance),0==this._textField.hasEventListener("changed",this._onTextInputTextFieldChangedInstance)&&
this._textField.addEventListener("changed",this._onTextInputTextFieldChangedInstance)):(1==this.hasEventListener("keydown",this._onTextInputKeyDownInstance)&&this.removeEventListener("keydown",this._onTextInputKeyDownInstance),1==this._textField.hasEventListener("changed",this._onTextInputTextFieldChangedInstance)&&this._textField.removeEventListener("changed",this._onTextInputTextFieldChangedInstance))}("TextLinePaddingTop"in a||"TextLinePaddingBottom"in a)&&this._invalidateMeasure();if("Padding"in
a||"PaddingTop"in a||"PaddingBottom"in a||"PaddingLeft"in a||"PaddingRight"in a)b=this._getPaddingSize(),this._textField.setStyle("PaddingTop",b.paddingTop),this._textField.setStyle("PaddingBottom",b.paddingBottom),this._textField.setStyle("PaddingLeft",b.paddingLeft),this._textField.setStyle("PaddingRight",b.paddingRight),this._invalidateMeasure();if("DisplayAsPassword"in a||"PasswordMaskCharacter"in a)b=null,1==this.getStyle("DisplayAsPassword")&&(b=this.getStyle("PasswordMaskCharacter")),this._textField.setStyle("MaskCharacter",
b);("SkinClass"in a||"UpSkinClass"in a)&&this._updateSkinClass("up");"UpSkinStyle"in a&&this._updateSkinStyleDefinitions("up");("SkinClass"in a||"DisabledSkinClass"in a)&&this._updateSkinClass("disabled");"DisabledSkinStyle"in a&&this._updateSkinStyleDefinitions("disabled");this._updateState();this._updateTextColors()};
TextInputElement.prototype._doMeasure=function(a,b){var c={width:0,height:this.getStyle("TextSize")+this.getStyle("TextLinePaddingTop")+this.getStyle("TextLinePaddingBottom")};c.width=10*c.height;c.width+=a;c.height+=b;return c};TextInputElement.prototype._doLayout=function(a){TextInputElement.base.prototype._doLayout.call(this,a);this._textField._setActualPosition(0,0);this._textField._setActualSize(this._width,this._height)};
function LabelElement(){LabelElement.base.prototype.constructor.call(this);this._truncateStringWidth=this._textHeight=this._textWidth=null}LabelElement.prototype=Object.create(CanvasElement.prototype);LabelElement.prototype.constructor=LabelElement;LabelElement.base=CanvasElement;LabelElement._StyleTypes=Object.create(null);LabelElement._StyleTypes.Text=StyleableBase.EStyleType.NORMAL;LabelElement._StyleTypes.TruncateToFit=StyleableBase.EStyleType.NORMAL;LabelElement.StyleDefault=new StyleDefinition;
LabelElement.StyleDefault.setStyle("PaddingTop",2);LabelElement.StyleDefault.setStyle("PaddingBottom",2);LabelElement.StyleDefault.setStyle("PaddingLeft",2);LabelElement.StyleDefault.setStyle("PaddingRight",2);LabelElement.StyleDefault.setStyle("Text",null);LabelElement.StyleDefault.setStyle("TruncateToFit","...");
LabelElement.prototype._doStylesUpdated=function(a){LabelElement.base.prototype._doStylesUpdated.call(this,a);if("TextStyle"in a||"TextFont"in a||"TextSize"in a||"Text"in a||"TextLinePaddingTop"in a||"TextLinePaddingBottom"in a)this._textHeight=this._textWidth=null,this._invalidateMeasure(),this._invalidateRender();"TruncateToFit"in a&&(this._truncateStringWidth=null,this._invalidateRender());("TextHorizontalAlign"in a||"TextVerticalAlign"in a||"TextColor"in a||"TextFillType"in a||"TextDecoration"in
a)&&this._invalidateRender()};LabelElement.prototype._doMeasure=function(a,b){if(null==this._textWidth||null==this._textHeight){var c=this.getStyle("Text");null==c&&(c="");this._textHeight=this.getStyle("TextSize")+this.getStyle("TextLinePaddingTop")+this.getStyle("TextLinePaddingBottom");this._textWidth=CanvasElement._measureText(c,this._getFontString())}return{width:this._textWidth+a,height:this._textHeight+b}};
LabelElement.prototype._doRender=function(){LabelElement.base.prototype._doRender.call(this);var a=this.getStyle("Text");if(null!=a&&0!=a.length){var b=this._getGraphicsCtx(),c=this._getPaddingMetrics(),d=c.getX(),e=c.getY(),f=c.getWidth(),g=c.getHeight(),k=this._getFontString(),l=this._textWidth;if(l>f){var h=this.getStyle("TruncateToFit"),n=0;null!=h&&(n=h.length);null==this._truncateStringWidth&&(this._truncateStringWidth=null==h?0:CanvasElement._measureText(h,k));for(var p,m=a.length,l=this._textWidth+
this._truncateStringWidth;0<m&&l>f;)p=CanvasElement._measureText(a[m-1],k),m--,l-=p;for(;0<n&&l>f;)p=CanvasElement._measureText(h[n-1],k),n--,l-=p;a=a.substring(0,m)+h.substring(0,n)}h=this.getStyle("TextLinePaddingTop");n=this.getStyle("TextLinePaddingBottom");p=this.getStyle("TextVerticalAlign");var q=this.getStyle("TextHorizontalAlign"),m=this.getStyle("TextFillType"),t=this.getStyle("TextColor"),u=this.getStyle("TextDecoration"),l="left"==q?d:"right"==q?d+f-l:Math.round(d+f/2-l/2),e="top"==p?
e+h:"bottom"==p?e+g-n:Math.round(e+g/2+h/2-n/2);"stroke"==m?CanvasElement._strokeText(b,a,l,e,k,t,p):CanvasElement._fillText(b,a,l,e,k,t,p);"underline"==u&&(e=c.getY()+h+this.getStyle("TextSize")+n-.5,b.beginPath(),b.moveTo(d,e),b.lineTo(d+f,e),b.lineWidth=1,b.strokeStyle=t,b.stroke())}};
function ImageElement(){ImageElement.base.prototype.constructor.call(this);this._imageSource=this._imageLoader=null;this._imageLoadComplete=!1;var a=this;this._onImageElementLoadCompleteInstance=function(b){a._imageLoader.removeEventListener("load",a._onImageElementLoadCompleteInstance);a._imageLoadComplete=!0;a._invalidateMeasure();a._invalidateLayout();a._invalidateRender()}}ImageElement.prototype=Object.create(CanvasElement.prototype);ImageElement.prototype.constructor=ImageElement;
ImageElement.base=CanvasElement;ImageElement._StyleTypes=Object.create(null);ImageElement._StyleTypes.ImageSource=StyleableBase.EStyleType.NORMAL;ImageElement._StyleTypes.ImageSourceClipX=StyleableBase.EStyleType.NORMAL;ImageElement._StyleTypes.ImageSourceClipY=StyleableBase.EStyleType.NORMAL;ImageElement._StyleTypes.ImageSourceClipWidth=StyleableBase.EStyleType.NORMAL;ImageElement._StyleTypes.ImageSourceClipHeight=StyleableBase.EStyleType.NORMAL;ImageElement._StyleTypes.ImageScaleType=StyleableBase.EStyleType.NORMAL;
ImageElement._StyleTypes.ImageVerticalAlign=StyleableBase.EStyleType.NORMAL;ImageElement._StyleTypes.ImageHorizontalAlign=StyleableBase.EStyleType.NORMAL;ImageElement.StyleDefault=new StyleDefinition;ImageElement.StyleDefault.setStyle("ImageSource",null);ImageElement.StyleDefault.setStyle("ImageSourceClipX",null);ImageElement.StyleDefault.setStyle("ImageSourceClipY",null);ImageElement.StyleDefault.setStyle("ImageSourceClipWidth",null);ImageElement.StyleDefault.setStyle("ImageSourceClipHeight",null);
ImageElement.StyleDefault.setStyle("ImageScaleType","stretch");ImageElement.StyleDefault.setStyle("ImageHorizontalAlign","left");ImageElement.StyleDefault.setStyle("ImageVerticalAlign","top");
ImageElement.prototype._doStylesUpdated=function(a){ImageElement.base.prototype._doStylesUpdated.call(this,a);"ImageSource"in a?(a=this.getStyle("ImageSource"),this._imageSource!=a&&(null!=this._imageLoader&&0==this._imageLoadComplete&&this._imageLoader.removeEventListener("load",this._onImageElementLoadCompleteInstance),this._imageLoader=null,this._imageLoadComplete=!1,this._imageSource=a,this._imageSource instanceof HTMLImageElement?(this._imageLoader=this._imageSource,this._imageLoadComplete=this._imageSource.complete,
0==this._imageLoadComplete&&this._imageLoader.addEventListener("load",this._onImageElementLoadCompleteInstance,!1)):(this._imageLoader=new Image,this._imageLoader.addEventListener("load",this._onImageElementLoadCompleteInstance,!1),this._imageLoader.src=this._imageSource),this._invalidateMeasure(),this._invalidateRender())):"ImageSourceClipX"in a||"ImageSourceClipY"in a||"ImageSourceClipWidth"in a||"ImageSourceClipHeight"in a||"ImageScaleType"in a?(this._invalidateMeasure(),this._invalidateRender()):
("ImageVerticalAlign"in a||"ImageHorizontalAlign"in a)&&this._invalidateRender()};
ImageElement.prototype._doMeasure=function(a,b){var c={width:a,height:b},d=this.getStyle("ImageSourceClipX"),e=this.getStyle("ImageSourceClipY"),f=this.getStyle("ImageSourceClipWidth"),g=this.getStyle("ImageSourceClipHeight");null==d&&(d=0);null==e&&(e=0);null!=f?c.width+=f:1==this._imageLoadComplete&&(c.width+=this._imageLoader.naturalWidth-d);null!=g?c.height+=g:1==this._imageLoadComplete&&(c.height+=this._imageLoader.naturalHeight-e);"fit"==this.getStyle("ImageScaleType")&&this._invalidateLayout();
return c};
ImageElement.prototype._doLayout=function(a){ImageElement.base.prototype._doLayout.call(this,a);if("fit"==this.getStyle("ImageScaleType")&&0!=this._imageLoadComplete){a.getX();a.getY();var b=a.getWidth();a=a.getHeight();if(!(0>=b||0>=a||b==this._measuredWidth&&a==this._measuredHeight||b!=this._measuredWidth&&a!=this._measuredHeight)){var c=this.getStyle("ImageSourceClipX"),d=this.getStyle("ImageSourceClipY"),e=this.getStyle("ImageSourceClipWidth"),f=this.getStyle("ImageSourceClipHeight");null==c&&
(c=0);null==d&&(d=0);null==e&&(e=this._imageLoader.naturalWidth-c);null==f&&(f=this._imageLoader.naturalHeight-d);0>=e||0>=f||(c=e/f,a!=this._measuredHeight?(b=a,a*=c):(a=b,b/=c),a=Math.round(a),b=Math.round(b),this._setMeasuredSize(a,b))}}};
ImageElement.prototype._doRender=function(){ImageElement.base.prototype._doRender.call(this);if(0!=this._imageLoadComplete){var a=this._getPaddingMetrics(),b=this._getGraphicsCtx(),c=a.getX(),d=a.getY(),e=a.getWidth(),f=a.getHeight();if(!(0>=e||0>=f)){var a=this.getStyle("ImageSourceClipX"),g=this.getStyle("ImageSourceClipY"),k=this.getStyle("ImageSourceClipWidth"),l=this.getStyle("ImageSourceClipHeight"),h=this.getStyle("ImageScaleType");null==a&&(a=0);null==g&&(g=0);null==k&&(k=this._imageLoader.naturalWidth-
a);null==l&&(l=this._imageLoader.naturalHeight-g);if(!(0>=k||0>=l))if("stretch"==h)b.drawImage(this._imageLoader,a,g,k,l,c,d,e,f);else if("tile"==h)for(var n=c,p=d,m,q;!(m=Math.min(k,c+e-n),q=Math.min(l,d+f-p),b.drawImage(this._imageLoader,a,g,m,q,n,p,m,q),n+=m,n>=c+e&&(n=c,p+=q,p>=d+f)););else if("tilefit"==h)if(h=k/l,e/f>h)for(n=c,q=f,m=f*h;;)if(n+m>c+e){e=(c+e-n)/m;b.drawImage(this._imageLoader,a,g,k*e,l,n,d,m*e,q);break}else{if(b.drawImage(this._imageLoader,a,g,k,l,n,d,m,q),n+=m,n==c+e)break}else for(p=
d,m=e,q=e/h;;)if(p+q>d+f){d=(d+f-p)/q;b.drawImage(this._imageLoader,a,g,k,l*d,c,p,m,q*d);break}else{if(b.drawImage(this._imageLoader,a,g,k,l,c,p,m,q),p+=q,p==d+f)break}else if("fit"==h||"none"==h||null==h)n=this.getStyle("ImageVerticalAlign"),p=this.getStyle("ImageHorizontalAlign"),m=k,q=l,"fit"==h?(h=k/l,e/f>h?(q=f,m=Math.round(f*h)):(m=e,q=Math.round(e/h))):(e<k&&("right"==p?a+=k-e:"center"==p&&(a+=(k-e)/2),m=k=e),f<l&&("bottom"==n?g+=l-f:"middle"==n&&(g+=(l-f)/2),q=l=f)),"right"==p?c+=e-m:"center"==
p&&(c+=(e-m)/2),"bottom"==n?d+=f-q:"middle"==n&&(d+=(f-q)/2),b.drawImage(this._imageLoader,a,g,k,l,c,d,m,q)}}};
function DataRendererBaseElement(){DataRendererBaseElement.base.prototype.constructor.call(this);var a=this;this._onDataRendererBaseEventInstance=function(b){"rollover"==b.getType()?a._onDataRendererRollover(b):"rollout"==b.getType()&&a._onDataRendererRollout(b)};this.addEventListener("rollover",this._onDataRendererBaseEventInstance);this.addEventListener("rollout",this._onDataRendererBaseEventInstance)}DataRendererBaseElement.prototype=Object.create(SkinnableElement.prototype);
DataRendererBaseElement.prototype.constructor=DataRendererBaseElement;DataRendererBaseElement.base=SkinnableElement;DataRendererBaseElement._StyleTypes=Object.create(null);DataRendererBaseElement._StyleTypes.SkinClass=StyleableBase.EStyleType.NORMAL;DataRendererBaseElement._StyleTypes.UpSkinClass=StyleableBase.EStyleType.NORMAL;DataRendererBaseElement._StyleTypes.UpSkinStyle=StyleableBase.EStyleType.SUBSTYLE;DataRendererBaseElement._StyleTypes.AltSkinClass=StyleableBase.EStyleType.NORMAL;
DataRendererBaseElement._StyleTypes.AltSkinStyle=StyleableBase.EStyleType.SUBSTYLE;DataRendererBaseElement._StyleTypes.OverSkinClass=StyleableBase.EStyleType.NORMAL;DataRendererBaseElement._StyleTypes.OverSkinStyle=StyleableBase.EStyleType.SUBSTYLE;DataRendererBaseElement._StyleTypes.SelectedSkinClass=StyleableBase.EStyleType.NORMAL;DataRendererBaseElement._StyleTypes.SelectedSkinStyle=StyleableBase.EStyleType.SUBSTYLE;DataRendererBaseElement._StyleTypes.Selectable=StyleableBase.EStyleType.NORMAL;
DataRendererBaseElement.StyleDefault=new StyleDefinition;DataRendererBaseElement.OverSkinStyleDefault=new StyleDefinition;DataRendererBaseElement.OverSkinStyleDefault.setStyle("BackgroundFill","#E0E0E0");DataRendererBaseElement.SelectedSkinStyleDefault=new StyleDefinition;DataRendererBaseElement.SelectedSkinStyleDefault.setStyle("BackgroundFill","#CDCDCD");DataRendererBaseElement.StyleDefault.setStyle("Selectable",!0);DataRendererBaseElement.StyleDefault.setStyle("SkinClass",CanvasElement);
DataRendererBaseElement.StyleDefault.setStyle("UpSkinClass",CanvasElement);DataRendererBaseElement.StyleDefault.setStyle("AltSkinClass",CanvasElement);DataRendererBaseElement.StyleDefault.setStyle("OverSkinClass",CanvasElement);DataRendererBaseElement.StyleDefault.setStyle("SelectedSkinClass",CanvasElement);DataRendererBaseElement.StyleDefault.setStyle("UpSkinStyle",null);DataRendererBaseElement.StyleDefault.setStyle("AltSkinStyle",null);
DataRendererBaseElement.StyleDefault.setStyle("OverSkinStyle",DataRendererBaseElement.OverSkinStyleDefault);DataRendererBaseElement.StyleDefault.setStyle("SelectedSkinStyle",DataRendererBaseElement.SelectedSkinStyleDefault);DataRendererBaseElement.prototype._updateState=function(){var a;a=1==this._listSelected?"selected":1==this._mouseIsOver&&1==this.getStyle("Selectable")?"over":null==this._listData||0==this._listData._itemIndex%2?"up":"alt";this.setStyle("SkinState",a)};
DataRendererBaseElement.prototype._getSkinClass=function(a){var b=null;"up"==a?b=this.getStyleData("UpSkinClass"):"alt"==a?b=this.getStyleData("AltSkinClass"):"over"==a?b=this.getStyleData("OverSkinClass"):"selected"==a&&(b=this.getStyleData("SelectedSkinClass"));a=this.getStyleData("SkinClass");return null==b||0<a.comparePriority(b)?a.value:b.value};
DataRendererBaseElement.prototype._getSubStyleNameForSkinState=function(a){return"up"==a?"UpSkinStyle":"alt"==a?"AltSkinStyle":"over"==a?"OverSkinStyle":"selected"==a?"SelectedSkinStyle":DataRendererBaseElement.base.prototype._getSubStyleNameForSkinState.call(this,a)};DataRendererBaseElement.prototype._onDataRendererRollover=function(a){this._updateState()};DataRendererBaseElement.prototype._onDataRendererRollout=function(a){this._updateState()};
DataRendererBaseElement.prototype._setListSelected=function(a){DataRendererBaseElement.base.prototype._setListSelected.call(this,a);this._updateState()};DataRendererBaseElement.prototype._setListData=function(a,b){DataRendererBaseElement.base.prototype._setListData.call(this,a,b);this._updateState()};
DataRendererBaseElement.prototype._doStylesUpdated=function(a){DataRendererBaseElement.base.prototype._doStylesUpdated.call(this,a);("SkinClass"in a||"UpSkinClass"in a)&&this._updateSkinClass("up");"UpSkinStyle"in a&&this._updateSkinStyleDefinitions("up");("SkinClass"in a||"AltSkinClass"in a)&&this._updateSkinClass("alt");"AltSkinStyle"in a&&this._updateSkinStyleDefinitions("alt");("SkinClass"in a||"OverSkinClass"in a)&&this._updateSkinClass("over");"OverSkinStyle"in a&&this._updateSkinStyleDefinitions("over");
("SkinClass"in a||"SelectedSkinClass"in a)&&this._updateSkinClass("selected");"SelectedSkinStyle"in a&&this._updateSkinStyleDefinitions("selected");"Selectable"in a&&this._updateState()};function DataRendererLabelElement(){DataRendererLabelElement.base.prototype.constructor.call(this);this._labelElement=new LabelElement;this._labelElement.setStyle("Padding",0);this._addChild(this._labelElement)}DataRendererLabelElement.prototype=Object.create(DataRendererBaseElement.prototype);
DataRendererLabelElement.prototype.constructor=DataRendererLabelElement;DataRendererLabelElement.base=DataRendererBaseElement;DataRendererLabelElement._StyleTypes=Object.create(null);DataRendererLabelElement._StyleTypes.UpTextColor=StyleableBase.EStyleType.NORMAL;DataRendererLabelElement._StyleTypes.AltTextColor=StyleableBase.EStyleType.NORMAL;DataRendererLabelElement._StyleTypes.OverTextColor=StyleableBase.EStyleType.NORMAL;DataRendererLabelElement._StyleTypes.SelectedTextColor=StyleableBase.EStyleType.NORMAL;
DataRendererLabelElement.StyleDefault=new StyleDefinition;DataRendererLabelElement.StyleDefault.setStyle("PaddingTop",4);DataRendererLabelElement.StyleDefault.setStyle("PaddingBottom",4);DataRendererLabelElement.StyleDefault.setStyle("PaddingLeft",4);DataRendererLabelElement.StyleDefault.setStyle("PaddingRight",4);DataRendererLabelElement.StyleDefault.setStyle("UpTextColor","#000000");DataRendererLabelElement.StyleDefault.setStyle("AltTextColor","#000000");
DataRendererLabelElement.StyleDefault.setStyle("OverTextColor","#000000");DataRendererLabelElement.StyleDefault.setStyle("SelectedTextColor","#000000");DataRendererLabelElement.prototype._changeState=function(a){DataRendererLabelElement.base.prototype._changeState.call(this,a);this._updateLabelTextColor()};
DataRendererLabelElement.prototype._getTextColor=function(a){var b=null;"up"==a?b=this.getStyleData("UpTextColor"):"alt"==a?b=this.getStyleData("AltTextColor"):"over"==a?b=this.getStyleData("OverTextColor"):"selected"==a&&(b=this.getStyleData("SelectedTextColor"));a=this.getStyleData("TextColor");return null==b||0<a.comparePriority(b)?a.value:b.value};
DataRendererLabelElement.prototype._updateLabelTextColor=function(){var a=this._getTextColor(this._currentSkinState);null!=a&&this._labelElement.setStyle("TextColor",a)};DataRendererLabelElement.prototype._updateLabelText=function(){if(null==this._itemData)this._labelElement.setStyle("Text","");else{var a=this._listData._parentList.getStyle("ItemLabelFunction");this._labelElement.setStyle("Text",a(this._itemData))}};
DataRendererLabelElement.prototype._setListData=function(a,b){DataRendererLabelElement.base.prototype._setListData.call(this,a,b);this._updateLabelText()};DataRendererLabelElement.prototype._doStylesUpdated=function(a){DataRendererLabelElement.base.prototype._doStylesUpdated.call(this,a);this._updateLabelTextColor()};DataRendererLabelElement.prototype._doMeasure=function(a,b){return{width:this._labelElement._getStyledOrMeasuredWidth()+a,height:this._labelElement._getStyledOrMeasuredHeight()+b}};
DataRendererLabelElement.prototype._doLayout=function(a){DataRendererLabelElement.base.prototype._doLayout.call(this,a);this._labelElement._setActualPosition(a.getX(),a.getY());this._labelElement._setActualSize(a.getWidth(),a.getHeight())};
function DataListElement(){DataListElement.base.prototype.constructor.call(this);this._listCollection=null;this._contentSize=0;this._scrollBar=null;this._scrollIndex=0;this._selectedIndex=-1;this._selectedItem=null;this._contentPane=new CanvasElement;this._contentPane.setStyle("ClipContent",!0);this._addChild(this._contentPane);var a=this;this._onDataListCollectionChangedInstance=function(b){a._onDataListCollectionChanged(b)};this._onDataListScrollBarChangedInstance=function(b){a._onDataListScrollBarChanged(b)};
this._onDataListMouseWheelEventInstance=function(b){a._onDataListMouseWheelEvent(b)};this._onDataListRendererClickInstance=function(b){a._onDataListRendererClick(b)};this._onContentPaneMeasureCompleteInstance=function(b){a._onContentPaneMeasureComplete(b)};this.addEventListener("wheel",this._onDataListMouseWheelEventInstance);this._contentPane.addEventListener("measurecomplete",this._onContentPaneMeasureCompleteInstance)}DataListElement.prototype=Object.create(CanvasElement.prototype);
DataListElement.prototype.constructor=DataListElement;DataListElement.base=CanvasElement;DataListElement.DefaultItemLabelFunction=function(a){return null==a?"":"string"===typeof a||a instanceof String?a:"label"in a?a.label:a.toString()};DataListElement._StyleTypes=Object.create(null);DataListElement._StyleTypes.LayoutDirection=StyleableBase.EStyleType.NORMAL;DataListElement._StyleTypes.LayoutGap=StyleableBase.EStyleType.NORMAL;DataListElement._StyleTypes.LayoutVerticalAlign=StyleableBase.EStyleType.NORMAL;
DataListElement._StyleTypes.LayoutHorizontalAlign=StyleableBase.EStyleType.NORMAL;DataListElement._StyleTypes.Selectable=StyleableBase.EStyleType.NORMAL;DataListElement._StyleTypes.ScrollBarDisplay=StyleableBase.EStyleType.NORMAL;DataListElement._StyleTypes.ScrollBarPlacement=StyleableBase.EStyleType.NORMAL;DataListElement._StyleTypes.ScrollBarStyle=StyleableBase.EStyleType.SUBSTYLE;DataListElement._StyleTypes.ItemLabelFunction=StyleableBase.EStyleType.NORMAL;
DataListElement._StyleTypes.ListItemClass=StyleableBase.EStyleType.NORMAL;DataListElement._StyleTypes.ListItemStyle=StyleableBase.EStyleType.SUBSTYLE;DataListElement.StyleDefault=new StyleDefinition;DataListElement.StyleDefault.setStyle("LayoutDirection","vertical");DataListElement.StyleDefault.setStyle("LayoutVerticalAlign","top");DataListElement.StyleDefault.setStyle("LayoutHorizontalAlign","left");DataListElement.StyleDefault.setStyle("LayoutGap",0);
DataListElement.StyleDefault.setStyle("ItemLabelFunction",DataListElement.DefaultItemLabelFunction);DataListElement.StyleDefault.setStyle("ListItemClass",DataRendererLabelElement);DataListElement.StyleDefault.setStyle("ListItemStyle",null);DataListElement.StyleDefault.setStyle("Selectable",!0);DataListElement.StyleDefault.setStyle("ScrollBarDisplay","auto");DataListElement.StyleDefault.setStyle("ScrollBarPlacement","right");DataListElement.StyleDefault.setStyle("ScrollBarStyle",null);
DataListElement._DataRendererProxyMap=Object.create(null);DataListElement._DataRendererProxyMap.Selectable=!0;DataListElement._DataRendererProxyMap._Arbitrary=!0;
DataListElement.prototype.setSelectedIndex=function(a){if(this._selectedIndex==a||a>this._listCollection.length-1)return!1;-1>a&&(a=-1);var b=this._selectedIndex;this._selectedIndex=a;this._selectedItem=this._listCollection.getItemAt(a);if(0<this._contentPane._children.length){var c=this._contentPane._children[0]._listData._itemIndex,d=this._contentPane._children[this._contentPane._children.length-1]._listData._itemIndex;null!=a&&a>=c&&a<=d&&this._contentPane._children[a-c]._setListSelected(!0);null!=
b&&b>=c&&b<=d&&this._contentPane._children[b-c]._setListSelected(!1)}return!0};DataListElement.prototype.getSelectedIndex=function(){return this._selectedIndex};DataListElement.prototype.setSelectedItem=function(a){a=this._listCollection.getItemIndex(a);this.setSelectedIndex(a)};DataListElement.prototype.getSelectedItem=function(){return this._selectedItem};
DataListElement.prototype.setScrollIndex=function(a){a=CanvasElement.roundToPrecision(a,3);this._invalidateLayout();if(0==this._contentPane._children.length||null==this._listCollection)for(this._scrollIndex=0;0<this._contentPane._children.length;)this._contentPane._removeChildAt(0);else{a>=this._listCollection.getLength()&&(a=this._listCollection.getLength()-1);0>a&&(a=0);this._scrollIndex=a;a=Math.floor(a);var b=this._contentPane._children[0]._listData._itemIndex;if(a==b-1)b=this._contentPane._children[this._contentPane._children.length-
1],this._contentPane._setChildIndex(b,0),this._updateRendererData(b,a);else if(a==b+1)this._listCollection.getLength()>=a+this._contentPane._children.length?(b=this._contentPane._children[0],this._contentPane._setChildIndex(b,this._contentPane._children.length-1),this._updateRendererData(b,a+this._contentPane._children.length-1)):this._contentPane._removeChildAt(0);else for(var c=0;c<this._contentPane._children.length;c++)if(this._listCollection.getLength()>a+c)b=this._contentPane._children[c],this._updateRendererData(b,
a+c);else for(;this._contentPane._children.length>c;)this._contentPane._removeChildAt(c)}};
DataListElement.prototype.setListCollection=function(a){this._listCollection!=a&&(null==this._manager?this._listCollection=a:(null!=this._listCollection&&this._listCollection.removeEventListener("collectionchanged",this._onDataListCollectionChangedInstance),this._listCollection=a,null!=this._listCollection&&this._listCollection.addEventListener("collectionchanged",this._onDataListCollectionChangedInstance)),null==this._listCollection?(this._selectedIndex=-1,this._selectedItem=null):null!=this._selectedItem&&
(this._selectedIndex=this._listCollection.getItemIndex(this._selectedItem),-1==this._selectedIndex&&(this._selectedItem=null)),this.setScrollIndex(this._scrollIndex),this._invalidateLayout())};DataListElement.prototype.getListCollection=function(){return this._listCollection};DataListElement.prototype._getContentSize=function(){var a=this._getPaddingSize();return"vertical"==this.getStyle("LayoutDirection")?this._contentSize+a.height:this._contentSize+a.width};
DataListElement.prototype._onContentPaneMeasureComplete=function(a){this._invalidateMeasure();this._invalidateLayout()};DataListElement.prototype._getNumRenderers=function(){return this._contentPane._children.length};
DataListElement.prototype._onDataListMouseWheelEvent=function(a){if(1!=a.getDefaultPrevented()&&0!=this._contentPane._children.length&&0!=this._listCollection.getLength()){var b;b=this.getStyle("LayoutDirection");var c=!1,d=!1,e=this._contentPane._children[0],f=this._contentPane._children[this._contentPane._children.length-1];if("horizontal"==b){b=a.getDeltaX();if(0==b)return;0==e._listData._itemIndex&&0<=e._x&&(c=!0);if(1==c&&0>b)return;f._listData._itemIndex==this._listCollection.getLength()-1&&
f._x<=this._contentPane._width-f._width&&(d=!0)}else{b=a.getDeltaY();if(0==b)return;0==e._listData._itemIndex&&0<=e._y&&(c=!0);if(1==c&&0>b)return;f._listData._itemIndex==this._listCollection.getLength()-1&&f._y<=this._contentPane._height-f._height&&(d=!0)}1==d&&0<b||(null!=this._scrollBar?(c=this._scrollBar.getTweenToValue(),null==c&&(c=this._scrollIndex),this._scrollBar.startScrollTween(c+b)):this.setScrollIndex(this._scrollIndex+b),a.preventDefault())}};
DataListElement.prototype._onDataListScrollBarChanged=function(a){a=CanvasElement.roundToPrecision(this._scrollBar.getScrollValue(),3);var b=CanvasElement.roundToPrecision(this._scrollBar.getScrollPageSize(),3),c=CanvasElement.roundToPrecision(this._scrollBar.getScrollViewSize(),3);a==b-c&&1>a-this._scrollIndex&&(a=this._scrollIndex+1);this.setScrollIndex(a)};
DataListElement.prototype._onDataListCollectionChanged=function(a){var b=a.getKind();a=a.getIndex();this._invalidateLayout();if(0!=this._contentPane._children.length)if("reset"==b)null!=this._selectedItem&&(this._selectedIndex=this._listCollection.getItemIndex(this._selectedItem),-1==this._selectedIndex&&(this._selectedItem=null)),this.setScrollIndex(this._scrollIndex);else{var c=0,d=0;0<this._contentPane._children.length&&(c=this._contentPane._children[0]._listData._itemIndex,d=this._contentPane._children[this._contentPane._children.length-
1]._listData._itemIndex);this._selectedIndex==a&&"remove"==b&&(this._selectedIndex=-1,this._selectedItem=null);if(a<=d&&("add"==b||"remove"==b))if(a<=this._selectedIndex&&("add"==b?this._selectedIndex++:this._selectedIndex--),a<c)for(c="add"==b?1:-1,this._scrollIndex+=c,b=0;b<this._contentPane._children.length;b++)a=this._contentPane._children[b]._listData._itemIndex+c,this._updateRendererData(this._contentPane._children[b],a);else for("add"==b?(b=this._createRenderer(a),this._contentPane._addChildAt(b,
a-c),a++):this._contentPane._removeChildAt(a-c),b=a-c;b<this._contentPane._children.length;b++)this._updateRendererData(this._contentPane._children[b],a),a++;else"update"==b&&a>=c&&a<=d&&this._updateRendererData(this._contentPane._children[a-c],a)}};DataListElement.prototype._onCanvasElementAdded=function(a){DataListElement.base.prototype._onCanvasElementAdded.call(this,a);null!=this._listCollection&&this._listCollection.addEventListener("collectionchanged",this._onDataListCollectionChangedInstance)};
DataListElement.prototype._onCanvasElementRemoved=function(a){DataListElement.base.prototype._onCanvasElementRemoved.call(this,a);null!=this._listCollection&&this._listCollection.removeEventListener("collectionchanged",this._onDataListCollectionChangedInstance)};DataListElement.prototype._invalidateListRenderersLayout=function(){for(var a=0;a<this._contentPane._children.length;a++)this._contentPane._children[a]._invalidateLayout()};
DataListElement.prototype._invalidateListRenderersMeasure=function(){for(var a=0;a<this._contentPane._children.length;a++)this._contentPane._children[a]._invalidateMeasure()};
DataListElement.prototype._doStylesUpdated=function(a){DataListElement.base.prototype._doStylesUpdated.call(this,a);if("ListItemClass"in a&&0<this._contentPane._children.length&&this._contentPane._children[0].constructor!=this.getStyle("ListItemClass")){for(;0<this._contentPane._children.length;)this._contentPane._removeChildAt(0);this._invalidateLayout()}if("ListItemStyle"in a){for(var b=0;b<this._contentPane._children.length;b++)this._applySubStylesToElement("ListItemStyle",this._contentPane._children[b]);
this._invalidateLayout()}"LayoutDirection"in a?(this._invalidateMeasure(),this._invalidateLayout()):("ScrollBarPlacement"in a||"ScrollBarDisplay"in a||"LayoutGap"in a||"LayoutHorizontalAlign"in a||"LayoutVerticalAlign"in a)&&this._invalidateLayout();"ScrollBarStyle"in a&&null!=this._scrollBar&&this._applySubStylesToElement("ScrollBarStyle",this._scrollBar);"ItemLabelFunction"in a&&this.setScrollIndex(this._scrollIndex)};
DataListElement.prototype._onDataListRendererClick=function(a){var b=a.getCurrentTarget()._listData._itemIndex,c=a.getCurrentTarget()._itemData,d=!1;a=a.getCurrentTarget().getStyle("Selectable");1!=this.getStyle("Selectable")||void 0!==a&&1!=a||1==this.setSelectedIndex(b)&&(d=!0);this._dispatchEvent(new ElementListItemClickEvent(c,b));1==d&&this._dispatchEvent(new ElementEvent("changed",!1))};
DataListElement.prototype._createRenderer=function(a){var b=new (this.getStyle("ListItemClass"));b._setStyleProxy(new StyleProxy(this,DataListElement._DataRendererProxyMap));this._applySubStylesToElement("ListItemStyle",b);this._updateRendererData(b,a);b.addEventListener("click",this._onDataListRendererClickInstance);return b};
DataListElement.prototype._updateRendererData=function(a,b){var c;c=null!=a._listData&&a._listData._itemIndex==b?a._listData:new DataListData(this,b);a._setListData(c,this._listCollection.getItemAt(b));this._selectedIndex==b?a._setListSelected(!0):a._setListSelected(!1)};DataListElement.prototype._doMeasure=function(a,b){return{width:16,height:16}};
DataListElement.prototype._doLayout=function(a){DataListElement.base.prototype._doLayout.call(this,a);var b=a.getX(),c=a.getY(),d=a.getWidth(),e=a.getHeight(),f,g;a=this.getStyle("LayoutDirection");var k=Math.floor(this._scrollIndex),l=0;null!=this._listCollection&&(l=this._listCollection.getLength());0==l?this._scrollIndex=k=0:k>l-1&&(this._scrollIndex=k=l-1);var h=0,n=0;this._contentSize=0;var p;for(g=0;g<this._contentPane._children.length;g++)if(f=this._contentPane._children[g],p="horizontal"==
a?f._getStyledOrMeasuredWidth():f._getStyledOrMeasuredHeight(),this._contentSize+=p,f._listData._itemIndex<=k&&(h=f._listData._itemIndex<k?h+p:h+p*(this._scrollIndex-k)),this._contentSize-h>=e)for(n=this._contentSize-h-e;this._contentPane._children.length-1>g;)this._contentPane._removeChildAt(this._contentPane._children.length-1);0<this._contentPane._children.length&&this._contentPane._children[0]._listData._itemIndex<k&&(h+=n,n=0,k=this._contentPane._children[0]._listData._itemIndex,p="horizontal"==
a?this._contentPane._children[0]._getStyledOrMeasuredWidth():this._contentPane._children[0]._getStyledOrMeasuredHeight(),this._scrollIndex=0!=p?k+h/p:k,this._scrollIndex=CanvasElement.roundToPrecision(this._scrollIndex,3));if(this._contentSize-h-n<e){if(k+this._contentPane._children.length<l){a=this._createRenderer(k+this._contentPane._children.length);this._contentPane._addChild(a);this._invalidateLayout();return}f=e-(this._contentSize-h-n);if(h>=f)h-=f,"horizontal"==a?(p=this._contentPane._children[0]._getStyledOrMeasuredWidth(),
this._scrollIndex=0!=p?k+h/p:k):(p=this._contentPane._children[0]._getStyledOrMeasuredHeight(),this._scrollIndex=0!=p?k+h/this._contentPane._children[0]._getStyledOrMeasuredHeight():k),this._scrollIndex=CanvasElement.roundToPrecision(this._scrollIndex,3);else if(0<h&&l==this._contentPane._children.length)this._scrollIndex=h=0;else if(l>this._contentPane._children.length){a=this._createRenderer(k-1);this._contentPane._addChildAt(a,0);this._invalidateLayout();return}}f=!1;g=this.getStyle("ScrollBarDisplay");
if("on"==g||"auto"==g&&0<e&&(this._contentSize>e||this._contentPane._children.length<l))f=!0;if(1==f&&null==this._scrollBar)this._scrollBar=new ScrollBarElement,this._applySubStylesToElement("ScrollBarStyle",this._scrollBar),this._scrollBar.setScrollLineSize(1),this._scrollBar.addEventListener("changed",this._onDataListScrollBarChangedInstance),this._addChild(this._scrollBar);else if(0==f&&null!=this._scrollBar)this._removeChild(this._scrollBar),this._scrollBar=null;else{null!=this._scrollBar?(this._scrollBar.setStyle("LayoutDirection",
a),f=this.getStyle("ScrollBarPlacement"),"horizontal"==a?(this._scrollBar._setActualSize(d,this._scrollBar._getStyledOrMeasuredHeight()),this._contentPane._setActualSize(d,e-this._scrollBar._height),"top"==f||"left"==f?(this._contentPane._setActualPosition(b,c+this._scrollBar._height),this._scrollBar._setActualPosition(b,c)):(this._contentPane._setActualPosition(b,c),this._scrollBar._setActualPosition(b,c+this._contentPane._height))):(this._scrollBar._setActualSize(this._scrollBar._getStyledOrMeasuredWidth(),
e),this._contentPane._setActualSize(d-this._scrollBar._width,e),"top"==f||"left"==f?(this._scrollBar._setActualPosition(b,c),this._contentPane._setActualPosition(b+this._scrollBar._width,c)):(this._scrollBar._setActualPosition(b+this._contentPane._width,c),this._contentPane._setActualPosition(b,c)))):(this._contentPane._setActualPosition(b,c),this._contentPane._setActualSize(d,e));b=-1*h;this._contentSize<e&&(b="horizontal"==a?this.getStyle("LayoutHorizontalAlign"):this.getStyle("LayoutVerticalAlign"),
b="top"==b||"left"==b?0:"center"==b||"middle"==b?e/2-this._contentSize/2:e-this._contentSize);for(g=0;g<this._contentPane._children.length;g++)f=this._contentPane._children[g],"horizontal"==a?(f._setActualSize(f._getStyledOrMeasuredWidth(),this._contentPane._height),f._setActualPosition(b,0),b+=f._width):(f._setActualSize(this._contentPane._width,f._getStyledOrMeasuredHeight()),f._setActualPosition(0,b),b+=f._height);if(null!=this._scrollBar){if(e=this._contentPane._children.length)"horizontal"==
a?(0!=this._contentPane._children[0]._width&&(e-=h/this._contentPane._children[0]._width),0!=this._contentPane._children[this._contentPane._children.length-1]._width&&(e-=n/this._contentPane._children[this._contentPane._children.length-1]._width)):(0!=this._contentPane._children[0]._height&&(e-=h/this._contentPane._children[0]._height),0!=this._contentPane._children[this._contentPane._children.length-1]._height&&(e-=n/this._contentPane._children[this._contentPane._children.length-1]._height));this._scrollBar.setScrollPageSize(l);
this._scrollBar.setScrollViewSize(e);CanvasElement.roundToPrecision(this._scrollBar.getScrollValue(),3)!=this._scrollIndex&&(this._scrollBar.endScrollTween(),this._scrollBar.setScrollValue(this._scrollIndex))}}};function DataGridItemRendererBase(){DataGridItemRendererBase.base.prototype.constructor.call(this)}DataGridItemRendererBase.prototype=Object.create(DataRendererBaseElement.prototype);DataGridItemRendererBase.prototype.constructor=DataGridItemRendererBase;DataGridItemRendererBase.base=DataRendererBaseElement;
DataGridItemRendererBase.UpSkinStyleDefault=new StyleDefinition;DataGridItemRendererBase.UpSkinStyleDefault.setStyle("BackgroundFill","#FFFFFF");DataGridItemRendererBase.AltSkinStyleDefault=new StyleDefinition;DataGridItemRendererBase.AltSkinStyleDefault.setStyle("BackgroundFill","#F0F0F0");DataGridItemRendererBase.StyleDefault=new StyleDefinition;DataGridItemRendererBase.StyleDefault.setStyle("UpSkinStyle",DataGridItemRendererBase.UpSkinStyleDefault);
DataGridItemRendererBase.StyleDefault.setStyle("AltSkinStyle",DataGridItemRendererBase.AltSkinStyleDefault);DataGridItemRendererBase.prototype._updateState=function(){DataGridItemRendererBase.base.prototype._updateState.call(this);newState=null!=this._listSelected&&1==this._listSelected.selected?"selected":null!=this._listSelected&&1==this._listSelected.highlight?"over":null==this._listData||0==this._listData._itemIndex%2?"up":"alt";this.setStyle("SkinState",newState)};
function DataGridLabelItemRenderer(){DataGridLabelItemRenderer.base.prototype.constructor.call(this);this._labelElement=new LabelElement;this._labelElement.setStyle("Padding",0);this._addChild(this._labelElement)}DataGridLabelItemRenderer.prototype=Object.create(DataGridItemRendererBase.prototype);DataGridLabelItemRenderer.prototype.constructor=DataGridLabelItemRenderer;DataGridLabelItemRenderer.base=DataGridItemRendererBase;DataGridLabelItemRenderer._StyleTypes=Object.create(null);
DataGridLabelItemRenderer._StyleTypes.UpTextColor=StyleableBase.EStyleType.NORMAL;DataGridLabelItemRenderer._StyleTypes.AltTextColor=StyleableBase.EStyleType.NORMAL;DataGridLabelItemRenderer._StyleTypes.OverTextColor=StyleableBase.EStyleType.NORMAL;DataGridLabelItemRenderer._StyleTypes.SelectedTextColor=StyleableBase.EStyleType.NORMAL;DataGridLabelItemRenderer.StyleDefault=new StyleDefinition;DataGridLabelItemRenderer.StyleDefault.setStyle("PaddingTop",4);
DataGridLabelItemRenderer.StyleDefault.setStyle("PaddingBottom",4);DataGridLabelItemRenderer.StyleDefault.setStyle("PaddingLeft",4);DataGridLabelItemRenderer.StyleDefault.setStyle("PaddingRight",4);DataGridLabelItemRenderer.StyleDefault.setStyle("UpTextColor","#000000");DataGridLabelItemRenderer.StyleDefault.setStyle("AltTextColor","#000000");DataGridLabelItemRenderer.StyleDefault.setStyle("OverTextColor","#000000");DataGridLabelItemRenderer.StyleDefault.setStyle("SelectedTextColor","#000000");
DataGridLabelItemRenderer.prototype._changeState=function(a){DataGridLabelItemRenderer.base.prototype._changeState.call(this,a);this._updateLabelTextColor()};
DataGridLabelItemRenderer.prototype._getTextColor=function(a){var b=null;"up"==a?b=this.getStyleData("UpTextColor"):"alt"==a?b=this.getStyleData("AltTextColor"):"over"==a?b=this.getStyleData("OverTextColor"):"selected"==a&&(b=this.getStyleData("SelectedTextColor"));a=this.getStyleData("TextColor");return null==b||0<a.comparePriority(b)?a.value:b.value};
DataGridLabelItemRenderer.prototype._updateLabelTextColor=function(){var a=this._getTextColor(this._currentSkinState);null!=a&&this._labelElement.setStyle("TextColor",a)};DataGridLabelItemRenderer.prototype._updateLabelText=function(){if(null==this._itemData||null==this._listData)this._labelElement.setStyle("Text","");else{var a=this._listData._parentGrid._gridColumns[this._listData._columnIndex].getStyle("RowItemLabelFunction");this._labelElement.setStyle("Text",a(this._itemData,this._listData._columnIndex))}};
DataGridLabelItemRenderer.prototype._setListData=function(a,b){DataGridLabelItemRenderer.base.prototype._setListData.call(this,a,b);this._updateLabelText()};DataGridLabelItemRenderer.prototype._doStylesUpdated=function(a){DataGridLabelItemRenderer.base.prototype._doStylesUpdated.call(this,a);this._updateLabelTextColor()};
DataGridLabelItemRenderer.prototype._doMeasure=function(a,b){return{width:this._labelElement._getStyledOrMeasuredWidth()+a,height:this._labelElement._getStyledOrMeasuredHeight()+b}};DataGridLabelItemRenderer.prototype._doLayout=function(a){DataGridLabelItemRenderer.base.prototype._doLayout.call(this,a);this._labelElement._setActualPosition(a.getX(),a.getY());this._labelElement._setActualSize(a.getWidth(),a.getHeight())};
function DataGridDataRenderer(){DataGridDataRenderer.base.prototype.constructor.call(this);this._itemRenderersContainer=new CanvasElement;this._addChild(this._itemRenderersContainer);var a=this;this._onItemRenderersContainerMeasureCompleteInstance=function(b){a.__onItemRenderersContainerMeasureComplete(b)};this._itemRenderersContainer.addEventListener("measurecomplete",this._onItemRenderersContainerMeasureCompleteInstance)}DataGridDataRenderer.prototype=Object.create(CanvasElement.prototype);
DataGridDataRenderer.prototype.constructor=DataGridDataRenderer;DataGridDataRenderer.base=CanvasElement;DataGridDataRenderer.prototype.__onItemRenderersContainerMeasureComplete=function(a){this._invalidateMeasure();this._invalidateLayout()};
DataGridDataRenderer.prototype._setListData=function(a,b){DataGridDataRenderer.base.prototype._setListData.call(this,a,b);for(var c,d=0;d<a._parentList._gridColumns.length;d++)c=this._itemRenderersContainer._getChildAt(d),null==c?(c=a._parentList._createRowItemRenderer(a._itemIndex,d),this._itemRenderersContainer._addChildAt(c,d)):(columnDef=a._parentList._gridColumns[d],c.constructor!=columnDef.getStyle("RowItemClass")?(this._itemRenderersContainer._removeChildAt(d),c=a._parentList._createRowItemRenderer(a._itemIndex,
d),this._itemRenderersContainer._addChildAt(c,d)):a._parentList._updateRowItemRendererData(c,a._itemIndex,d));for(;this._itemRenderersContainer._children.length>this._listData._parentList._gridColumns.length;)this._itemRenderersContainer._removeChildAt(this._itemRenderersContainer._children.length-1)};
DataGridDataRenderer.prototype._setListSelected=function(a){DataGridDataRenderer.base.prototype._setListSelected.call(this,a);var b,c,d,e,f;c=null;0<=a.columnOverIndex&&a.columnOverIndex<this._listData._parentList._gridColumns.length&&(c=this._listData._parentList._gridColumns[a.columnOverIndex]);var g=null;null!=c&&(g=c.getStyle("SelectionType"));for(var k=0;k<this._itemRenderersContainer._children.length;k++)b=this._listData._parentList._gridColumns[k],c=b.getStyle("SelectionType"),d=b.getStyle("Selectable"),
b=b.getStyle("Highlightable"),e=this._itemRenderersContainer._getChildAt(k),f=e._listSelected,null==f?f={highlight:!1,selected:!1}:(f.highlight=!1,f.selected=!1),1==d&&("row"==c&&a.rowIndex==this._listData._itemIndex&&-1==a.columnIndex||"column"==c&&k==a.columnIndex||"cell"==c&&k==a.columnIndex&&this._listData._itemIndex==a.rowIndex)&&(f.selected=!0),1==b&&("row"==c&&a.rowOverIndex==this._listData._itemIndex&&"row"==g||"column"==c&&k==a.columnOverIndex||"cell"==c&&k==a.columnOverIndex&&this._listData._itemIndex==
a.rowOverIndex)&&(f.highlight=!0),e._setListSelected(f)};DataGridDataRenderer.prototype._doMeasure=function(a,b){for(var c={width:0,height:0},d,e=0;e<this._itemRenderersContainer._children.length;e++)d=this._itemRenderersContainer._children[e]._getStyledOrMeasuredHeight(),c.height<d&&(c.height=d),c.width+=this._itemRenderersContainer._children[e]._getStyledOrMeasuredWidth();c.width+=a;c.height+=b;return c};
DataGridDataRenderer.prototype._doLayout=function(a){DataGridDataRenderer.base.prototype._doLayout.call(this,a);if(null!=this._listData){this._itemRenderersContainer._setActualPosition(a.getX(),a.getY());this._itemRenderersContainer._setActualSize(a.getWidth(),a.getHeight());a=this._listData._parentList;for(var b,c=0,d,e=this._getPaddingSize(),f=0;f<a._columnSizes.length;f++)b=this._itemRenderersContainer._children[f],d=a._columnSizes[f],0==f?d-=e.paddingLeft:f==a._columnSizes.length-1&&(d=this._itemRenderersContainer._width-
c),b._setActualPosition(c,0),b._setActualSize(d,this._itemRenderersContainer._height),c+=d}};function ContainerBaseElement(){ContainerBaseElement.base.prototype.constructor.call(this);this._elements=[];this._overlayChildren=[]}ContainerBaseElement.prototype=Object.create(CanvasElement.prototype);ContainerBaseElement.prototype.constructor=ContainerBaseElement;ContainerBaseElement.base=CanvasElement;ContainerBaseElement.StyleDefault=new StyleDefinition;
ContainerBaseElement.StyleDefault.setStyle("ClipContent",!0);ContainerBaseElement.prototype.addElement=function(a){return this.addElementAt(a,this._elements.length)};ContainerBaseElement.prototype.addElementAt=function(a,b){if(!(a instanceof CanvasElement)||0>b||b>this._elements.length)return null;var c=this._children.length-this._overlayChildren.length-this._elements.length+b;this._elements.splice(b,0,a);ContainerBaseElement.base.prototype._addChildAt.call(this,a,c);return a};
ContainerBaseElement.prototype.removeElement=function(a){a=this._elements.indexOf(a);return this.removeElementAt(a)};ContainerBaseElement.prototype.removeElementAt=function(a){if(0>a||a>=this._elements.length)return null;var b=this._children.length-this._overlayChildren.length-this._elements.length+a;this._elements.splice(a,1);return ContainerBaseElement.base.prototype._removeChildAt.call(this,b)};ContainerBaseElement.prototype.getElementAt=function(a){return 0>a||a>=this._elements.length?null:this._elements[a]};
ContainerBaseElement.prototype.getElementIndex=function(a){return this._elements.indexOf(a)};ContainerBaseElement.prototype.setElementIndex=function(a,b){if(0>b||b>=this._elements.length)return!1;var c=this._elements.indexOf(a);if(-1==c||c==b)return!1;var d=this._children.length-this._overlayChildren.length-this._elements.length+b;this._elements.splice(b,0,this._elements.splice(c,1)[0]);ContainerBaseElement.base.prototype._setChildIndex.call(this,a,d);return!0};
ContainerBaseElement.prototype.getNumElements=function(){return this._elements.length};ContainerBaseElement.prototype._addOverlayChild=function(a){return this._addOverlayChildAt(a,this._overlayChildren.length)};
ContainerBaseElement.prototype._addOverlayChildAt=function(a,b){if(!(a instanceof CanvasElement)||0>b||b>this._overlayChildren.length)return null;var c=this._children.length-this._overlayChildren.length+b;this._overlayChildren.splice(b,0,a);ContainerBaseElement.base.prototype._addChildAt.call(this,a,c);return a};ContainerBaseElement.prototype._removeOverlayChild=function(a){a=this._overlayChildren.indexOf(a);return this._removeOverlayChildAt(a)};
ContainerBaseElement.prototype._removeOverlayChildAt=function(a){if(0>a||a>=this._overlayChildren.length)return null;var b=this._children.length-this._overlayChildren.length+a;this._overlayChildren.splice(a,1);return ContainerBaseElement.base.prototype._removeChildAt.call(this,b)};ContainerBaseElement.prototype._getOverlayChildAt=function(a){return 0>a||a>=this._overlayChildren.length?null:this._overlayChildren[a]};ContainerBaseElement.prototype._getOverlayChildIndex=function(a){return this._overlayChildren.indexOf(a)};
ContainerBaseElement.prototype._setOverlayChildIndex=function(a,b){if(0>b||b>=this._overlayChildren.length)return!1;var c=this._overlayChildren.indexOf(a);if(0>c||c==b)return!1;var d=this._children.length-this._overlayChildren.length+b;this._overlayChildren.splice(b,0,this._overlayChildren.splice(c,1)[0]);ContainerBaseElement.base.prototype._setChildIndex.call(this,a,d);return!0};ContainerBaseElement.prototype._getNumOverlayChildren=function(){return this._overlayChildren.length};
ContainerBaseElement.prototype._addChild=function(a){return ContainerBaseElement.base.prototype._addChildAt.call(this,a,this._children.length-this._elements.length-this._overlayChildren.length)};ContainerBaseElement.prototype._addChildAt=function(a,b){var c=this._children.length-this._elements.length-this._overlayChildren.length;return 0>b||b>c?null:ContainerBaseElement.base.prototype._addChildAt.call(this,a,b)};
ContainerBaseElement.prototype._removeChildAt=function(a){if(0>a||a>=this._children.length)return null;var b=this._children.splice(a,1)[0],c=this._elements.indexOf(b);if(0<=c)return this.removeElementAt(c);c=this._overlayChildren.indexOf(b);return 0<=c?this._removeOverlayChildAt(c):ContainerBaseElement.base.prototype._removeChildAt.call(this,a)};
ContainerBaseElement.prototype._setChildIndex=function(a,b){var c=this._children.length-this._elements.length-this._overlayChildren.length;if(0>b||b>=c)return!1;var d=this._getChildIndex(a);return 0>d||d>=c||d==b?!1:ContainerBaseElement.base.prototype._setChildIndex.call(this,a,b)};function ListContainerElement(){ListContainerElement.base.prototype.constructor.call(this)}ListContainerElement.prototype=Object.create(ContainerBaseElement.prototype);ListContainerElement.prototype.constructor=ListContainerElement;
ListContainerElement.base=ContainerBaseElement;ListContainerElement._StyleTypes=Object.create(null);ListContainerElement._StyleTypes.LayoutDirection=StyleableBase.EStyleType.NORMAL;ListContainerElement._StyleTypes.LayoutGap=StyleableBase.EStyleType.NORMAL;ListContainerElement._StyleTypes.LayoutVerticalAlign=StyleableBase.EStyleType.NORMAL;ListContainerElement._StyleTypes.LayoutHorizontalAlign=StyleableBase.EStyleType.NORMAL;ListContainerElement.StyleDefault=new StyleDefinition;
ListContainerElement.StyleDefault.setStyle("LayoutDirection","vertical");ListContainerElement.StyleDefault.setStyle("LayoutGap",0);ListContainerElement.StyleDefault.setStyle("LayoutVerticalAlign","top");ListContainerElement.StyleDefault.setStyle("LayoutHorizontalAlign","left");
ListContainerElement.prototype._doStylesUpdated=function(a){ListContainerElement.base.prototype._doStylesUpdated.call(this,a);"LayoutDirection"in a||"LayoutGap"in a?(this._invalidateMeasure(),this._invalidateLayout()):("LayoutVerticalAlign"in a||"LayoutHorizontalAlign"in a)&&this._invalidateLayout()};
ListContainerElement.prototype._doMeasure=function(a,b){for(var c={width:0,height:0},d=this.getStyle("LayoutGap"),e=this.getStyle("LayoutDirection"),f,g,k,l,h,n,p,m=!1,q=0;q<this._elements.length;q++)f=this._elements[q],0!=f.getStyle("IncludeInLayout")&&(l=f.getStyle("RotateDegrees"),g=f._getStyledOrMeasuredWidth(),k=f._getStyledOrMeasuredHeight(),0!=l&&(h=f._width,n=f._height,p=f._rotateDegrees,f._width=g,f._height=k,f._rotateDegrees=l,rotatedMetrics=f.getMetrics(this),f._width=h,f._height=n,f._rotateDegrees=
p,g=Math.ceil(rotatedMetrics.getWidth()),k=Math.ceil(rotatedMetrics.getHeight())),"horizontal"==e?(c.width+=g,k>c.height&&(c.height=k)):(c.height+=k,g>c.width&&(c.width=g)),1==m?"horizontal"==e?c.width+=d:c.height+=d:m=!0);c.width+=a;c.height+=b;return c};
ListContainerElement.prototype._doLayout=function(a){ListContainerElement.base.prototype._doLayout.call(this,a);var b=this.getStyle("LayoutGap"),c=this.getStyle("LayoutDirection"),d=this.getStyle("LayoutVerticalAlign"),e=this.getStyle("LayoutHorizontalAlign"),f=a.getX(),g=a.getY(),k=a.getWidth();a=a.getHeight();var l,h,n=[],p=0,m=0;for(l=0;l<this._elements.length;l++)if(h=this._elements[l],0!=h.getStyle("IncludeInLayout")){m++;var q={element:h,width:null,height:null,pWidth:null,pHeight:null,maxWidth:null,
maxHeight:null,minWidth:null,minHeight:null,rotateDegrees:null};q.rotateDegrees=h.getStyle("RotateDegrees");q.width=h.getStyle("Width");null==q.width&&(0==q.rotateDegrees&&(q.pWidth=h.getStyle("PercentWidth")),q.minWidth=h.getStyle("MinWidth"),q.maxWidth=h.getStyle("MaxWidth"),null!=q.pWidth&&"horizontal"==c&&(p+=q.pWidth));q.height=h.getStyle("Height");null==q.height&&(0==q.rotateDegrees&&(q.pHeight=h.getStyle("PercentHeight")),q.minHeight=h.getStyle("MinHeight"),q.maxHeight=h.getStyle("MaxHeight"),
null!=q.pHeight&&"vertical"==c&&(p+=q.pHeight));null==q.minWidth&&(q.minWidth=0);null==q.minHeight&&(q.minHeight=0);null==q.maxWidth&&(q.maxWidth=Number.MAX_VALUE);null==q.maxHeight&&(q.maxHeight=Number.MAX_VALUE);n.push(q)}q=0;1<m&&(q=(m-1)*b);var m="horizontal"==c?k-q:a-q,t,u=[];for(l=0;l<n.length;l++)h=n[l],h.element._setActualRotation(h.rotateDegrees,0,0),"horizontal"==c&&null==n[l].width&&null!=n[l].pWidth?(h.percentSize=h.pWidth,h.minSize=h.minWidth,h.maxSize=h.maxWidth,u.push(h),null==h.height&&
(h.height=null!=h.pHeight?Math.round(h.pHeight/100*a):h.element._measuredHeight,h.height=Math.min(h.maxHeight,h.height),h.height=Math.max(h.minHeight,h.height))):"vertical"==c&&null==n[l].height&&null!=n[l].pHeight?(h.percentSize=h.pHeight,h.minSize=h.minHeight,h.maxSize=h.maxHeight,u.push(h),null==h.width&&(h.width=null!=h.pWidth?Math.round(h.pWidth/100*k):h.element._measuredWidth,h.width=Math.min(h.maxWidth,h.width),h.width=Math.max(h.minWidth,h.width))):(null==h.width&&(h.width=null!=h.pWidth?
Math.round(h.pWidth/100*k):h.element._measuredWidth,h.width=Math.min(h.maxWidth,h.width),h.width=Math.max(h.minWidth,h.width)),null==h.height&&(h.height=null!=h.pHeight?Math.round(h.pHeight/100*a):h.element._measuredHeight,h.height=Math.min(h.maxHeight,h.height),h.height=Math.max(h.minHeight,h.height)),h.element._setActualSize(h.width,h.height),0!=h.rotateDegrees&&(t=h.element.getMetrics(this),h.width=Math.ceil(t.getWidth()),h.height=Math.ceil(t.getHeight())),m="horizontal"==c?m-h.width:m-h.height);
100>p&&(m=Math.round(p/100*m));CanvasElement._calculateMinMaxPercentSizes(u,m);for(l=0;l<u.length;l++)h=u[l],"horizontal"==c?h.width=h.actualSize:h.height=h.actualSize,h.element._setActualSize(h.width,h.height);h=q;for(l=0;l<n.length;l++)h="horizontal"==c?h+n[l].width:h+n[l].height;p=f;q=g;"horizontal"==c&&h!=k?"center"==e?p+=Math.round(k/2-h/2):"right"==e&&(p+=k-h):"vertical"==c&&h!=a&&("middle"==d?q+=Math.round(a/2-h/2):"bottom"==d&&(q+=a-h));m=!1;for(l=0;l<n.length;l++)h=n[l],"horizontal"==c?(1==
m?p+=b:m=!0,q="top"==d?g:"bottom"==d?g+a-h.height:Math.round(g+a/2-h.height/2),0==h.rotateDegees?h.element._setActualPosition(p,q):h.element._setRelativePosition(p,q,this),p+=h.width):(1==m?q+=b:m=!0,p="left"==e?f:"right"==e?f+k-h.width:Math.round(f+k/2-h.width/2),0==h.rotateDegrees?h.element._setActualPosition(p,q):h.element._setRelativePosition(p,q,this),q+=h.height)};
function ScrollBarElement(){ScrollBarElement.base.prototype.constructor.call(this);this._buttonTab=this._buttonTrack=this._buttonDecrement=this._buttonIncrement=null;this._trackAndTabContainer=new CanvasElement;this._trackAndTabContainer.setStyle("ClipContent",!1);this._trackAndTabContainer.setStyle("PercentWidth",100);this._trackAndTabContainer.setStyle("PercentHeight",100);this._trackAndTabContainer.setStyle("MinWidth",0);this._trackAndTabContainer.setStyle("MinHeight",0);this.addElement(this._trackAndTabContainer);
this._scrollViewSize=this._scrollPageSize=0;this._scrollLineSize=1;this._scrollValue=0;this._scrollTween=null;var a=this;this._onScrollButtonClickInstance=function(b){a._onScrollButtonClick(b)};this._onScrollTabDragInstance=function(b){a._onScrollTabDrag(b)};this._onScrollBarEnterFrameInstance=function(b){a._onScrollBarEnterFrame(b)};this._onTrackAndTabContainerMeasureCompleteInstance=function(b){a._onTrackAndTabContainerMeasureComplete(b)};this._trackAndTabContainer.addEventListener("measurecomplete",
this._onTrackAndTabContainerMeasureCompleteInstance)}ScrollBarElement.prototype=Object.create(ListContainerElement.prototype);ScrollBarElement.prototype.constructor=ScrollBarElement;ScrollBarElement.base=ListContainerElement;ScrollBarElement._StyleTypes=Object.create(null);ScrollBarElement._StyleTypes.ScrollTweenDuration=StyleableBase.EStyleType.NORMAL;ScrollBarElement._StyleTypes.ButtonIncrementStyle=StyleableBase.EStyleType.SUBSTYLE;ScrollBarElement._StyleTypes.ButtonDecrementStyle=StyleableBase.EStyleType.SUBSTYLE;
ScrollBarElement._StyleTypes.ButtonTrackStyle=StyleableBase.EStyleType.SUBSTYLE;ScrollBarElement._StyleTypes.ButtonTabStyle=StyleableBase.EStyleType.SUBSTYLE;ScrollBarElement.TrackSkinStyleDefault=new StyleDefinition;ScrollBarElement.TrackSkinStyleDefault.setStyle("BorderType","solid");ScrollBarElement.TrackSkinStyleDefault.setStyle("BorderThickness",1);ScrollBarElement.TrackSkinStyleDefault.setStyle("BorderColor","#333333");ScrollBarElement.TrackSkinStyleDefault.setStyle("BackgroundFill","#D9D9D9");
ScrollBarElement.DisabledTrackSkinStyleDefault=new StyleDefinition;ScrollBarElement.DisabledTrackSkinStyleDefault.setStyle("BorderType","solid");ScrollBarElement.DisabledTrackSkinStyleDefault.setStyle("BorderThickness",1);ScrollBarElement.DisabledTrackSkinStyleDefault.setStyle("BorderColor","#999999");ScrollBarElement.DisabledTrackSkinStyleDefault.setStyle("BackgroundFill","#ECECEC");ScrollBarElement.ButtonTrackStyleDefault=new StyleDefinition;
ScrollBarElement.ButtonTrackStyleDefault.setStyle("BorderType","none");ScrollBarElement.ButtonTrackStyleDefault.setStyle("MinWidth",15);ScrollBarElement.ButtonTrackStyleDefault.setStyle("MinHeight",15);ScrollBarElement.ButtonTrackStyleDefault.setStyle("UpSkinStyle",ScrollBarElement.TrackSkinStyleDefault);ScrollBarElement.ButtonTrackStyleDefault.setStyle("OverSkinStyle",ScrollBarElement.TrackSkinStyleDefault);ScrollBarElement.ButtonTrackStyleDefault.setStyle("DownSkinStyle",ScrollBarElement.TrackSkinStyleDefault);
ScrollBarElement.ButtonTrackStyleDefault.setStyle("DisabledSkinStyle",ScrollBarElement.DisabledTrackSkinStyleDefault);ScrollBarElement.VButtonTrackStyleDefault=new StyleDefinition;ScrollBarElement.VButtonTrackStyleDefault.setStyle("PercentWidth",100);ScrollBarElement.HButtonTrackStyleDefault=new StyleDefinition;ScrollBarElement.HButtonTrackStyleDefault.setStyle("PercentHeight",100);ScrollBarElement.DisabledButtonScrollArrowSkinStyleDefault=new StyleDefinition;
ScrollBarElement.DisabledButtonScrollArrowSkinStyleDefault.setStyle("ArrowColor","#777777");ScrollBarElement.ButtonScrollArraySkinStyleDefault=new StyleDefinition;ScrollBarElement.ButtonScrollArraySkinStyleDefault.setStyle("ArrowColor","#000000");ScrollBarElement.ButtonScrollArrowStyleDefault=new StyleDefinition;ScrollBarElement.ButtonScrollArrowStyleDefault.setStyle("SkinClass",ScrollButtonSkinElement);ScrollBarElement.ButtonScrollArrowStyleDefault.setStyle("MinWidth",15);
ScrollBarElement.ButtonScrollArrowStyleDefault.setStyle("MinHeight",15);ScrollBarElement.ButtonScrollArrowStyleDefault.setStyle("UpSkinStyle",ScrollBarElement.ButtonScrollArraySkinStyleDefault);ScrollBarElement.ButtonScrollArrowStyleDefault.setStyle("OverSkinStyle",ScrollBarElement.ButtonScrollArraySkinStyleDefault);ScrollBarElement.ButtonScrollArrowStyleDefault.setStyle("DownSkinStyle",ScrollBarElement.ButtonScrollArraySkinStyleDefault);
ScrollBarElement.ButtonScrollArrowStyleDefault.setStyle("DisabledSkinStyle",ScrollBarElement.DisabledButtonScrollArrowSkinStyleDefault);ScrollBarElement.VButtonScrollArrowIncSkinStyleDefault=new StyleDefinition;ScrollBarElement.VButtonScrollArrowIncSkinStyleDefault.setStyle("ArrowDirection","down");ScrollBarElement.VButtonScrollArrowIncStyleDefault=new StyleDefinition;ScrollBarElement.VButtonScrollArrowIncStyleDefault.setStyle("PercentWidth",100);
ScrollBarElement.VButtonScrollArrowIncStyleDefault.setStyle("UpSkinStyle",ScrollBarElement.VButtonScrollArrowIncSkinStyleDefault);ScrollBarElement.VButtonScrollArrowIncStyleDefault.setStyle("OverSkinStyle",ScrollBarElement.VButtonScrollArrowIncSkinStyleDefault);ScrollBarElement.VButtonScrollArrowIncStyleDefault.setStyle("DownSkinStyle",ScrollBarElement.VButtonScrollArrowIncSkinStyleDefault);ScrollBarElement.VButtonScrollArrowIncStyleDefault.setStyle("DisabledSkinStyle",ScrollBarElement.VButtonScrollArrowIncSkinStyleDefault);
ScrollBarElement.VButtonScrollArrowDecSkinStyleDefault=new StyleDefinition;ScrollBarElement.VButtonScrollArrowDecSkinStyleDefault.setStyle("ArrowDirection","up");ScrollBarElement.VButtonScrollArrowDecStyleDefault=new StyleDefinition;ScrollBarElement.VButtonScrollArrowDecStyleDefault.setStyle("PercentWidth",100);ScrollBarElement.VButtonScrollArrowDecStyleDefault.setStyle("UpSkinStyle",ScrollBarElement.VButtonScrollArrowDecSkinStyleDefault);
ScrollBarElement.VButtonScrollArrowDecStyleDefault.setStyle("OverSkinStyle",ScrollBarElement.VButtonScrollArrowDecSkinStyleDefault);ScrollBarElement.VButtonScrollArrowDecStyleDefault.setStyle("DownSkinStyle",ScrollBarElement.VButtonScrollArrowDecSkinStyleDefault);ScrollBarElement.VButtonScrollArrowDecStyleDefault.setStyle("DisabledSkinStyle",ScrollBarElement.VButtonScrollArrowDecSkinStyleDefault);ScrollBarElement.HButtonScrollArrowIncSkinStyleDefault=new StyleDefinition;
ScrollBarElement.HButtonScrollArrowIncSkinStyleDefault.setStyle("ArrowDirection","right");ScrollBarElement.HButtonScrollArrowIncStyleDefault=new StyleDefinition;ScrollBarElement.HButtonScrollArrowIncStyleDefault.setStyle("PercentHeight",100);ScrollBarElement.HButtonScrollArrowIncStyleDefault.setStyle("UpSkinStyle",ScrollBarElement.HButtonScrollArrowIncSkinStyleDefault);ScrollBarElement.HButtonScrollArrowIncStyleDefault.setStyle("OverSkinStyle",ScrollBarElement.HButtonScrollArrowIncSkinStyleDefault);
ScrollBarElement.HButtonScrollArrowIncStyleDefault.setStyle("DownSkinStyle",ScrollBarElement.HButtonScrollArrowIncSkinStyleDefault);ScrollBarElement.HButtonScrollArrowIncStyleDefault.setStyle("DisabledSkinStyle",ScrollBarElement.HButtonScrollArrowIncSkinStyleDefault);ScrollBarElement.HButtonScrollArrowDecSkinStyleDefault=new StyleDefinition;ScrollBarElement.HButtonScrollArrowDecSkinStyleDefault.setStyle("ArrowDirection","left");ScrollBarElement.HButtonScrollArrowDecStyleDefault=new StyleDefinition;
ScrollBarElement.HButtonScrollArrowDecStyleDefault.setStyle("PercentHeight",100);ScrollBarElement.HButtonScrollArrowDecStyleDefault.setStyle("UpSkinStyle",ScrollBarElement.HButtonScrollArrowDecSkinStyleDefault);ScrollBarElement.HButtonScrollArrowDecStyleDefault.setStyle("OverSkinStyle",ScrollBarElement.HButtonScrollArrowDecSkinStyleDefault);ScrollBarElement.HButtonScrollArrowDecStyleDefault.setStyle("DownSkinStyle",ScrollBarElement.HButtonScrollArrowDecSkinStyleDefault);
ScrollBarElement.HButtonScrollArrowDecStyleDefault.setStyle("DisabledSkinStyle",ScrollBarElement.HButtonScrollArrowDecSkinStyleDefault);ScrollBarElement.VButtonTabStyleDefault=new StyleDefinition;ScrollBarElement.VButtonTabStyleDefault.setStyle("MinWidth",15);ScrollBarElement.VButtonTabStyleDefault.setStyle("MinHeight",30);ScrollBarElement.VButtonTabStyleDefault.setStyle("PercentWidth",100);ScrollBarElement.HButtonTabStyleDefault=new StyleDefinition;
ScrollBarElement.HButtonTabStyleDefault.setStyle("MinWidth",30);ScrollBarElement.HButtonTabStyleDefault.setStyle("MinHeight",15);ScrollBarElement.HButtonTabStyleDefault.setStyle("PercentHeight",100);ScrollBarElement.StyleDefault=new StyleDefinition;ScrollBarElement.StyleDefault.setStyle("ScrollTweenDuration",180);ScrollBarElement.StyleDefault.setStyle("LayoutDirection","vertical");ScrollBarElement.StyleDefault.setStyle("ClipContent",!1);ScrollBarElement.StyleDefault.setStyle("LayoutGap",-1);
ScrollBarElement.StyleDefault.setStyle("LayoutHorizontalAlign","center");ScrollBarElement.StyleDefault.setStyle("LayoutVerticalAlign","middle");ScrollBarElement.StyleDefault.setStyle("ButtonTrackStyle",ScrollBarElement.ButtonTrackStyleDefault);ScrollBarElement.StyleDefault.setStyle("ButtonIncrementStyle",ScrollBarElement.ButtonScrollArrowStyleDefault);ScrollBarElement.StyleDefault.setStyle("ButtonDecrementStyle",ScrollBarElement.ButtonScrollArrowStyleDefault);
ScrollBarElement.prototype.setScrollPageSize=function(a){this._scrollPageSize!=a&&(this._scrollPageSize=a,this._invalidateLayout())};ScrollBarElement.prototype.getScrollPageSize=function(){return this._scrollPageSize};ScrollBarElement.prototype.setScrollViewSize=function(a){this._scrollViewSize!=a&&(this._scrollViewSize=a,this._invalidateLayout())};ScrollBarElement.prototype.getScrollViewSize=function(){return this._scrollViewSize};
ScrollBarElement.prototype.setScrollLineSize=function(a){this._scrollLineSize=a};ScrollBarElement.prototype.getScrollLineSize=function(){return this._scrollLineSize};ScrollBarElement.prototype.setScrollValue=function(a){this._scrollValue!=a&&(this._scrollValue=a,this._invalidateLayout())};ScrollBarElement.prototype.getScrollValue=function(){return this._scrollValue};
ScrollBarElement.prototype.startScrollTween=function(a){var b=this.getStyle("ScrollTweenDuration");0<b?null==this._scrollTween?(this._scrollTween=new Tween,this._scrollTween.startVal=this._scrollValue,this._scrollTween.endVal=a,this._scrollTween.duration=b,this._scrollTween.startTime=Date.now(),this._scrollTween.easingFunction=Tween.easeInOutSine,this.addEventListener("enterframe",this._onScrollBarEnterFrameInstance)):(this._scrollTween.startVal=this._scrollValue,this._scrollTween.endVal=a,this._scrollTween.startTime=
Date.now(),this._scrollTween.easingFunction=Tween.easeOutSine):(this.endScrollTween(),this.setScrollValue(a),this._dispatchEvent(new ElementEvent("changed",!1)))};ScrollBarElement.prototype.endScrollTween=function(){null!=this._scrollTween&&(this.setScrollValue(this._scrollTween.endVal),this.removeEventListener("enterframe",this._onScrollBarEnterFrameInstance),this._scrollTween=null)};ScrollBarElement.prototype.getTweenToValue=function(){return null==this._scrollTween?null:this._scrollTween.endVal};
ScrollBarElement.prototype._onTrackAndTabContainerMeasureComplete=function(a){this._invalidateMeasure();this._invalidateLayout()};ScrollBarElement.prototype._onScrollBarEnterFrame=function(a){a=this._scrollTween.getValue(Date.now());a==this._scrollTween.endVal?this.endScrollTween():this.setScrollValue(a);this._dispatchEvent(new ElementEvent("changed",!1))};ScrollBarElement.prototype._onCanvasElementRemoved=function(a){ScrollBarElement.base.prototype._onCanvasElementRemoved.call(this,a);this.endScrollTween()};
ScrollBarElement.prototype._onScrollButtonClick=function(a){var b=null,c=this._scrollValue;null!=this._scrollTween&&(c=this._scrollTween.endVal);c=Math.min(this._scrollPageSize-this._scrollViewSize,c);c=Math.max(0,c);a.getTarget()==this._buttonIncrement||a.getTarget()==this._buttonDecrement?(b=this.getScrollLineSize(),a.getTarget()==this._buttonDecrement&&(b*=-1)):a.getTarget()==this._buttonTrack&&(b=.75*this._scrollViewSize,"horizontal"==this.getStyle("LayoutDirection")?a.getX()<=this._buttonTab._x+
this._buttonTab._width/2&&(b*=-1):a.getY()<=this._buttonTab._y+this._buttonTab._height/2&&(b*=-1));a=Math.min(this._scrollPageSize-this._scrollViewSize,c+b);a=Math.max(0,a);a!=c&&this.startScrollTween(a)};
ScrollBarElement.prototype._onScrollTabDrag=function(a){var b,c,d;b=this.getStyle("LayoutDirection");a=this._scrollValue;"horizontal"==b?(c=this._buttonTrack._width,b=this._buttonTab._x-this._buttonTrack._x,d=this._buttonTab._width):(c=this._buttonTrack._height,b=this._buttonTab._y-this._buttonTrack._y,d=this._buttonTab._height);b>c-d&&(b=c-d);0>b&&(b=0);b/=(c-d)/(this._scrollPageSize-this._scrollViewSize);a!=b&&(this.setScrollValue(b),this._dispatchEvent(new ElementEvent("changed",!1)));this._invalidateLayout()};
ScrollBarElement.prototype._doStylesUpdated=function(a){ScrollBarElement.base.prototype._doStylesUpdated.call(this,a);null==this._buttonDecrement&&(this._buttonDecrement=new ButtonElement,this._buttonDecrement.addEventListener("click",this._onScrollButtonClickInstance),this.addElementAt(this._buttonDecrement,0));null==this._buttonTrack&&(this._buttonTrack=new ButtonElement,this._buttonTrack.addEventListener("click",this._onScrollButtonClickInstance),this._trackAndTabContainer._addChild(this._buttonTrack));
null==this._buttonTab&&(this._buttonTab=new ButtonElement,this._buttonTab.setStyle("Draggable",!0),this._buttonTab.addEventListener("dragging",this._onScrollTabDragInstance),this._trackAndTabContainer._addChild(this._buttonTab));null==this._buttonIncrement&&(this._buttonIncrement=new ButtonElement,this._buttonIncrement.addEventListener("click",this._onScrollButtonClickInstance),this.addElementAt(this._buttonIncrement,this.getNumElements()));"LayoutDirection"in a?(this._invalidateMeasure(),this._invalidateLayout()):
"Enabled"in a&&this._invalidateLayout();var b=this.getStyle("LayoutDirection");if("LayoutDirection"in a||"ButtonDecrementStyle"in a)this._applySubStylesToElement("ButtonDecrementStyle",this._buttonDecrement),"horizontal"==b?this._buttonDecrement._addStyleDefinitionAt(ScrollBarElement.HButtonScrollArrowDecStyleDefault,0,!0):this._buttonDecrement._addStyleDefinitionAt(ScrollBarElement.VButtonScrollArrowDecStyleDefault,0,!0);if("LayoutDirection"in a||"ButtonTrackStyle"in a)this._applySubStylesToElement("ButtonTrackStyle",
this._buttonTrack),"horizontal"==b?this._buttonTrack._addStyleDefinitionAt(ScrollBarElement.HButtonTrackStyleDefault,0,!0):this._buttonTrack._addStyleDefinitionAt(ScrollBarElement.VButtonTrackStyleDefault,0,!0);if("LayoutDirection"in a||"ButtonTabStyle"in a)this._applySubStylesToElement("ButtonTabStyle",this._buttonTab),"horizontal"==b?this._buttonTab._addStyleDefinitionAt(ScrollBarElement.HButtonTabStyleDefault,0,!0):this._buttonTab._addStyleDefinitionAt(ScrollBarElement.VButtonTabStyleDefault,0,
!0);if("LayoutDirection"in a||"ButtonIncrementStyle"in a)this._applySubStylesToElement("ButtonIncrementStyle",this._buttonIncrement),"horizontal"==b?this._buttonIncrement._addStyleDefinitionAt(ScrollBarElement.HButtonScrollArrowIncStyleDefault,0,!0):this._buttonIncrement._addStyleDefinitionAt(ScrollBarElement.VButtonScrollArrowIncStyleDefault,0,!0);"ScrollTweenDuration"in a&&0==this.getStyle("ScrollTweenDuration")&&this.endScrollTween()};
ScrollBarElement.prototype._doMeasure=function(a,b){var c=ScrollBarElement.base.prototype._doMeasure.call(this,a,b);if("vertical"==this.getStyle("LayoutDirection")){var d=this._buttonTab.getStyle("MinHeight"),e=this._buttonTrack._getStyledOrMeasuredWidth()+a,f=this._buttonTab._getStyledOrMeasuredWidth()+a;c.height+=2*d;f>c.width&&(c.width=f);e>c.width&&(c.width=e)}else d=this._buttonTab.getStyle("MinWidth"),e=this._buttonTab._getStyledOrMeasuredHeight()+b,f=this._buttonTrack._getStyledOrMeasuredHeight()+
b,c.width+=2*d,e>c.height&&(c.height=e),f>c.height&&(c.height=f);return c};
ScrollBarElement.prototype._doLayout=function(a){ScrollBarElement.base.prototype._doLayout.call(this,a);this._scrollValue=Math.min(this._scrollValue,this._scrollPageSize-this._scrollViewSize);this._scrollValue=Math.max(this._scrollValue,0);this._scrollViewSize>=this._scrollPageSize||0==this.getStyle("Enabled")?(this._buttonIncrement.setStyle("Enabled",!1),this._buttonDecrement.setStyle("Enabled",!1),this._buttonTrack.setStyle("Enabled",!1),this._buttonTab.setStyle("Visible",!1)):(this._buttonIncrement.clearStyle("Enabled"),
this._buttonDecrement.clearStyle("Enabled"),this._buttonTrack.clearStyle("Enabled"),this._buttonTab.clearStyle("Visible"));a=0;var b=this._buttonTab.getStyle("Width"),c=this._buttonTab.getStyle("MinWidth"),d=this._buttonTab.getStyle("MaxWidth"),e=this._buttonTab.getStyle("PercentWidth");null==c&&(c=0);null==d&&(d=Number.MAX_VALUE);var f=this._buttonTab.getStyle("Height"),g=this._buttonTab.getStyle("MinHeight"),k=this._buttonTab.getStyle("MaxHeight"),l=this._buttonTab.getStyle("PercentHeight");null==
g&&(g=0);null==k&&(k=Number.MAX_VALUE);var h=this._buttonTrack.getStyle("Width"),n=this._buttonTrack.getStyle("MinWidth"),p=this._buttonTrack.getStyle("MaxWidth"),m=this._buttonTrack.getStyle("PercentWidth");null==n&&(n=0);var q=this._buttonTrack.getStyle("Height"),p=this._buttonTrack.getStyle("MinHeight"),t=this._buttonTrack.getStyle("MaxHeight"),u=this._buttonTrack.getStyle("PercentHeight");null==p&&(p=0);"vertical"==this.getStyle("LayoutDirection")?(null==f&&(f=0<this._scrollPageSize?Math.round(this._scrollViewSize/
this._scrollPageSize*this._trackAndTabContainer._height):0,f=Math.min(f,k),f=Math.max(f,g)),null==b&&(null!=e&&(b=Math.round(e/100*this._trackAndTabContainer._width)),null==b&&(b=c),b=Math.min(b,d),b=Math.max(b,c)),c=h,null==c&&(c=Math.max(b,n)),this._scrollPageSize>this._scrollViewSize&&(a=this._trackAndTabContainer._height-f,a/=this._scrollPageSize-this._scrollViewSize),this._buttonTrack._setActualSize(c,this._trackAndTabContainer._height),this._buttonTab._setActualSize(b,f),b=this.getStyle("LayoutHorizontalAlign"),
"left"==b?(this._buttonTrack._setActualPosition(0,0),this._buttonTab._setActualPosition(0,Math.round(this._scrollValue*a))):"center"==b?(this._buttonTrack._setActualPosition(Math.round(this._trackAndTabContainer._width/2-this._buttonTrack._width/2),0),this._buttonTab._setActualPosition(Math.round(this._trackAndTabContainer._width/2-this._buttonTab._width/2),Math.round(this._scrollValue*a))):(this._buttonTrack._setActualPosition(this._trackAndTabContainer._width-this._buttonTrack._width,0),this._buttonTab._setActualPosition(this._trackAndTabContainer._width-
this._buttonTab._width,Math.round(this._scrollValue*a)))):(null==b&&(b=0<this._scrollPageSize?Math.round(this._scrollViewSize/this._scrollPageSize*this._trackAndTabContainer._width):0,b=Math.min(b,d),b=Math.max(b,c)),null==f&&(null!=l&&(f=Math.round(l/100*this._trackAndTabContainer._height)),null==f&&(f=g),f=Math.min(f,k),f=Math.max(f,g)),n=q,null==n&&(n=Math.max(f,p)),this._scrollPageSize>this._scrollViewSize&&(a=this._trackAndTabContainer._width-b,a/=this._scrollPageSize-this._scrollViewSize),this._buttonTrack._setActualSize(this._trackAndTabContainer._width,
n),this._buttonTab._setActualSize(b,f),b=this.getStyle("LayoutVerticalAlign"),"top"==b?(this._buttonTrack._setActualPosition(0,0),this._buttonTab._setActualPosition(Math.round(this._scrollValue*a),0)):"middle"==b?(this._buttonTrack._setActualPosition(0,Math.round(this._trackAndTabContainer._height/2-this._buttonTrack._height/2)),this._buttonTab._setActualPosition(Math.round(this._scrollValue*a),Math.round(this._trackAndTabContainer._height/2-this._buttonTab._height/2))):(this._buttonTrack._setActualPosition(0,
this._trackAndTabContainer._height-this._buttonTrack._height),this._buttonTab._setActualPosition(Math.round(this._scrollValue*a),this._trackAndTabContainer._height-this._buttonTab._height)))};
function ButtonElement(){ButtonElement.base.prototype.constructor.call(this);var a=this;this._labelElement=null;this._onButtonEventInstance=function(b){"mousedown"==b.getType()?a._onButtonMouseDown(b):"mouseup"==b.getType()?a._onButtonMouseUp(b):"click"==b.getType()?a._onButtonClick(b):"rollover"==b.getType()?a._onButtonRollover(b):"rollout"==b.getType()&&a._onButtonRollout(b)};this.addEventListener("mousedown",this._onButtonEventInstance);this.addEventListener("mouseup",this._onButtonEventInstance);
this.addEventListener("rollover",this._onButtonEventInstance);this.addEventListener("rollout",this._onButtonEventInstance);this.addEventListener("click",this._onButtonEventInstance)}ButtonElement.prototype=Object.create(SkinnableElement.prototype);ButtonElement.prototype.constructor=ButtonElement;ButtonElement.base=SkinnableElement;ButtonElement._StyleTypes=Object.create(null);ButtonElement._StyleTypes.Text=StyleableBase.EStyleType.NORMAL;ButtonElement._StyleTypes.SkinClass=StyleableBase.EStyleType.NORMAL;
ButtonElement._StyleTypes.UpSkinClass=StyleableBase.EStyleType.NORMAL;ButtonElement._StyleTypes.UpSkinStyle=StyleableBase.EStyleType.SUBSTYLE;ButtonElement._StyleTypes.UpTextColor=StyleableBase.EStyleType.NORMAL;ButtonElement._StyleTypes.OverSkinClass=StyleableBase.EStyleType.NORMAL;ButtonElement._StyleTypes.OverSkinStyle=StyleableBase.EStyleType.SUBSTYLE;ButtonElement._StyleTypes.OverTextColor=StyleableBase.EStyleType.NORMAL;ButtonElement._StyleTypes.DownSkinClass=StyleableBase.EStyleType.NORMAL;
ButtonElement._StyleTypes.DownSkinStyle=StyleableBase.EStyleType.SUBSTYLE;ButtonElement._StyleTypes.DownTextColor=StyleableBase.EStyleType.NORMAL;ButtonElement._StyleTypes.DisabledSkinClass=StyleableBase.EStyleType.NORMAL;ButtonElement._StyleTypes.DisabledSkinStyle=StyleableBase.EStyleType.SUBSTYLE;ButtonElement._StyleTypes.DisabledTextColor=StyleableBase.EStyleType.NORMAL;ButtonElement._StyleTypes.TextHorizontalAlign=StyleableBase.EStyleType.NORMAL;ButtonElement._StyleTypes.TextVerticalAlign=StyleableBase.EStyleType.NORMAL;
ButtonElement.StyleDefault=new StyleDefinition;ButtonElement.StyleDefault.setStyle("PaddingTop",3);ButtonElement.StyleDefault.setStyle("PaddingBottom",3);ButtonElement.StyleDefault.setStyle("PaddingLeft",4);ButtonElement.StyleDefault.setStyle("PaddingRight",4);ButtonElement.StyleDefault.setStyle("TextHorizontalAlign","center");ButtonElement.StyleDefault.setStyle("TextVerticalAlign","middle");ButtonElement.StyleDefault.setStyle("TabStop",0);ButtonElement.StyleDefault.setStyle("Text",null);
ButtonElement.StyleDefault.setStyle("SkinClass",CanvasElement);ButtonElement.StyleDefault.setStyle("UpSkinClass",CanvasElement);ButtonElement.StyleDefault.setStyle("OverSkinClass",CanvasElement);ButtonElement.StyleDefault.setStyle("DownSkinClass",CanvasElement);ButtonElement.StyleDefault.setStyle("DisabledSkinClass",CanvasElement);ButtonElement.StyleDefault.setStyle("UpTextColor","#000000");ButtonElement.StyleDefault.setStyle("OverTextColor","#000000");
ButtonElement.StyleDefault.setStyle("DownTextColor","#000000");ButtonElement.StyleDefault.setStyle("DisabledTextColor","#888888");ButtonElement.UpSkinStyleDefault=new StyleDefinition;ButtonElement.UpSkinStyleDefault.setStyle("BorderType","solid");ButtonElement.UpSkinStyleDefault.setStyle("BorderThickness",1);ButtonElement.UpSkinStyleDefault.setStyle("BorderColor","#333333");ButtonElement.UpSkinStyleDefault.setStyle("BackgroundFill","#EBEBEB");ButtonElement.OverSkinStyleDefault=new StyleDefinition;
ButtonElement.OverSkinStyleDefault.setStyle("BorderType","solid");ButtonElement.OverSkinStyleDefault.setStyle("BorderThickness",1);ButtonElement.OverSkinStyleDefault.setStyle("BorderColor","#333333");ButtonElement.OverSkinStyleDefault.setStyle("BackgroundFill","#DDDDDD");ButtonElement.DownSkinStyleDefault=new StyleDefinition;ButtonElement.DownSkinStyleDefault.setStyle("BorderType","solid");ButtonElement.DownSkinStyleDefault.setStyle("BorderThickness",1);
ButtonElement.DownSkinStyleDefault.setStyle("BorderColor","#333333");ButtonElement.DownSkinStyleDefault.setStyle("BackgroundFill","#CCCCCC");ButtonElement.DisabledSkinStyleDefault=new StyleDefinition;ButtonElement.DisabledSkinStyleDefault.setStyle("BorderType","solid");ButtonElement.DisabledSkinStyleDefault.setStyle("BorderThickness",1);ButtonElement.DisabledSkinStyleDefault.setStyle("BorderColor","#999999");ButtonElement.DisabledSkinStyleDefault.setStyle("BackgroundFill","#ECECEC");
ButtonElement.StyleDefault.setStyle("UpSkinStyle",ButtonElement.UpSkinStyleDefault);ButtonElement.StyleDefault.setStyle("OverSkinStyle",ButtonElement.OverSkinStyleDefault);ButtonElement.StyleDefault.setStyle("DownSkinStyle",ButtonElement.DownSkinStyleDefault);ButtonElement.StyleDefault.setStyle("DisabledSkinStyle",ButtonElement.DisabledSkinStyleDefault);
ButtonElement.prototype._updateState=function(){var a="up";0==this.getStyle("Enabled")?a="disabled":1==this._mouseIsDown?a="down":1==this._mouseIsOver&&(a="over");this.setStyle("SkinState",a)};ButtonElement.prototype._onButtonMouseDown=function(a){this._updateState()};ButtonElement.prototype._onButtonMouseUp=function(a){this._updateState()};ButtonElement.prototype._onButtonRollover=function(a){this._updateState()};ButtonElement.prototype._onButtonRollout=function(a){this._updateState()};
ButtonElement.prototype._onButtonClick=function(a){0==this.getStyle("Enabled")&&a.cancelEvent()};ButtonElement.prototype._getSkinClass=function(a){var b=null;"up"==a?b=this.getStyleData("UpSkinClass"):"over"==a?b=this.getStyleData("OverSkinClass"):"down"==a?b=this.getStyleData("DownSkinClass"):"disabled"==a&&(b=this.getStyleData("DisabledSkinClass"));a=this.getStyleData("SkinClass");return null==b||0<a.comparePriority(b)?a.value:b.value};
ButtonElement.prototype._getSubStyleNameForSkinState=function(a){return"up"==a?"UpSkinStyle":"over"==a?"OverSkinStyle":"down"==a?"DownSkinStyle":"disabled"==a?"DisabledSkinStyle":ButtonElement.base.prototype._getSubStyleNameForSkinState.call(this,a)};ButtonElement.prototype._changeState=function(a){ButtonElement.base.prototype._changeState.call(this,a);this._updateTextColor()};
ButtonElement.prototype._getTextColor=function(a){var b=null;"up"==a?b=this.getStyleData("UpTextColor"):"over"==a?b=this.getStyleData("OverTextColor"):"down"==a?b=this.getStyleData("DownTextColor"):"disabled"==a&&(b=this.getStyleData("DisabledTextColor"));a=this.getStyleData("TextColor");return null==b||0<a.comparePriority(b)?a.value:b.value};ButtonElement.prototype._updateTextColor=function(){null!=this._labelElement&&this._labelElement.setStyle("TextColor",this._getTextColor(this._currentSkinState))};
ButtonElement.prototype._updateText=function(){var a=this.getStyle("Text");null==a||""==a?null!=this._labelElement&&(this._removeChild(this._labelElement),this._labelElement=null):(null==this._labelElement&&(this._labelElement=this._createLabel(),null!=this._labelElement&&(this._updateTextColor(),this._addChild(this._labelElement))),null!=this._labelElement&&this._labelElement.setStyle("Text",a))};
ButtonElement.prototype._doStylesUpdated=function(a){ButtonElement.base.prototype._doStylesUpdated.call(this,a);("SkinClass"in a||"UpSkinClass"in a)&&this._updateSkinClass("up");"UpSkinStyle"in a&&this._updateSkinStyleDefinitions("up");("SkinClass"in a||"OverSkinClass"in a)&&this._updateSkinClass("over");"OverSkinStyle"in a&&this._updateSkinStyleDefinitions("over");("SkinClass"in a||"DownSkinClass"in a)&&this._updateSkinClass("down");"DownSkinStyle"in a&&this._updateSkinStyleDefinitions("down");("SkinClass"in
a||"DisabledSkinClass"in a)&&this._updateSkinClass("disabled");"DisabledSkinStyle"in a&&this._updateSkinStyleDefinitions("disabled");"Text"in a&&this._updateText();"Enabled"in a&&1==this.getStyle("MouseEnabled")&&this._updateState();"TextHorizontalAlign"in a&&null!=this._labelElement&&this._labelElement.setStyle("TextHorizontalAlign",this.getStyle("TextHorizontalAlign"));"TextVerticalAlign"in a&&null!=this._labelElement&&this._labelElement.setStyle("TextVerticalAlign",this.getStyle("TextVerticalAlign"));
this._updateTextColor()};ButtonElement.prototype._createLabel=function(){var a=new LabelElement;a.setStyle("MouseEnabled",!1);a.setStyle("TextHorizontalAlign",this.getStyle("TextHorizontalAlign"));a.setStyle("TextVerticalAlign",this.getStyle("TextVerticalAlign"));a.setStyle("Padding",0);return a};
ButtonElement.prototype._doMeasure=function(a,b){var c;if(null!=this._labelElement){c=this._labelElement._getStyledOrMeasuredWidth();var d=this._labelElement._getStyledOrMeasuredHeight();c={width:c+a,height:d+b}}else c=ButtonElement.base.prototype._doMeasure.call(this,a,b);return c};
ButtonElement.prototype._doLayout=function(a){ButtonElement.base.prototype._doLayout.call(this,a);null!=this._labelElement&&(this._labelElement._setActualPosition(a.getX(),a.getY()),this._labelElement._setActualSize(a.getWidth(),a.getHeight()))};function ToggleButtonElement(){ToggleButtonElement.base.prototype.constructor.call(this);this._isSelected=!1}ToggleButtonElement.prototype=Object.create(ButtonElement.prototype);ToggleButtonElement.prototype.constructor=ToggleButtonElement;
ToggleButtonElement.base=ButtonElement;ToggleButtonElement._StyleTypes=Object.create(null);ToggleButtonElement._StyleTypes.AllowDeselect=StyleableBase.EStyleType.NORMAL;ToggleButtonElement._StyleTypes.SelectedUpSkinClass=StyleableBase.EStyleType.NORMAL;ToggleButtonElement._StyleTypes.SelectedUpSkinStyle=StyleableBase.EStyleType.SUBSTYLE;ToggleButtonElement._StyleTypes.SelectedUpTextColor=StyleableBase.EStyleType.NORMAL;ToggleButtonElement._StyleTypes.SelectedOverSkinClass=StyleableBase.EStyleType.NORMAL;
ToggleButtonElement._StyleTypes.SelectedOverSkinStyle=StyleableBase.EStyleType.SUBSTYLE;ToggleButtonElement._StyleTypes.SelectedOverTextColor=StyleableBase.EStyleType.NORMAL;ToggleButtonElement._StyleTypes.SelectedDownSkinClass=StyleableBase.EStyleType.NORMAL;ToggleButtonElement._StyleTypes.SelectedDownSkinStyle=StyleableBase.EStyleType.SUBSTYLE;ToggleButtonElement._StyleTypes.SelectedDownTextColor=StyleableBase.EStyleType.NORMAL;ToggleButtonElement._StyleTypes.SelectedDisabledSkinClass=StyleableBase.EStyleType.NORMAL;
ToggleButtonElement._StyleTypes.SelectedDisabledSkinStyle=StyleableBase.EStyleType.SUBSTYLE;ToggleButtonElement._StyleTypes.SelectedDisabledTextColor=StyleableBase.EStyleType.NORMAL;ToggleButtonElement.StyleDefault=new StyleDefinition;ToggleButtonElement.StyleDefault.setStyle("AllowDeselect",!0);ToggleButtonElement.StyleDefault.setStyle("SelectedUpSkinClass",CanvasElement);ToggleButtonElement.StyleDefault.setStyle("SelectedOverSkinClass",CanvasElement);
ToggleButtonElement.StyleDefault.setStyle("SelectedDownSkinClass",CanvasElement);ToggleButtonElement.StyleDefault.setStyle("SelectedDisabledSkinClass",CanvasElement);ToggleButtonElement.StyleDefault.setStyle("SelectedOverTextColor","#000000");ToggleButtonElement.StyleDefault.setStyle("SelectedUpTextColor","#000000");ToggleButtonElement.StyleDefault.setStyle("SelectedDownTextColor","#000000");ToggleButtonElement.StyleDefault.setStyle("SelectedDisabledTextColor","#888888");
ToggleButtonElement.SelectedUpSkinStyleDefault=new StyleDefinition;ToggleButtonElement.SelectedUpSkinStyleDefault.setStyle("BorderType","solid");ToggleButtonElement.SelectedUpSkinStyleDefault.setStyle("BorderThickness",1);ToggleButtonElement.SelectedUpSkinStyleDefault.setStyle("BorderColor","#333333");ToggleButtonElement.SelectedUpSkinStyleDefault.setStyle("BackgroundFill","#CCCCCC");ToggleButtonElement.SelectedOverSkinStyleDefault=new StyleDefinition;
ToggleButtonElement.SelectedOverSkinStyleDefault.setStyle("BorderType","solid");ToggleButtonElement.SelectedOverSkinStyleDefault.setStyle("BorderThickness",1);ToggleButtonElement.SelectedOverSkinStyleDefault.setStyle("BorderColor","#333333");ToggleButtonElement.SelectedOverSkinStyleDefault.setStyle("BackgroundFill","#BDBDBD");ToggleButtonElement.SelectedDownSkinStyleDefault=new StyleDefinition;ToggleButtonElement.SelectedDownSkinStyleDefault.setStyle("BorderType","solid");
ToggleButtonElement.SelectedDownSkinStyleDefault.setStyle("BorderThickness",1);ToggleButtonElement.SelectedDownSkinStyleDefault.setStyle("BorderColor","#333333");ToggleButtonElement.SelectedDownSkinStyleDefault.setStyle("BackgroundFill","#B0B0B0");ToggleButtonElement.SelectedDisabledSkinStyleDefault=new StyleDefinition;ToggleButtonElement.SelectedDisabledSkinStyleDefault.setStyle("BorderType","solid");ToggleButtonElement.SelectedDisabledSkinStyleDefault.setStyle("BorderThickness",1);
ToggleButtonElement.SelectedDisabledSkinStyleDefault.setStyle("BorderColor","#777777");ToggleButtonElement.SelectedDisabledSkinStyleDefault.setStyle("BackgroundFill","#C7C7C7");ToggleButtonElement.StyleDefault.setStyle("SelectedUpSkinStyle",ToggleButtonElement.SelectedUpSkinStyleDefault);ToggleButtonElement.StyleDefault.setStyle("SelectedOverSkinStyle",ToggleButtonElement.SelectedOverSkinStyleDefault);ToggleButtonElement.StyleDefault.setStyle("SelectedDownSkinStyle",ToggleButtonElement.SelectedDownSkinStyleDefault);
ToggleButtonElement.StyleDefault.setStyle("SelectedDisabledSkinStyle",ToggleButtonElement.SelectedDisabledSkinStyleDefault);ToggleButtonElement.prototype.setSelected=function(a){this._isSelected!=a&&(this._isSelected=a,this._updateState())};ToggleButtonElement.prototype.getSelected=function(){return this._isSelected};
ToggleButtonElement.prototype._updateState=function(){if(0==this._isSelected)ToggleButtonElement.base.prototype._updateState.call(this);else{var a="selectedUp";0==this.getStyle("Enabled")?a="selectedDisabled":1==this.getStyle("AllowDeselect")&&(1==this._mouseIsDown?a="selectedDown":1==this._mouseIsOver&&(a="selectedOver"));this.setStyle("SkinState",a)}};
ToggleButtonElement.prototype._onButtonClick=function(a){if(0==this.getStyle("Enabled"))a.cancelEvent();else if(0==this._isSelected||1==this.getStyle("AllowDeselect"))this._isSelected=!this._isSelected,this._updateState(),1==this.hasEventListener("changed",null)&&this._dispatchEvent(new ElementEvent("changed",!1))};
ToggleButtonElement.prototype._getSkinClass=function(a){if("selectedUp"==a)a=this.getStyleData("SelectedUpSkinClass");else if("selectedOver"==a)a=this.getStyleData("SelectedOverSkinClass");else if("selectedDown"==a)a=this.getStyleData("SelectedDownSkinClass");else if("selectedDisabled"==a)a=this.getStyleData("SelectedDisabledSkinClass");else return ToggleButtonElement.base.prototype._getSkinClass.call(this,a);var b=this.getStyleData("SkinClass");return 0<b.comparePriority(a)?b.value:a.value};
ToggleButtonElement.prototype._getSubStyleNameForSkinState=function(a){return"selectedUp"==a?"SelectedUpSkinStyle":"selectedOver"==a?"SelectedOverSkinStyle":"selectedDown"==a?"SelectedDownSkinStyle":"selectedDisabled"==a?"SelectedDisabledSkinStyle":ToggleButtonElement.base.prototype._getSubStyleNameForSkinState.call(this,a)};
ToggleButtonElement.prototype._getTextColor=function(a){if("selectedUp"==a)a=this.getStyleData("SelectedUpTextColor");else if("selectedOver"==a)a=this.getStyleData("SelectedOverTextColor");else if("selectedDown"==a)a=this.getStyleData("SelectedDownTextColor");else if("selectedDisabled"==a)a=this.getStyleData("SelectedDisabledTextColor");else return ToggleButtonElement.base.prototype._getTextColor.call(this,a);var b=this.getStyleData("TextColor");return 0<b.comparePriority(a)?b.value:a.value};
ToggleButtonElement.prototype._doStylesUpdated=function(a){ToggleButtonElement.base.prototype._doStylesUpdated.call(this,a);("SkinClass"in a||"SelectedUpSkinClass"in a)&&this._updateSkinClass("selectedUp");"SelectedUpSkinStyle"in a&&this._updateSkinStyleDefinitions("selectedUp");("SkinClass"in a||"SelectedOverSkinClass"in a)&&this._updateSkinClass("selectedOver");"SelectedOverSkinStyle"in a&&this._updateSkinStyleDefinitions("selectedOver");("SkinClass"in a||"SelectedDownSkinClass"in a)&&this._updateSkinClass("selectedDown");
"SelectedDownSkinStyle"in a&&this._updateSkinStyleDefinitions("selectedDown");("SkinClass"in a||"SelectedDisabledSkinClass"in a)&&this._updateSkinClass("selectedDisabled");"SelectedDisabledSkinStyle"in a&&this._updateSkinStyleDefinitions("selectedDisabled");"AllowDeselect"in a&&this._updateState()};function RadioButtonElement(){RadioButtonElement.base.prototype.constructor.call(this)}RadioButtonElement.prototype=Object.create(ToggleButtonElement.prototype);
RadioButtonElement.prototype.constructor=RadioButtonElement;RadioButtonElement.base=ToggleButtonElement;RadioButtonElement._StyleTypes=Object.create(null);RadioButtonElement._StyleTypes.LabelPlacement=StyleableBase.EStyleType.NORMAL;RadioButtonElement._StyleTypes.LabelGap=StyleableBase.EStyleType.NORMAL;RadioButtonElement.StyleDefault=new StyleDefinition;RadioButtonElement.StyleDefault.setStyle("LabelPlacement","right");RadioButtonElement.StyleDefault.setStyle("LabelGap",5);
RadioButtonElement.StyleDefault.setStyle("AllowDeselect",!1);RadioButtonElement.StyleDefault.setStyle("PaddingTop",0);RadioButtonElement.StyleDefault.setStyle("PaddingBottom",0);RadioButtonElement.StyleDefault.setStyle("PaddingLeft",0);RadioButtonElement.StyleDefault.setStyle("PaddingRight",0);RadioButtonElement.StyleDefault.setStyle("TextHorizontalAlign","left");RadioButtonElement.StyleDefault.setStyle("TextVerticalAlign","middle");RadioButtonElement.StyleDefault.setStyle("SkinClass",RadioButtonSkinElement);
RadioButtonElement.StyleDefault.setStyle("UpSkinClass",RadioButtonSkinElement);RadioButtonElement.StyleDefault.setStyle("OverSkinClass",RadioButtonSkinElement);RadioButtonElement.StyleDefault.setStyle("DownSkinClass",RadioButtonSkinElement);RadioButtonElement.StyleDefault.setStyle("DisabledSkinClass",RadioButtonSkinElement);RadioButtonElement.StyleDefault.setStyle("SelectedUpSkinClass",RadioButtonSkinElement);RadioButtonElement.StyleDefault.setStyle("SelectedOverSkinClass",RadioButtonSkinElement);
RadioButtonElement.StyleDefault.setStyle("SelectedDownSkinClass",RadioButtonSkinElement);RadioButtonElement.StyleDefault.setStyle("SelectedDisabledSkinClass",RadioButtonSkinElement);RadioButtonElement.UpSkinStyleDefault=new StyleDefinition;RadioButtonElement.UpSkinStyleDefault.setStyle("BackgroundShape",new EllipseShape);RadioButtonElement.UpSkinStyleDefault.setStyle("BorderType","solid");RadioButtonElement.UpSkinStyleDefault.setStyle("BorderThickness",1);
RadioButtonElement.UpSkinStyleDefault.setStyle("BorderColor","#333333");RadioButtonElement.UpSkinStyleDefault.setStyle("BackgroundFill","#EBEBEB");RadioButtonElement.UpSkinStyleDefault.setStyle("CheckColor","#000000");RadioButtonElement.OverSkinStyleDefault=new StyleDefinition;RadioButtonElement.OverSkinStyleDefault.setStyle("BackgroundShape",new EllipseShape);RadioButtonElement.OverSkinStyleDefault.setStyle("BorderType","solid");
RadioButtonElement.OverSkinStyleDefault.setStyle("BorderThickness",1);RadioButtonElement.OverSkinStyleDefault.setStyle("BorderColor","#333333");RadioButtonElement.OverSkinStyleDefault.setStyle("BackgroundFill","#DDDDDD");RadioButtonElement.OverSkinStyleDefault.setStyle("CheckColor","#000000");RadioButtonElement.DownSkinStyleDefault=new StyleDefinition;RadioButtonElement.DownSkinStyleDefault.setStyle("BackgroundShape",new EllipseShape);
RadioButtonElement.DownSkinStyleDefault.setStyle("BorderType","solid");RadioButtonElement.DownSkinStyleDefault.setStyle("BorderThickness",1);RadioButtonElement.DownSkinStyleDefault.setStyle("BorderColor","#333333");RadioButtonElement.DownSkinStyleDefault.setStyle("BackgroundFill","#CCCCCC");RadioButtonElement.DownSkinStyleDefault.setStyle("CheckColor","#000000");RadioButtonElement.DisabledSkinStyleDefault=new StyleDefinition;RadioButtonElement.DisabledSkinStyleDefault.setStyle("BackgroundShape",new EllipseShape);
RadioButtonElement.DisabledSkinStyleDefault.setStyle("BorderType","solid");RadioButtonElement.DisabledSkinStyleDefault.setStyle("BorderThickness",1);RadioButtonElement.DisabledSkinStyleDefault.setStyle("BorderColor","#999999");RadioButtonElement.DisabledSkinStyleDefault.setStyle("BackgroundFill","#ECECEC");RadioButtonElement.DisabledSkinStyleDefault.setStyle("CheckColor","#777777");RadioButtonElement.StyleDefault.setStyle("UpSkinStyle",RadioButtonElement.UpSkinStyleDefault);
RadioButtonElement.StyleDefault.setStyle("OverSkinStyle",RadioButtonElement.OverSkinStyleDefault);RadioButtonElement.StyleDefault.setStyle("DownSkinStyle",RadioButtonElement.DownSkinStyleDefault);RadioButtonElement.StyleDefault.setStyle("DisabledSkinStyle",RadioButtonElement.DisabledSkinStyleDefault);RadioButtonElement.StyleDefault.setStyle("SelectedUpSkinStyle",RadioButtonElement.UpSkinStyleDefault);RadioButtonElement.StyleDefault.setStyle("SelectedOverSkinStyle",RadioButtonElement.OverSkinStyleDefault);
RadioButtonElement.StyleDefault.setStyle("SelectedDownSkinStyle",RadioButtonElement.DownSkinStyleDefault);RadioButtonElement.StyleDefault.setStyle("SelectedDisabledSkinStyle",RadioButtonElement.DisabledSkinStyleDefault);RadioButtonElement.prototype._doStylesUpdated=function(a){RadioButtonElement.base.prototype._doStylesUpdated.call(this,a);"LabelGap"in a?(this._invalidateMeasure(),this._invalidateLayout()):"LabelPlacement"in a&&this._invalidateLayout()};
RadioButtonElement.prototype._doMeasure=function(a,b){var c={width:a,height:b};if(null!=this._labelElement){var d=this._labelElement._getStyledOrMeasuredWidth(),e=this._labelElement._getStyledOrMeasuredHeight();c.height=b+e;c.width=c.height+a+d+this.getStyle("LabelGap")}else c.height=b+14,c.width=a+14;return c};
RadioButtonElement.prototype._doLayout=function(a){if(null!=this._labelElement){var b=this.getStyle("LabelPlacement"),c=this.getStyle("LabelGap"),d;for(d in this._skins)this._skins[d]._setActualSize(this._height,this._height),"left"==b?this._skins[d]._setActualPosition(this._width-this._height,0):this._skins[d]._setActualPosition(0,0);"left"==b?this._labelElement._setActualPosition(a.getX(),a.getY()):this._labelElement._setActualPosition(this._height+c+a.getX(),a.getY());this._labelElement._setActualSize(a.getWidth()-
c-this._height,a.getHeight())}else for(d in this._skins)this._skins[d]._setActualSize(this._width,this._height),this._skins[d]._setActualPosition(0,0)};
function DropdownElement(){DropdownElement.base.prototype.constructor.call(this);this._arrowButton=this._listCollection=null;this._selectedIndex=-1;this._selectedItem=null;this._dataListPopupClipContainer=new CanvasElement;this._dataListPopupClipContainer.setStyle("ClipContent",!0);this._openCloseTween=this._sampledTextWidth=this._dropdownManagerMetrics=this._openHeight=this._openDirection=this._dataListPopup=null;var a=this;this._onDropdownListCollectionChangedInstance=function(b){a._onDropdownListCollectionChanged(b)};
this._onDropdownDataListPopupChangedInstance=function(b){a._onDropdownDataListPopupChanged(b)};this._onDropdownDataListPopupListItemClickedInstance=function(b){a._onDropdownDataListPopupListItemClicked(b)};this._onDropdownDataListPopupLayoutCompleteInstance=function(b){a._onDropdownDataListPopupLayoutComplete(b)};this._onDropdownManagerCaptureEventInstance=function(b){a._onDropdownManagerCaptureEvent(b)};this._onDropdownManagerResizeEventInstance=function(b){a._onDropdownManagerResizeEvent(b)};this._onDropDownEnterFrameInstance=
function(b){a._onDropDownEnterFrame(b)}}DropdownElement.prototype=Object.create(ButtonElement.prototype);DropdownElement.prototype.constructor=DropdownElement;DropdownElement.base=ButtonElement;DropdownElement._StyleTypes=Object.create(null);DropdownElement._StyleTypes.ItemLabelFunction=StyleableBase.EStyleType.NORMAL;DropdownElement._StyleTypes.PopupDataListClass=StyleableBase.EStyleType.NORMAL;DropdownElement._StyleTypes.PopupDataListStyle=StyleableBase.EStyleType.SUBSTYLE;
DropdownElement._StyleTypes.MaxPopupHeight=StyleableBase.EStyleType.NORMAL;DropdownElement._StyleTypes.ArrowButtonClass=StyleableBase.EStyleType.NORMAL;DropdownElement._StyleTypes.ArrowButtonStyle=StyleableBase.EStyleType.SUBSTYLE;DropdownElement._StyleTypes.OpenCloseTweenDuration=StyleableBase.EStyleType.NORMAL;DropdownElement._StyleTypes.OpenCloseTweenEasingFunction=StyleableBase.EStyleType.NORMAL;DropdownElement._StyleTypes.PopupDataListClipTopOrBottom=StyleableBase.EStyleType.NORMAL;
DropdownElement.ArrowButtonSkinStyleDefault=new StyleDefinition;DropdownElement.ArrowButtonSkinStyleDefault.setStyle("BorderType",null);DropdownElement.ArrowButtonSkinStyleDefault.setStyle("BackgroundFill",null);DropdownElement.ArrowButtonStyleDefault=new StyleDefinition;DropdownElement.ArrowButtonStyleDefault.setStyle("SkinClass",DropdownArrowButtonSkinElement);DropdownElement.ArrowButtonStyleDefault.setStyle("MouseEnabled",!1);DropdownElement.ArrowButtonStyleDefault.setStyle("UpSkinStyle",DropdownElement.ArrowButtonSkinStyleDefault);
DropdownElement.ArrowButtonStyleDefault.setStyle("OverSkinStyle",DropdownElement.ArrowButtonSkinStyleDefault);DropdownElement.ArrowButtonStyleDefault.setStyle("DownSkinStyle",DropdownElement.ArrowButtonSkinStyleDefault);DropdownElement.ArrowButtonStyleDefault.setStyle("DisabledSkinStyle",DropdownElement.ArrowButtonSkinStyleDefault);DropdownElement.DataListScrollBarStyleDefault=new StyleDefinition;DropdownElement.DataListScrollBarStyleDefault.setStyle("Padding",-1);
DropdownElement.DataListItemUpSkinStyleDefault=new StyleDefinition;DropdownElement.DataListItemUpSkinStyleDefault.setStyle("BackgroundFill","#FFFFFF");DropdownElement.DataListItemAltSkinStyleDefault=new StyleDefinition;DropdownElement.DataListItemAltSkinStyleDefault.setStyle("BackgroundFill","#F0F0F0");DropdownElement.DataListItemStyleDefault=new StyleDefinition;DropdownElement.DataListItemStyleDefault.setStyle("UpSkinStyle",DropdownElement.DataListItemUpSkinStyleDefault);
DropdownElement.DataListItemStyleDefault.setStyle("AltSkinStyle",DropdownElement.DataListItemAltSkinStyleDefault);DropdownElement.DataListStyleDefault=new StyleDefinition;DropdownElement.DataListStyleDefault.setStyle("ScrollBarStyle",DropdownElement.DataListScrollBarStyleDefault);DropdownElement.DataListStyleDefault.setStyle("ListItemClass",DataRendererLabelElement);DropdownElement.DataListStyleDefault.setStyle("ListItemStyle",DropdownElement.DataListItemStyleDefault);
DropdownElement.DataListStyleDefault.setStyle("BorderType","solid");DropdownElement.DataListStyleDefault.setStyle("BorderThickness",1);DropdownElement.DataListStyleDefault.setStyle("PaddingTop",1);DropdownElement.DataListStyleDefault.setStyle("PaddingBottom",1);DropdownElement.DataListStyleDefault.setStyle("PaddingLeft",1);DropdownElement.DataListStyleDefault.setStyle("PaddingRight",1);DropdownElement.StyleDefault=new StyleDefinition;DropdownElement.StyleDefault.setStyle("PaddingTop",3);
DropdownElement.StyleDefault.setStyle("PaddingBottom",3);DropdownElement.StyleDefault.setStyle("PaddingRight",4);DropdownElement.StyleDefault.setStyle("PaddingLeft",4);DropdownElement.StyleDefault.setStyle("PopupDataListClass",DataListElement);DropdownElement.StyleDefault.setStyle("PopupDataListStyle",DropdownElement.DataListStyleDefault);DropdownElement.StyleDefault.setStyle("ArrowButtonClass",ButtonElement);DropdownElement.StyleDefault.setStyle("ArrowButtonStyle",DropdownElement.ArrowButtonStyleDefault);
DropdownElement.StyleDefault.setStyle("TextHorizontalAlign","left");DropdownElement.StyleDefault.setStyle("MaxPopupHeight",200);DropdownElement.StyleDefault.setStyle("OpenCloseTweenDuration",300);DropdownElement.StyleDefault.setStyle("OpenCloseTweenEasingFunction",Tween.easeInOutSine);DropdownElement.StyleDefault.setStyle("PopupDataListClipTopOrBottom",1);DropdownElement.StyleDefault.setStyle("ItemLabelFunction",DataListElement.DefaultItemLabelFunction);DropdownElement._PopupDataListProxyMap=Object.create(null);
DropdownElement._PopupDataListProxyMap.ItemLabelFunction=!0;DropdownElement._PopupDataListProxyMap._Arbitrary=!0;DropdownElement._ArrowButtonProxyMap=Object.create(null);DropdownElement._ArrowButtonProxyMap.SkinState=!0;DropdownElement._ArrowButtonProxyMap._Arbitrary=!0;
DropdownElement.prototype.setSelectedIndex=function(a){if(this._selectedIndex==a||null==this._listCollection||a>this._listCollection.length-1)return!1;-1>a&&(a=-1);null!=this._dataListPopup&&this._dataListPopup.setSelectedIndex(a);this._selectedIndex=a;this._selectedItem=this._listCollection.getItemAt(a);this._updateText();return!0};DropdownElement.prototype.getSelectedIndex=function(){return this._selectedIndex};
DropdownElement.prototype.setSelectedItem=function(a){a=this._listCollection.getItemIndex(a);this._setSelectedIndex(a)};DropdownElement.prototype.getSelectedItem=function(){return this._selectedItem};
DropdownElement.prototype.setListCollection=function(a){this._listCollection!=a&&(null==this._manager?this._listCollection=a:(null!=this._listCollection&&this._listCollection.removeEventListener("collectionchanged",this._onDropdownListCollectionChangedInstance),this._listCollection=a,null!=this._listCollection&&this._listCollection.addEventListener("collectionchanged",this._onDropdownListCollectionChangedInstance)),null==this._listCollection?(this._selectedIndex=-1,this._selectedItem=null):null!=
this._selectedItem&&(this._selectedIndex=this._listCollection.getItemIndex(this._selectedItem),-1==this._selectedIndex&&(this._selectedItem=null)),this._updateText(),this._sampledTextWidth=null,this._invalidateMeasure(),null!=this._dataListPopup&&this._dataListPopup.setListCollection(a))};
DropdownElement.prototype.open=function(a){if(null!=this._manager&&null!=this._listCollection&&0!=this._listCollection.getLength()){null==this._dataListPopup&&(this._dataListPopup=this._createDataListPopup(),this._dataListPopupClipContainer._addChild(this._dataListPopup));null==this._dropdownManagerMetrics&&(this._dropdownManagerMetrics=this.getMetrics(this._manager));this._addDataListPopup();var b=this.getStyle("OpenCloseTweenDuration");0==a||0>=b?null!=this._openCloseTween&&null!=this._openHeight&&
(this._endOpenCloseTween(),this._updateTweenPosition(this._openHeight)):null!=this._openCloseTween?0!=this._openCloseTween.startVal&&this._reverseTween():null==this._openHeight&&(this._openCloseTween=new Tween,this._openCloseTween.startVal=0,this._openCloseTween.endVal=null,this._openCloseTween.duration=b,this._openCloseTween.startTime=Date.now(),this._openCloseTween.easingFunction=this.getStyle("OpenCloseTweenEasingFunction"),this.addEventListener("enterframe",this._onDropDownEnterFrameInstance))}};
DropdownElement.prototype.close=function(a){var b=this.getStyle("OpenCloseTweenDuration");0==a||0>=b?(this._endOpenCloseTween(),this._removeDataListPopup()):null!=this._openCloseTween?0==this._openCloseTween.startVal&&this._reverseTween():null!=this._openHeight&&(this._openCloseTween=new Tween,this._openCloseTween.startVal=this._openHeight-this.getStyle("PopupDataListClipTopOrBottom"),this._openCloseTween.endVal=0,this._openCloseTween.duration=b,this._openCloseTween.startTime=Date.now(),this._openCloseTween.easingFunction=
this.getStyle("OpenCloseTweenEasingFunction"),this.addEventListener("enterframe",this._onDropDownEnterFrameInstance))};
DropdownElement.prototype._removeDataListPopup=function(){null!=this._dataListPopupClipContainer._parent&&(this._dataListPopupClipContainer._manager.removeCaptureListener("wheel",this._onDropdownManagerCaptureEventInstance),this._dataListPopupClipContainer._manager.removeCaptureListener("mousedown",this._onDropdownManagerCaptureEventInstance),this._dataListPopupClipContainer._manager.removeEventListener("resize",this._onDropdownManagerResizeEventInstance),this._dataListPopupClipContainer._manager.removeElement(this._dataListPopupClipContainer),
this._openHeight=this._openDirection=this._dropdownManagerMetrics=null)};
DropdownElement.prototype._addDataListPopup=function(){if(null==this._dataListPopupClipContainer._parent){var a=this.getStyle("MaxPopupHeight");this._dataListPopupClipContainer.setStyle("Width",this._dropdownManagerMetrics._width);this._dataListPopupClipContainer.setStyle("Height",a);this._dataListPopupClipContainer.setStyle("X",this._dropdownManagerMetrics._x);this._dataListPopupClipContainer.setStyle("Y",this._dropdownManagerMetrics._y+this._dropdownManagerMetrics._height);this._dataListPopup._setActualPosition(0,
0);this._dataListPopup._setActualSize(this._dropdownManagerMetrics._width,a);this._manager.addElement(this._dataListPopupClipContainer);this._dataListPopupClipContainer._manager.addCaptureListener("wheel",this._onDropdownManagerCaptureEventInstance);this._dataListPopupClipContainer._manager.addCaptureListener("mousedown",this._onDropdownManagerCaptureEventInstance);this._dataListPopupClipContainer._manager.addEventListener("resize",this._onDropdownManagerResizeEventInstance)}};
DropdownElement.prototype._onDropDownEnterFrame=function(a){null!=this._openCloseTween.endVal&&(a=this._openCloseTween.getValue(Date.now()),this._updateTweenPosition(a),a==this._openCloseTween.endVal&&(0==a?this.close(!1):this._endOpenCloseTween()))};DropdownElement.prototype._endOpenCloseTween=function(){null!=this._openCloseTween&&(this.removeEventListener("enterframe",this._onDropDownEnterFrameInstance),this._openCloseTween=null)};
DropdownElement.prototype._updateTweenPosition=function(a){this._dataListPopupClipContainer.setStyle("Height",a);"up"==this._openDirection?this._dataListPopupClipContainer.setStyle("Y",this._dropdownManagerMetrics._y-a):this._dataListPopup._setActualPosition(0,a-this._dataListPopup._height)};DropdownElement.prototype._onDropdownManagerCaptureEvent=function(a){for(var b=a.getTarget();null!=b;){if(b==this._dataListPopup||"mousedown"==a.getType()&&b==this)return;b=b._parent}this.close(!1)};
DropdownElement.prototype._onDropdownManagerResizeEvent=function(a){this.close(!1)};
DropdownElement.prototype._onDropdownDataListPopupLayoutComplete=function(a){a=this.getStyle("MaxPopupHeight");if("horizontal"!=this._dataListPopup.getStyle("ListDirection")){var b=this._dataListPopup._getContentSize();a=b<a?null!=this._listCollection&&this._dataListPopup._getNumRenderers()<this._listCollection.getLength()?a:b:a}b=this._manager._height-(this._dropdownManagerMetrics._y+this._dropdownManagerMetrics._height);if(b>=a)this._openDirection="down",this._openHeight=a;else{var c=this._dropdownManagerMetrics._y;
c>=a?(this._openDirection="up",this._openHeight=a):b>=c?(this._openDirection="down",this._openHeight=b):(this._openDirection="up",this._openHeight=c)}this._dataListPopup._setActualSize(this._dataListPopup._width,this._openHeight);this._dataListPopupClipContainer.setStyle("Height",this._openHeight);a=this.getStyle("PopupDataListClipTopOrBottom");null!=this._openCloseTween?(0==this._openCloseTween.startVal?this._openCloseTween.endVal=this._openHeight-a:this._openCloseTween.startVal=this._openHeight-
a,this._onDropDownEnterFrame(null)):this._updateTweenPosition(this._openHeight-a)};DropdownElement.prototype._onDropdownDataListPopupChanged=function(a){this.setSelectedIndex(this._dataListPopup.getSelectedIndex());this.close(!0);1==this.hasEventListener("changed",null)&&this._dispatchEvent(new ElementEvent("changed",!1))};DropdownElement.prototype._onDropdownDataListPopupListItemClicked=function(a){1==this.hasEventListener("listitemclick",null)&&this._dispatchEvent(a)};
DropdownElement.prototype._createDataListPopup=function(){var a=new DataListElement;a._setStyleProxy(new StyleProxy(this,DropdownElement._PopupDataListProxyMap));this._applySubStylesToElement("PopupDataListStyle",a);a.setListCollection(this._listCollection);a.setSelectedIndex(this._selectedIndex);a.addEventListener("changed",this._onDropdownDataListPopupChangedInstance);a.addEventListener("listitemclick",this._onDropdownDataListPopupListItemClickedInstance);a.addEventListener("layoutcomplete",this._onDropdownDataListPopupLayoutCompleteInstance);
return a};
DropdownElement.prototype._updateText=function(){var a;a=this.getStyle("ItemLabelFunction");a=null==this._selectedItem||null==a?this.getStyle("Text"):a(this._selectedItem);null==a||""==a?null!=this._labelElement&&(this._removeChild(this._labelElement),this._labelElement=null):(null==this._labelElement&&(this._labelElement=this._createLabel(),null!=this._labelElement&&(this._updateTextColor(),this._addChild(this._labelElement))),null!=this._labelElement&&this._labelElement.setStyle("Text",a))};
DropdownElement.prototype._onDropdownListCollectionChanged=function(a){null!=this._selectedItem&&(this._selectedIndex=this._listCollection.getItemIndex(this._selectedItem),-1==this._selectedIndex&&(this._selectedItem=null));this._updateText();this._sampledTextWidth=null;this._invalidateMeasure()};
DropdownElement.prototype._onCanvasElementAdded=function(a){DropdownElement.base.prototype._onCanvasElementAdded.call(this,a);null!=this._listCollection&&0==this._listCollection.hasEventListener("collectionchanged",this._onDropdownListCollectionChangedInstance)&&this._listCollection.addEventListener("collectionchanged",this._onDropdownListCollectionChangedInstance)};
DropdownElement.prototype._onCanvasElementRemoved=function(a){DropdownElement.base.prototype._onCanvasElementRemoved.call(this,a);null!=this._listCollection&&1==this._listCollection.hasEventListener("collectionchanged",this._onDropdownListCollectionChangedInstance)&&this._listCollection.removeEventListener("collectionchanged",this._onDropdownListCollectionChangedInstance);this.close(!1)};
DropdownElement.prototype._reverseTween=function(){var a=this._openCloseTween.startVal,b=this._openCloseTween.endVal,c=Date.now(),d=c-this._openCloseTween.startTime;this._openCloseTween.startVal=b;this._openCloseTween.endVal=a;this._openCloseTween.startTime=c+d-this._openCloseTween.duration};
DropdownElement.prototype._onButtonClick=function(a){DropdownElement.base.prototype._onButtonClick.call(this,a);1!=a.getIsCanceled()&&(null!=this._openCloseTween?this._reverseTween():null==this._openHeight?this.open(!0):this.close(!0))};DropdownElement.prototype._createArrowButton=function(a){a=new a;a._setStyleProxy(new StyleProxy(this,DropdownElement._ArrowButtonProxyMap));this._applySubStylesToElement("ArrowButtonStyle",a);return a};
DropdownElement.prototype._updateArrowButton=function(){var a=this.getStyle("ArrowButtonClass");null==a?null!=this._arrowButton&&(this._removeChild(this._arrowButton),this._arrowButton=null):null==this._arrowButton?(this._arrowButton=this._createArrowButton(a),this._addChild(this._arrowButton)):this._arrowButton.constructor!=a?(this._removeChild(this._arrowButton),this._arrowButton=this._createArrowButton(a),this._addChild(this._arrowButton)):this._applySubStylesToElement("ArrowButtonStyle",this._arrowButton)};
DropdownElement.prototype._doStylesUpdated=function(a){DropdownElement.base.prototype._doStylesUpdated.call(this,a);"ItemLabelFunction"in a&&(this._sampledTextWidth=null,this._invalidateMeasure(),this._updateText());"PopupDataListStyle"in a&&null!=this._dataListPopup&&this._applySubStylesToElement("PopupDataListStyle",this._dataListPopup);("ArrowButtonClass"in a||"ArrowButtonStyle"in a)&&this._updateArrowButton();if("TextStyle"in a||"TextFont"in a||"TextSize"in a||"TextHorizontalAlign"in a||"TextVerticalAlign"in
a||"Text"in a)this._sampledTextWidth=null,this._invalidateMeasure()};DropdownElement.prototype._sampleTextWidths=function(){var a=this._getFontString(),b=this.getStyle("Text");null==b&&(b="");var b=CanvasElement._measureText(b,a),c=this.getStyle("ItemLabelFunction");if(null!=this._listCollection&&null!=c)for(var d,e=0;10>e&&e!=this._listCollection.getLength();e++)d=CanvasElement._measureText(c(this._listCollection.getItemAt(e)),a),d>b&&(b=d);return b};
DropdownElement.prototype._doMeasure=function(a,b){null==this._sampledTextWidth&&(this._sampledTextWidth=this._sampleTextWidths());var c=this.getStyle("TextSize")+this.getStyle("TextLinePaddingTop")+this.getStyle("TextLinePaddingBottom"),c={width:this._sampledTextWidth+a,height:c+b};c.width+=20;if(null!=this._arrowButton){var d=this._arrowButton.getStyle("Width"),e=this._arrowButton.getStyle("Height");null!=e&&e>c.height&&(c.height=e);c.width=null!=d?c.width+d:c.width+Math.round(.85*c.height)}return c};
DropdownElement.prototype._doLayout=function(a){DropdownElement.base.prototype._doLayout.call(this,a);null!=this._openDirection&&(this._dropdownManagerMetrics=this.getMetrics(this._manager),this._dataListPopupClipContainer.setStyle("Width",this._dropdownManagerMetrics._width),this._dataListPopupClipContainer.setStyle("X",this._dropdownManagerMetrics._x),this._dataListPopupClipContainer.setStyle("Y",this._dropdownManagerMetrics._y+this._dropdownManagerMetrics._height),this._dataListPopup._setActualSize(this._dropdownManagerMetrics._width,
this._dataListPopup._height));if(null!=this._arrowButton){var b=a.getX(),c=a.getY(),d=a.getWidth();a=a.getHeight();var e=this._arrowButton.getStyle("Width"),f=this._arrowButton.getStyle("Height");null==f&&(f=this._height);null==e&&(e=.85*this._height);this._width<e?(this._arrowButton._setActualSize(0,0),this._labelElement._setActualSize(0,0)):(null!=this._labelElement&&(this._labelElement._setActualPosition(b,c),this._labelElement._setActualSize(d-e,a)),this._arrowButton._setActualPosition(this._width-
e,c+a/2-f/2),this._arrowButton._setActualSize(e,f))}};function DataGridHeaderItemRenderer(){DataGridHeaderItemRenderer.base.prototype.constructor.call(this);this._currentSortDirection=this._sortDescIcon=this._sortAscIcon=null}DataGridHeaderItemRenderer.prototype=Object.create(ButtonElement.prototype);DataGridHeaderItemRenderer.prototype.constructor=DataGridHeaderItemRenderer;DataGridHeaderItemRenderer.base=ButtonElement;DataGridHeaderItemRenderer._StyleTypes=Object.create(null);
DataGridHeaderItemRenderer._StyleTypes.SortAscIconClass=StyleableBase.EStyleType.NORMAL;DataGridHeaderItemRenderer._StyleTypes.SortAscIconStyle=StyleableBase.EStyleType.SUBSTYLE;DataGridHeaderItemRenderer._StyleTypes.SortDescIconClass=StyleableBase.EStyleType.NORMAL;DataGridHeaderItemRenderer._StyleTypes.SortDescIconStyle=StyleableBase.EStyleType.SUBSTYLE;DataGridHeaderItemRenderer._StyleTypes.SortIconGap=StyleableBase.EStyleType.NORMAL;DataGridHeaderItemRenderer._StyleTypes.SortIconPlacement=StyleableBase.EStyleType.NORMAL;
DataGridHeaderItemRenderer.DisabledSkinStyleDefault=new StyleDefinition;DataGridHeaderItemRenderer.DisabledSkinStyleDefault.setStyle("BackgroundFill","#EBEBEB");DataGridHeaderItemRenderer.DisabledSkinStyleDefault.setStyle("BorderType",null);DataGridHeaderItemRenderer.SkinStyleDefault=new StyleDefinition;DataGridHeaderItemRenderer.SkinStyleDefault.setStyle("BorderType",null);DataGridHeaderItemRenderer.StyleDefault=new StyleDefinition;DataGridHeaderItemRenderer.StyleDefault.setStyle("UpSkinStyle",DataGridHeaderItemRenderer.SkinStyleDefault);
DataGridHeaderItemRenderer.StyleDefault.setStyle("OverSkinStyle",DataGridHeaderItemRenderer.SkinStyleDefault);DataGridHeaderItemRenderer.StyleDefault.setStyle("DownSkinStyle",DataGridHeaderItemRenderer.SkinStyleDefault);DataGridHeaderItemRenderer.StyleDefault.setStyle("DisabledSkinStyle",DataGridHeaderItemRenderer.DisabledSkinStyleDefault);DataGridHeaderItemRenderer.StyleDefault.setStyle("DisabledTextColor","#000000");DataGridHeaderItemRenderer.StyleDefault.setStyle("TextHorizontalAlign","left");
DataGridHeaderItemRenderer.StyleDefault.setStyle("PaddingTop",4);DataGridHeaderItemRenderer.StyleDefault.setStyle("PaddingBottom",4);DataGridHeaderItemRenderer.StyleDefault.setStyle("PaddingLeft",8);DataGridHeaderItemRenderer.StyleDefault.setStyle("PaddingRight",8);DataGridHeaderItemRenderer.SortAscIconSkinBgShapeDefault=new ArrowShape;DataGridHeaderItemRenderer.SortAscIconSkinBgShapeDefault.setStyle("Direction","up");DataGridHeaderItemRenderer.SortAscIconSkinStyleDefault=new StyleDefinition;
DataGridHeaderItemRenderer.SortAscIconSkinStyleDefault.setStyle("BorderType",null);DataGridHeaderItemRenderer.SortAscIconSkinStyleDefault.setStyle("BackgroundFill","#444444");DataGridHeaderItemRenderer.SortAscIconSkinStyleDefault.setStyle("BackgroundShape",DataGridHeaderItemRenderer.SortAscIconSkinBgShapeDefault);DataGridHeaderItemRenderer.SortAscIconStyleDefault=new StyleDefinition;DataGridHeaderItemRenderer.SortAscIconStyleDefault.setStyle("UpSkinStyle",DataGridHeaderItemRenderer.SortAscIconSkinStyleDefault);
DataGridHeaderItemRenderer.SortAscIconStyleDefault.setStyle("OverSkinStyle",DataGridHeaderItemRenderer.SortAscIconSkinStyleDefault);DataGridHeaderItemRenderer.SortAscIconStyleDefault.setStyle("DownSkinStyle",DataGridHeaderItemRenderer.SortAscIconSkinStyleDefault);DataGridHeaderItemRenderer.SortAscIconStyleDefault.setStyle("MouseEnabled",!1);DataGridHeaderItemRenderer.SortDescIconSkinBgShapeDefault=new ArrowShape;DataGridHeaderItemRenderer.SortDescIconSkinBgShapeDefault.setStyle("Direction","down");
DataGridHeaderItemRenderer.SortDescIconSkinStyleDefault=new StyleDefinition;DataGridHeaderItemRenderer.SortDescIconSkinStyleDefault.setStyle("BorderType",null);DataGridHeaderItemRenderer.SortDescIconSkinStyleDefault.setStyle("BackgroundFill","#444444");DataGridHeaderItemRenderer.SortDescIconSkinStyleDefault.setStyle("BackgroundShape",DataGridHeaderItemRenderer.SortDescIconSkinBgShapeDefault);DataGridHeaderItemRenderer.SortDescIconStyleDefault=new StyleDefinition;
DataGridHeaderItemRenderer.SortDescIconStyleDefault.setStyle("UpSkinStyle",DataGridHeaderItemRenderer.SortDescIconSkinStyleDefault);DataGridHeaderItemRenderer.SortDescIconStyleDefault.setStyle("OverSkinStyle",DataGridHeaderItemRenderer.SortDescIconSkinStyleDefault);DataGridHeaderItemRenderer.SortDescIconStyleDefault.setStyle("DownSkinStyle",DataGridHeaderItemRenderer.SortDescIconSkinStyleDefault);DataGridHeaderItemRenderer.SortDescIconStyleDefault.setStyle("MouseEnabled",!1);
DataGridHeaderItemRenderer.StyleDefault.setStyle("SortAscIconClass",ButtonElement);DataGridHeaderItemRenderer.StyleDefault.setStyle("SortAscIconStyle",DataGridHeaderItemRenderer.SortAscIconStyleDefault);DataGridHeaderItemRenderer.StyleDefault.setStyle("SortDescIconClass",ButtonElement);DataGridHeaderItemRenderer.StyleDefault.setStyle("SortDescIconStyle",DataGridHeaderItemRenderer.SortDescIconStyleDefault);DataGridHeaderItemRenderer.StyleDefault.setStyle("SortIconGap",3);
DataGridHeaderItemRenderer.StyleDefault.setStyle("SortIconPlacement","right");DataGridHeaderItemRenderer._SortIconProxyMap=Object.create(null);DataGridHeaderItemRenderer._SortIconProxyMap.SkinState=!0;
DataGridHeaderItemRenderer.prototype._createSortIcon=function(a){var b=new (1==a?this.getStyle("SortDescIconClass"):this.getStyle("SortAscIconClass"));b._setStyleProxy(new StyleProxy(this,DataGridHeaderItemRenderer._SortIconProxyMap));1==a?this._applySubStylesToElement("SortDescIconStyle",b):this._applySubStylesToElement("SortAscIconStyle",b);return b};
DataGridHeaderItemRenderer.prototype._updateSortIcons=function(){if(null!=this._listData){var a=this._listData,b=a._parentGrid._listCollection,c=null;null!=b&&null!=b._collectionSort&&b._collectionSort==a._parentGrid._gridColumns[a._columnIndex].getStyle("CollectionSort")&&(c=1==b._collectionSort._isDecending?"down":"up");this._currentSortDirection!=c&&(this._currentSortDirection=c,this._invalidateLayout());null==c?(null!=this._sortAscIcon&&this._sortAscIcon.setStyle("Visible",!1),null!=this._sortDescIcon&&
this._sortDescIcon.setStyle("Visible",!1)):"up"==c?(a=this.getStyle("SortAscIconClass"),null==a?null!=this._sortAscIcon&&(this._removeChild(this._sortAscIcon),this._sortAscIcon=null):(null==this._sortAscIcon?(this._sortAscIcon=this._createSortIcon(!1),this._addChild(this._sortAscIcon)):this._sortAscIcon.constructor!=a?(this._removeChild(this._sortAscIcon),this._sortAscIcon=this._createSortIcon(!1),this._addChild(this._sortAscIcon)):this._applySubStylesToElement("SortAscIconStyle",this._sortAscIcon),
null!=this._sortDescIcon&&this._sortDescIcon.setStyle("Visible",!1),this._sortAscIcon.setStyle("Visible",!0))):"down"==c&&(a=this.getStyle("SortDescIconClass"),null==a?null!=this._sortDescIcon&&(this._removeChild(this._sortDescIcon),this._sortDescIcon=null):(null==this._sortDescIcon?(this._sortDescIcon=this._createSortIcon(!0),this._addChild(this._sortDescIcon)):this._sortDescIcon.constructor!=a?(this._removeChild(this._sortDescIcon),this._sortDescIcon=this._createSortIcon(!0),this._addChild(this._sortDescIcon)):
this._applySubStylesToElement("SortDescIconStyle",this._sortDescIcon),null!=this._sortAscIcon&&this._sortAscIcon.setStyle("Visible",!1),this._sortDescIcon.setStyle("Visible",!0)))}};DataGridHeaderItemRenderer.prototype._setListData=function(a,b){DataGridHeaderItemRenderer.base.prototype._setListData.call(this,a,b);null!=a&&(this.setStyle("Text",a._parentGrid._gridColumns[a._columnIndex].getStyle("HeaderText")),this._updateSortIcons())};
DataGridHeaderItemRenderer.prototype._doStylesUpdated=function(a){DataGridHeaderItemRenderer.base.prototype._doStylesUpdated.call(this,a);("SortAscIconClass"in a||"SortAscIconStyle"in a||"SortDescIconClass"in a||"SortDescIconStyle"in a)&&this._updateSortIcons();("SortIconGap"in a||"SortIconPlacement"in a)&&this._invalidateLayout()};
DataGridHeaderItemRenderer.prototype._doLayout=function(a){DataGridHeaderItemRenderer.base.prototype._doLayout.call(this,a);if(null!=this._labelElement&&null!=this._currentSortDirection){var b;b="up"==this._currentSortDirection?this._sortAscIcon:this._sortDescIcon;if(null!=b){var c=a.getX(),d=a.getY(),e=a.getWidth(),f=a.getHeight(),g=b.getStyle("Width"),k=b.getStyle("Height");null==k&&(k=.35*a.getHeight());null==g&&(g=1.5*k);e<g?(b._setActualSize(0,0),this._labelElement._setActualSize(0,0)):(a=this.getStyle("SortIconGap"),
"left"==this.getStyle("SortIconPlacement")?(this._labelElement._setActualPosition(c+g+a,d),this._labelElement._setActualSize(e-g-a,f),b._setActualPosition(c,d+f/2-k/2)):(this._labelElement._setActualPosition(c,d),this._labelElement._setActualSize(e-g-a,f),b._setActualPosition(c+e-g,d+f/2-k/2)),b._setActualSize(g,k))}}};function DataGridHeaderElement(){DataGridHeaderElement.base.prototype.constructor.call(this);var a=this;this._onColumnDividerDragInstance=function(b){a._onColumnDividerDrag(b)}}
DataGridHeaderElement.prototype=Object.create(DataGridDataRenderer.prototype);DataGridHeaderElement.prototype.constructor=DataGridHeaderElement;DataGridHeaderElement.base=DataGridDataRenderer;DataGridHeaderElement._StyleTypes=Object.create(null);DataGridHeaderElement._StyleTypes.ColumnDividerClass=StyleableBase.EStyleType.NORMAL;DataGridHeaderElement._StyleTypes.ColumnDividerStyle=StyleableBase.EStyleType.SUBSTYLE;DataGridHeaderElement._StyleTypes.DraggableColumns=StyleableBase.EStyleType.NORMAL;
DataGridHeaderElement.StyleDefault=new StyleDefinition;DataGridHeaderElement.StyleDefault.setStyle("PaddingBottom",1);DataGridHeaderElement.StyleDefault.setStyle("BorderType","solid");DataGridHeaderElement.StyleDefault.setStyle("BorderThickness",1);DataGridHeaderElement.StyleDefault.setStyle("BorderColor","#000000");DataGridHeaderElement.ColumnDividerSkinStyleDefault=new StyleDefinition;DataGridHeaderElement.ColumnDividerSkinStyleDefault.setStyle("DividerLineColor","#777777");
DataGridHeaderElement.ColumnDividerSkinStyleDefault.setStyle("DividerArrowColor","#444444");DataGridHeaderElement.ColumnDividerSkinStyleDefault.setStyle("BorderType",null);DataGridHeaderElement.ColumnDividerSkinStyleDefault.setStyle("BackgroundFill",null);DataGridHeaderElement.ColumnDividerStyleDefault=new StyleDefinition;DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("SkinClass",DataGridHeaderColumnDividerSkinElement);DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("Width",11);
DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("TabStop",-1);DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("UpSkinStyle",DataGridHeaderElement.ColumnDividerSkinStyleDefault);DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("OverSkinStyle",DataGridHeaderElement.ColumnDividerSkinStyleDefault);DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("DownSkinStyle",DataGridHeaderElement.ColumnDividerSkinStyleDefault);
DataGridHeaderElement.ColumnDividerStyleDefault.setStyle("DisabledSkinStyle",DataGridHeaderElement.ColumnDividerSkinStyleDefault);DataGridHeaderElement.StyleDefault.setStyle("ColumnDividerClass",ButtonElement);DataGridHeaderElement.StyleDefault.setStyle("ColumnDividerStyle",DataGridHeaderElement.ColumnDividerStyleDefault);DataGridHeaderElement.StyleDefault.setStyle("DraggableColumns",!0);
DataGridHeaderElement.prototype._onColumnDividerDrag=function(a){if(null!=this._listData){var b=this._listData._parentList,c,d=0,e=0,f=0,g,k=[];for(g=0;g<b._gridColumns.length;g++)k.push({actualSize:b._columnSizes[g],percentSize:b._columnPercents[g],oldPercentSize:b._columnPercents[g],minSize:b._gridColumns[g].getStyle("MinSize"),minPercent:0}),e+=k[g].actualSize,f+=k[g].percentSize;for(g=0;g<k.length;g++)k[g].minPercent=k[g].minSize/e*f;var l;for(g=k.length;g<this._itemRenderersContainer._children.length;g++)if(c=
this._itemRenderersContainer._children[g],l=g-k.length,d+=k[l].actualSize,c==a.getCurrentTarget()){var h=d=Math.round(d-c._width/2),n=d;g=a=0;for(var p=[],m=l+1;m<k.length;m++)p.push(k[m]),a+=k[m].percentSize,g+=k[m].actualSize,n+=k[m].actualSize-k[l].minSize;for(m=l;0<=m;m--)h-=k[m].actualSize-k[m].minSize;m=c._x;m<h&&(m=h);m>n&&(m=n);c=0;d=m-d;g-=d;for(m=l;0<=m&&(k[m].actualSize+d<k[m].minSize?(d-=k[m].actualSize-k[m].minSize,k[m].actualSize=k[m].minSize):(k[m].actualSize+=d,d=0),k[m].percentSize=
k[m].actualSize/e*f,c+=k[m].percentSize-k[m].oldPercentSize,0!=d);m--);e=p.slice();for(f=!1;0==f;)for(f=!0,m=0;m<e.length;m++)if(l=e[m].oldPercentSize/a*c,e[m].oldPercentSize-l<e[m].minPercent){e[m].percentSize=e[m].minPercent;a-=e[m].minPercent;c-=e[m].oldPercentSize-e[m].percentSize;e.splice(m,1);f=!1;break}else e[m].percentSize=e[m].oldPercentSize-l;CanvasElement._calculateMinMaxPercentSizes(p,g);break}for(g=0;g<k.length;g++)b._columnSizes[g]=k[g].actualSize,b._columnPercents[g]=k[g].percentSize;
this._invalidateLayout();b._invalidateLayout();b._invalidateListRenderersLayout()}};
DataGridHeaderElement.prototype._doStylesUpdated=function(a){DataGridHeaderElement.base.prototype._doStylesUpdated.call(this,a);("ColumnDividerClass"in a||"ColumnDividerStyle"in a)&&this._setListData(this._listData,this._itemData);if("DraggableColumns"in a&&null!=this._listData){var b=this._listData._parentList;a=this.getStyle("DraggableColumns");for(var c,d=b._gridColumns.length;d<this._itemRenderersContainer._children.length;d++)b=this._itemRenderersContainer._children[d],b.setStyle("Draggable",
a),c=b.hasEventListener("dragging",this._onColumnDividerDragInstance),1==a&&0==c?b.addEventListener("dragging",this._onColumnDividerDragInstance):0==a&&1==c&&b.removeEventListener("dragging",this._onColumnDividerDragInstance),1==a?b.setStyle("Enabled",!0):b.setStyle("Enabled",!1)}};
DataGridHeaderElement.prototype._setListData=function(a,b){DataGridDataRenderer.base.prototype._setListData.call(this,a,b);if(null!=a){var c,d;for(c=0;c<a._parentList._gridColumns.length;c++)d=this._itemRenderersContainer._getChildAt(c),null==d?(d=a._parentList._createHeaderItemRenderer(c),this._itemRenderersContainer._addChildAt(d,c)):(columnDef=a._parentList._gridColumns[c],d.constructor!=columnDef.getStyle("HeaderItemClass")?(this._itemRenderersContainer._removeChildAt(c),d=a._parentList._createHeaderItemRenderer(c),
this._itemRenderersContainer._addChildAt(d,c)):a._parentList._updateHeaderItemRendererData(d,c));var e=this.getStyle("ColumnDividerClass"),f=this.getStyle("DraggableColumns"),g=a._parentList._gridColumns.length;for(null!=e&&(g=2*g-1);c<g;c++)d=this._itemRenderersContainer._getChildAt(c),null!=d&&d.constructor!=e&&(this._itemRenderersContainer._removeChildAt(c),d=null),null==d?(d=new e,this._applySubStylesToElement("ColumnDividerStyle",d),d.setStyle("Draggable",f),1==f?(d.addEventListener("dragging",
this._onColumnDividerDragInstance),d.setStyle("Enabled",!0)):d.setStyle("Enabled",!1),this._itemRenderersContainer._addChildAt(d,c)):this._applySubStylesToElement("ColumnDividerStyle",d);for(;this._itemRenderersContainer._children.length>g;)this._itemRenderersContainer._removeChildAt(this._itemRenderersContainer._children.length-1);this._invalidateMeasure();this._invalidateLayout()}};
DataGridHeaderElement.prototype._doLayout=function(a){DataGridHeaderElement.base.prototype._doLayout.call(this,a);if(null!=this._listData){a=this._listData._parentList;for(var b,c=0,d,e=a._columnSizes.length;e<this._itemRenderersContainer._children.length;e++)b=this._itemRenderersContainer._children[e],d=a._columnSizes[e-a._columnSizes.length],c+=d,d=b.getStyle("Height"),null==d&&(d=Math.round(.7*this._itemRenderersContainer._height)),b._setActualSize(b._getStyledOrMeasuredWidth(),d),b._setActualPosition(c-
b._getStyledOrMeasuredWidth()/2,this._itemRenderersContainer._height/2-b._height/2)}};
function DataGridElement(){DataGridElement.base.prototype.constructor.call(this);this._gridColumns=[];this._columnSizes=[];this._columnPercents=[];this._overColumnIndex=this._overIndex=this._selectedColumnIndex=-1;this._gridHeader=null;this._gridLineContainer=new CanvasElement;this._gridLineContainer.setStyle("MouseEnabled",!1);this._gridLineContainer.setStyle("ClipContent",!0);this._addChild(this._gridLineContainer);var a=this;this._onDataGridColumnDefinitionChangedInstance=function(b){a._onDataGridColumnDefinitionChanged(b)};
this._onDataGridRowItemClickInstance=function(b){a._onDataGridRowItemClick(b)};this._onDataGridRowItemRolloverInstance=function(b){a._onDataGridRowItemRollover(b)};this._onDataGridRowItemRolloutInstance=function(b){a._onDataGridRowItemRollout(b)};this._onDataGridHeaderItemClickInstance=function(b){a._onDataGridHeaderItemClick(b)};this._onGridLineContainerMeasureCompleteInstance=function(b){a._onGridLineContainerMeasureComplete(b)};this._gridLineContainer.addEventListener("measurecomplete",this._onGridLineContainerMeasureCompleteInstance)}
DataGridElement.prototype=Object.create(DataListElement.prototype);DataGridElement.prototype.constructor=DataGridElement;DataGridElement.base=DataListElement;DataGridElement._StyleTypes=Object.create(null);DataGridElement._StyleTypes.HeaderClass=StyleableBase.EStyleType.NORMAL;DataGridElement._StyleTypes.HeaderStyle=StyleableBase.EStyleType.SUBSTYLE;DataGridElement._StyleTypes.GridLinesPriority=StyleableBase.EStyleType.NORMAL;DataGridElement._StyleTypes.VerticalGridLinesClass=StyleableBase.EStyleType.NORMAL;
DataGridElement._StyleTypes.VerticalGridLinesStyle=StyleableBase.EStyleType.SUBSTYLE;DataGridElement._StyleTypes.HorizontalGridLinesClass=StyleableBase.EStyleType.NORMAL;DataGridElement._StyleTypes.HorizontalGridLinesStyle=StyleableBase.EStyleType.SUBSTYLE;DataGridElement.StyleDefault=new StyleDefinition;DataGridElement.GridLineStyleDefault=new StyleDefinition;DataGridElement.GridLineStyleDefault.setStyle("Width",1);DataGridElement.GridLineStyleDefault.setStyle("Height",1);
DataGridElement.GridLineStyleDefault.setStyle("BackgroundFill","#BBBBBB");DataGridElement.ScrollBarStyleDefault=new StyleDefinition;DataGridElement.ScrollBarStyleDefault.setStyle("Padding",-1);DataGridElement.StyleDefault.setStyle("ListItemClass",DataGridDataRenderer);DataGridElement.StyleDefault.setStyle("ListItemStyle",null);DataGridElement.StyleDefault.setStyle("BorderType","solid");DataGridElement.StyleDefault.setStyle("BorderThickness",1);DataGridElement.StyleDefault.setStyle("PaddingTop",1);
DataGridElement.StyleDefault.setStyle("PaddingBottom",1);DataGridElement.StyleDefault.setStyle("PaddingLeft",1);DataGridElement.StyleDefault.setStyle("PaddingRight",1);DataGridElement.StyleDefault.setStyle("ScrollBarStyle",DataGridElement.ScrollBarStyleDefault);DataGridElement.StyleDefault.setStyle("HeaderClass",DataGridHeaderElement);DataGridElement.StyleDefault.setStyle("HeaderStyle",null);DataGridElement.StyleDefault.setStyle("GridLinesPriority","vertical");
DataGridElement.StyleDefault.setStyle("VerticalGridLinesClass",CanvasElement);DataGridElement.StyleDefault.setStyle("VerticalGridLinesStyle",DataGridElement.GridLineStyleDefault);DataGridElement.StyleDefault.setStyle("HorizontalGridLinesClass",CanvasElement);DataGridElement.StyleDefault.setStyle("HorizontalGridLinesStyle",DataGridElement.GridLineStyleDefault);DataGridElement.StyleDefault.setStyle("TabStop",0);
DataGridElement.prototype.addColumnDefinition=function(a){return this.addColumnDefinitionAt(a,this._gridColumns.length)};
DataGridElement.prototype.addColumnDefinitionAt=function(a,b){if(!(a instanceof DataGridColumnDefinition))throw"Invalid DataGridColumnDefinition";this._gridColumns.splice(b,0,a);this._columnPercents.splice(b,0,a.getStyle("PercentSize"));null!=this._manager&&a.addEventListener("stylechanged",this._onDataGridColumnDefinitionChangedInstance);this._columnSizes=[];this._columnsChanged();return a};DataGridElement.prototype.getColumnDefinitionAt=function(a){return 0>a||a>=this._gridColumns.length?null:this._gridColumns[a]};
DataGridElement.prototype.removeColumnDefinition=function(a){return this.removeColumnDefinitionAt(this._gridColumns.indexOf(a))};DataGridElement.prototype.removeColumnDefinitionAt=function(a){if(0>a||a>=this._gridColumns.length)return null;var b=this._gridColumns.splice(a,1)[0];this._columnPercents.splice(a,1);null!=this._manager&&b.removeEventListener("stylechanged",this._onDataGridColumnDefinitionChangedInstance);this._columnSizes=[];this._columnsChanged();return b};
DataGridElement.prototype.getNumColumns=function(){return this._gridColumns.length};
DataGridElement.prototype.setSelectedIndex=function(a,b){if(this._selectedIndex==a&&this._selectedColumnIndex==b||a>this._listCollection.length-1||b>this._gridColumns.length-1)return!1;-1>a&&(a=-1);-1>b&&(b=-1);this._selectedIndex=a;this._selectedColumnIndex=b;for(var c={rowIndex:this._selectedIndex,columnIndex:this._selectedColumnIndex,rowOverIndex:this._overIndex,columnOverIndex:this._columnOverIndex},d=0;d<this._contentPane._children.length;d++)this._contentPane._children[d]._setListSelected(c);return!0};
DataGridElement.prototype.getSelectedIndex=function(){return{row:this._selectedIndex,column:this._selectedColumnIndex}};DataGridElement.prototype._onGridLineContainerMeasureComplete=function(a){this._invalidateLayout()};
DataGridElement.prototype._onDataGridColumnDefinitionChanged=function(a){var b=a.getStyleName();"PercentSize"==b?(b=this._gridColumns.indexOf(a.getTarget()),this._columnPercents[b]=a.getNewValue(),this._columnSizes=[],this._invalidateLayout()):"MinSize"==b?(this._columnSizes=[],this._invalidateLayout()):this._columnsChanged()};
DataGridElement.prototype._columnsChanged=function(){null!=this._gridHeader&&this._gridHeader._setListData(this._gridHeader._listData,null);for(var a,b=0;b<this._contentPane._children.length;b++)a=this._contentPane._children[b],this._updateRendererData(a,a._listData._itemIndex);this._invalidateLayout()};
DataGridElement.prototype._onDataListCollectionChanged=function(a){DataGridElement.base.prototype._onDataListCollectionChanged.call(this,a);"reset"==a.getKind()&&null!=this._gridHeader&&this._gridHeader._setListData(this._gridHeader._listData,null)};DataGridElement.prototype._onCanvasElementAdded=function(a){DataGridElement.base.prototype._onCanvasElementAdded.call(this,a);for(a=0;a<this._gridColumns.length;a++)this._gridColumns[a].addEventListener("stylechanged",this._onDataGridColumnDefinitionChangedInstance)};
DataGridElement.prototype._onCanvasElementRemoved=function(a){DataGridElement.base.prototype._onCanvasElementRemoved.call(this,a);for(a=0;a<this._gridColumns.length;a++)this._gridColumns[a].removeEventListener("stylechanged",this._onDataGridColumnDefinitionChangedInstance)};DataGridElement.prototype._createRenderer=function(a){var b=new (this.getStyle("ListItemClass"));this._applySubStylesToElement("ListItemStyle",b);this._updateRendererData(b,a);return b};
DataGridElement.prototype._createHeaderItemRenderer=function(a){var b=this._gridColumns[a],c=new (b.getStyle("HeaderItemClass"));b._applySubStylesToElement("HeaderItemStyle",c);this._updateHeaderItemRendererData(c,a);c.addEventListener("click",this._onDataGridHeaderItemClickInstance);return c};
DataGridElement.prototype._updateHeaderItemRendererData=function(a,b){var c=this._gridColumns[b],d;d=null!=a._listData&&a._listData._columnIndex==b?a._listData:new DataGridItemData(this,-1,b);c._applySubStylesToElement("HeaderItemStyle",a);a._setListData(d,null)};
DataGridElement.prototype._onDataGridHeaderItemClick=function(a){a=a.getCurrentTarget()._listData._columnIndex;var b=this._gridColumns[a].getStyle("CollectionSort");null!=b&&b instanceof CollectionSort&&(this._listCollection._collectionSort!=b?(b._isDecending=!1,this._listCollection.setCollectionSort(b)):b._isDecending=!b._isDecending,this._listCollection.sort());this._dispatchEvent(new ElementGridItemClickEvent(-1,a,null))};
DataGridElement.prototype._createRowItemRenderer=function(a,b){var c=this._gridColumns[b],d=new (c.getStyle("RowItemClass"));c._applySubStylesToElement("RowItemStyle",d);this._updateRowItemRendererData(d,a,b);d.addEventListener("click",this._onDataGridRowItemClickInstance);d.addEventListener("rollover",this._onDataGridRowItemRolloverInstance);d.addEventListener("rollout",this._onDataGridRowItemRolloutInstance);return d};
DataGridElement.prototype._onDataGridRowItemRollover=function(a){this._overIndex=a.getCurrentTarget()._listData._itemIndex;this._columnOverIndex=a.getCurrentTarget()._listData._columnIndex;for(var b=0;b<this._contentPane._children.length;b++)a=this._contentPane._children[b],a._setListSelected({rowIndex:this._selectedIndex,columnIndex:this._selectedColumnIndex,rowOverIndex:this._overIndex,columnOverIndex:this._columnOverIndex})};
DataGridElement.prototype._onDataGridRowItemRollout=function(a){this._columnOverIndex=this._overIndex=-1;for(var b=0;b<this._contentPane._children.length;b++)a=this._contentPane._children[b],a._setListSelected({rowIndex:this._selectedIndex,columnIndex:this._selectedColumnIndex,rowOverIndex:this._overIndex,columnOverIndex:this._columnOverIndex})};
DataGridElement.prototype._updateRendererData=function(a,b){var c;c=null!=a._listData&&a._listData._itemIndex==b?a._listData:new DataListData(this,b);a._setListData(c,this._listCollection.getItemAt(b));a._setListSelected({rowIndex:this._selectedIndex,columnIndex:this._selectedColumnIndex,rowOverIndex:this._overIndex,columnOverIndex:this._columnOverIndex})};
DataGridElement.prototype._onDataGridRowItemClick=function(a){var b=a.getCurrentTarget()._listData._itemIndex,c=a.getCurrentTarget()._listData._columnIndex,d=a.getCurrentTarget()._itemData,e=this._gridColumns[c],f=this.getStyle("Selectable"),g=e.getStyle("Selectable"),k=a.getCurrentTarget().getStyle("Selectable");"undefined"===k&&(k=!0);a=!1;f&&g&&k&&(f=b,g=c,"row"==e.getStyle("SelectionType")?g=-1:"column"==e.getStyle("SelectionType")&&(f=-1),1==this.setSelectedIndex(f,g)&&(a=!0));this._dispatchEvent(new ElementGridItemClickEvent(b,
c,d));1==a&&this._dispatchEvent(new ElementEvent("changed",!1))};DataGridElement.prototype._updateRowItemRendererData=function(a,b,c){var d=this._gridColumns[c];c=null!=a._listData&&a._listData._columnIndex==c&&a._listData._itemIndex==b?a._listData:new DataGridItemData(this,b,c);d._applySubStylesToElement("RowItemStyle",a);a._setListData(c,this._listCollection.getItemAt(b))};
DataGridElement.prototype._doStylesUpdated=function(a){DataGridElement.base.prototype._doStylesUpdated.call(this,a);if("HeaderClass"in a){var b=this.getStyle("HeaderClass");if(null==b&&null!=this._gridHeader||null!=this._gridHeader&&this._gridHeader.constructor!=b)this._removeChild(this._gridHeader),this._gridHeader=null;null!=b&&null==this._gridHeader&&(this._gridHeader=new b,this._gridHeader._setListData(new DataListData(this,-1),null),this._addChild(this._gridHeader));this._invalidateLayout()}"HeaderStyle"in
a&&null!=this._gridHeader&&this._applySubStylesToElement("HeaderStyle",this._gridHeader);("GridLinesPriority"in a||"VerticalGridLinesClass"in a||"VerticalGridLinesStyle"in a||"HorizontalGridLinesClass"in a||"HorizontalGridLinesStyle"in a)&&this._invalidateLayout()};DataGridElement.prototype._doMeasure=function(a,b){return{width:16,height:16}};
DataGridElement.prototype._createGridLine=function(a){"vertical"==a?(a=new (this.getStyle("VerticalGridLinesClass")),this._applySubStylesToElement("VerticalGridLinesStyle",a)):(a=new (this.getStyle("HorizontalGridLinesClass")),this._applySubStylesToElement("HorizontalGridLinesStyle",a));return a};
DataGridElement.prototype._doLayout=function(a){if(null!=this._gridHeader){var b=this._gridHeader._getStyledOrMeasuredHeight(),c=new DrawMetrics;c._x=a._x;c._y=a._y+b;c._width=a._width;c._height=a._height-b;DataGridElement.base.prototype._doLayout.call(this,c)}else DataGridElement.base.prototype._doLayout.call(this,a);if(1!=this._layoutInvalid){null!=this._gridHeader&&(this._gridHeader._setActualPosition(this._contentPane._x,a.getY()),this._gridHeader._setActualSize(a.getWidth(),this._gridHeader._getStyledOrMeasuredHeight()));
b=!1;if(this._columnSizes.length!=this._gridColumns.length)b=!0;else{for(a=c=0;a<this._columnSizes.length;a++)c+=this._columnSizes[a];c!=this._contentPane._width&&(b=!0)}if(1==b){b=[];for(a=0;a<this._gridColumns.length;a++)b.push({percentSize:this._columnPercents[a],minSize:this._gridColumns[a].getStyle("MinSize")});CanvasElement._calculateMinMaxPercentSizes(b,this._contentPane._width);c=[];for(a=0;a<b.length;a++)c.push(b[a].actualSize);this._columnSizes=c;null!=this._gridHeader&&this._gridHeader._invalidateLayout();
this._invalidateListRenderersLayout()}this._gridLineContainer._setActualPosition(this._contentPane._x,this._contentPane._y);this._gridLineContainer._setActualSize(this._contentPane._width,this._contentPane._height);var d,b=0,e,f=!1;e=!1;for(var c=this.getStyle("GridLinesPriority"),g=this.getStyle("VerticalGridLinesClass"),k=this.getStyle("HorizontalGridLinesClass");0==f||0==e;){if("horizontal"==c&&0==e||1==f&&0==e){if(null!=k)for(a=0;a<this._contentPane._children.length;a++)e=this._contentPane._children[a],
d=e._listData._itemIndex,0!=d&&(d=this._gridLineContainer._getChildAt(b),null==d?(d=this._createGridLine("horizontal"),this._gridLineContainer._addChildAt(d,b)):d.constructor!=k?(this._gridLineContainer._removeChildAt(b),d=this._createGridLine("horizontal"),this._gridLineContainer._addChildAt(d,b)):this._applySubStylesToElement("HorizontalGridLinesStyle",d),d._setActualSize(this._gridLineContainer._width,d.getStyle("Height")),d._setActualPosition(0,e._y-d._height/2),b++);e=!0}if("vertical"==c&&0==
f||1==e&&0==f){if(null!=g)for(a=f=0;a<this._columnSizes.length-1;a++)f+=this._columnSizes[a],d=this._gridLineContainer._getChildAt(b),null==d?(d=this._createGridLine("vertical"),this._gridLineContainer._addChildAt(d,b)):d.constructor!=g?(this._gridLineContainer._removeChildAt(b),d=this._createGridLine("vertical"),this._gridLineContainer._addChildAt(d,b)):this._applySubStylesToElement("VerticalGridLinesStyle",d),d._setActualSize(d.getStyle("Width"),this._gridLineContainer._height),d._setActualPosition(f-
d._width/2,0),b++;f=!0}}for(;b<this._gridLineContainer._children.length;)this._gridLineContainer._removeChildAt(this._gridLineContainer._children.length-1)}};function DataGridColumnDefinition(){DataGridColumnDefinition.base.prototype.constructor.call(this)}DataGridColumnDefinition.prototype=Object.create(StyleableBase.prototype);DataGridColumnDefinition.prototype.constructor=DataGridColumnDefinition;DataGridColumnDefinition.base=StyleableBase;DataGridColumnDefinition._StyleTypes=Object.create(null);
DataGridColumnDefinition._StyleTypes.PercentSize=StyleableBase.EStyleType.NORMAL;DataGridColumnDefinition._StyleTypes.MinSize=StyleableBase.EStyleType.NORMAL;DataGridColumnDefinition._StyleTypes.HeaderText=StyleableBase.EStyleType.NORMAL;DataGridColumnDefinition._StyleTypes.HeaderItemClass=StyleableBase.EStyleType.NORMAL;DataGridColumnDefinition._StyleTypes.HeaderItemStyle=StyleableBase.EStyleType.SUBSTYLE;DataGridColumnDefinition._StyleTypes.CollectionSort=StyleableBase.EStyleType.NORMAL;
DataGridColumnDefinition._StyleTypes.RowItemClass=StyleableBase.EStyleType.NORMAL;DataGridColumnDefinition._StyleTypes.RowItemStyle=StyleableBase.EStyleType.SUBSTYLE;DataGridColumnDefinition._StyleTypes.RowItemLabelFunction=StyleableBase.EStyleType.NORMAL;DataGridColumnDefinition._StyleTypes.SelectionType=StyleableBase.EStyleType.NORMAL;DataGridColumnDefinition._StyleTypes.Selectable=StyleableBase.EStyleType.NORMAL;DataGridColumnDefinition._StyleTypes.Highlightable=StyleableBase.EStyleType.NORMAL;
DataGridColumnDefinition.StyleDefault=new StyleDefinition;DataGridColumnDefinition.StyleDefault.setStyle("PercentSize",100);DataGridColumnDefinition.StyleDefault.setStyle("MinSize",12);DataGridColumnDefinition.StyleDefault.setStyle("SelectionType","row");DataGridColumnDefinition.StyleDefault.setStyle("Selectable",!0);DataGridColumnDefinition.StyleDefault.setStyle("Highlightable",!0);DataGridColumnDefinition.StyleDefault.setStyle("HeaderText","");
DataGridColumnDefinition.StyleDefault.setStyle("HeaderItemClass",DataGridHeaderItemRenderer);DataGridColumnDefinition.StyleDefault.setStyle("HeaderItemStyle",null);DataGridColumnDefinition.StyleDefault.setStyle("CollectionSort",null);DataGridColumnDefinition.StyleDefault.setStyle("RowItemClass",DataGridLabelItemRenderer);DataGridColumnDefinition.StyleDefault.setStyle("RowItemStyle",null);DataGridColumnDefinition.StyleDefault.setStyle("RowItemLabelFunction",null);
function CheckboxElement(){CheckboxElement.base.prototype.constructor.call(this)}CheckboxElement.prototype=Object.create(RadioButtonElement.prototype);CheckboxElement.prototype.constructor=CheckboxElement;CheckboxElement.base=RadioButtonElement;CheckboxElement._StyleTypes=Object.create(null);CheckboxElement._StyleTypes.HalfSelectedUpSkinClass=StyleableBase.EStyleType.NORMAL;CheckboxElement._StyleTypes.HalfSelectedUpSkinStyle=StyleableBase.EStyleType.SUBSTYLE;
CheckboxElement._StyleTypes.HalfSelectedUpTextColor=StyleableBase.EStyleType.NORMAL;CheckboxElement._StyleTypes.HalfSelectedOverSkinClass=StyleableBase.EStyleType.NORMAL;CheckboxElement._StyleTypes.HalfSelectedOverSkinStyle=StyleableBase.EStyleType.SUBSTYLE;CheckboxElement._StyleTypes.HalfSelectedOverTextColor=StyleableBase.EStyleType.NORMAL;CheckboxElement._StyleTypes.HalfSelectedDownSkinClass=StyleableBase.EStyleType.NORMAL;CheckboxElement._StyleTypes.HalfSelectedDownSkinStyle=StyleableBase.EStyleType.SUBSTYLE;
CheckboxElement._StyleTypes.HalfSelectedDownTextColor=StyleableBase.EStyleType.NORMAL;CheckboxElement._StyleTypes.HalfSelectedDisabledSkinClass=StyleableBase.EStyleType.NORMAL;CheckboxElement._StyleTypes.HalfSelectedDisabledSkinStyle=StyleableBase.EStyleType.SUBSTYLE;CheckboxElement._StyleTypes.HalfSelectedDisabledTextColor=StyleableBase.EStyleType.NORMAL;CheckboxElement.StyleDefault=new StyleDefinition;CheckboxElement.StyleDefault.setStyle("AllowDeselect",!0);
CheckboxElement.StyleDefault.setStyle("SkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("UpSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("OverSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("DownSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("DisabledSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("SelectedUpSkinClass",CheckboxSkinElement);
CheckboxElement.StyleDefault.setStyle("SelectedOverSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("SelectedDownSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("SelectedDisabledSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("HalfSelectedUpSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("HalfSelectedOverSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("HalfSelectedDownSkinClass",CheckboxSkinElement);
CheckboxElement.StyleDefault.setStyle("HalfSelectedDisabledSkinClass",CheckboxSkinElement);CheckboxElement.StyleDefault.setStyle("HalfSelectedUpTextColor","#000000");CheckboxElement.StyleDefault.setStyle("HalfSelectedOverTextColor","#000000");CheckboxElement.StyleDefault.setStyle("HalfSelectedDownTextColor","#000000");CheckboxElement.StyleDefault.setStyle("HalfSelectedDisabledTextColor","#888888");CheckboxElement.UpSkinStyleDefault=new StyleDefinition;
CheckboxElement.UpSkinStyleDefault.setStyle("BackgroundShape",null);CheckboxElement.UpSkinStyleDefault.setStyle("BorderType","solid");CheckboxElement.UpSkinStyleDefault.setStyle("BorderThickness",1);CheckboxElement.UpSkinStyleDefault.setStyle("BorderColor","#333333");CheckboxElement.UpSkinStyleDefault.setStyle("BackgroundFill","#EBEBEB");CheckboxElement.UpSkinStyleDefault.setStyle("CheckColor","#000000");CheckboxElement.OverSkinStyleDefault=new StyleDefinition;
CheckboxElement.OverSkinStyleDefault.setStyle("BackgroundShape",null);CheckboxElement.OverSkinStyleDefault.setStyle("BorderType","solid");CheckboxElement.OverSkinStyleDefault.setStyle("BorderThickness",1);CheckboxElement.OverSkinStyleDefault.setStyle("BorderColor","#333333");CheckboxElement.OverSkinStyleDefault.setStyle("BackgroundFill","#DDDDDD");CheckboxElement.OverSkinStyleDefault.setStyle("CheckColor","#000000");CheckboxElement.DownSkinStyleDefault=new StyleDefinition;
CheckboxElement.DownSkinStyleDefault.setStyle("BackgroundShape",null);CheckboxElement.DownSkinStyleDefault.setStyle("BorderType","solid");CheckboxElement.DownSkinStyleDefault.setStyle("BorderThickness",1);CheckboxElement.DownSkinStyleDefault.setStyle("BorderColor","#333333");CheckboxElement.DownSkinStyleDefault.setStyle("BackgroundFill","#CCCCCC");CheckboxElement.DownSkinStyleDefault.setStyle("CheckColor","#000000");CheckboxElement.DisabledSkinStyleDefault=new StyleDefinition;
CheckboxElement.DisabledSkinStyleDefault.setStyle("BackgroundShape",null);CheckboxElement.DisabledSkinStyleDefault.setStyle("BorderType","solid");CheckboxElement.DisabledSkinStyleDefault.setStyle("BorderThickness",1);CheckboxElement.DisabledSkinStyleDefault.setStyle("BorderColor","#999999");CheckboxElement.DisabledSkinStyleDefault.setStyle("BackgroundFill","#ECECEC");CheckboxElement.DisabledSkinStyleDefault.setStyle("CheckColor","#777777");CheckboxElement.StyleDefault.setStyle("UpSkinStyle",CheckboxElement.UpSkinStyleDefault);
CheckboxElement.StyleDefault.setStyle("OverSkinStyle",CheckboxElement.OverSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("DownSkinStyle",CheckboxElement.DownSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("DisabledSkinStyle",CheckboxElement.DisabledSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("SelectedUpSkinStyle",CheckboxElement.UpSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("SelectedOverSkinStyle",CheckboxElement.OverSkinStyleDefault);
CheckboxElement.StyleDefault.setStyle("SelectedDownSkinStyle",CheckboxElement.DownSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("SelectedDisabledSkinStyle",CheckboxElement.DisabledSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("HalfSelectedUpSkinStyle",CheckboxElement.UpSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("HalfSelectedOverSkinStyle",CheckboxElement.OverSkinStyleDefault);CheckboxElement.StyleDefault.setStyle("HalfSelectedDownSkinStyle",CheckboxElement.DownSkinStyleDefault);
CheckboxElement.StyleDefault.setStyle("HalfSelectedDisabledSkinStyle",CheckboxElement.DisabledSkinStyleDefault);CheckboxElement.prototype.setSelected=function(a){CheckboxElement.base.prototype.setSelected.call(this,a)};CheckboxElement.prototype._updateState=function(){if(2==this.getStyle("Selected")){var a="halfSelectedUp";0==this.getStyle("Enabled")?a="halfSelectedDisabled":1==this._mouseIsDown?a="halfSelectedDown":1==this._mouseIsOver&&(a="halfSelectedOver");this.setStyle("SkinState",a)}else CheckboxElement.base.prototype._updateState.call(this)};
CheckboxElement.prototype._getSkinClass=function(a){if("halfSelectedUp"==a)a=this.getStyleData("HalfSelectedUpSkinClass");else if("halfSelectedOver"==a)a=this.getStyleData("HalfSelectedOverSkinClass");else if("halfSelectedDown"==a)a=this.getStyleData("HalfSelectedDownSkinClass");else if("halfSelectedDisabled"==a)a=this.getStyleData("HalfSelectedDisabledSkinClass");else return CheckboxElement.base.prototype._getSkinClass.call(this,a);var b=this.getStyleData("SkinClass");return 0<b.comparePriority(a)?
b.value:a.value};CheckboxElement.prototype._getSubStyleNameForSkinState=function(a){return"halfSelectedUp"==a?"HalfSelectedUpSkinStyle":"halfSelectedOver"==a?"HalfSelectedOverSkinStyle":"halfSelectedDown"==a?"HalfSelectedDownSkinStyle":"halfSelectedDisabled"==a?"HalfSelectedDisabledSkinStyle":CheckboxElement.base.prototype._getSubStyleNameForSkinState.call(this,a)};
CheckboxElement.prototype._getTextColor=function(a){if("halfSelectedUp"==a)a=this.getStyleData("HalfSelectedUpTextColor");else if("halfSelectedOver"==a)a=this.getStyleData("HalfSelectedOverTextColor");else if("halfSelectedDown"==a)a=this.getStyleData("HalfSelectedDownTextColor");else if("halfSelectedDisabled"==a)a=this.getStyleData("HalfSelectedDisabledTextColor");else return CheckboxElement.base.prototype._getTextColor.call(this,a);var b=this.getStyleData("TextColor");return 0<b.comparePriority(a)?
b.value:a.value};
CheckboxElement.prototype._doStylesUpdated=function(a){CheckboxElement.base.prototype._doStylesUpdated.call(this,a);("SkinClass"in a||"HalfSelectedUpSkinClass"in a)&&this._updateSkinClass("halfSelectedUp");"HalfSelectedUpSkinStyle"in a&&this._updateSkinStyleDefinitions("halfSelectedUp");("SkinClass"in a||"HalfSelectedOverSkinClass"in a)&&this._updateSkinClass("halfSelectedOver");"HalfSelectedOverSkinStyle"in a&&this._updateSkinStyleDefinitions("halfSelectedOver");("SkinClass"in a||"HalfSelectedDownSkinClass"in
a)&&this._updateSkinClass("halfSelectedDown");"HalfSelectedDownSkinStyle"in a&&this._updateSkinStyleDefinitions("halfSelectedDown");("SkinClass"in a||"HalfSelectedDisabledSkinClass"in a)&&this._updateSkinClass("halfSelectedDisabled");"HalfSelectedDisabledSkinStyle"in a&&this._updateSkinStyleDefinitions("halfSelectedDisabled")};function AnchorContainerElement(){AnchorContainerElement.base.prototype.constructor.call(this)}AnchorContainerElement.prototype=Object.create(ContainerBaseElement.prototype);
AnchorContainerElement.prototype.constructor=AnchorContainerElement;AnchorContainerElement.base=ContainerBaseElement;
AnchorContainerElement.prototype._doMeasure=function(a,b){for(var c={width:0,height:0},d,e,f,g,k,l,h,n,p,m,q,t,u,r,w,x,z,v,y,C=0;C<this._elements.length;C++)if(d=this._elements[C],0!=d.getStyle("IncludeInLayout")){var A=0,B=0;g=d._getStyledOrMeasuredWidth();k=d._getStyledOrMeasuredHeight();e=d.getStyle("X");f=d.getStyle("Y");l=d.getStyle("Top");h=d.getStyle("Left");n=d.getStyle("Bottom");p=d.getStyle("Right");null==e&&(e=h);null==f&&(f=l);l=d.getStyle("HorizontalCenter");h=d.getStyle("VerticalCenter");
m=d.getStyle("RotateDegrees");q=d.getStyle("RotateCenterX");t=d.getStyle("RotateCenterY");0!=m?(u=d._x,r=d._y,w=d._width,x=d._height,z=d._rotateDegrees,v=d._rotateCenterX,y=d._rotateCenterY,d._x=null==e?0:e,d._y=null==f?0:f,d._width=g,d._height=k,d._rotateDegrees=m,d._rotateCenterX=null==q?0:q,d._rotateCenterY=null==t?0:t,g=d.getMetrics(this),d._x=u,d._y=r,d._width=w,d._height=x,d._rotateDegrees=z,d._rotateCenterX=v,d._rotateCenterY=y,null!=q&&null!=t&&(e=Math.max(g.getX(),0),f=Math.max(g.getY(),
0)),A+=Math.ceil(g.getWidth()),B+=Math.ceil(g.getHeight())):(A+=g,B+=k);null!=p&&(A+=p);null!=n&&(B+=n);null==e&&null==p&&null!=l&&(A+=Math.abs(2*l));null==f&&null==n&&null!=h&&(B+=Math.abs(2*h));if(null==e||0>e)e=0;if(null==f||0>f)f=0;A+=e;B+=f;c.width=Math.max(c.width,Math.ceil(A));c.height=Math.max(c.height,Math.ceil(B))}return c};
AnchorContainerElement.prototype._doLayout=function(a){AnchorContainerElement.base.prototype._doLayout.call(this,a);for(var b,c,d,e,f,g,k,l,h,n,p,m,q,t,u,r,w,x=0;x<this._elements.length;x++)if(a=this._elements[x],0!=a.getStyle("IncludeInLayout"))if(b=a.getStyle("X"),c=a.getStyle("Y"),p=a.getStyle("Top"),m=a.getStyle("Left"),q=a.getStyle("Bottom"),t=a.getStyle("Right"),d=a.getStyle("Width"),e=a.getStyle("Height"),k=a.getStyle("MinWidth"),h=a.getStyle("MinHeight"),l=a.getStyle("MaxWidth"),n=a.getStyle("MaxHeight"),
u=a.getStyle("HorizontalCenter"),r=a.getStyle("VerticalCenter"),f=a.getStyle("RotateDegrees"),g=a.getStyle("RotateCenterX"),w=a.getStyle("RotateCenterY"),null==k&&(k=0),null==h&&(h=0),null==l&&(l=Number.MAX_VALUE),null==n&&(n=Number.MAX_VALUE),a._setActualRotation(f,g,w),0!=f)if(null==d&&(d=a._measuredWidth,d=Math.min(d,l),d=Math.max(d,k)),null==e&&(e=a._measuredHeight,e=Math.min(e,n),e=Math.max(e,h)),a._setActualSize(d,e),null==g||null==w){null==b&&(b=m);null==c&&(c=p);if(null==b||null==c)e=a.getMetrics(this),
d=Math.ceil(e.getWidth()),e=Math.ceil(e.getHeight()),null==b&&null!=t&&(b=this._width-d-t),null==c&&null!=q&&(c=this._height-e-q),null==b&&null!=u&&(b=Math.round(this._width/2-d/2+u)),null==c&&null!=r&&(c=Math.round(this._height/2-e/2+r));null==b&&(b=0);null==c&&(c=0);a._setRelativePosition(b,c,this)}else null==b&&(b=0),null==c&&(c=0),a._setActualPosition(b,c);else f=a.getStyle("PercentWidth"),g=a.getStyle("PercentHeight"),null==b&&(b=m),null==c&&(c=p),null==d&&(d=null!=b&&null!=t?this._width-b-t:
null!=f?Math.round(f/100*this._width):a._measuredWidth,d=Math.min(d,l),d=Math.max(d,k)),null==e&&(e=null!=c&&null!=q?this._height-c-q:null!=g?Math.round(g/100*this._height):a._measuredHeight,e=Math.min(e,n),e=Math.max(e,h)),null==b&&null!=t&&(b=this._width-d-t),null==c&&null!=q&&(c=this._height-e-q),null==b&&null!=u&&(b=Math.round(this._width/2-d/2+u)),null==c&&null!=r&&(c=Math.round(this._height/2-e/2+r)),null==b&&(b=0),null==c&&(c=0),a._setActualPosition(b,c),a._setActualSize(d,e)};
function CanvasManager(){this._updateStylesQueue=new CmDepthQueue;this._updateMeasureQueue=new CmDepthQueue;this._updateLayoutQueue=new CmDepthQueue;this._updateRenderQueue=new CmDepthQueue;this._updateRedrawRegionQueue=new CmDepthQueue;this._compositeRenderQueue=new CmDepthQueue;this._addRemoveDisplayChainQueue=new CmLinkedList;this._addRemoveDisplayChainQueueProcessing=!1;this._broadcastDispatcher=new EventDispatcher;this._browserCursor=null;this._cursorChain=new CmLinkedList;this._tabStopReverse=
!1;this._canvasContext=this._canvas=this._focusElement=null;this._canvasRenderFramePending=!1;this._mouseY=this._mouseX=-1;this._rollOverInvalid=!0;this._rollOverElement=null;this._rollOverY=this._rollOverX=-1;this._draggingOffsetY=this._draggingOffsetX=this._draggingElement=this._mouseDownElement=null;this._currentLocale="en-us";this._redrawRegionPrevMetrics=null;CanvasManager.base.prototype.constructor.call(this);this._cursorContainer=new CanvasElement;this._cursorContainer.setStyle("MouseEnabled",
!1);this._addOverlayChild(this._cursorContainer);var a=this;this._onCursorDefinitionStyleChangedInstance=function(b){a._onCursorDefinitionStyleChanged(b)};this._onCanvasFrame=function(){null==a._canvasContext?a._canvasRenderFramePending=!1:(a.updateNow(),window.requestAnimationFrame(a._onCanvasFrame))};this._canvasResizeEventHandler=function(){a.setStyle("Width",a._canvas.clientWidth);a.setStyle("Height",a._canvas.clientHeight);a._setActualSize(a._canvas.clientWidth,a._canvas.clientHeight);a._redrawRegionPrevMetrics=
null;a._updateRedrawRegion(a.getMetrics(null));a.updateNow()};this._canvasFocusEventHandler=function(b){null==a._focusElement&&"focus"==b.type?1==a._tabStopReverse?a._updateFocusElement(a._findChildTabStopReverse(a,null,null),!0):a._updateFocusElement(a._findChildTabStopForward(a,null),!0):null!=a._focusElement&&"blur"==b.type&&a._updateFocusElement(null,!0)};this._canvasKeyboardEventHandler=function(b){"keydown"==b.type&&("Tab"==b.key&&1==b.shiftKey?a._tabStopReverse=!0:"Tab"==b.key&&0==b.shiftKey&&
(a._tabStopReverse=!1));if(null!=a._focusElement){var c=new ElementKeyboardEvent(b.type,b.key,b.which,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey);a._focusElement._dispatchEvent(c);if(1==c._canceled||1==c._defaultPrevented)b.preventDefault();else if("keydown"==b.type&&"Tab"==c.getKey()){var c=null,d=a._focusElement,e=null;if(0==a._tabStopReverse)for(;null!=d;){c=a._findChildTabStopForward(d,e);if(null!=c)break;e=d;d=d._parent}else for(;null!=d;){c=a._findChildTabStopReverse(d,e,null);if(null!=c)break;
e=d;d=d._parent}a._updateFocusElement(c,!0);null!=c&&b.preventDefault()}}};this._canvasMouseEventHandler=function(b){var c=CanvasManager.getLocalMousePos(b,a._canvas),d;if("mouseup"==b.type){window.removeEventListener("mouseup",a._canvasMouseEventHandler);a._clearDraggingElement();a._mouseDownElement._mouseIsDown=!1;b=[];for(b.push(a._mouseDownElement);null!=b[b.length-1]._parent;)b[b.length-1]._parent._mouseIsDown=!1,b.push(b[b.length-1]._parent);var e=null,f=0,g=0;for(d=b.length-1;0<=d;d--)b[d].rotatePoint(c,
!0),c.x-=b[d]._x,c.y-=b[d]._y,0<=c.x&&c.x<=b[d]._width&&0<=c.y&&c.y<=b[d]._height&&(e=b[d],f=c.x,g=c.y);a._mouseDownElement=null;b[0]._dispatchEvent(new ElementMouseEvent("mouseup",c.x,c.y));null!=e&&e._dispatchEvent(new ElementMouseEvent("click",f,g))}else if("wheel"==b.type){if(0!=a.getStyle("MouseEnabled")&&0!=a.getStyle("Visible")){e=null;if(0<=c.x&&c.x<=a._width&&0<=c.y&&c.y<=a._height)for(var e=a,k;;){k=!1;for(d=e._children.length-1;0<=d;d--)if(0!=e._children[d].getStyle("MouseEnabled")&&0!=
e._children[d].getStyle("Visible")){e._children[d].rotatePoint(c,!0);if(c.x>=e._children[d]._x&&c.x<=e._children[d]._x+e._children[d]._width&&c.y>=e._children[d]._y&&c.y<=e._children[d]._y+e._children[d]._height){e=e._children[d];c.x-=e._x;c.y-=e._y;k=!0;break}e._children[d].rotatePoint(c,!1)}if(0==k)break}null!=e&&(d=0,0<b.deltaX?d=1:0>b.deltaX&&(d=-1),f=0,0<b.deltaY?f=1:0>b.deltaY&&(f=-1),c=new ElementMouseWheelEvent(c.x,c.y,d,f),e._dispatchEvent(c),1!=c._canceled&&1!=c._defaultPrevented||b.preventDefault())}}else if("mousedown"==
b.type)if(0>c.x||c.x>this._width||0>c.y||c.y>this._height)a._updateFocusElement(null,!1);else{if(0!=a.getStyle("MouseEnabled")&&0!=a.getStyle("Visible")&&null==a._mouseDownElement){for(var f=null,l=g=0,h=null,n=-1,e=a;;){e._mouseIsDown=!0;1!=e.getStyle("Draggable")||!(e._parent instanceof AnchorContainerElement)&&e._parent instanceof ContainerBaseElement||(f=e,g=c.x,l=c.y);d=e.getStyle("TabStop");if(0<=d||0>n)h=e,n=d;k=!1;for(d=e._children.length-1;0<=d;d--)if(0!=e._children[d].getStyle("MouseEnabled")&&
0!=e._children[d].getStyle("Visible")){e._children[d].rotatePoint(c,!0);if(c.x>=e._children[d]._x&&c.x<=e._children[d]._x+e._children[d]._width&&c.y>=e._children[d]._y&&c.y<=e._children[d]._y+e._children[d]._height){e=e._children[d];c.x-=e._x;c.y-=e._y;k=!0;break}e._children[d].rotatePoint(c,!1)}if(0==k)break}a._mouseDownElement=e;window.addEventListener("mouseup",a._canvasMouseEventHandler,!1);null!=f&&a._setDraggingElement(f,g,l);e._dispatchEvent(new ElementMouseEvent(b.type,c.x,c.y));a._updateFocusElement(h,
!1);null!=a._focusElement&&a._focusElement._setRenderFocusRing(!1)}}else"mousemove"==b.type&&0!=a.getStyle("MouseEnabled")&&(a._mouseX=c.x,a._mouseY=c.y,a._rollOverInvalid=!0,a._updateCursor(),null!=a._draggingElement&&(b=a._draggingElement.getMetrics(a._draggingElement._parent),d={x:a._draggingOffsetX,y:a._draggingOffsetY},a._draggingElement.translatePointTo(d,a._draggingElement._parent),c={x:c.x,y:c.y},a.translatePointTo(c,a._draggingElement._parent),c.x+=b.getX()-d.x,c.y+=b.getY()-d.y,0>c.x&&(c.x=
0),c.x>a._draggingElement._parent._width-b.getWidth()&&(c.x=a._draggingElement._parent._width-b.getWidth()),0>c.y&&(c.y=0),c.y>a._draggingElement._parent._height-b.getHeight()&&(c.y=a._draggingElement._parent._height-b.getHeight()),a._draggingElement._setRelativePosition(c.x,c.y,a._draggingElement._parent),a._draggingElement._parent instanceof AnchorContainerElement&&(null==a._draggingElement.getStyle("RotateCenterX")||null==a._draggingElement.getStyle("RotateCenterY")?(null!=a._draggingElement.getStyle("X")&&
a._draggingElement.setStyle("X",c.x),null!=a._draggingElement.getStyle("Y")&&a._draggingElement.setStyle("Y",c.y)):(null!=a._draggingElement.getStyle("X")&&a._draggingElement.setStyle("X",a._draggingElement._x),null!=a._draggingElement.getStyle("Y")&&a._draggingElement.setStyle("Y",a._draggingElement._y),a._draggingElement.setStyle("RotateCenterX",a._draggingElement._rotateCenterX),a._draggingElement.setStyle("RotateCenterY",a._draggingElement._rotateCenterY))),a._draggingElement._dispatchEvent(new ElementEvent("dragging",
!1))))}}CanvasManager.prototype=Object.create(AnchorContainerElement.prototype);CanvasManager.prototype.constructor=CanvasManager;CanvasManager.base=AnchorContainerElement;CanvasManager._StyleTypes=Object.create(null);CanvasManager._StyleTypes.ShowRedrawRegion=StyleableBase.EStyleType.NORMAL;CanvasManager.StyleDefault=new StyleDefinition;CanvasManager.StyleDefault.setStyle("ShowRedrawRegion",!1);
CanvasManager.prototype.setCanvas=function(a){if(this._canvas!=a){var b=null==this._canvas||null==a;null!=this._canvas&&(window.removeEventListener("mousedown",this._canvasMouseEventHandler,!1),window.removeEventListener("mousemove",this._canvasMouseEventHandler,!1),window.removeEventListener("wheel",this._canvasMouseEventHandler,!1),window.removeEventListener("keydown",this._canvasKeyboardEventHandler,!1),window.removeEventListener("keyup",this._canvasKeyboardEventHandler,!1),window.removeEventListener("resize",
this._canvasResizeEventHandler,!1),this._canvas.removeEventListener("focus",this._canvasFocusEventHandler,!0),this._canvas.removeEventListener("blur",this._canvasFocusEventHandler,!0),this._canvasContext=this._canvas=null);null!=a&&(this._canvas=a,this._canvasContext=a.getContext("2d"),window.addEventListener("mousedown",this._canvasMouseEventHandler,!1),window.addEventListener("mousemove",this._canvasMouseEventHandler,!1),window.addEventListener("wheel",this._canvasMouseEventHandler,!1),window.addEventListener("keydown",
this._canvasKeyboardEventHandler,!1),window.addEventListener("keyup",this._canvasKeyboardEventHandler,!1),window.addEventListener("resize",this._canvasResizeEventHandler,!1),this._canvas.addEventListener("focus",this._canvasFocusEventHandler,!0),this._canvas.addEventListener("blur",this._canvasFocusEventHandler,!0),this._canvas.tabIndex=1,this._canvas.style.outline="none",this._canvas.style.cursor="default",0<navigator.userAgent.indexOf("Firefox")&&(CanvasElement._browserType="Firefox"),0==this._canvasRenderFramePending&&
(this._canvasRenderFramePending=!0,window.requestAnimationFrame(this._onCanvasFrame)));1==b&&(this._propagateChildData(),this._processAddRemoveDisplayChainQueue());null!=this._canvas&&(this._rollOverInvalid=!0,this._canvasResizeEventHandler())}};CanvasManager.prototype.getCanvas=function(){return this._canvas};CanvasManager.prototype.setLocale=function(a){this._currentLocale!=a&&(this._currentLocale=a,1==this._broadcastDispatcher.hasEventListener("localechanged",null)&&this._broadcastDispatcher._dispatchEvent(new DispatcherEvent("localechanged")))};
CanvasManager.prototype.getLocale=function(){return this._currentLocale};
CanvasManager.prototype.addCursor=function(a,b){null==b&&(b=0);a instanceof CursorDefinition&&(0==a._addedCount&&a.addEventListener("stylechanged",this._onCursorDefinitionStyleChangedInstance),a._addedCount++);var c=new CmLinkedNode;c.data=a;c.priority=b;var d=this._cursorChain.back;if(null==d)this._cursorChain.pushBack(c);else{for(;null!=d&&d.priority>c.priority;)d=d.prev;null==d?this._cursorChain.pushFront(c):this._cursorChain.insertAfter(c,d)}this._updateCursor();return c};
CanvasManager.prototype.removeCursor=function(a){if(b instanceof CursorDefinition){var b=a.data;b._addedCount--;0==b._addedCount&&b.removeEventListener("stylechanged",this._onCursorDefinitionStyleChangedInstance)}this._cursorChain.removeNode(a);this._updateCursor();return!0};
CanvasManager.prototype.updateNow=function(){for(1==this._broadcastDispatcher.hasEventListener("enterframe",null)&&this._broadcastDispatcher._dispatchEvent(new DispatcherEvent("enterframe"));0<this._updateStylesQueue.length||0<this._updateMeasureQueue.length||0<this._updateLayoutQueue.length||1==this._rollOverInvalid||0<this._updateRenderQueue.length;){for(;0<this._updateStylesQueue.length;)this._updateStylesQueue.removeSmallest().data._validateStyles();for(;0<this._updateMeasureQueue.length&&0==
this._updateStylesQueue.length;)this._updateMeasureQueue.removeLargest().data._validateMeasure();for(;0<this._updateLayoutQueue.length&&0==this._updateMeasureQueue.length&&0==this._updateStylesQueue.length;)this._updateLayoutQueue.removeSmallest().data._validateLayout();if(1==this._rollOverInvalid&&0==this._updateLayoutQueue.length&&0==this._updateMeasureQueue.length&&0==this._updateStylesQueue.length){this._rollOverInvalid=!1;var a,b=null,c={x:this._mouseX,y:this._mouseY},d=this._rollOverElement,
e=this._rollOverX,f=this._rollOverY,g=this._rollOverElement=null,k=[];if(0<=c.x&&c.x<=this._width&&0<=c.y&&c.y<=this._height){b=this;0==b._mouseIsOver?(k.push(b),b._mouseIsOver=!0):g=b;this._rollOverElement=b;this._rollOverX=c.x;this._rollOverY=c.y;for(var l;;){l=!1;for(a=b._children.length-1;0<=a;a--)if(0!=b._children[a].getStyle("MouseEnabled")&&0!=b._children[a].getStyle("Visible")){b._children[a].rotatePoint(c,!0);if(c.x>=b._children[a]._x&&c.x<=b._children[a]._x+b._children[a]._width&&c.y>=b._children[a]._y&&
c.y<=b._children[a]._y+b._children[a]._height){b=b._children[a];0==b._mouseIsOver?(k.push(b),b._mouseIsOver=!0):g=b;c.x-=b._x;c.y-=b._y;this._rollOverElement=b;this._rollOverX=c.x;this._rollOverY=c.y;l=!0;break}b._children[a].rotatePoint(c,!1)}if(0==l)break}}null==b||this._rollOverElement==d&&this._rollOverX==e&&this._rollOverY==f||b._dispatchEvent(new ElementMouseEvent("mousemove",c.x,c.y));this._broadcastDispatcher._dispatchEvent(new ElementMouseEvent("mousemoveex",this._mouseX,this._mouseY));if(null!=
d&&this._rollOverElement!=d){c=[];for(b=d;b!=g;)b._mouseIsOver=!1,c.push(b),b=b._parent;for(a=0;a<c.length;a++)c[a]._dispatchEvent(new ElementEvent("rollout",!1))}for(a=0;a<k.length;a++)k[a]._dispatchEvent(new ElementEvent("rollover",!1))}for(;0<this._updateRenderQueue.length&&0==this._rollOverInvalid&&0==this._updateLayoutQueue.length&&0==this._updateMeasureQueue.length&&0==this._updateStylesQueue.length;)this._updateRenderQueue.removeSmallest().data._validateRender()}for(;0<this._updateRedrawRegionQueue.length;)a=
this._updateRedrawRegionQueue.removeLargest().data,1==a._redrawRegionInvalid&&this._validateRedrawRegion(a,!1);for(;0<this._compositeRenderQueue.length;)this._compositeRenderQueue.removeLargest().data._validateCompositeRender();null!=this._redrawRegionPrevMetrics&&this._invalidateCompositeRender();1==this._broadcastDispatcher.hasEventListener("exitframe",null)&&this._broadcastDispatcher._dispatchEvent(new DispatcherEvent("exitframe"))};
CanvasManager.getLocalMousePos=function(a,b){var c=b.getBoundingClientRect();return{x:Math.round((a.clientX-c.left)/(c.right-c.left)*b.width),y:Math.round((a.clientY-c.top)/(c.bottom-c.top)*b.height)}};
CanvasManager.prototype._updateCompositeCanvas=function(){null==this._compositeCanvas&&(this._compositeCanvas=this._canvas,this._compositeCtx=this._canvasContext);if(this._compositeCanvas.width!=this._width||this._compositeCanvas.height!=this._height)this._compositeCanvas.width=this._width,this._compositeCanvas.height=this._height,null==this._compositeCanvasMetrics&&(this._compositeCanvasMetrics=new DrawMetrics),this._compositeCanvasMetrics._x=0,this._compositeCanvasMetrics._y=0,this._compositeCanvasMetrics._width=
this._width,this._compositeCanvasMetrics._height=this._height,null==this._redrawRegionMetrics?this._redrawRegionMetrics=this._compositeCanvasMetrics.clone():this._redrawRegionMetrics.mergeExpand(this._compositeCanvasMetrics)};
CanvasManager.prototype._validateRedrawRegion=function(a,b){a._redrawRegionInvalid=!1;var c=[],d=a._renderVisible,e=!0;if(null!=a._parent&&0==a._parent._renderVisible||0==a.getStyle("Visible")||0>=a.getStyle("Alpha"))e=!1;1==a._compositeEffectChanged&&(b=!0);a._compositeVisibleMetrics=null;a._transformVisibleMetrics=null;a._transformDrawableMetrics=null;if(!(1!=a._renderChanged&&0!=a._graphicsClear||1!=d&&1!=e))for(var f=a,g=a.getMetrics(),k=g.clone(),l={x:g._x,y:g._y},h={x:g._x+g._width,y:g._y},
n={x:g._x+g._width,y:g._y+g._height},p={x:g._x,y:g._y+g._height},m={x:0,y:0},q={x:0,y:0},t={x:0,y:0},u={x:0,y:0},r,w,x,z,v=new DrawMetrics,y=new DrawMetrics;null!=f;){null!=k&&(f==this||1==f.getStyle("ClipContent"))&&(v._x=0,v._y=0,v._width=f._width,v._height=f._height,k.mergeReduce(v),0>=k._width||0>=k._height)&&(k=null);if(1==f._isCompositeElement()){r=a._getCompositeMetrics(f);null!=k&&1==e&&0==a._graphicsClear?(c.push({element:f,metrics:g.clone(),drawableMetrics:k.clone()}),null==f._compositeVisibleMetrics?
f._compositeVisibleMetrics=k.clone():f._compositeVisibleMetrics.mergeExpand(k)):newMetrics=null;w=!0;if(null==r&&null==k||null!=r&&null!=k&&1==r.drawableMetrics.equals(k))w=!1;x=!0;null!=r&&1==r.metrics.equals(g)&&(x=!1);if(1==b||1==a._renderChanged||d!=e||1==w||x)1==d&&null!=r&&f._updateRedrawRegion(r.drawableMetrics),1==e&&f._updateRedrawRegion(k)}null!=k&&(k._x+=f._x,k._y+=f._y,r=f.getStyle("ShadowSize"),0<r&&null!=f.getStyle("ShadowColor")?(y.copyFrom(k),y._width+=2*r,y._height+=2*r,y._x-=r,y._y-=
r,y._x+=f.getStyle("ShadowOffsetX"),y._y+=f.getStyle("ShadowOffsetY"),k.mergeExpand(y),0!=CanvasElement.normalizeDegrees(f._rotateDegrees)&&(m.x=k._x,m.y=k._y,q.x=k._x+k._width,q.y=k._y,t.x=k._x+k._width,t.y=k._y+k._height,u.x=k._x,u.y=k._y+k._height,f.rotatePoint(m,!1),f.rotatePoint(q,!1),f.rotatePoint(u,!1),f.rotatePoint(t,!1),r=Math.min(m.x,q.x,t.x,u.x),w=Math.max(m.x,q.x,t.x,u.x),x=Math.min(m.y,q.y,t.y,u.y),z=Math.max(m.y,q.y,t.y,u.y),k._x=r,k._y=x,k._width=w-r,k._height=z-x),g.copyFrom(k),l.x+=
g._x,l.y+=g._y,h.x+=g._x+g._width,h.y+=g._y,n.x+=g._x+g._width,n.y+=g._y+g._height,p.x+=g._x,p.y+=g._y+g._height):(l.x+=f._x,l.y+=f._y,h.x+=f._x,h.y+=f._y,n.x+=f._x,n.y+=f._y,p.x+=f._x,p.y+=f._y,0!=CanvasElement.normalizeDegrees(f._rotateDegrees)&&(f.rotatePoint(l,!1),f.rotatePoint(h,!1),f.rotatePoint(p,!1),f.rotatePoint(n,!1),m.x=k._x,m.y=k._y,q.x=k._x+k._width,q.y=k._y,t.x=k._x+k._width,t.y=k._y+k._height,u.x=k._x,u.y=k._y+k._height,f.rotatePoint(m,!1),f.rotatePoint(q,!1),f.rotatePoint(u,!1),f.rotatePoint(t,
!1),r=Math.min(m.x,q.x,t.x,u.x),w=Math.max(m.x,q.x,t.x,u.x),x=Math.min(m.y,q.y,t.y,u.y),z=Math.max(m.y,q.y,t.y,u.y),k._x=r,k._y=x,k._width=w-r,k._height=z-x),r=Math.min(l.x,h.x,n.x,p.x),w=Math.max(l.x,h.x,n.x,p.x),x=Math.min(l.y,h.y,n.y,p.y),z=Math.max(l.y,h.y,n.y,p.y),g._x=r,g._y=x,g._width=w-r,g._height=z-x),g.roundToPrecision(3),k.mergeReduce(g),k.roundToPrecision(3));f=f._parent}a._compositeMetrics=c;a._renderVisible=e;a._renderChanged=!1;if(1==d||1==e){for(c=0;c<a._children.length;c++)this._validateRedrawRegion(a._children[c],
b);1==a._isCompositeElement()&&this._updateTransformMetrics(a)}};
CanvasManager.prototype._updateTransformMetrics=function(a){if(a!=this&&null!=a._compositeVisibleMetrics){var b={x:0,y:0},c={x:0,y:0},d={x:0,y:0},e={x:0,y:0},f,g,k,l,h=a;a._transformVisibleMetrics=a._compositeVisibleMetrics.clone();a._transformDrawableMetrics=a._compositeVisibleMetrics.clone();for(var n=new DrawMetrics,p=!1;;){if(null!=a._transformDrawableMetrics&&1==h.getStyle("ClipContent")&&(n._x=0,n._y=0,n._width=h._width,n._height=h._height,a._transformDrawableMetrics.mergeReduce(n),0>=a._transformDrawableMetrics._width||
0>=a._transformDrawableMetrics._height)){a._transformDrawableMetrics=null;a._transformVisibleMetrics=null;break}if(1==p)break;a._transformVisibleMetrics._x+=h._x;a._transformVisibleMetrics._y+=h._y;a._transformDrawableMetrics._x+=h._x;a._transformDrawableMetrics._y+=h._y;f=h.getStyle("ShadowSize");0<f&&null!=h.getStyle("ShadowColor")&&(g=a._transformDrawableMetrics.clone(),g._width+=2*f,g._height+=2*f,g._x-=f,g._y-=f,g._x+=h.getStyle("ShadowOffsetX"),g._y+=h.getStyle("ShadowOffsetY"),a._transformDrawableMetrics.mergeExpand(g));
0!=CanvasElement.normalizeDegrees(h._rotateDegrees)&&(b.x=a._transformVisibleMetrics._x,b.y=a._transformVisibleMetrics._y,c.x=a._transformVisibleMetrics._x+a._transformVisibleMetrics._width,c.y=a._transformVisibleMetrics._y,d.x=a._transformVisibleMetrics._x+a._transformVisibleMetrics._width,d.y=a._transformVisibleMetrics._y+a._transformVisibleMetrics._height,e.x=a._transformVisibleMetrics._x,e.y=a._transformVisibleMetrics._y+a._transformVisibleMetrics._height,h.rotatePoint(b,!1),h.rotatePoint(c,!1),
h.rotatePoint(e,!1),h.rotatePoint(d,!1),f=Math.min(b.x,c.x,d.x,e.x),g=Math.max(b.x,c.x,d.x,e.x),k=Math.min(b.y,c.y,d.y,e.y),l=Math.max(b.y,c.y,d.y,e.y),a._transformVisibleMetrics._x=f,a._transformVisibleMetrics._y=k,a._transformVisibleMetrics._width=g-f,a._transformVisibleMetrics._height=l-k,a._transformVisibleMetrics.roundToPrecision(3),b.x=a._transformDrawableMetrics._x,b.y=a._transformDrawableMetrics._y,c.x=a._transformDrawableMetrics._x+a._transformDrawableMetrics._width,c.y=a._transformDrawableMetrics._y,
d.x=a._transformDrawableMetrics._x+a._transformDrawableMetrics._width,d.y=a._transformDrawableMetrics._y+a._transformDrawableMetrics._height,e.x=a._transformDrawableMetrics._x,e.y=a._transformDrawableMetrics._y+a._transformDrawableMetrics._height,h.rotatePoint(b,!1),h.rotatePoint(c,!1),h.rotatePoint(e,!1),h.rotatePoint(d,!1),f=Math.min(b.x,c.x,d.x,e.x),g=Math.max(b.x,c.x,d.x,e.x),k=Math.min(b.y,c.y,d.y,e.y),l=Math.max(b.y,c.y,d.y,e.y),a._transformDrawableMetrics._x=f,a._transformDrawableMetrics._y=
k,a._transformDrawableMetrics._width=g-f,a._transformDrawableMetrics._height=l-k,a._transformDrawableMetrics.roundToPrecision(3));h=h._parent;1==h._isCompositeElement()&&(p=!0)}}};
CanvasManager.prototype._validateCompositeRender=function(){if(1==this.getStyle("ShowRedrawRegion")){var a=null;null!=this._redrawRegionMetrics?(a=this._redrawRegionMetrics.clone(),--a._x,--a._y,a._width+=2,a._height+=2,a.roundUp(),null!=this._redrawRegionPrevMetrics&&this._redrawRegionMetrics.mergeExpand(this._redrawRegionPrevMetrics)):null!=this._redrawRegionPrevMetrics&&(this._redrawRegionMetrics=this._redrawRegionPrevMetrics.clone());CanvasManager.base.prototype._validateCompositeRender.call(this);
null!=a&&(this._canvasContext.lineWidth=1,this._canvasContext.strokeStyle="#FF0000",this._canvasContext.beginPath(),this._canvasContext.moveTo(a._x+.5,a._y+.5),this._canvasContext.lineTo(a._x+a._width-.5,a._y+.5),this._canvasContext.lineTo(a._x+a._width-.5,a._y+a._height-.5),this._canvasContext.lineTo(a._x+.5,a._y+a._height-.5),this._canvasContext.closePath(),this._canvasContext.stroke());this._redrawRegionPrevMetrics=a}else CanvasManager.base.prototype._validateCompositeRender.call(this),this._redrawRegionPrevMetrics=
null};
CanvasManager.prototype._updateFocusElement=function(a,b){a!=this._focusElement&&(null!=this._focusElement&&(this._focusElement._isFocused=!1,this._focusElement._setRenderFocusRing(!1),1==this._focusElement.hasEventListener("focusout",null)&&this._focusElement._dispatchEvent(new ElementEvent("focusout",!1))),this._focusElement=a,null!=this._focusElement&&(this._focusElement._isFocused=!0,this._focusElement._setRenderFocusRing(b),1==this._focusElement.hasEventListener("focusin",null)&&this._focusElement._dispatchEvent(new ElementEvent("focusin",!1))))};
CanvasManager.prototype._findChildTabStopForward=function(a,b){var c=0;null!=b&&(c=a._children.indexOf(b)+1);for(var d=null;c<a._children.length;c++)if(0!=a._children[c].getStyle("MouseEnabled")&&0!=a._children[c].getStyle("Visible")&&0!=a._children[c].getStyle("Enabled")){if(0<=a._children[c].getStyle("TabStop"))return a._children[c];d=this._findChildTabStopForward(a._children[c],null);if(null!=d)break}return d};
CanvasManager.prototype._findChildTabStopReverse=function(a,b,c){var d=a._children.length-1;null!=b&&(d=a._children.indexOf(b)-1);for(b=d;0<=b&&(0==a._children[b].getStyle("MouseEnabled")||0==a._children[b].getStyle("Visible")||0==a._children[b].getStyle("Enabled")||(0<=a._children[b].getStyle("TabStop")&&(c=a._children[b]),this._findChildTabStopReverse(a._children[b],null,c),null==c));b--);return c};
CanvasManager.prototype._updateCursor=function(){var a=null;null!=this._cursorChain.back&&(a=this._cursorChain.back.data);var b=null;0<this._cursorContainer._getNumChildren()&&(b=this._cursorContainer._getChildAt(0));if(null!=a){var c=null;if(!("string"===typeof a||a instanceof String)){var d=a.getStyle("CursorClass");if(null==d)a._cursorElement=null;else{if(null==a._cursorElement||a._cursorElement.constructor!=d)a._cursorElement=new d;a._cursorElement.setStyleDefinitions(a.getStyle("CursorStyle"));
c=a._cursorElement}}b!=c&&(null!=b&&this._cursorContainer._removeChild(b),null!=c&&this._cursorContainer._addChild(c));if(null!=c)if("none"!=this._browserCursor&&(this._browserCursor="none",this._canvas.style.cursor="none"),0<=this._mouseX&&this._mouseX<=this._width&&0<=this._mouseY&&this._mouseY<=this._height){var b=a._cursorElement._getStyledOrMeasuredWidth(),d=a._cursorElement._getStyledOrMeasuredHeight(),e=a.getStyle("CursorOffsetX"),a=a.getStyle("CursorOffsetY");c._setActualPosition(this._mouseX+
e,this._mouseY+a);c._setActualSize(b,d);c.setStyle("Visible",!0)}else c.setStyle("Visible",!1);else this._browserCursor!=a&&(this._browserCursor=a,this._canvas.style.cursor=a)}else null!=b&&this._cursorContainer._removeChildAt(0),"default"!=this._browserCursor&&(this._browserCursor="default",this._canvas.style.cursor="default")};
CanvasManager.prototype._onCursorDefinitionStyleChanged=function(a){var b=a.getTarget();a=a.getStyleName();if("CursorClass"==a&&null!=b._cursorElement){var c=b.getStyle("CursorClass");b._cursorElement.constructor!=c&&(b._cursorElement=null)}"CursorStyle"==a&&null!=b._cursorElement&&b._cursorElement.setStyleDefinitions(this.getStyle("CursorStyle"));this._updateCursor()};CanvasManager.prototype._pushAddRemoveDisplayChainQueue=function(a,b){var c=new CmLinkedNode;c.data={element:a,type:b};this._addRemoveDisplayChainQueue.pushBack(c)};
CanvasManager.prototype._popAddRemoveDisplayChainQueue=function(){if(0==this._addRemoveDisplayChainQueue.length)return null;var a=this._addRemoveDisplayChainQueue.front.data;this._addRemoveDisplayChainQueue.removeNode(this._addRemoveDisplayChainQueue.front);return a};
CanvasManager.prototype._processAddRemoveDisplayChainQueue=function(){if(1!=this._addRemoveDisplayChainQueueProcessing){this._addRemoveDisplayChainQueueProcessing=!0;for(var a=this._popAddRemoveDisplayChainQueue();null!=a;)a.element._dispatchEvent(new AddedRemovedEvent(a.type,this)),a=this._popAddRemoveDisplayChainQueue();this._addRemoveDisplayChainQueueProcessing=!1}};
CanvasManager.prototype._clearDraggingElement=function(){null!=this._draggingElement&&(this._draggingOffsetY=this._draggingOffsetX=this._draggingElement=null)};CanvasManager.prototype._setDraggingElement=function(a,b,c){null==this._draggingElement&&(this._draggingElement=a,this._draggingOffsetX=b,this._draggingOffsetY=c)};CanvasManager.prototype._doLayout=function(a){CanvasManager.base.prototype._doLayout.call(this,a);this._cursorContainer._setActualSize(this._width,this._height)};
function CmDepthQueue(){this.depthArrayOfLists=[];this.length=0;this.maxDepth=this.minDepth=-1}CmDepthQueue.prototype.addNode=function(a,b){var c=b-1;null==this.depthArrayOfLists[c]&&(this.depthArrayOfLists[c]=new CmLinkedList);this.depthArrayOfLists[c].pushBack(a);this.length+=1;if(c<this.minDepth||-1==this.minDepth)this.minDepth=c;c>this.maxDepth&&(this.maxDepth=c)};
CmDepthQueue.prototype.removeNode=function(a,b){this.depthArrayOfLists[b-1].removeNode(a);--this.length;0==this.length&&(this.maxDepth=this.minDepth=-1)};
CmDepthQueue.prototype.removeSmallest=function(){if(0==this.length)return null;for(var a=this.minDepth;a<this.depthArrayOfLists.length;a++)if(this.minDepth=a,null!=this.depthArrayOfLists[a]&&0!=this.depthArrayOfLists[a].length){var b=this.depthArrayOfLists[a].front;this.depthArrayOfLists[a].removeNode(b);--this.length;0==this.length&&(this.maxDepth=this.minDepth=-1);return b}};
CmDepthQueue.prototype.removeLargest=function(){if(0==this.length)return null;for(var a=this.maxDepth;0<=a;a--)if(this.maxDepth=a,null!=this.depthArrayOfLists[a]&&0!=this.depthArrayOfLists[a].length){var b=this.depthArrayOfLists[a].back;this.depthArrayOfLists[a].removeNode(b);--this.length;0==this.length&&(this.maxDepth=this.minDepth=-1);return b}};function CmLinkedList(){this.back=this.front=null;this.length=0}
CmLinkedList.prototype.pushFront=function(a){this.length++;null==this.front?(a.prev=null,a.next=null,this.back=this.front=a):(a.prev=null,a.next=this.front,this.front=this.front.prev=a)};CmLinkedList.prototype.pushBack=function(a){this.length++;null==this.back?(a.prev=null,a.next=null,this.front=a):(a.prev=this.back,a.next=null,this.back.next=a);this.back=a};
CmLinkedList.prototype.insertBefore=function(a,b){this.length++;this.front==b&&(this.front=a);null!=b.prev&&(b.prev.next=a);a.prev=b.prev;a.next=b;b.prev=a};CmLinkedList.prototype.insertAfter=function(a,b){this.length++;this.back==b&&(this.back=a);null!=b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a};
CmLinkedList.prototype.removeNode=function(a){if(null==a)return null;this.length--;this.front==a&&(this.front=a.next);this.back==a&&(this.back=a.prev);null!=a.prev&&(a.prev.next=a.next);null!=a.next&&(a.next.prev=a.prev);a.next=null;a.prev=null};function CmLinkedNode(){this.data=this.next=this.prev=null};
